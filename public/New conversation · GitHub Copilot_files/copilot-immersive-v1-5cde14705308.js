"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["copilot-immersive-v1","ui_packages_code-mirror_CodeMirror_tsx","ui_packages_code-mirror_autocomplete_theme_ts-ui_packages_code-mirror_extensions_help-panels_-d428aa"],{35984:(e,t,a)=>{a.d(t,{E:()=>n});let n=a(24774).Lz.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{border:0,backgroundColor:"transparent"},".cm-tooltip.cm-tooltip-autocomplete > ul":{fontFamily:"SFMono-Regular, Consolas, 'Liberation Mono', Menlo, monospace",fontSize:"12px",backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"var(--borderRadius-medium)",boxShadow:"var(--shadow-resting-medium, var(--color-shadow-medium))",minWidth:"auto"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]':{padding:"2px 8px",margin:0,color:"var(--fgColor-default, var(--color-fg-default))",whiteSpace:"pre"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:first-child':{borderTopLeftRadius:"var(--borderRadius-medium)",borderTopRightRadius:"var(--borderRadius-medium)"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:last-child':{borderBottomLeftRadius:"var(--borderRadius-medium)",borderBottomRightRadius:"var(--borderRadius-medium)"},".cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected], .cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected] .cm-completionDetail":{color:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",background:"var(--bgColor-accent-emphasis, var(--color-accent-emphasis))"},".cm-completionDetail":{paddingLeft:"8px",color:"var(--fgColor-muted, var(--color-fg-muted))",fontSize:"var(--fontSize-small)",fontStyle:"normal"}})},44246:(e,t,a)=>{a.d(t,{G:()=>r});var n=a(24774);function r(e=null,t="bottom"){return[n.S7.of(()=>({dom:e,top:"top"===t}))]}},13281:(e,t,a)=>{a.d(t,{BE:()=>o,Cw:()=>C,I6:()=>b,Lo:()=>d,Md:()=>f,TB:()=>j,TC:()=>_,TU:()=>m,YH:()=>g,Z3:()=>p,eO:()=>x,e_:()=>v,f9:()=>l,fV:()=>h,tJ:()=>y,td:()=>u,w0:()=>c,ye:()=>S});var n=a(15874),r=a(54528),i=a(6585),s=a(24774);let o=e=>e.state.selection.main,l=(e,t)=>{e.dispatch({selection:{anchor:t}})},c=e=>e.state.selection.ranges.some(e=>!e.empty),d=e=>e.sliceDoc(e.selection.main.from,e.selection.main.to),u=(e,t,a)=>{e.dispatch({selection:{anchor:t,head:a}})};function m(e,t){return e.state.doc.line(t.line+1).from+t.ch}function p(e,t){let a=e.state.doc.lineAt(t);return{line:a.number-1,ch:t-a.from}}let h=(e,t)=>e.state.doc.line(t),f=(e,t,a)=>{let n=h(e,t);v(e,n.from,n.from,a)},g=(e,t,a)=>{let n=h(e,t);v(e,n.from,n.from+a.length,"")},y=(e,t)=>{e.dispatch(e.state.replaceSelection(t))},x=(e,t,a)=>e.sliceDoc(t,a),v=(e,t,a,n)=>{e.dispatch({changes:{from:t,to:a,insert:n}})},_=(e,t)=>{let a=o(e);v(e,a.from,a.to,t)},b=(e,t)=>new r.ZX(e.state.doc,t).next(),j=(e,t,a)=>{let n=new r.ZX(e.state.doc,t).next();e.dispatch({changes:{from:n.value.from,to:n.value.to,insert:a}})},S=(e,t,a,n,r)=>{if(void 0!==a)try{let o=h(e,t),l=h(e,a);if(o&&l){e.focus();let t=r?l.from+r:l.to;u(e,o.from+(n??0),t),e.dispatch({effects:[s.Lz.scrollIntoView(i.OF.range(o.from,l.to),{y:"center"})]})}}catch{}else try{let a=h(e,t);a&&(e.focus(),l(e,a.from+(n??0)),e.dispatch({effects:[s.Lz.scrollIntoView(a.from,{y:"center"})]}))}catch{}};function C(e){return e.state.facet(n.Xt)}},62834:(e,t,a)=>{a.d(t,{o:()=>u});var n=a(5225),r=a(88795),i=a(96235),s=a(60039),o=a(96540);async function l(e){let t=await (0,s.lS)(e);return t.ok?await t.json():void 0}let c=new Map,d=(0,n.A)(l,{cache:c});function u(e,t,a){let n=(0,r.t)(),[s,l]=(0,o.useState)({list:[],directories:[],loading:!0}),c=(0,i.ClY)({repo:n,commitOid:e,includeDirectories:!a});return(0,o.useEffect)(()=>{let e=!1,a=async()=>{l({list:[],directories:[],loading:!0});let t=await d(c);if(e)return;let a=t?.paths||[],n=t?.directories||[];l({list:a.concat(n).sort(),directories:n,error:!t})};return t&&a(),function(){e=!0}},[c,t,a]),s}},89276:(e,t,a)=>{function n(e,t,a){if(!t.has(e))throw TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}function r(e,t){var a=n(e,t,"get");return a.get?a.get.call(e):a.value}function i(e,t,a){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,a)}function s(e,t,a){var r=n(e,t,"set");if(r.set)r.set.call(e,a);else{if(!r.writable)throw TypeError("attempted to set read only private field");r.value=a}return a}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,{z:()=>WebWorker});let WebWorker=class WebWorker{set onmessage(e){this.worker.onmessage=e}postMessage(e){this.worker.postMessage(e)}terminate(){this.worker.terminate()}constructor(e,t){o(this,"worker",void 0);try{this.worker=new Worker(`${e}?module=true`,{type:"module"})}catch{console.warn("Web workers are not available. Please enable web workers to benefit from the improved performance."),this.worker=new MainThreadWorker(t)}}};var l=new WeakMap,c=new WeakMap;let MainThreadWorker=class MainThreadWorker{async postMessage(e){if(r(this,l))return;let t={data:r(this,c).call(this,{data:e})};this.onmessage?.(t)}terminate(){s(this,l,!0)}constructor(e){i(this,l,{writable:!0,value:!1}),o(this,"onmessage",void 0),i(this,c,{writable:!0,value:void 0}),s(this,c,e)}}},27406:(e,t,a)=>{a.d(t,{j:()=>s});var n=a(5225),r=a(91385);let i=(0,n.A)(r.fN);function s({data:e}){let{query:t,baseList:a,startTime:n}=e,s=t.replaceAll("\\","");return{query:t,list:a.filter(e=>{var t,a;return t=e,""===(a=s)||(0,r.qA)(a,t)&&i(a,t)>0}).sort((e,t)=>i(s,t)-i(s,e)),baseCount:a.length,startTime:n}}},3246:(e,t,a)=>{a.d(t,{G:()=>c});var n=a(21728),r=a(47397),i=a(22069),s=a(31971),o=a(66871),l=a(26807);function c(){let e,t=(0,n.c)(3),a=(0,r.b)(),c=(0,l.Z)();return t[0]!==a||t[1]!==c?(e=async e=>{window.location.pathname!==i.Jz&&(s.W.improvedNavigation?c(i.Jz):(0,o.kd)(i.Jz),a.dispatch({type:"SELECT_PLUGIN",plugin:null}),await a.selectThread(null,e))},t[0]=a,t[1]=c,t[2]=e):e=t[2],e}},7352:(e,t,a)=>{var n,r,i,s,o,l,c=a(32420),d=a(16058),u=a(48551),m=a(74848),p=a(21728);function h(e){let t,a=(0,p.c)(2);return a[0]!==e.children?(t=(0,m.jsx)(m.Fragment,{children:e.children}),a[0]=e.children,a[1]=t):t=a[1],t}try{h.displayName||(h.displayName="App")}catch{}var f=a(39627),g=a(52450),y=a(34164),x=a(96540);let v={scrollContainer:"ContentView-module__scrollContainer--wpj1Y",contentContainer:"ContentView-module__contentContainer--bYW7x",content:"ContentView-module__content--gJIEz",medium:"ContentView-module__medium--S91Um",small:"ContentView-module__small--MfxBK",banner:"ContentView-module__banner--Fz5_d",serviceHeader:"ContentView-module__serviceHeader--KN8ix",serviceTitle:"ContentView-module__serviceTitle--hjweZ",serviceDescription:"ContentView-module__serviceDescription--__XLT",serviceActions:"ContentView-module__serviceActions--q6aEC",section:"ContentView-module__section--Fa2ri",sectionTitle:"ContentView-module__sectionTitle--KVZXe",sectionGrid:"ContentView-module__sectionGrid--cOEZL",sectionGridEmpty:"ContentView-module__sectionGridEmpty--wCrfV",skeletonCard:"ContentView-module__skeletonCard--edod5"};function _(e){let t,a,n,r,i=(0,p.c)(10),{children:s,width:o}=e;if(i[0]!==s){for(let e of(t=[],a=[],x.Children.toArray(s)))x.isValidElement(e)&&e.type===b?t.push(e):a.push(e);i[0]=s,i[1]=t,i[2]=a}else t=i[1],a=i[2];let l="small"===o,c="medium"===o;return i[3]!==l||i[4]!==c?(n=(0,y.$)(v.content,{[v.small]:l,[v.medium]:c}),i[3]=l,i[4]=c,i[5]=n):n=i[5],i[6]!==t||i[7]!==a||i[8]!==n?(r=(0,m.jsx)("div",{className:v.scrollContainer,children:(0,m.jsx)("div",{className:v.contentContainer,children:(0,m.jsxs)("div",{className:n,children:[t,a]})})}),i[6]=t,i[7]=a,i[8]=n,i[9]=r):r=i[9],r}function b(e){let t,a=(0,p.c)(2),{children:n}=e;return a[0]!==n?(t=(0,m.jsx)("div",{className:v.banner,children:n}),a[0]=n,a[1]=t):t=a[1],t}function j(e){let t,a=(0,p.c)(2),{children:n}=e;return a[0]!==n?(t=(0,m.jsx)("div",{className:v.serviceHeader,children:n}),a[0]=n,a[1]=t):t=a[1],t}function S(e){let t,a=(0,p.c)(2),{children:n}=e;return a[0]!==n?(t=(0,m.jsx)("section",{className:v.section,children:n}),a[0]=n,a[1]=t):t=a[1],t}function C(e){let t,a=(0,p.c)(2),{children:n}=e;return a[0]!==n?(t=(0,m.jsx)("h2",{className:v.serviceTitle,children:n}),a[0]=n,a[1]=t):t=a[1],t}function N(e){let t,a=(0,p.c)(2),{children:n}=e;return a[0]!==n?(t=(0,m.jsx)("p",{className:v.serviceDescription,children:n}),a[0]=n,a[1]=t):t=a[1],t}function w(e){let t,a=(0,p.c)(2),{children:n}=e;return a[0]!==n?(t=(0,m.jsx)("div",{className:v.serviceActions,children:n}),a[0]=n,a[1]=t):t=a[1],t}function I(e){let t,a=(0,p.c)(2),{children:n}=e;return a[0]!==n?(t=(0,m.jsx)("h3",{className:v.sectionTitle,children:n}),a[0]=n,a[1]=t):t=a[1],t}function k(e){let t,a=(0,p.c)(2),{children:n}=e;return a[0]!==n?(t=(0,m.jsx)("div",{className:v.sectionGridEmpty,children:n}),a[0]=n,a[1]=t):t=a[1],t}function E(e){let t,a,n,r=(0,p.c)(8),{children:i,loading:s}=e;if(void 0!==s&&s){let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:v.sectionGrid,"data-testid":"service-view-skeleton",children:[void 0,void 0,void 0].map(L)}),r[0]=e):e=r[0],e}if(r[1]!==i){let e=x.Children.toArray(i);t=e.find(A),a=e.filter(T),r[1]=i,r[2]=t,r[3]=a}else t=r[2],a=r[3];let o=a;if(0===o.length&&t){let e;return r[4]!==t?(e=(0,m.jsx)(m.Fragment,{children:t}),r[4]=t,r[5]=e):e=r[5],e}return r[6]!==o?(n=(0,m.jsx)("div",{className:v.sectionGrid,children:o}),r[6]=o,r[7]=n):n=r[7],n}function T(e){return!(x.isValidElement(e)&&e.type===k)}function A(e){return x.isValidElement(e)&&e.type===k}function L(e,t){return(0,m.jsx)(g.f,{className:v.skeletonCard},t)}E.Empty=k,S.Title=I,S.Grid=E;let D={Title:C,Description:N,Actions:w,Container:_,Banner:b,Header:j,Section:S};D.displayName="ContentView",_.displayName="ContentView.Container",b.displayName="ContentView.Banner",j.displayName="ContentView.Header",S.displayName="ContentView.Section",C.displayName="ContentView.Title",N.displayName="ContentView.Description",w.displayName="ContentView.Actions",I.displayName="ContentView.Section.Title",E.displayName="ContentView.Section.Grid",k.displayName="ContentView.Section.Grid.Empty";var R=a(82164),P=a(38621);let O={header:"AgentsView-module__header--EkfyX",button:"AgentsView-module__button--d749M",counter:"AgentsView-module__counter--D8Z1d",filterButtons:"AgentsView-module__filterButtons--sCvuN"};var B=a(58207),F=a(90514),M=a(74433),V=a(64262),U=a(1948),$=a(34901),W=a(87517),z=a(36613),H=a(47397),q=a(54187),G=a(38911);function K(e){let t,a,n,r=(0,p.c)(6),{problemStatement:i,handleRetry:s}=e,[o,l]=(0,x.useState)(!0),c=function(e,t=50,a=2){let n=t*a;return e.length<=n?e:`${e.substring(0,n).trim()}...`}(i??"",20,1);if(!o)return null;let d=`Failed to create a task for '${c}'. Please try again.`;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(G.l.SecondaryAction,{onClick:()=>l(!1),children:"Dismiss"}),r[0]=t):t=r[0],r[1]!==s?(a=(0,m.jsx)(G.l.PrimaryAction,{onClick:s,children:"Retry"}),r[1]=s,r[2]=a):a=r[2],r[3]!==d||r[4]!==a?(n=(0,m.jsx)(G.l,{variant:"critical",title:"Task Creation Failed",hideTitle:!0,description:d,secondaryAction:t,primaryAction:a}),r[3]=d,r[4]=a,r[5]=n):n=r[5],n}try{K.displayName||(K.displayName="TaskCreationFailedBanner")}catch{}var Q=a(27851),J=a(46309);function Y(e){let t,a,n=(0,p.c)(7),{pendingTasks:r,tasks:i,isLoading:s,isError:o}=e;return n[0]!==o||n[1]!==r||n[2]!==i?(t=o?(0,m.jsxs)(R.qJ.EmptyState,{children:[(0,m.jsx)(P.AlertIcon,{size:24}),(0,m.jsx)("p",{children:"Sorry, something went wrong"})]}):0===r.length&&0===i.length?(0,m.jsx)(R.qJ.EmptyState,{children:(0,m.jsx)("p",{children:"No open tasks yet. Start a new task to see it here."})}):(0,m.jsxs)(m.Fragment,{children:[[...r].reverse().map(Z),i.map(X)]}),n[0]=o,n[1]=r,n[2]=i,n[3]=t):t=n[3],n[4]!==s||n[5]!==t?(a=(0,m.jsx)(R.qJ.List,{loading:s,id:"tasks-list","aria-labelledby":"open-tab",children:t}),n[4]=s,n[5]=t,n[6]=a):a=n[6],a}function X(e){return(0,m.jsx)(F.ZL,{state:e.latest_session_state,merged:null!==e.pull.merged_at,lastSessionStartDate:e.latest_session_updated_at,pullRequest:e.pull,revisionCount:e.session_count-1},e.pull.id)}function Z(e){return(0,m.jsx)(F.Eo,{title:`Creating: ${e.problemStatement}`,repositoryNwo:e.nwo},e.submittedAt)}function ee(e){let t,a,n=(0,p.c)(6),{tasks:r,isLoading:i,isError:s}=e;return n[0]!==s||n[1]!==r?(t=s?(0,m.jsxs)(R.qJ.EmptyState,{children:[(0,m.jsx)(P.AlertIcon,{size:24}),(0,m.jsx)("p",{children:"Sorry, something went wrong"})]}):0===r.length?(0,m.jsx)(R.qJ.EmptyState,{children:(0,m.jsx)("p",{children:"No closed tasks yet."})}):r.map(et),n[0]=s,n[1]=r,n[2]=t):t=n[2],n[3]!==i||n[4]!==t?(a=(0,m.jsx)(R.qJ.List,{loading:i,id:"tasks-list","aria-labelledby":"closed-tab",children:t}),n[3]=i,n[4]=t,n[5]=a):a=n[5],a}function et(e){return(0,m.jsx)(F.ZL,{state:e.latest_session_state,merged:null!==e.pull.merged_at,lastSessionStartDate:e.latest_session_updated_at,pullRequest:e.pull,revisionCount:e.session_count-1},e.pull.id)}function ea(e){let t,a,n,r,i,s,o,l,c,d,u,h,f=(0,p.c)(35),{tasks:g,pendingTasks:y,isLoading:x,isError:v,activeTab:_,setActiveTab:b}=e,j=g.filter(es).length+y.length;f[0]!==g?(t=g.filter(ei),f[0]=g,f[1]=t):t=f[1];let S=t.length;f[2]!==g?(a=g.filter(er),f[2]=g,f[3]=a):a=f[3];let C=a;f[4]!==g?(n=g.filter(en),f[4]=g,f[5]=n):n=f[5];let N=n;f[6]!==b?(r=()=>b("open"),f[6]=b,f[7]=r):r=f[7];let w="open"===_;f[8]!==j?(i=(0,m.jsx)("span",{className:O.counter,children:j}),f[8]=j,f[9]=i):i=f[9],f[10]!==r||f[11]!==w||f[12]!==i?(s=(0,m.jsxs)("button",{onClick:r,role:"tab","aria-selected":w,"aria-controls":"tasks-list",id:"open-tab",className:O.button,children:["Open ",i]}),f[10]=r,f[11]=w,f[12]=i,f[13]=s):s=f[13],f[14]!==b?(o=()=>b("closed"),f[14]=b,f[15]=o):o=f[15];let I="closed"===_;return f[16]!==S?(l=(0,m.jsx)("span",{className:O.counter,children:S}),f[16]=S,f[17]=l):l=f[17],f[18]!==l||f[19]!==o||f[20]!==I?(c=(0,m.jsxs)("button",{onClick:o,role:"tab","aria-selected":I,"aria-controls":"tasks-list",id:"closed-tab",className:O.button,children:["Closed ",l]}),f[18]=l,f[19]=o,f[20]=I,f[21]=c):c=f[21],f[22]!==c||f[23]!==s?(d=(0,m.jsx)(R.qJ.Header,{children:(0,m.jsxs)("div",{role:"tablist","aria-label":"Filter pull requests",className:O.filterButtons,children:[s,c]})}),f[22]=c,f[23]=s,f[24]=d):d=f[24],f[25]!==_||f[26]!==N||f[27]!==v||f[28]!==x||f[29]!==C||f[30]!==y?(u="open"===_?(0,m.jsx)(Y,{tasks:C,pendingTasks:y,isLoading:x,isError:v}):(0,m.jsx)(ee,{tasks:N,isLoading:x,isError:v}),f[25]=_,f[26]=N,f[27]=v,f[28]=x,f[29]=C,f[30]=y,f[31]=u):u=f[31],f[32]!==d||f[33]!==u?(h=(0,m.jsxs)(R.qJ,{children:[d,u]}),f[32]=d,f[33]=u,f[34]=h):h=f[34],h}function en(e){return"merged"===e.pull.state||"closed"===e.pull.state}function er(e){return"merged"!==e.pull.state&&"closed"!==e.pull.state}function ei(e){return"merged"===e.pull.state||"closed"===e.pull.state}function es(e){return"merged"!==e.pull.state&&"closed"!==e.pull.state}function eo(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(U.Fn,{children:(0,m.jsx)(el,{})}),t[0]=e):e=t[0],e}function el(){let e,t,a,n,r,i,s,o,l,c,d,u,h,f,g,y,v,_,b,j,S,C=(0,p.c)(48),[N,w]=(0,x.useState)("open"),{sessionsPollingInterval:I,showCopilotCodingAgentPremiumRequestsBanner:k,tasks:E,pullRequestsMap:T}=(0,V.X)();C[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],C[0]=e):e=C[0];let[A,L]=(0,x.useState)(e);C[1]===Symbol.for("react.memo_cache_sentinel")?(t={onError:(e,t)=>{L(a=>[...a,{...t,error:e,baseRef:t.baseRef,timestamp:new Date().toISOString()}])}},C[1]=t):t=C[1],C[2]!==T||C[3]!==E||C[4]!==I?(a={sessionsPollingInterval:I,onCreateError:t,initialTasks:E,initialPullRequestsMap:T},C[2]=T,C[3]=E,C[4]=I,C[5]=a):a=C[5];let{tasks:R,pendingTasks:P,isLoading:F,isError:U,createSession:G}=(0,B.s)(a),Y=(0,H.b)();C[6]===Symbol.for("react.memo_cache_sentinel")?(n=[],C[6]=n):n=C[6],(0,x.useEffect)(eu,n),C[7]!==Y?(r=()=>{Y.selectThread(null,{includeThreads:!1,clearTopic:!0})},i=[Y],C[7]=Y,C[8]=r,C[9]=i):(r=C[8],i=C[9]),(0,x.useEffect)(r,i),C[10]!==G||C[11]!==Y?(s=async(e,t,a)=>{let n=e.trim();""!==n&&a&&""!==a.trim()&&(t?(w("open"),G({nwo:t.nameWithOwner,problemStatement:n,baseRef:a})):Y.sendChatMessage({content:n,thread:null,references:[]}))},C[10]=G,C[11]=Y,C[12]=s):s=C[12];let X=s;C[13]!==G||C[14]!==A?(o=e=>{let t=A[e];t&&(L(t=>t.filter((t,a)=>a!==e)),G({nwo:t.nwo,problemStatement:t.problemStatement,baseRef:t.baseRef}))},C[13]=G,C[14]=A,C[15]=o):o=C[15];let Z=o,ee=(0,$.Pk)();C[16]!==ee.ssoOrganizations?(l=ee.ssoOrganizations.map(ed),C[16]=ee.ssoOrganizations,C[17]=l):l=C[17];let et=l;C[18]!==et?(c=()=>{let e=sessionStorage.getItem("PROTECTED_ORGS");JSON.stringify(et)!==e&&(new q.l().removeLocalStorageAuthToken(),sessionStorage.setItem("PROTECTED_ORGS",JSON.stringify(et)))},d=[et],C[18]=et,C[19]=c,C[20]=d):(c=C[19],d=C[20]),(0,x.useEffect)(c,d),C[21]===Symbol.for("react.memo_cache_sentinel")?(u=(0,Q.G7)("copilot_coding_agent_task_creation_banner"),C[21]=u):u=C[21];let en=u,[er,ei]=(0,x.useState)(!1);return C[22]===Symbol.for("react.memo_cache_sentinel")?(h=(0,m.jsx)("div",{className:O.header}),C[22]=h):h=C[22],C[23]!==er||C[24]!==k?(f=k&&!er&&(0,m.jsx)(D.Banner,{children:(0,m.jsx)(M.C,{onBannerDismiss:()=>ei(!0)})}),C[23]=er,C[24]=k,C[25]=f):f=C[25],C[26]===Symbol.for("react.memo_cache_sentinel")?(g=(0,m.jsxs)(D.Header,{children:[(0,m.jsx)(D.Title,{children:"Agents"}),(0,m.jsx)(D.Description,{children:"Delegate tasks to GitHub Copilot coding agent to work on in the background, and then monitor Copilot's progress."})]}),C[26]=g):g=C[26],C[27]!==et?(y=et.length>0&&(0,m.jsx)(D.Section,{children:(0,m.jsx)(W.x,{protectedOrgs:et,redirectURI:ec})}),C[27]=et,C[28]=y):y=C[28],C[29]!==X?(v=(0,m.jsx)(z.Q,{handleUserSubmit:X}),C[29]=X,C[30]=v):v=C[30],C[31]!==A||C[32]!==Z?(_=A.length>0&&en&&(0,m.jsx)(J.B,{direction:"vertical",padding:"spacious",children:A.map((e,t)=>(0,m.jsx)(K,{problemStatement:e?.problemStatement,handleRetry:()=>Z(t)},`${e?.nwo}-${e?.problemStatement}-${e?.timestamp}`))}),C[31]=A,C[32]=Z,C[33]=_):_=C[33],C[34]!==v||C[35]!==_?(b=(0,m.jsxs)(D.Section,{children:[v,_]}),C[34]=v,C[35]=_,C[36]=b):b=C[36],C[37]!==N||C[38]!==U||C[39]!==F||C[40]!==P||C[41]!==R?(j=(0,m.jsx)(D.Section,{children:(0,m.jsx)(ea,{tasks:R,pendingTasks:P,isLoading:F,isError:U,activeTab:N,setActiveTab:w})}),C[37]=N,C[38]=U,C[39]=F,C[40]=P,C[41]=R,C[42]=j):j=C[42],C[43]!==f||C[44]!==y||C[45]!==b||C[46]!==j?(S=(0,m.jsxs)(m.Fragment,{children:[h,(0,m.jsxs)(D.Container,{width:"small",children:[f,g,y,b,j]})]}),C[43]=f,C[44]=y,C[45]=b,C[46]=j,C[47]=S):S=C[47],S}function ec(){return location.href}function ed(e){return e.login}function eu(){(0,f.D)("Agents \xb7 GitHub Copilot")}try{Y.displayName||(Y.displayName="OpenTaskList")}catch{}try{ee.displayName||(ee.displayName="ClosedTaskList")}catch{}try{ea.displayName||(ea.displayName="TaskList")}catch{}try{eo.displayName||(eo.displayName="AgentsViewWrapper")}catch{}try{el.displayName||(el.displayName="AgentsView")}catch{}var em=a(28391);let ep={subList:"Navigation-module__subList--Ued7A",section:"Navigation-module__section--KRddB",expandButton:"Navigation-module__expandButton--v40lv",item:"Navigation-module__item--KtIqz",link:"Navigation-module__link--ybSvz",contextButton:"Navigation-module__contextButton--AhNds",icon:"Navigation-module__icon--szbQF",textWrapper:"Navigation-module__textWrapper--qEAz8",text:"Navigation-module__text--KFINZ"};function eh(e){let t,a,n,r,i,s,o,l,c,d,u,h=(0,p.c)(37),{"aria-current":f,children:g,contextMenuComponent:y,expandOnClick:v,hasItems:_,href:b,icon:j,iconOverride:S,onLinkClick:C,id:N,displayName:w,label:I}=e,k=void 0===v||v,[E,T]=(0,x.useState)(!1);h[0]!==E?(t=()=>{T(!E)},h[0]=E,h[1]=t):t=h[1];let A=t;h[2]!==k||h[3]!==N||h[4]!==C?(a=e=>{C?.(e,N),k&&T(!0)},h[2]=k,h[3]=N,h[4]=C,h[5]=a):a=h[5];let L=a;h[6]!==f||h[7]!==L?(n={"aria-current":f,className:ep.link,onClick:L},h[6]=f,h[7]=L,h[8]=n):n=h[8];let D=n;return h[9]!==E||h[10]!==_||h[11]!==A?(r=_&&(0,m.jsx)("button",{"aria-label":"Expand","aria-expanded":E,className:ep.expandButton,onClick:A,children:E?(0,m.jsx)(P.ChevronDownIcon,{size:12}):(0,m.jsx)(P.ChevronRightIcon,{size:12})}),h[9]=E,h[10]=_,h[11]=A,h[12]=r):r=h[12],h[13]!==j||h[14]!==S?(i=j?(0,m.jsx)(j,{size:16}):S,h[13]=j,h[14]=S,h[15]=i):i=h[15],h[16]!==i?(s=(0,m.jsx)("div",{className:ep.icon,children:i}),h[16]=i,h[17]=s):s=h[17],h[18]!==w?(o=(0,m.jsx)("div",{className:ep.textWrapper,children:(0,m.jsx)("div",{className:ep.text,children:w})}),h[18]=w,h[19]=o):o=h[19],h[20]!==D||h[21]!==b||h[22]!==I||h[23]!==s||h[24]!==o?(l=(0,m.jsxs)(em.N,{to:b,...D,children:[s,o,I]}),h[20]=D,h[21]=b,h[22]=I,h[23]=s,h[24]=o,h[25]=l):l=h[25],h[26]!==y||h[27]!==r||h[28]!==l?(c=(0,m.jsxs)("div",{className:ep.item,children:[r,l,y]}),h[26]=y,h[27]=r,h[28]=l,h[29]=c):c=h[29],h[30]!==g||h[31]!==E||h[32]!==_?(d=E&&_&&(0,m.jsx)("ul",{className:ep.subList,children:g}),h[30]=g,h[31]=E,h[32]=_,h[33]=d):d=h[33],h[34]!==c||h[35]!==d?(u=(0,m.jsxs)("li",{className:ep.section,children:[c,d]}),h[34]=c,h[35]=d,h[36]=u):u=h[36],u}try{eh.displayName||(eh.displayName="Navigation")}catch{}try{(n=function(e){let t,a,n,r,i=(0,p.c)(14),{"aria-current":s,contextMenuComponent:o,displayName:l,href:c,icon:d,iconOverride:u,onLinkClick:h}=e;return i[0]!==d||i[1]!==u?(t=d?(0,m.jsx)(d,{size:16,className:ep.icon}):u,i[0]=d,i[1]=u,i[2]=t):t=i[2],i[3]!==l?(a=(0,m.jsx)("div",{className:ep.textWrapper,children:(0,m.jsx)("div",{className:ep.text,children:l})}),i[3]=l,i[4]=a):a=i[4],i[5]!==s||i[6]!==c||i[7]!==h||i[8]!==t||i[9]!==a?(n=(0,m.jsxs)(em.N,{className:ep.link,to:c,"aria-current":s,onClick:h,children:[t,a]}),i[5]=s,i[6]=c,i[7]=h,i[8]=t,i[9]=a,i[10]=n):n=i[10],i[11]!==o||i[12]!==n?(r=(0,m.jsxs)("li",{className:ep.item,children:[n,o]}),i[11]=o,i[12]=n,i[13]=r):r=i[13],r}).displayName||(n.displayName="NavigationSubItem")}catch{}try{(r=function(e){let t,a,n=(0,p.c)(3);return n[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(P.KebabHorizontalIcon,{size:16}),n[0]=t):t=n[0],n[1]!==e?(a=(0,m.jsx)("button",{...e,className:ep.contextButton,children:t}),n[1]=e,n[2]=a):a=n[2],a}).displayName||(r.displayName="NavigationContextMenuButton")}catch{}var ef=a(85788),eg=a(96679);let ey="agents",ex="/copilot/agents";function ev(e,t,a,n,r,i,s,o,l,c,d=0,u=!1){let m=new Date("2025-06-04T20:00:00.000Z"),p=new Date(m.getTime()-24*c*36e5),h=new Date(m.getTime()-24*d*36e5);return{id:e,number:t,state:a,title:n,reviewable_state:r,url:`http://github.localhost:80/monalisa/smile/pull/${t}`,labels:i,comments:s,assignees_avatar_urls:Array.from({length:o},(t,a)=>`https://avatars.githubusercontent.com/u/${e+a}?v=4`),created_at:p.toISOString(),updated_at:h.toISOString(),merged_at:"merged"===a?h.toISOString():void 0,closed_at:"closed"===a||"merged"===a?h.toISOString():void 0,author:l,head_sha:`${n.toLowerCase().replace(/\s+/g,"")}123456789abcdef0123456789abcdef01234567`.substring(0,40),repository_nwo:"monalisa/smile",inMergeQueue:u}}function e_(e,t,a,n,r,i,s,o=0,l=0,c){let d=new Date("2025-06-04T20:00:00.000Z"),u=new Date(d.getTime()-60*s*6e4),m=new Date(d.getTime()-60*o*6e4);return{id:e,name:t,user_id:a,agent_id:n,state:r,owner_id:9919,repo_id:4,resource_type:"pull",resource_id:i,created_at:u.toISOString(),last_updated_at:m.toISOString(),completed_at:"completed"===r||"failed"===r?m.toISOString():void 0,workflow_run_id:12340+Math.floor(30*Math.random()),log_entries:[],error:c?{message:c}:null,premium_requests:l}}function eb(e,t){return{resource_type:"pull",resource_id:e.id,session_count:1,latest_session_updated_at:t.last_updated_at,latest_session_state:t.state,pull:e}}(()=>{let e=["cancelled","idle","in_progress","waiting_for_user","completed","failed","timed_out"],t={titles:["Refactor database queries for performance","Implement dark mode theme","Optimize API response times","Add mobile responsive design","Implement caching layer","Add internationalization support","Update documentation and README","Fix critical security vulnerability","Add user authentication system","Initial project setup and configuration","Implement real-time notifications","Add search functionality","Optimize bundle size","Add unit tests coverage","Implement error handling","Add accessibility features","Optimize database connections","Implement feature flags","Migrate to TypeScript","Implement CI/CD pipeline","Add monitoring and alerts"],authors:["alice-dev","bob-backend","charlie-frontend","diana-fullstack","eve-designer","frank-security"],labels:[["performance","database"],["ui","theme","enhancement"],["performance","api"],["mobile","responsive","ui"],["performance","caching","backend"],["i18n","feature","localization"]],errorMessages:["timeout","validation error","resource conflict","permission denied"]},a=1;return[...["open","closed","merged"].flatMap(n=>e.map(e=>{let r=(a-1)%t.titles.length,i=t.titles[r],s=t.authors[(a-1)%t.authors.length],o=t.labels[r%t.labels.length],l=eb(ev(a,a,n,i,Math.random()>.7?"draft":"ready",o,Math.floor(15*Math.random())+1,Math.floor(3*Math.random()),s,a,a),e_(`session-${a.toString().padStart(3,"0")}`,`${i.split(" ").slice(0,3).join(" ")} - ${e}`,0x996718+a,1143300+a,e,a,a,a,Math.floor(10*Math.random()),"failed"===e?`Operation failed due to ${t.errorMessages[Math.floor(4*Math.random())]}`:void 0));return a++,l})),eb(ev(a,a,"open","Add feature flags support (in merge queue)","ready",["feature","flags"],5,1,"alice-dev",21,0,!0),e_(`session-${a.toString().padStart(3,"0")}`,"Add feature flags support - in_progress",0x996718+a,1143300+a,"in_progress",a,1,0,2,void 0))]})();var ej=a(47139),eS=a(18337);function eC(e){let t,a,n,r=(0,p.c)(6),{onLinkClick:i}=e,s=(0,ef.zy)(),o=eg.fV?.pathname||s?.pathname||"";r[0]!==i?(t=(e,t)=>{i?.(e,t)},r[0]=i,r[1]=t):t=r[1];let l=t,c=o===ex?"page":void 0;return r[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)(ej.A,{variant:"success",children:"Preview"}),r[2]=a):a=r[2],r[3]!==l||r[4]!==c?(n=(0,m.jsx)(eh,{"aria-current":c,displayName:"Agents",href:ex,icon:eS.p,id:ey,onLinkClick:l,label:a}),r[3]=l,r[4]=c,r[5]=n):n=r[5],n}try{eC.displayName||(eC.displayName="AgentsViewNavigation")}catch{}function eN(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let ew=/\/copilot\/agents/;let AgentsPlugin=class AgentsPlugin{matchPage(e){return!!e&&ew.test(e)}matchView(e){return!!e&&ew.test(e)}constructor(){eN(this,"id",ey),eN(this,"displayName","Agents"),eN(this,"routes",[ew]),eN(this,"ViewComponent",eo),eN(this,"NavigationComponent",eC),eN(this,"navigationItems",[{id:ey,displayName:"Agents",href:ex,icon:eS.p,label:(0,x.createElement)(ej.A,{variant:"success"},"Preview")}])}};var eI=a(53207),ek=a(22069),eE=a(31971);let eT=(0,x.lazy)(async()=>({default:(await Promise.all([a.e("vendors-node_modules_d3-interpolate_src_value_js-node_modules_d3-selection_src_select_js"),a.e("vendors-node_modules_d3-transition_src_index_js"),a.e("vendors-node_modules_d3-zoom_src_index_js"),a.e("vendors-node_modules_d3-dag_bundle_d3-dag_esm_min_js-node_modules_lz-string_libs_lz-string_js-6649eb"),a.e("ui_packages_copilot-loops_components_Loop_tsx")]).then(a.bind(a,97891))).Loop}));try{eT.displayName||(eT.displayName="LazyLoop")}catch{}var eA=a(97586),eL=a(99038);function eD(e){let t,a,n=(0,p.c)(5),{onLinkClick:r}=e,i=(0,ef.zy)(),s=eg.fV?.pathname||i?.pathname||"";n[0]!==r?(t=(e,t)=>{r?.(e,t)},n[0]=r,n[1]=t):t=n[1];let o=t,l=s===eA.QK?"page":void 0;return n[2]!==o||n[3]!==l?(a=(0,m.jsx)(eh,{"aria-current":l,displayName:"Loops",href:eA.QK,icon:eL.LP,id:eA.S$,onLinkClick:o}),n[2]=o,n[3]=l,n[4]=a):a=n[4],a}try{eD.displayName||(eD.displayName="PipesNavigation")}catch{}var eR=a(35714),eP=a(47970),eO=a(5204),eB=a(83880),eF=a(29637);function eM(){let{message:e}=(0,eB.V)(),t=(0,eF.O)(e);return t?.pipeline??null}let eV={container:"LoopBlock-module__container--CK9SB",streaming:"LoopBlock-module__streaming--TPBwx",header:"LoopBlock-module__header--uYMyT",headerCollapsed:"LoopBlock-module__headerCollapsed--NY9yJ",expandButton:"LoopBlock-module__expandButton--Kkc8L",content:"LoopBlock-module__content--tBcqk",node:"LoopBlock-module__node--B18Tf",iconContainer:"LoopBlock-module__iconContainer--VPfOh",checkIcon:"LoopBlock-module__checkIcon--eqIgJ",nodeTitle:"LoopBlock-module__nodeTitle--sHCHD"};var eU=a(55847);function e$(e){let t,a,n,r,i,s,o,l,c,d=(0,p.c)(26),{loop:u,headerButton:h,isStreaming:f}=e,[g,v]=(0,x.useState)(!0);if(!u)return null;d[0]!==g?(t=()=>v(!g),d[0]=g,d[1]=t):t=d[1];let _=t,b=f&&eV.streaming;d[2]!==b?(a=(0,y.$)(eV.container,b),d[2]=b,d[3]=a):a=d[3];let j=!g&&eV.headerCollapsed;return d[4]!==j?(n=(0,y.$)(eV.header,j),d[4]=j,d[5]=n):n=d[5],d[6]!==g?(r=g?(0,m.jsx)(P.ChevronDownIcon,{size:16}):(0,m.jsx)(P.ChevronRightIcon,{size:16}),d[6]=g,d[7]=r):r=d[7],d[8]!==u.title?(i=(0,m.jsx)("span",{children:u.title}),d[8]=u.title,d[9]=i):i=d[9],d[10]!==r||d[11]!==i||d[12]!==_?(s=(0,m.jsx)(eU.Q,{variant:"invisible",onClick:_,className:eV.expandButton,leadingVisual:r,children:i}),d[10]=r,d[11]=i,d[12]=_,d[13]=s):s=d[13],d[14]!==h||d[15]!==n||d[16]!==s?(o=(0,m.jsxs)("div",{className:n,children:[s,h]}),d[14]=h,d[15]=n,d[16]=s,d[17]=o):o=d[17],d[18]!==g||d[19]!==f||d[20]!==u.nodes?(l=g&&(0,m.jsx)("div",{className:eV.content,children:u.nodes.map((e,t)=>{let a=f&&t===u.nodes.length-1;return(0,m.jsxs)("div",{className:eV.node,children:[(0,m.jsx)("div",{className:eV.iconContainer,children:(0,m.jsx)(P.CheckCircleFillIcon,{size:16,className:eV.checkIcon})}),a&&!e.title?null:(0,m.jsx)("span",{className:eV.nodeTitle,children:e.title})]},e.id)})}),d[18]=g,d[19]=f,d[20]=u.nodes,d[21]=l):l=d[21],d[22]!==l||d[23]!==a||d[24]!==o?(c=(0,m.jsxs)("div",{className:a,children:[o,l]}),d[22]=l,d[23]=a,d[24]=o,d[25]=c):c=d[25],c}try{e$.displayName||(e$.displayName="LoopBlockContent")}catch{}function eW(e){let t,a=(0,p.c)(3),{isStreaming:n}=e,r=eM();return a[0]!==n||a[1]!==r?(t=(0,m.jsx)(e$,{loop:r,isStreaming:n}),a[0]=n,a[1]=r,a[2]=t):t=a[2],t}try{eW.displayName||(eW.displayName="ReadOnlyLoopBlock")}catch{}var ez=a(74837),eH=a(79048),eq=a(47311);function eG(e){let t,a,n,r=(0,p.c)(12),{isStreaming:i}=e,s=eM(),{updateLoop:o}=(0,ez.k)(),l=(0,eq.H_)();r[0]!==s||r[1]!==l||r[2]!==o?(t=()=>{l&&s&&o((0,eH.cZ)({...s,id:l},[]))},r[0]=s,r[1]=l,r[2]=o,r[3]=t):t=r[3];let c=t;r[4]!==c||r[5]!==i||r[6]!==l?(a=l&&!i?(0,m.jsx)(eU.Q,{variant:"invisible",onClick:c,children:"Restore"}):null,r[4]=c,r[5]=i,r[6]=l,r[7]=a):a=r[7];let d=a;return r[8]!==i||r[9]!==s||r[10]!==d?(n=(0,m.jsx)(e$,{loop:s,headerButton:d,isStreaming:i}),r[8]=i,r[9]=s,r[10]=d,r[11]=n):n=r[11],n}try{eG.displayName||(eG.displayName="InteractiveLoopBlock")}catch{}function eK(e){let t,a=(0,p.c)(4),{isStreaming:n}=e;if((0,eO.Ak)()){let e;return a[0]!==n?(e=(0,m.jsx)(eG,{isStreaming:n}),a[0]=n,a[1]=e):e=a[1],e}return a[2]!==n?(t=(0,m.jsx)(eW,{isStreaming:n}),a[2]=n,a[3]=t):t=a[3],t}try{eK.displayName||(eK.displayName="LoopBlock")}catch{}let eQ="data-loop-block",eJ=(0,eR.F)(eQ),eY={div:(e,t)=>{let a=(0,eR.k)(e,eQ);return a?(0,m.jsx)(eK,{...a}):t}};function eX(){return{transformMarkdown:e=>(0,eP.YR)(e,"code",e=>{"loop"===e.lang&&(e.data={hName:"div",hProperties:{[eJ]:JSON.stringify({isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,eP.YR)(e,"element",(e,t,a)=>{let n=e.children?.[0];a&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&n?.type==="element"&&eJ in n.properties&&a.children.splice(t,1,n)}),reactComponents:eY}}var eZ=a(38043),e0=a(11354),e1=a(66346),e2=a(85351),e3=a(7144),e4=a(19606);function e5(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function e6(e){return!!e&&"object"==typeof e&&"loopID"in e&&"string"==typeof e.loopID}let IndexedDBLoopsStorage=class IndexedDBLoopsStorage{async getLoop(e,t){let a=await this.getPipelineRecord(e);if(!a)return(0,e3.YD)("loop record not found");let n=t===e4.q?a.pipeline:a.draftPipeline;return n?(0,e3.$j)(n):(0,e3.YD)("loop not found")}async getAllLoops(e){let t=await this.getAllPipelineRecords();if(!t)return{success:!0,data:[]};let a=t.map(t=>e===e4.q?t.pipeline:t.draftPipeline).filter(e=>null!==e);return(0,e3.$j)(a)}async createLoop(e){try{let t,a;"string"==typeof e?(t={id:e,version:"",title:"",updatedAt:Date.now(),nodes:[]},a=e):a=(t=e).id;let n={loopID:a,pipeline:null,draftPipeline:{...t}},r=await this.createPipelineRecord(n);if(!r?.draftPipeline)return(0,e3.YD)("Failed to create loop");return(0,e3.$j)(r.draftPipeline)}catch(e){return(0,e3.YD)(e)}}async updateLoop(e,t){try{let a=await this.updatePipelineRecord(e,e=>{let a=t(e.draftPipeline);return{...e,draftPipeline:a}});if(!a?.draftPipeline)return(0,e3.YD)("Error updating loop");return(0,e3.$j)(a.draftPipeline)}catch(e){return(0,e3.YD)(e)}}async deleteLoop(e){try{return await this.deletePipeline(e),{success:!0,data:void 0}}catch(e){return(0,e3.YD)(e)}}async saveLoop(e){try{let t=await this.updatePipelineRecord(e,e=>{if(!e.draftPipeline)throw Error("No draft pipeline to save");return{...e,pipeline:{...e.draftPipeline}}});if(!t?.pipeline)return(0,e3.YD)("Error saving loop");return(0,e3.$j)(t.pipeline)}catch(e){return(0,e3.YD)(e)}}async revertLoop(e){try{let t=await this.updatePipelineRecord(e,e=>{if(!e.pipeline)throw Error("No saved pipeline to revert to");return{...e,draftPipeline:{...e.pipeline}}});if(!t?.pipeline)return(0,e3.YD)("Error reverting loop");return(0,e3.$j)(t.pipeline)}catch(e){return(0,e3.YD)(e)}}async getPipelineRecord(e){return this.withTransaction(IndexedDBLoopsStorage.PIPELINES_STORE,"readonly",t=>t.get(e),e=>e6(e)?e:null)}async getPipeline(e){return this.getPipelineRecord(e)}async getAllPipelineRecords(){return this.withTransaction(IndexedDBLoopsStorage.PIPELINES_STORE,"readonly",e=>e.getAll(),e=>Array.isArray(e)?e.filter(e=>e6(e)?e.pipeline:null):[])}createPipelineRecord(e){let t=Date.now(),a=e.pipeline?{...e.pipeline,id:e.loopID,updatedAt:t}:e.pipeline,n=e.draftPipeline?{...e.draftPipeline,id:e.loopID,updatedAt:t}:e.draftPipeline,r={...e,pipeline:a,draftPipeline:n};return this.withTransaction(IndexedDBLoopsStorage.PIPELINES_STORE,"readwrite",e=>e.put(r),()=>r)}async updatePipelineRecord(e,t){let a=await this.getDatabase();return new Promise((n,r)=>{let i=a.transaction(IndexedDBLoopsStorage.PIPELINES_STORE,"readwrite");i.oncomplete=()=>a.close(),i.onerror=()=>r(i.error);let s=i.objectStore(IndexedDBLoopsStorage.PIPELINES_STORE),o=s.get(e);o.onerror=()=>r(o.error),o.onsuccess=()=>{let a=o.result;if(!e6(a))return void r(Error(`Pipeline with ID ${e} not found`));try{let i=t(a),o=i.pipeline?{...i.pipeline,id:e}:i.pipeline,l=i.draftPipeline?{...i.draftPipeline,id:e,updatedAt:Date.now()}:i.draftPipeline,c={...i,pipeline:o,draftPipeline:l},d=s.put(c);d.onerror=()=>r(d.error),d.onsuccess=()=>n(c)}catch(e){r(e)}}})}deletePipeline(e){return this.withTransaction(IndexedDBLoopsStorage.PIPELINES_STORE,"readwrite",t=>t.delete(e),()=>e)}getExecution(e,t,a){if(a===e4.q)return this.getLatestExecution(e,t);try{let n=IndexedDBLoopsStorage.getExecutionKey(e,t,a),r=IndexedDBLoopsStorage.executionStorage.getItem(n);if(!r)return Promise.resolve((0,e3.YD)(`execution ${a} not found`));return Promise.resolve({success:!0,data:JSON.parse(r)})}catch{return Promise.resolve((0,e3.YD)("error getting execution"))}}getLatestExecution(e,t){let a=IndexedDBLoopsStorage.executionStorage.getKeys(),n=null;for(let r of a){let a=IndexedDBLoopsStorage.executionStorage.getItem(r);if(!a)continue;let i=JSON.parse(a);i&&"object"==typeof i&&"id"in i&&"string"==typeof i.id&&"createdAt"in i&&"number"==typeof i.createdAt&&"nodes"in i&&"object"==typeof i.nodes&&i.loopID===e&&i.loopVersion===t&&(!n||i.createdAt>n.createdAt)&&(n=i)}return Promise.resolve(n?(0,e3.$j)(n):(0,e3.YD)("no latest execution found"))}async createExecution(e,t,a){let n=crypto.randomUUID(),r={id:n,loopID:e,loopVersion:t,createdAt:Date.now(),nodes:{},...a};try{let a=IndexedDBLoopsStorage.getExecutionKey(e,t,n);return IndexedDBLoopsStorage.executionStorage.setItem(a,JSON.stringify(r)),(0,e3.$j)(r)}catch(e){return(0,e3.YD)(e)}}async updateExecution(e,t,a,n){try{let r=IndexedDBLoopsStorage.getExecutionKey(e,t,a);if(!IndexedDBLoopsStorage.executionStorage.getItem(r))throw Error(`No execution found for pipeline ${e}`);return IndexedDBLoopsStorage.executionStorage.setItem(r,JSON.stringify(n)),(0,e3.$j)(n)}catch(e){return(0,e3.YD)(e)}}static getExecutionKey(e,t,a){return JSON.stringify({loopID:e,version:t,executionID:a})}async withTransaction(e,t,a,n){let r=await this.getDatabase();return new Promise((i,s)=>{let o=r.transaction(e,t);o.oncomplete=()=>r.close(),o.onerror=()=>s(o.error);let l=a(o.objectStore(e));l.onsuccess=()=>i(n(l.result)),l.onerror=()=>s(l.error)})}getDatabase(){return new Promise((e,t)=>{let a=indexedDB.open(IndexedDBLoopsStorage.PIPES_DB,IndexedDBLoopsStorage.CURRENT_VERSION);a.onerror=()=>t(a.error),a.onsuccess=()=>e(a.result),a.onupgradeneeded=async e=>{try{await IndexedDBLoopsStorage.handleDatabaseUpgrade(a.result,e)}catch(e){t(e)}}})}static async handleDatabaseUpgrade(e,t){let a=t.oldVersion;if(0===a)return void await IndexedDBLoopsStorage.upgradeFromVersion0(e);a<2&&await IndexedDBLoopsStorage.upgradeFromVersion1(t),a<3&&await IndexedDBLoopsStorage.upgradeFromVersion2(t),a<4&&await IndexedDBLoopsStorage.upgradeFromVersion3(t),a<5&&await IndexedDBLoopsStorage.upgradeFromVersion4(t),a<6&&await IndexedDBLoopsStorage.upgradeFromVersion5(t),a<7&&await IndexedDBLoopsStorage.upgradeFromVersion6(t),a<8&&await IndexedDBLoopsStorage.upgradeFromVersion7(t),a<9&&await IndexedDBLoopsStorage.upgradeFromVersion8(t)}static upgradeFromVersion0(e){return new Promise((t,a)=>{try{e.createObjectStore(IndexedDBLoopsStorage.PIPELINES_STORE,{keyPath:"loopID"}).createIndex("loopID","loopID",{unique:!0}),t()}catch(e){a(e)}})}static async waitForAllAndResolve(e,t,a){try{await Promise.all(e),t()}catch(e){a(e)}}static upgradeFromVersion1(e){return new Promise((t,a)=>{if(!e.target)return t();let n=e.target.transaction;if(!n)return t();let r=n.objectStore(IndexedDBLoopsStorage.PIPELINES_STORE).openCursor(),i=[];r.onsuccess=function(e){let n=e.target?.result;if(n)try{let e=n.value;e.pipeline&&(e.pipeline.updatedAt=new Date().toISOString());let t=new Promise((t,a)=>{let r=n.update(e);r.onsuccess=()=>t(),r.onerror=()=>a(r.error)});i.push(t),n.continue()}catch(e){a(e)}else IndexedDBLoopsStorage.waitForAllAndResolve(i,t,a)},r.onerror=function(){a(r.error)}})}static upgradeFromVersion2(e){return new Promise((t,a)=>{if(!e.target)return t();let n=e.target.transaction;if(!n)return t();let r=[],i=n.objectStore(IndexedDBLoopsStorage.PIPELINES_STORE).openCursor();i.onsuccess=function(e){let i=e.target?.result;if(i){let e=i.value;e?.pipeline&&!e.pipeline.updatedAt&&(e.pipeline.updatedAt=new Date().toISOString()),r.push(e),i.continue()}else try{n.db.deleteObjectStore(IndexedDBLoopsStorage.PIPELINES_STORE);let e=n.db.createObjectStore(IndexedDBLoopsStorage.PIPELINES_STORE,{keyPath:"loopID"});e.createIndex("loopID","loopID",{unique:!0});let i=r.map(e=>({loopID:e.pipeline.id,threadID:e.threadID,pipeline:e.pipeline}));if(0===i.length)return void t();let s=[];for(let t of i){let a=new Promise((a,n)=>{let r=e.put(t);r.onsuccess=()=>a(),r.onerror=()=>n(r.error)});s.push(a)}IndexedDBLoopsStorage.waitForAllAndResolve(s,t,a)}catch(e){a(e)}},i.onerror=function(){a(i.error)}})}static upgradeFromVersion3(e){return new Promise((t,a)=>{if(!e.target)return t();let n=e.target.transaction;if(!n)return t();let r=n.objectStore(IndexedDBLoopsStorage.PIPELINES_STORE).openCursor(),i=[];r.onsuccess=function(e){let n=e.target?.result;if(n)try{let e=n.value;if(e.pipeline&&!e.draftPipeline){e.draftPipeline={...e.pipeline};let t=new Promise((t,a)=>{let r=n.update(e);r.onsuccess=()=>t(),r.onerror=e=>a(e)});i.push(t)}n.continue()}catch(e){a(e)}else IndexedDBLoopsStorage.waitForAllAndResolve(i,t,a)},r.onerror=function(){a(r.error)}})}static upgradeFromVersion4(e){return new Promise((t,a)=>{if(!e.target)return t();let n=e.target.transaction;if(!n)return t();let r=n.objectStore(IndexedDBLoopsStorage.PIPELINES_STORE).openCursor(),i=[];r.onsuccess=function(e){let n=e.target?.result;if(n)try{let e=n.value;if(e.threadID&&e.loopID)try{(0,e0.aq)(e.loopID,e.threadID)}catch(e){(0,e1.FF)("Failed to migrate thread ID to localStorage:",e)}if("threadID"in e){delete e.threadID;let t=new Promise((t,a)=>{let r=n.update(e);r.onsuccess=()=>t(),r.onerror=e=>a(e)});i.push(t)}n.continue()}catch(e){a(e)}else IndexedDBLoopsStorage.waitForAllAndResolve(i,t,a)},r.onerror=function(){a(r.error)}})}static upgradeFromVersion5(e){return new Promise(t=>{if(!e.target)return t();let a=e.target.transaction;if(!a)return t();a.db.deleteObjectStore(IndexedDBLoopsStorage.EXECUTION_STORE);let n=a.db.createObjectStore(IndexedDBLoopsStorage.EXECUTION_STORE,{keyPath:["pipelineId","executionId"]});n.createIndex("pipelineId, executionId",["pipelineId","executionId"],{unique:!0}),n.createIndex("pipelineId","pipelineId",{unique:!1}),t()})}static upgradeFromVersion6(e){return new Promise(t=>{if(!e.target)return t();let a=e.target.transaction;if(!a)return t();a.db.objectStoreNames.contains(IndexedDBLoopsStorage.EXECUTION_STORE)&&a.db.deleteObjectStore(IndexedDBLoopsStorage.EXECUTION_STORE),t()})}static upgradeFromVersion7(e){return new Promise((t,a)=>{if(!e.target)return t();let n=e.target.transaction;if(!n)return t();let r=n.objectStore(IndexedDBLoopsStorage.PIPELINES_STORE).openCursor(),i=[];r.onsuccess=function(e){let n=e.target?.result;if(n)try{let e=n.value;if("string"==typeof e.pipeline?.updatedAt||"string"==typeof e.draftPipeline?.updatedAt){e.pipeline&&(e.pipeline={...e.pipeline,updatedAt:new Date(e.pipeline.updatedAt).getTime()}),e.draftPipeline&&(e.draftPipeline={...e.draftPipeline,updatedAt:new Date(e.draftPipeline.updatedAt).getTime()});let t=new Promise((t,a)=>{let r=n.update(e);r.onsuccess=()=>t(),r.onerror=e=>a(e)});i.push(t)}n.continue()}catch(e){a(e)}else IndexedDBLoopsStorage.waitForAllAndResolve(i,t,a)},r.onerror=function(){a(r.error)}})}static upgradeFromVersion8(e){return new Promise((t,a)=>{if(!e.target)return t();let n=e.target.transaction;if(!n)return t();let r=n.objectStore(IndexedDBLoopsStorage.PIPELINES_STORE).openCursor(),i=[];r.onsuccess=function(e){let n=e.target?.result;if(n)try{let e=n.value,t=!1;for(let a of e.pipeline?.nodes??[])"text"===a.type&&"inputType"in a&&"object"==typeof a.inputType&&(a.metadata={...a.inputType,inputType:a.inputType.type},t=!0),"prompt"===a.type&&"model"in a&&(a.metadata={model:a.model},t=!0);for(let a of e.draftPipeline?.nodes??[])"text"===a.type&&"inputType"in a&&"object"==typeof a.inputType&&(a.metadata={...a.inputType,inputType:a.inputType.type},t=!0),"prompt"===a.type&&"model"in a&&(a.metadata={model:a.model},t=!0);if(t){let t=new Promise((t,a)=>{let r=n.update(e);r.onsuccess=()=>t(),r.onerror=e=>a(e)});i.push(t)}n.continue()}catch(e){a(e)}else IndexedDBLoopsStorage.waitForAllAndResolve(i,t,a)},r.onerror=function(){a(r.error)}})}};e5(IndexedDBLoopsStorage,"PIPES_DB","copilot-pipes"),e5(IndexedDBLoopsStorage,"PIPELINES_STORE","pipelines"),e5(IndexedDBLoopsStorage,"EXECUTION_STORE","executionStates"),e5(IndexedDBLoopsStorage,"CURRENT_VERSION",9),e5(IndexedDBLoopsStorage,"executionStorage",(0,e2.A)("sessionStorage",{ttl:18e5,throwQuotaErrorsOnSet:!1}));var e7=a(879),e8=a(67522),e9=a(38007);function te(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function tt(e,t,a){if(!t.has(e))throw TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}function ta(e,t){var a=tt(e,t,"get");return a.get?a.get.call(e):a.value}function tn(e,t,a){te(e,t),t.set(e,a)}function tr(e,t,a){var n=tt(e,t,"set");if(n.set)n.set.call(e,a);else{if(!n.writable)throw TypeError("attempted to set read only private field");n.value=a}return a}var ti=new WeakMap,ts=new WeakMap,to=new WeakMap,tl=new WeakSet;let ChatCompletionsClient=class ChatCompletionsClient{async *getChatCompletion(e,t,a){let n=(0,e8.wv)(),r=t??n.id,i=await ta(this,ti).getAuthToken(),s=await (0,ek.p)({basePath:ta(this,ts),body:{messages:e,model:r,stream:!0},path:"/chat/completions",method:"POST",streamingResponse:!0,authToken:i,integrationId:this.directConnectConfiguration.integrationID,realIp:ta(this,to),signal:a});if(!s.ok){let e=await s.response?.text()??"Unknown error",t=e;try{let a=JSON.parse(e);t=a.error?.message||s.error}catch(e){}throw(0,e9.BI)("dotcom_chat.error",{type:"execution",nodeType:"prompt",mode:"pipes",errorMessage:t}),Error(`Failed to get chat completion: ${t}`)}!a?.aborted&&s.body&&(yield*(function(e,t,a){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return a})(this,tl,tc).call(this,s.body,a))}get directConnectConfiguration(){return{integrationID:"copilot-chat"}}constructor(e,t,a=""){!function(e,t){te(e,t),t.add(e)}(this,tl),tn(this,ti,{writable:!0,value:void 0}),tn(this,ts,{writable:!0,value:void 0}),tn(this,to,{writable:!0,value:void 0}),tr(this,ts,e),tr(this,ti,new e7.J(t)),tr(this,to,a)}};async function*tc(e,t){let a=new TextDecoder("utf-8"),n=e.getReader(),r="";try{for(;;){if(t?.aborted)return;let{done:e,value:i}=await n.read();if(e)break;for(r+=a.decode(i);;){if(r.startsWith("data: [DONE]"))return;let e=r.indexOf(`

`);if(-1===e)break;let t=r.slice(0,e).replace(/^data:\s+/,"");if(""===t){r=r.slice(e+2);continue}try{let e=JSON.parse(t),a=e.choices?.[0]?.delta?.content??"";a&&(yield a)}catch{}r=r.slice(e+2)}}}finally{n.releaseLock()}}var td=a(60039);let tu=["SAML"],tm={FORBIDDEN:["SAML error"]};function tp(e,t,a){if(!t.has(e))throw TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}var th=new WeakMap;let GraphQLClient=class GraphQLClient{async getGraphQLResponse(e,t){var a;let n=await (0,td.Sr)((a=tp(this,th,"get"),a.get?a.get.call(this):a.value),{method:"POST",body:{query:e},signal:t});if(n.ok){let e=await n.json();if(function(e,t){var a;if("errors"in(e="errors"in(a=e)?{...a,errors:a.errors.filter(e=>!tu.includes(e.type)&&!tm[e.type]?.includes(e.message))}:a)&&e.errors.length){let t=e.errors.map(e=>`${e.message}${e.path?` (path: ${e.path})`:""}`).join(", ");throw(0,e9.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:t}),Error(t)}if(!("data"in e)){let a=`Expected data property in response: ${JSON.stringify(e)}. requestId: ${t}`;throw(0,e1.vV)(a),(0,e9.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:a}),Error("Failed to fetch data.")}return!0}(e,n.headers.get("X-Github-Request-Id")||""))return e}else throw Error("Failed to get GraphQL response.")}constructor(e){!function(e,t,a){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,a)}(this,th,{writable:!0,value:void 0}),function(e,t,a){var n=tp(e,t,"set");if(n.set)n.set.call(e,a);else{if(!n.writable)throw TypeError("attempted to set read only private field");n.value=a}}(this,th,e)}};var tf=a(25745);let tg={scrollContainer:"ServiceView-module__scrollContainer--LFK5G",contentContainer:"ServiceView-module__contentContainer--DZVDS",v3SpacesContent:"ServiceView-module__v3SpacesContent--PvJhy",content:"ServiceView-module__content--B7ctp",small:"ServiceView-module__small--e46Wl",empty:"ServiceView-module__empty--I19W6",banner:"ServiceView-module__banner--kVai_",serviceHeader:"ServiceView-module__serviceHeader--R2TLR",serviceDescription:"ServiceView-module__serviceDescription--koXJM",serviceTitle:"ServiceView-module__serviceTitle--orySH",serviceIcon:"ServiceView-module__serviceIcon--a2C77",section:"ServiceView-module__section--_ycAN",sectionTitle:"ServiceView-module__sectionTitle--hD3JM",sectionGrid:"ServiceView-module__sectionGrid--Fa4lP",sectionGridEmpty:"ServiceView-module__sectionGridEmpty--KiT2u",skeletonCard:"ServiceView-module__skeletonCard--MT87J"};function ty(e){let t,a,n,r,i,s=(0,p.c)(12),{children:o,empty:l,width:c}=e;if(s[0]!==o){for(let e of(t=[],a=[],x.Children.toArray(o)))x.isValidElement(e)&&e.type===tx?t.push(e):a.push(e);s[0]=o,s[1]=t,s[2]=a}else t=s[1],a=s[2];let d="small"===c;return s[3]!==l||s[4]!==d?(n=(0,y.$)(tg.content,{[tg.v3SpacesContent]:eE.W.spacesV3UI,[tg.empty]:l,[tg.small]:d}),s[3]=l,s[4]=d,s[5]=n):n=s[5],s[6]!==a||s[7]!==n?(r=(0,m.jsx)("div",{className:n,children:a}),s[6]=a,s[7]=n,s[8]=r):r=s[8],s[9]!==t||s[10]!==r?(i=(0,m.jsx)("div",{className:tg.scrollContainer,children:(0,m.jsxs)("div",{className:tg.contentContainer,children:[t,r]})}),s[9]=t,s[10]=r,s[11]=i):i=s[11],i}function tx(e){let t,a=(0,p.c)(2),{children:n}=e;return a[0]!==n?(t=(0,m.jsx)("div",{className:tg.banner,children:n}),a[0]=n,a[1]=t):t=a[1],t}function tv(e){let t,a=(0,p.c)(2),{children:n}=e;return a[0]!==n?(t=(0,m.jsx)("div",{className:tg.serviceHeader,children:n}),a[0]=n,a[1]=t):t=a[1],t}function t_(e){let t,a=(0,p.c)(2),{children:n}=e;return a[0]!==n?(t=(0,m.jsx)("section",{className:tg.section,children:n}),a[0]=n,a[1]=t):t=a[1],t}function tb(e){let t,a=(0,p.c)(2),{icon:n}=e;return a[0]!==n?(t=(0,m.jsx)("div",{className:tg.serviceIcon,children:n}),a[0]=n,a[1]=t):t=a[1],t}function tj(e){let t,a=(0,p.c)(2),{children:n}=e;return a[0]!==n?(t=(0,m.jsx)("h2",{className:tg.serviceTitle,children:n}),a[0]=n,a[1]=t):t=a[1],t}function tS(e){let t,a=(0,p.c)(2),{children:n}=e;return a[0]!==n?(t=(0,m.jsx)("p",{className:tg.serviceDescription,children:n}),a[0]=n,a[1]=t):t=a[1],t}function tC(e){let t,a=(0,p.c)(2),{children:n}=e;return a[0]!==n?(t=(0,m.jsx)("h3",{className:tg.sectionTitle,children:n}),a[0]=n,a[1]=t):t=a[1],t}function tN(e){let t,a=(0,p.c)(2),{children:n}=e;return a[0]!==n?(t=(0,m.jsx)("div",{className:tg.sectionGridEmpty,children:n}),a[0]=n,a[1]=t):t=a[1],t}function tw(e){let t,a,n,r=(0,p.c)(8),{children:i,loading:s}=e;if(void 0!==s&&s){let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:tg.sectionGrid,"data-testid":"service-view-skeleton",children:[void 0,void 0,void 0].map(tE)}),r[0]=e):e=r[0],e}if(r[1]!==i){let e=x.Children.toArray(i);t=e.find(tk),a=e.filter(tI),r[1]=i,r[2]=t,r[3]=a}else t=r[2],a=r[3];let o=a;if(0===o.length&&t){let e;return r[4]!==t?(e=(0,m.jsx)(m.Fragment,{children:t}),r[4]=t,r[5]=e):e=r[5],e}return r[6]!==o?(n=(0,m.jsx)("div",{className:tg.sectionGrid,children:o}),r[6]=o,r[7]=n):n=r[7],n}function tI(e){return!(x.isValidElement(e)&&e.type===tN)}function tk(e){return x.isValidElement(e)&&e.type===tN}function tE(e,t){return(0,m.jsx)(g.f,{className:tg.skeletonCard},t)}tw.Empty=tN,t_.Title=tC,t_.Grid=tw;let tT={Icon:tb,Title:tj,Description:tS,Container:ty,Banner:tx,Header:tv,Section:t_};try{ty.displayName||(ty.displayName="ServiceContainer")}catch{}try{tx.displayName||(tx.displayName="ServiceBanner")}catch{}try{tv.displayName||(tv.displayName="ServiceHeader")}catch{}try{t_.displayName||(t_.displayName="ServiceSection")}catch{}try{tb.displayName||(tb.displayName="Icon")}catch{}try{tj.displayName||(tj.displayName="Title")}catch{}try{tS.displayName||(tS.displayName="Description")}catch{}try{tC.displayName||(tC.displayName="SectionTitle")}catch{}try{tN.displayName||(tN.displayName="SectionGridEmpty")}catch{}try{tw.displayName||(tw.displayName="SectionGrid")}catch{}let tA={header:"LoopsView-module__header--SAuoB",input:"LoopsView-module__input--vIdQn"};var tL=a(71110),tD=a(20126),tR=a(44446),tP=a(87804),tO=a(33484),tB=a(10569),tF=a(87330),tM=a(15385);let tV={header:"LoopsViewHeader-module__header--rHbds",rightControls:"LoopsViewHeader-module__rightControls--aKkbw"};function tU(){let e,t,a,n,r=(0,p.c)(4),i=(0,x.useRef)(null),s=(0,x.useRef)(null);return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tB.W.Anchor,{children:(0,m.jsx)(tF.K,{icon:P.KebabHorizontalIcon,"aria-label":"Menu",onClick:tW})}),r[0]=e):e=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{i.current?.openDialog(),(0,e9.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_GIVE_FEEDBACK",mode:"immersive"})},r[1]=t):t=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsxs)(tM.l.Item,{onSelect:t,children:["Give feedback",(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.CommentIcon,{})})]}),r[2]=a):a=r[2],r[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)("div",{className:tV.header,children:(0,m.jsxs)("div",{className:tV.rightControls,children:[(0,m.jsxs)(tB.W,{anchorRef:s,children:[e,(0,m.jsx)(tB.W.Overlay,{width:"small",children:(0,m.jsx)(tM.l,{children:(0,m.jsxs)(tM.l.Group,{children:[a,(0,m.jsxs)(tM.l.LinkItem,{href:"/settings/copilot",onClick:t$,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.GearIcon,{})}),"Settings"]})]})})})]}),(0,m.jsx)(tO.l,{ref:i,mode:"immersive",returnFocusRef:s})]})}),r[3]=n):n=r[3],n}function t$(){return(0,e9.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SETTINGS",mode:"immersive"})}function tW(){return(0,e9.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU",mode:"immersive"})}try{tU.displayName||(tU.displayName="LoopsViewHeader")}catch{}let tz=[{altText:"GitHub Battle Royale report",assetPath:"/images/modules/loops/BattleRoyal.png",loop:{title:"GitHub Battle Royale",description:"Compare two GitHub users based on their pull request contributions and metrics",nodes:[{id:"1",type:"text",title:"Start Date",description:"The date 30 days ago from today",content:"@today-30d",metadata:{inputType:"date"}},{id:"2",type:"text",title:"First Username",description:"GitHub username for the first contestant",content:"jonrohan",metadata:{inputType:"text"}},{id:"3",type:"text",title:"Second Username",description:"GitHub username for the second contestant",content:"colebemis",metadata:{inputType:"text"}},{id:"4",type:"text",title:"Repository",description:"The repository to analyze (in owner/name format)",content:"primer/react",metadata:{inputType:"text"}},{id:"5",type:"github-graphql",title:"First User PRs",description:"Fetch PRs for the first user",content:`query {
  search(query: "repo:{{4}} author:{{2}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Second User PRs",description:"Fetch PRs for the second user",content:`query {
  search(query: "repo:{{4}} author:{{3}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"7",type:"prompt",title:"Battle Analysis",description:"Compare the two users and determine a winner",content:`You're a GitHub Battle Royale announcer. Compare the following metrics between these two contestants based on their pull request data:

# Battle Royal \u{1F934}\u{1F5E1}\u{FE0F}\u{1F478}

1. Total PRs created
2. PR merge rate
3. Lines of code changed (additions + deletions)
4. Average commits per PR
5. PR velocity (PRs per month)

User 1 ({{2}}) data: {{5}}
User 2 ({{3}}) data: {{6}}

Analyze each metric and assign points (1-10) for each category. Then declare an overall winner with a dramatic announcement. Format your response as an exciting battle commentary.`}]}},{altText:"Battle Royale report",assetPath:"/images/modules/loops/FirstResponder.png",loop:{title:"First Responder Activity Report",description:"Generates a summary of a first responder's activity including new issues, PR reviews, and issue involvement from the past week",nodes:[{id:"1",type:"text",title:"First Responder Username",description:"GitHub username of the first responder",content:"",metadata:{inputType:"text"}},{id:"2",type:"text",title:"Start Date",description:"Start date for the report (1 week ago)",content:"@today-1w",metadata:{inputType:"date"}},{id:"repo",type:"text",title:"Repository",description:"The full repository name (e.g. owner/repo)",content:"primer/react",metadata:{inputType:"text"}},{id:"3",type:"github-graphql",title:"Created Issues",description:"Issues created by the user in the past week",content:`query {
  search(query: "repo:{{repo}} author:{{1}} is:issue created:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          createdAt
          state
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"PR Reviews",description:"PR reviews submitted by the user in the past week",content:`query {
  search(query: "repo:{{repo}} is:pr reviewed-by:{{1}} updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          reviews(first: 5, author: "{{1}}") {
            edges {
              node {
                state
                submittedAt
              }
            }
          }
        }
      }
    }
  }
}`},{id:"involved_issues",type:"github-graphql",title:"Involved Issues",description:"Issues where the user was involved (commented or assigned) in the past week",content:`query {
  search(query: "repo:{{repo}} involves:{{1}} is:issue updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          updatedAt
          state
          comments(last: 5) {
            nodes {
              author {
                login
              }
              createdAt
            }
          }
          assignees(first: 5) {
            nodes {
              login
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"prompt",title:"Activity Summary",description:"Summary report of the first responder's activity",content:`Generate a comprehensive summary report of the first responder's ({{1}}) activity in the {{repo}} repository over the past week. Include their issue creation, PR review activities, and issue involvement.

Issues Created:
{{3}}

PR Reviews:
{{4}}

Issue Involvement:
{{involved_issues}}

Please format the report with these sections:
1. Overview (total numbers)
2. Issue Activity
   - Created Issues
   - Issue Involvement (comments, assignments)
3. PR Review Activity (highlight significant reviews)
4. Key Observations

Keep the tone professional and focus on what the next first responder needs to know about as they come in for the next shift.`}]}},{altText:"GitHub repo feature announcement magazine",assetPath:"/images/modules/loops/NewsFlash.png",loop:{title:"Multi-Repo GitHub Feature Announcement Magazine",description:"Creates a tabloid-style frontpage focusing on new features and enhancements across multiple GitHub repositories",nodes:[{id:"repo1",type:"text",title:"Repository 1",description:"First repository to analyze (format: owner/repo)",content:"facebook/react",metadata:{inputType:"text"}},{id:"repo2",type:"text",title:"Repository 2",description:"Second repository to analyze (format: owner/repo)",content:"microsoft/vscode",metadata:{inputType:"text"}},{id:"repo3",type:"text",title:"Repository 3",description:"Third repository to analyze (format: owner/repo)",content:"primer/react",metadata:{inputType:"text"}},{id:"days",type:"text",title:"Days Limit",description:"Number of days to look back for data",content:"@today-30d",metadata:{inputType:"date"}},{id:"3",type:"github-graphql",title:"Feature PRs - Repository 1",description:"Fetch recent feature/enhancement pull requests from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"Feature PRs - Repository 2",description:"Fetch recent feature/enhancement pull requests from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"github-graphql",title:"Feature PRs - Repository 3",description:"Fetch recent feature/enhancement pull requests from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Feature Requests - Repository 1",description:"Fetch recent feature request issues from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:issue label:\\"Type: Feature Request\\" created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"7",type:"github-graphql",title:"Feature Requests - Repository 2",description:"Fetch recent feature request issues from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"8",type:"github-graphql",title:"Feature Requests - Repository 3",description:"Fetch recent feature request issues from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"9",type:"text",title:"Magazine Style",description:"Define the style of the feature announcement magazine",content:`\u{2728}\u{1F4AB} \u{1F31F} OPEN SOURCE NEWS FLASH \u{1F31F} \u{1F4AB} \u{2728}
\u{1F680} BREAKING UPDATES \u{1F680} EXCLUSIVE FEATURES \u{1F3AF} HOT RELEASES \u{1F525}

Your #1 source for hot new features in your favorite open source projects! \u{1F308}`,metadata:{inputType:"text"}},{id:"10",type:"prompt",title:"Feature Magazine Content",description:"Generate tabloid-style headlines focusing on new features",content:`You are a tech magazine writer specializing in new feature announcements. Create an exciting frontpage covering the latest features and enhancements from these repositories: {{repo1}}, {{repo2}}, and {{repo3}}.

Use this data for each repository:
Repository 1:
- PRs: {{3}}
- Issues: {{6}}

Repository 2:
- PRs: {{4}}
- Issues: {{7}}

Repository 3:
- PRs: {{5}}
- Issues: {{8}}

Start with this header:
{{9}}

For each repository:
1. Create a section with an appropriate emoji
2. Include 2-3 exciting headlines about new features or requests
3. Focus on user impact and benefits
4. Include the original URLs as 'READ MORE' links
5. Mention scope of changes for PRs (additions + deletions)

End with a 'FEATURE FORECAST' section comparing the most exciting upcoming features across repositories.

Format everything in markdown and use emojis liberally.`}]}}],tH={cardContainer:"Card-module__cardContainer--Jk2It",cardContent:"Card-module__cardContent--A8hpe",cardMenu:"Card-module__cardMenu--o6v0Y",itemHeader:"Card-module__itemHeader--WIpbQ",edgeToEdge:"Card-module__edgeToEdge--o6nFA",itemImage:"Card-module__itemImage--fVqUU",itemMain:"Card-module__itemMain--M__Bj",itemContent:"Card-module__itemContent--QdREU",itemHeaderTitle:"Card-module__itemHeaderTitle--TwWdH",itemHeaderDescription:"Card-module__itemHeaderDescription--KFU1e",itemMetadata:"Card-module__itemMetadata--DWvmz",itemMetadataItem:"Card-module__itemMetadataItem--t_AWQ"},tq=e=>{let t,a,n,r,i,s,o,l,c,d,u,h=(0,p.c)(47),f=null,g=null,v=null,_=null,b=null,j=null;if(h[0]!==e.children){for(let t of x.Children.toArray(e.children))x.isValidElement(t)&&(t.type===tG?f=t:t.type===tK?g=t:t.type===tQ?v=t:t.type===tJ?_=t:t.type===tX?b=t:t.type===tY&&(j=t));h[0]=e.children,h[1]=f,h[2]=g,h[3]=v,h[4]=_,h[5]=b,h[6]=j}else f=h[1],g=h[2],v=h[3],_=h[4],b=h[5],j=h[6];h[7]!==g?(t=(0,y.$)(tH.itemHeader,g&&tH.edgeToEdge),h[7]=g,h[8]=t):t=h[8];let S=f||g;h[9]!==t||h[10]!==S?(a=(0,m.jsx)("div",{className:t,children:S}),h[9]=t,h[10]=S,h[11]=a):a=h[11],h[12]!==_||h[13]!==v?(n=(0,m.jsxs)("div",{className:tH.itemContent,children:[v,_]}),h[12]=_,h[13]=v,h[14]=n):n=h[14],h[15]!==b?(r=(0,m.jsx)("div",{className:tH.itemMetadata,children:b}),h[15]=b,h[16]=r):r=h[16],h[17]!==n||h[18]!==r?(i=(0,m.jsxs)("div",{className:tH.itemMain,children:[n,r]}),h[17]=n,h[18]=r,h[19]=i):i=h[19],h[20]!==a||h[21]!==i?(s=(0,m.jsxs)(m.Fragment,{children:[a,i]}),h[20]=a,h[21]=i,h[22]=s):s=h[22];let C=s;if("href"in e){let t,a,n,r,i;return h[23]!==e?({href:t,...a}=e,h[23]=e,h[24]=t,h[25]=a):(t=h[24],a=h[25]),h[26]!==C||h[27]!==t||h[28]!==a?(n=(0,m.jsx)(ef.N_,{...a,to:t,className:tH.cardContent,children:C}),h[26]=C,h[27]=t,h[28]=a,h[29]=n):n=h[29],h[30]!==j?(r=j?(0,m.jsx)("div",{className:tH.cardMenu,children:j}):null,h[30]=j,h[31]=r):r=h[31],h[32]!==n||h[33]!==r?(i=(0,m.jsxs)("div",{className:tH.cardContainer,children:[n,r]}),h[32]=n,h[33]=r,h[34]=i):i=h[34],i}return h[35]!==e?({onClick:o,...l}=e,h[35]=e,h[36]=o,h[37]=l):(o=h[36],l=h[37]),h[38]!==C||h[39]!==o||h[40]!==l?(c=(0,m.jsx)("button",{...l,className:tH.cardContent,onClick:o,children:C}),h[38]=C,h[39]=o,h[40]=l,h[41]=c):c=h[41],h[42]!==j?(d=j?(0,m.jsx)("div",{className:tH.cardMenu,children:j}):null,h[42]=j,h[43]=d):d=h[43],h[44]!==c||h[45]!==d?(u=(0,m.jsxs)("div",{className:tH.cardContainer,children:[c,d]}),h[44]=c,h[45]=d,h[46]=u):u=h[46],u},tG=e=>{let t,a=(0,p.c)(3),{icon:n,color:r}=e;return a[0]!==r||a[1]!==n?(t=(0,m.jsx)(tR.I,{icon:n,hasBackground:!0,color:r,size:16}),a[0]=r,a[1]=n,a[2]=t):t=a[2],t},tK=e=>{let t,a=(0,p.c)(3),{img:n,alt:r}=e,i=void 0===r?"":r;return a[0]!==i||a[1]!==n?(t=(0,m.jsx)("img",{src:n,alt:i,className:tH.itemImage}),a[0]=i,a[1]=n,a[2]=t):t=a[2],t},tQ=e=>{let t,a=(0,p.c)(2),{children:n}=e;return a[0]!==n?(t=(0,m.jsx)("h3",{className:tH.itemHeaderTitle,children:n}),a[0]=n,a[1]=t):t=a[1],t},tJ=e=>{let t,a=(0,p.c)(2),{children:n}=e;return a[0]!==n?(t=(0,m.jsx)("p",{className:tH.itemHeaderDescription,children:n}),a[0]=n,a[1]=t):t=a[1],t},tY=e=>{let t,a=(0,p.c)(2),{children:n}=e;return a[0]!==n?(t=(0,m.jsx)(m.Fragment,{children:n}),a[0]=n,a[1]=t):t=a[1],t},tX=e=>{let t,a=(0,p.c)(2),{children:n}=e;return a[0]!==n?(t=(0,m.jsx)("div",{className:tH.itemMetadataItem,children:n}),a[0]=n,a[1]=t):t=a[1],t};tq.Icon=tG,tq.Image=tK,tq.Heading=tQ,tq.Description=tJ,tq.Menu=tY,tq.Metadata=tX;try{tq.displayName||(tq.displayName="Card")}catch{}try{tG.displayName||(tG.displayName="Icon")}catch{}try{tK.displayName||(tK.displayName="Image")}catch{}try{tQ.displayName||(tQ.displayName="Heading")}catch{}try{tJ.displayName||(tJ.displayName="Description")}catch{}try{tY.displayName||(tY.displayName="Menu")}catch{}try{tX.displayName||(tX.displayName="Metadata")}catch{}var tZ=a(94412),t0=a(48148);function t1(e){let t,a,n,r,i,s,o,l,c,d=(0,p.c)(25),{item:u,onClick:h}=e;d[0]!==u.color?(t=t0.u.find(e=>e===u.color),d[0]=u.color,d[1]=t):t=d[1];let f=t,g=`${ek.Jz}/l/${u.id}`;return d[2]!==f||d[3]!==u.title?(a=f??(0,t0.S)(u.title,t0.u),d[2]=f,d[3]=u.title,d[4]=a):a=d[4],d[5]!==a?(n=(0,m.jsx)(tq.Icon,{icon:"loops",color:a}),d[5]=a,d[6]=n):n=d[6],d[7]!==u.title?(r=(0,m.jsx)(tq.Heading,{children:u.title}),d[7]=u.title,d[8]=r):r=d[8],d[9]!==u.description?(i=(0,m.jsx)(tq.Description,{children:u.description}),d[9]=u.description,d[10]=i):i=d[10],d[11]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(eL.GS,{}),d[11]=s):s=d[11],d[12]!==u.nodes.length?(o=(0,m.jsxs)(tq.Metadata,{children:[s,u.nodes.length]}),d[12]=u.nodes.length,d[13]=o):o=d[13],d[14]!==u.id?(l=(0,m.jsx)(tq.Menu,{children:(0,m.jsx)(tZ.T,{loopId:u.id})}),d[14]=u.id,d[15]=l):l=d[15],d[16]!==u.id||d[17]!==h||d[18]!==g||d[19]!==n||d[20]!==r||d[21]!==i||d[22]!==o||d[23]!==l?(c=(0,m.jsxs)(tq,{href:g,onClick:h,children:[n,r,i,o,l]},u.id),d[16]=u.id,d[17]=h,d[18]=g,d[19]=n,d[20]=r,d[21]=i,d[22]=o,d[23]=l,d[24]=c):c=d[24],c}try{t1.displayName||(t1.displayName="LoopCard")}catch{}function t2(e){let t,a,n,r,i,s,o,l=(0,p.c)(20),{altText:c,assetPath:d,exampleLoop:u,onSelect:h}=e;l[0]!==u||l[1]!==h?(t=()=>{(0,e9.BI)("dotcom_chat.activate",{target:"OVERVIEW_EXAMPLE_LOOP_SELECT",mode:"loops"}),h({...u,id:crypto.randomUUID(),updatedAt:Date.now()})},l[0]=u,l[1]=h,l[2]=t):t=l[2];let f=t;return l[3]!==c||l[4]!==d?(a=(0,m.jsx)(tq.Image,{alt:c,img:d}),l[3]=c,l[4]=d,l[5]=a):a=l[5],l[6]!==u.title?(n=(0,m.jsx)(tq.Heading,{children:u.title}),l[6]=u.title,l[7]=n):n=l[7],l[8]!==u.description?(r=(0,m.jsx)(tq.Description,{children:u.description}),l[8]=u.description,l[9]=r):r=l[9],l[10]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)(eL.GS,{}),l[10]=i):i=l[10],l[11]!==u.nodes.length?(s=(0,m.jsxs)(tq.Metadata,{children:[i,u.nodes.length]}),l[11]=u.nodes.length,l[12]=s):s=l[12],l[13]!==u.title||l[14]!==f||l[15]!==a||l[16]!==n||l[17]!==r||l[18]!==s?(o=(0,m.jsxs)(tq,{onClick:f,children:[a,n,r,s]},u.title),l[13]=u.title,l[14]=f,l[15]=a,l[16]=n,l[17]=r,l[18]=s,l[19]=o):o=l[19],o}try{t2.displayName||(t2.displayName="LoopExampleCard")}catch{}function t3(e){let t,a,n=(0,p.c)(5),{chatState:r,plugin:i}=e;if(!i||!(0,tP.j)(i))throw Error("LoopsView can only be used with a LoopsPlugin");return n[0]!==r?(t=(0,m.jsx)(t4,{chatState:r}),n[0]=r,n[1]=t):t=n[1],n[2]!==i.service||n[3]!==t?(a=(0,m.jsx)(eO.qT,{value:i.service,children:t}),n[2]=i.service,n[3]=t,n[4]=a):a=n[4],a}function t4(e){let t,a,n,r,i,s,o,l,c,d,u,h,f,g,y,v=(0,p.c)(32),{chatState:_}=e,{data:b,isLoading:j}=(0,tD.C)(),S=(0,H.b)(),C=(0,ef.Zp)(),N=(0,eO.EY)(),w=(0,e8.GF)(_.availableModels);v[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],v[0]=t):t=v[0],(0,x.useEffect)(t7,t),v[1]!==S?(a=()=>{S.selectThread(null,{includeThreads:!1,clearTopic:!0})},n=[S],v[1]=S,v[2]=a,v[3]=n):(a=v[2],n=v[3]),(0,x.useEffect)(a,n),v[4]!==w||v[5]!==N||v[6]!==S||v[7]!==C?(r=async e=>{let t=e.trim();if(""===t)return;(0,e9.BI)("dotcom_chat.activate",{target:"OVERVIEW_INITIAL_CREATE",mode:"loops"});let a=crypto.randomUUID(),n=await S.createThread();await N.createLoop(a),(0,e0.aq)(a,n.id),S.sendChatMessage({content:t,model:w,references:[],thread:n}),C(`${ek.Jz}/l/${a}`)},v[4]=w,v[5]=N,v[6]=S,v[7]=C,v[8]=r):r=v[8];let I=r;v[9]!==N||v[10]!==C?(i=async e=>{await N.createLoop(e),C(`${ek.Jz}/l/${e.id}`)},v[9]=N,v[10]=C,v[11]=i):i=v[11];let k=i;return v[12]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(tU,{}),v[12]=s):s=v[12],v[13]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsxs)(tT.Header,{children:[(0,m.jsx)(tT.Icon,{icon:(0,m.jsx)(tR.I,{icon:"loops",size:32})}),(0,m.jsx)(tT.Title,{children:"Automate once. Loop forever."}),(0,m.jsx)(tT.Description,{children:"Loops simplifies workflow automation by allowing you to define processes with clear inputs, prompts, and outputs\u2014no manual setup required. Powered by Copilot, Loops makes it easy to automate and manage tasks, streamlining your operations with minimal effort."})]}),v[13]=o):o=v[13],v[14]!==I?(l=(0,m.jsx)(tL.V,{hideAttachmentButton:!0,placeholder:"What would you like to automate?",size:"large",onSubmit:I}),v[14]=I,v[15]=l):l=v[15],v[16]===Symbol.for("react.memo_cache_sentinel")?(c=(0,m.jsx)(tf.h,{}),v[16]=c):c=v[16],v[17]!==l?(d=(0,m.jsxs)("div",{className:tA.header,children:[o,(0,m.jsxs)("div",{className:tA.input,children:[l,c]})]}),v[17]=l,v[18]=d):d=v[18],v[19]!==j||v[20]!==b?(u=j||b&&b.length>0?(0,m.jsxs)(tT.Section,{children:[(0,m.jsx)(tT.Section.Title,{children:"Your loops"}),(0,m.jsx)(tT.Section.Grid,{loading:j,children:b?.map(t5)})]}):null,v[19]=j,v[20]=b,v[21]=u):u=v[21],v[22]===Symbol.for("react.memo_cache_sentinel")?(h=(0,m.jsx)(tT.Section.Title,{children:"Examples"}),v[22]=h):h=v[22],v[23]!==k?(f=tz.map(e=>{let{altText:t,assetPath:a,loop:n}=e;return(0,m.jsx)(t2,{altText:t,assetPath:a,exampleLoop:n,onSelect:k},n.title)}),v[23]=k,v[24]=f):f=v[24],v[25]!==j||v[26]!==f?(g=(0,m.jsxs)(tT.Section,{children:[h,(0,m.jsx)(tT.Section.Grid,{loading:j,children:f})]}),v[25]=j,v[26]=f,v[27]=g):g=v[27],v[28]!==d||v[29]!==u||v[30]!==g?(y=(0,m.jsxs)(m.Fragment,{children:[s,(0,m.jsxs)(tT.Container,{children:[d,u,g]})]}),v[28]=d,v[29]=u,v[30]=g,v[31]=y):y=v[31],y}function t5(e){return(0,m.jsx)(t1,{item:e,onClick:t6},e.id)}function t6(){return(0,e9.BI)("dotcom_chat.activate",{target:"OVERVIEW_USER_LOOP_SELECT",mode:"loops"})}function t7(){(0,f.D)("Loops \xb7 GitHub Copilot"),Promise.all([a.e("vendors-node_modules_d3-interpolate_src_value_js-node_modules_d3-selection_src_select_js"),a.e("vendors-node_modules_d3-transition_src_index_js"),a.e("vendors-node_modules_d3-zoom_src_index_js"),a.e("vendors-node_modules_d3-dag_bundle_d3-dag_esm_min_js-node_modules_lz-string_libs_lz-string_js-6649eb"),a.e("ui_packages_copilot-loops_components_Loop_tsx")]).then(a.bind(a,97891))}try{t3.displayName||(t3.displayName="LoopsView")}catch{}try{t4.displayName||(t4.displayName="LoopsViewInner")}catch{}function t8(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function t9(e,t,a){if(!t.has(e))throw TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}function ae(e,t,a){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return a}var at=new WeakMap,aa=new WeakSet;let LoopsClient=class LoopsClient{listLoops(){return ae(this,aa,an).call(this,{operation:"list-loops"})}createLoop(e){return ae(this,aa,an).call(this,{operation:"create-loop",loop:e})}updateLoop(e,t,a){return ae(this,aa,an).call(this,{operation:"update-loop",loopID:e,version:t,loop:a})}getLoop(e,t){return ae(this,aa,an).call(this,{operation:"get-loop",loopID:e,versionConstraint:t})}createExecution(e,t,a){return ae(this,aa,an).call(this,{operation:"create-execution",loopID:e,version:t,valueMap:a})}getExecution(e,t,a){return ae(this,aa,an).call(this,{operation:"get-execution",loopID:e,version:t,executionID:a})}updateNodeExecution(e,t,a,n,r){return ae(this,aa,an).call(this,{operation:"update-node-execution",loopID:e,version:t,executionID:a,nodeID:n,nodeExecution:r})}constructor(e){!function(e,t){t8(e,t),t.add(e)}(this,aa),function(e,t,a){t8(e,t),t.set(e,a)}(this,at,{writable:!0,value:void 0}),function(e,t,a){var n=t9(e,t,"set");if(n.set)n.set.call(e,a);else{if(!n.writable)throw TypeError("attempted to set read only private field");n.value=a}}(this,at,e)}};async function an(e){var t;let a=await (0,td.DI)((t=t9(this,at,"get"),t.get?t.get.call(this):t.value),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});if(!a.ok){let e=await a.text();try{return(0,e3.YD)(JSON.parse(e))}catch(e){return(0,e3.YD)(e)}}return(0,e3.$j)(await a.json())}function ar(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let LoopsPlugin=class LoopsPlugin{matchPage(e){return!!e&&(eA.bW.test(e)||eA.lN.test(e))}matchView(e){return!!e&&eA.qe.test(e)}matchThread(e,t){return!!this.routes.some(e=>e.test(eg.fV.pathname))||!!(0,eF.I)(t,!0)}async overrideCreateMessageOptions(e){return{...e,mode:eA.lh}}constructor(e,t,a,n,r,i){ar(this,"id",eA.S$),ar(this,"displayName",eA.Os),ar(this,"service",void 0),ar(this,"previewUrl",void 0),ar(this,"markdownExtensions",[eX]),ar(this,"routes",[eA.qe,eA.bW,eA.lN]),ar(this,"skipSyncRouteToThread",!0),ar(this,"PageComponent",eT),ar(this,"ViewComponent",t3),ar(this,"NavigationComponent",eD),ar(this,"navigationItems",[{id:eA.S$,displayName:"Loops",href:eA.QK,icon:eL.LP}]),this.service=new eZ.J(new LoopsClient(a),new IndexedDBLoopsStorage,new GraphQLClient(t),new ChatCompletionsClient(e,n,i)),this.previewUrl=r}};let ai=(0,x.createContext)({registerNavigableRef:()=>{},unregisterNavigableRef:()=>{}});function as(e){let t,a,n,r,i,s,o,l,c=(0,p.c)(9),{children:d}=e;c[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],c[0]=t):t=c[0];let[u,h]=x.useState(t);c[1]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{h(t=>t.some(t=>t===e)?t:[...t,e])},c[1]=a):a=c[1];let f=a;c[2]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{h(t=>t.filter(t=>t!==e))},c[2]=n):n=c[2];let g=n;return c[3]!==u?(r=()=>{let e=e=>{if(e.ctrlKey&&"F6"===e.key){let t=u.filter(ac).sort(al);if(0===t.length)return;let a=t.findIndex(ao),n=(!e.shiftKey?t[a+1]??t[0]:t[a-1]??t[t.length-1])?.current;if(n){if(!["A","BUTTON","INPUT","SELECT","TEXTAREA"].includes(n.tagName)&&!n.hasAttribute("tabindex")){n.setAttribute("tabindex","-1");let e=()=>{n.removeAttribute("tabindex"),n.removeEventListener("blur",e)};n.addEventListener("blur",e,{once:!0})}n.focus()}}};return eg.XC?.addEventListener("keydown",e),()=>{eg.XC?.removeEventListener("keydown",e)}},i=[u],c[3]=u,c[4]=r,c[5]=i):(r=c[4],i=c[5]),(0,x.useEffect)(r,i),c[6]===Symbol.for("react.memo_cache_sentinel")?(o={registerNavigableRef:f,unregisterNavigableRef:g},c[6]=o):o=c[6],s=o,c[7]!==d?(l=(0,m.jsx)(ai.Provider,{value:s,children:d}),c[7]=d,c[8]=l):l=c[8],l}function ao(e){return e.current?.contains(eg.XC?.activeElement||null)}function al(e,t){let a=e.current,n=t.current;return a===n?0:a.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}function ac(e){return null!==e.current}function ad(){let e,t,a=(0,p.c)(4),n=(0,x.useRef)(null),{registerNavigableRef:r,unregisterNavigableRef:i}=(0,x.useContext)(ai);return a[0]!==r||a[1]!==i?(e=()=>(r(n),()=>{i(n)}),t=[r,i],a[0]=r,a[1]=i,a[2]=e,a[3]=t):(e=a[2],t=a[3]),(0,x.useEffect)(e,t),n}try{ai.displayName||(ai.displayName="NavigableRefContext")}catch{}try{as.displayName||(as.displayName="NavigableRefProvider")}catch{}var au=a(96615),am=a(68415),ap=a(14253);let ah={trailingVisual:"SparkNavigation-module__trailingVisual--qCzSd"};function af(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(eh,{"aria-current":eg.fV.pathname===ap.cP?"page":void 0,displayName:"Spark",href:ap.cP,icon:P.SparkleIcon,id:ap.eu,contextMenuComponent:(0,m.jsx)(P.ArrowUpRightIcon,{className:ah.trailingVisual})}),t[0]=e):e=t[0],e}try{af.displayName||(af.displayName="SparkNavigation")}catch{}function ag(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let ay=/\/copilot\/spark/;let SparkPlugin=class SparkPlugin{matchView(e){return this.routes.some(t=>t.test(e))}constructor(){ag(this,"id",ap.eu),ag(this,"displayName",ap._x),ag(this,"routes",[ay]),ag(this,"NavigationComponent",af)}};var ax=a(18312),av=a(33005),a_=a(34910),ab=a(10871);let aj={container:"ImmersiveDisabled-module__container--EDOnQ",content:"ImmersiveDisabled-module__content--dpYC9",footer:"ImmersiveDisabled-module__footer--xPpOC",bannerContainer:"ImmersiveDisabled-module__bannerContainer--Y_iqm"};function aS(){let e,t,a=(0,p.c)(2);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:aj.content,children:(0,m.jsx)(a_.A,{})}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsxs)("div",{className:aj.container,children:[e,(0,m.jsx)("div",{className:aj.footer,children:(0,m.jsx)("div",{className:aj.bannerContainer,children:(0,m.jsx)(G.l,{variant:"upsell",title:"Copilot is disabled",hideTitle:!0,description:"Copilot on GitHub is currently disabled by your organization.",primaryAction:(0,m.jsx)(ab.z,{as:"a",href:"https://github.com/settings/copilot",onClick:aC,children:"Settings"})})})})]}),a[1]=t):t=a[1],t}function aC(){return(0,e9.BI)("dotcom_chat.activate",{target:"NO_ACCESS_SETTING_DISABLED",mode:"immersive"})}try{aS.displayName||(aS.displayName="ImmersiveDisabled")}catch{}var aN=a(31637),aw=a(38659),aI=a(74244),ak=a(6901),aE=a(68714),aT=a(99168);function aA(e){let t,a=(0,p.c)(7),{messageId:n,messageIndex:r,messageTimestamp:i}=e,{openPreviewPane:s,openItem:o,updateItem:l}=(0,av.xx)();return a[0]!==n||a[1]!==r||a[2]!==i||a[3]!==o||a[4]!==s||a[5]!==l?(t=(e,t)=>{let a;switch(e.type){case"file":a=(0,aT.by)(e,n,i);break;case"thread-scoped-file":a=(0,aT.oR)({ref:e,messageIndex:r,messageId:n,timestamp:i});break;case"draft-issue":a=(0,aT.oR)({ref:e,messageIndex:r,messageId:n});break;case"issue":a=(0,aT.SI)(e,n);break;default:return}t?.preventDefault(),l(a),o(a.id),s()},a[0]=n,a[1]=r,a[2]=i,a[3]=o,a[4]=s,a[5]=l,a[6]=t):t=a[6],t}function aL(){let e=(0,$.Pk)(),{referenceId:t,messageIndex:a}=function(){let e,t,a,n=(0,p.c)(6),r=(0,ef.zy)();if(n[0]!==r.search){let a=new URLSearchParams(r.search);e=a.get("reference_id"),t=a.get("message_index"),n[0]=r.search,n[1]=e,n[2]=t}else e=n[1],t=n[2];let i=t,s=null;if(null!==i){let e=parseInt(i,10);isNaN(e)||(s=e)}return n[3]!==s||n[4]!==e?(a={referenceId:e,messageIndex:s},n[3]=s,n[4]=e,n[5]=a):a=n[5],a}(),[,n]=(0,ef.ok)(),r=(0,x.useMemo)(()=>e.messages??[],[e.messages]),i=(0,x.useMemo)(()=>null!==a&&a>=0&&a<r.length?r[a]:null,[r,a]),s=(0,x.useMemo)(()=>i?.references??e.currentReferences??[],[i?.references,e.currentReferences]),o=(0,x.useMemo)(()=>t&&s.length?s.find(e=>(0,ek.Vb)(e)===t)??null:null,[t,s]),l=aA({messageIndex:a??r.length,messageId:i?.id,messageTimestamp:i?.createdAt});(0,x.useEffect)(()=>{o&&(l(o),n(e=>{let t=new URLSearchParams(e);return t.delete("reference_id"),t.delete("message_index"),t}))},[o,l,n])}var aD=a(5878),aR=a(70179),aP=a(31075),aO=a(69676),aB=a(82678),aF=a(71941),aM=a(34614),aV=a(32647);let aU={errorFallbackContainer:"ErrorFallback-module__errorFallbackContainer--woWrK"};function a$(e){let t,a,n,r,i=(0,p.c)(5),{regionName:s}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(aV.E.Visual,{children:(0,m.jsx)(P.AlertIcon,{size:"medium"})}),a=(0,m.jsx)(aV.E.Heading,{children:"Something went wrong"}),i[0]=t,i[1]=a):(t=i[0],a=i[1]),i[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(aM.A,{href:"https://support.github.com/",inline:!0,children:"contact support"}),i[2]=n):n=i[2],i[3]!==s?(r=(0,m.jsx)("div",{className:aU.errorFallbackContainer,children:(0,m.jsxs)(aV.E,{children:[t,a,(0,m.jsxs)(aV.E.Description,{children:[s," is temporarily unavailable due to an unknown error. Try reloading the page or, if the error persists,"," ",n,"."]})]})}),i[3]=s,i[4]=r):r=i[4],r}try{a$.displayName||(a$.displayName="ErrorFallback")}catch{}let aW={container:"ContentPreview-module__container--bV98v",toolbar:"ContentPreview-module__toolbar--b58FL",tabsContainer:"ContentPreview-module__tabsContainer--bNywg",actions:"ContentPreview-module__actions--AGnBu",tabs:"ContentPreview-module__tabs--Si9sh",rightDivider:"ContentPreview-module__rightDivider--Ta3Js",leftDivider:"ContentPreview-module__leftDivider--X7WDV",content:"ContentPreview-module__content--o15no"};var az=a(83831),aH=a(83987),aq=a(95267),aG=a(98386);let aK={container:"FailureState-module__container--_USh9",icon:"FailureState-module__icon--mLSLn",heading:"FailureState-module__heading--zWxg1",subtitle:"FailureState-module__subtitle--RsZIp"};function aQ(e){let t,a,n,r,i,s=(0,p.c)(11),{title:o,description:l,icon:c}=e;return s[0]!==c?(t=(0,m.jsx)(c,{size:24,className:aK.icon}),s[0]=c,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),s[2]=a):a=s[2],s[3]!==o?(n=(0,m.jsx)("h2",{className:aK.heading,children:o}),s[3]=o,s[4]=n):n=s[4],s[5]!==l?(r=(0,m.jsx)("p",{className:aK.subtitle,children:l}),s[5]=l,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(i=(0,m.jsxs)("div",{className:aK.container,children:[t,a,n,r]}),s[7]=t,s[8]=n,s[9]=r,s[10]=i):i=s[10],i}try{aQ.displayName||(aQ.displayName="FailureState")}catch{}var aJ=a(30581);let aY={anchor:"VersionSelector-module__anchor--HA1Ko"};function aX(e){let t,a,n,r,i,s=(0,p.c)(16),{item:o,onVersionSelect:l}=e,{versionedItems:c,openItem:d}=(0,av.xx)(),u=(0,aT.oy)(o.id),h=c.get(u)??[],f=h.indexOf(o.id);if((0,x.useEffect)(()=>{l&&h.length>1&&l(`Version${f+1}`)},[f,l,h.length]),h.length<=1)return null;let g=tB.W,y=f+1;s[0]!==y?(t=(0,m.jsx)(tB.W.Button,{variant:"invisible",className:aY.anchor,children:(0,m.jsx)(aJ.g,{version:y,"data-testid":"version-selector"})}),s[0]=y,s[1]=t):t=s[1];let v=tB.W,_=tM.l;s[2]!==o.id||s[3]!==l||s[4]!==d?(a=(e,t)=>(0,m.jsxs)(tM.l.Item,{onSelect:()=>{d(e),l&&l(`Version${t+1}`)},selected:e===o.id,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(aJ.g,{version:t+1})}),"Version ",t+1]},e),s[2]=o.id,s[3]=l,s[4]=d,s[5]=a):a=s[5];let b=h.map(a);return s[6]!==_||s[7]!==b?(n=(0,m.jsx)(_,{selectionVariant:"single",children:b}),s[6]=_,s[7]=b,s[8]=n):n=s[8],s[9]!==v.Overlay||s[10]!==n?(r=(0,m.jsx)(v.Overlay,{children:n}),s[9]=v.Overlay,s[10]=n,s[11]=r):r=s[11],s[12]!==g||s[13]!==t||s[14]!==r?(i=(0,m.jsxs)(g,{children:[t,r]}),s[12]=g,s[13]=t,s[14]=r,s[15]=i):i=s[15],i}try{aX.displayName||(aX.displayName="VersionSelector")}catch{}var aZ=a(653),a0=a(21059),a1=a(42080),a2=a(9852),a3=a(63867),a4=a(21110);let a5={dialogFooter:"BulkCreateDialog-module__dialogFooter--YqZvT",dialogFooterStatus:"BulkCreateDialog-module__dialogFooterStatus--KsQ2J",dialogFooterActions:"BulkCreateDialog-module__dialogFooterActions--m5L85",loadingIndicator:"BulkCreateDialog-module__loadingIndicator--xHB2u"};var a6=a(12528);let a7={container:"IssueTree-module__container--EErcx",subHeader:"IssueTree-module__subHeader--VwzZz",tree:"IssueTree-module__tree--h8xrq",grid:"IssueTree-module__grid--jV9IQ",item:"IssueTree-module__item--GkRJ9",rootItem:"IssueTree-module__rootItem--ztRGi",spacer:"IssueTree-module__spacer--aWeSP",leadingVisual:"IssueTree-module__leadingVisual--Z1iK2",content:"IssueTree-module__content--nIUaP",title:"IssueTree-module__title--SLEKZ",trailingVisual:"IssueTree-module__trailingVisual--MqocH"},a8=x.createContext({hasTrailingVisuals:void 0}),a9=x.createContext({level:0});function ne(e){let t,a,n,r,i,s,o,l=(0,p.c)(15),{subIssueCount:c,hasTrailingVisuals:d,children:u}=e,h=void 0!==d&&d;if(l[0]!==u){let e=x.Children.toArray(u);t=e.find(na),a=e.filter(nt),l[0]=u,l[1]=t,l[2]=a}else t=l[1],a=l[2];let f=a;l[3]!==h?(r={hasTrailingVisuals:h},l[3]=h,l[4]=r):r=l[4],n=r;let g=!!h||void 0;return l[5]!==f||l[6]!==c?(i=f.length>0&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:a7.subHeader,children:["Sub-issues",(0,m.jsx)(a6.A,{children:c})]}),(0,m.jsx)("ul",{role:"tree",className:a7.tree,children:f})]}),l[5]=f,l[6]=c,l[7]=i):i=l[7],l[8]!==t||l[9]!==g||l[10]!==i?(s=(0,m.jsxs)("div",{className:a7.container,"data-has-trailing-visual":g,children:[t,i]}),l[8]=t,l[9]=g,l[10]=i,l[11]=s):s=l[11],l[12]!==n||l[13]!==s?(o=(0,m.jsx)(a8.Provider,{value:n,children:s}),l[12]=n,l[13]=s,l[14]=o):o=l[14],o}function nt(e){return x.isValidElement(e)&&e.type===nr}function na(e){return x.isValidElement(e)&&e.type===nn}function nn(e){let t,a,n,r,i=(0,p.c)(4);return i[0]===Symbol.for("react.memo_cache_sentinel")?(a={level:0},i[0]=a):a=i[0],t=a,i[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,y.$)(a7.item,a7.rootItem),i[1]=n):n=i[1],i[2]!==e?(r=(0,m.jsx)(a9.Provider,{value:t,children:(0,m.jsx)("div",{className:n,children:(0,m.jsx)(no,{...e})})}),i[2]=e,i[3]=r):r=i[3],r}function nr(e){let t,a,n,r,i,s,o,l,c,d,u=(0,p.c)(19);if(u[0]!==e?({children:t,...a}=e,u[0]=e,u[1]=t,u[2]=a):(t=u[1],a=u[2]),u[3]!==t){let e=x.Children.toArray(t);n=e.filter(ns),r=e.filter(ni),u[3]=t,u[4]=n,u[5]=r}else n=u[4],r=u[5];let h=r,{level:f}=x.useContext(a9),g=f+1;return u[6]!==g?(s={level:g},u[6]=g,u[7]=s):s=u[7],i=s,u[8]!==h||u[9]!==a?(o=(0,m.jsx)(no,{...a,children:h}),u[8]=h,u[9]=a,u[10]=o):o=u[10],u[11]!==n?(l=n.length>0&&(0,m.jsx)("ul",{role:"group",className:a7.tree,children:n}),u[11]=n,u[12]=l):l=u[12],u[13]!==o||u[14]!==l?(c=(0,m.jsxs)("li",{role:"treeitem","aria-selected":"false",className:a7.item,children:[o,l]}),u[13]=o,u[14]=l,u[15]=c):c=u[15],u[16]!==i||u[17]!==c?(d=(0,m.jsx)(a9.Provider,{value:i,children:c}),u[16]=i,u[17]=c,u[18]=d):d=u[18],d}function ni(e){return!(x.isValidElement(e)&&e.type===nr)}function ns(e){return x.isValidElement(e)&&e.type===nr}function no(e){let t,a,n,r,i,s,o,l,c=(0,p.c)(27),{leadingVisual:d,title:u,trailingBadge:h,trailingVisual:f,href:g,onClick:y}=e,{level:v}=x.useContext(a9),{hasTrailingVisuals:_}=x.useContext(a8);e:{if(g){t="a";break e}if(y){t="button";break e}t="div"}let b=t;c[0]!==v?(a={"--level":v},c[0]=v,c[1]=a):a=c[1];let j=!!y||void 0;if(c[2]!==v?(n=v>0&&(0,m.jsx)("div",{className:a7.spacer}),c[2]=v,c[3]=n):n=c[3],c[4]!==d?(r=(0,m.jsx)("div",{className:a7.leadingVisual,children:d}),c[4]=d,c[5]=r):r=c[5],c[6]!==g||c[7]!==y||c[8]!==u||c[9]!==b){let e;c[11]!==g||c[12]!==y?(e={className:a7.title,href:g,onClick:y},c[11]=g,c[12]=y,c[13]=e):e=c[13],i=x.createElement(b,e,u),c[6]=g,c[7]=y,c[8]=u,c[9]=b,c[10]=i}else i=c[10];return c[14]!==i||c[15]!==h?(s=(0,m.jsxs)("div",{className:a7.content,children:[i,h]}),c[14]=i,c[15]=h,c[16]=s):s=c[16],c[17]!==_||c[18]!==f?(o=_&&(0,m.jsx)("div",{className:a7.trailingVisual,children:f}),c[17]=_,c[18]=f,c[19]=o):o=c[19],c[20]!==a||c[21]!==j||c[22]!==n||c[23]!==r||c[24]!==s||c[25]!==o?(l=(0,m.jsxs)("div",{className:a7.grid,style:a,"data-has-onclick":j,children:[n,r,s,o]}),c[20]=a,c[21]=j,c[22]=n,c[23]=r,c[24]=s,c[25]=o,c[26]=l):l=c[26],l}let nl=Object.assign(ne,{RootItem:nn,Item:nr});try{ne.displayName||(ne.displayName="Tree")}catch{}try{nn.displayName||(nn.displayName="TreeRootItem")}catch{}try{nr.displayName||(nr.displayName="TreeItem")}catch{}try{no.displayName||(no.displayName="TreeItemContent")}catch{}try{nl.displayName||(nl.displayName="IssueTree")}catch{}var nc=a(60439),nd=a(94747),nu=a(97286);function nm(e,t){for(let a of(t(e),e.children))nm(a,t)}function np(){let e,t=(0,p.c)(3),{items:a,versionedItems:n}=(0,av.xx)();if(t[0]!==a||t[1]!==n){let r=[...n.entries()].filter(ng).map(e=>{let[,t]=e,n=t.at(-1);return n?a.get(n):void 0}).filter(nf);for(let t of(e=r.reduce(nh,new Map),r)){if(!t.parentTag)continue;let a=e.get(t.parentTag),n=e.get(t.tag);a&&n&&(n.parent=a,a.children.push(n))}t[0]=a,t[1]=n,t[2]=e}else e=t[2];return e}function nh(e,t){return e.set(t.tag,{item:t,parent:null,children:[]}),e}function nf(e){return!!e}function ng(e){let[t]=e;return t.startsWith("new-issue:")}var ny=a(27221),nx=a(13468);function nv(){let e,t,a=(0,p.c)(4),{messages:n}=(0,$.Pk)();a[0]!==n?(e=(0,nx.B)(n),a[0]=n,a[1]=e):e=a[1];let r=e;return a[2]!==r?(t=(e,t)=>null==e?Promise.resolve(t):n_(t,e.databaseId,r[0]?.threadID),a[2]=r,a[3]=t):t=a[3],t}async function n_(e,t,a){let n=e.match(/(!\[.*\]\(https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+\))/g),r=new Set;for(let e of n||[]){let t=e.match(/https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+/)?.[0];t&&r.add(t)}if(r.size>0){let n=Array.from(r).map(async e=>{let t=await fetch(e),a=await t.blob(),n=a.type.split("/")[1],r=`copilot-image.${n}`,i=await createImageBitmap(a),s=i.width;return i.close(),{file:new File([a],r,{type:a.type}),url:e,width:s}}),i=await Promise.all(n);for(let a of(await Promise.all(i.map(async e=>{if(e)return{uploadedFile:await (0,ny.QM)(e.file,t?.toString()),originalUrl:e.url,width:e.width}}))))if(a){let{uploadedFile:t,originalUrl:n,width:r}=a,i=t.url;if(i){let t=RegExp(`!\\[(.*?)\\]\\(${n}\\)`,"g");e=e.replace(t,`<img alt="$1" width="${r}" src="${i}" />`)}}(0,e9.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_CREATED_IMAGES",mode:"immersive",imageCount:r.size,threadId:a})}return e}function nb(e){return!e.state.error&&e.state.data?.job.state!=="success"&&e.state.data?.job.state!=="error"&&2e3}var nj=a(50363),nS=a(13432),nC=a(39172),nN=a(9798),nw=a(40961),nI=a(5338),nk=a(52392),nE=a(40616);async function nT(e,t,a){let n=await (0,ax.fetchQuery)(e,nk.F,{repoId:t,filename:a}).toPromise();return n&&n.node?(0,nE.EV)(n.node)??null:null}async function nA(e,t,a){let n={},r=new Map;for(let[i,s]of(nm(a,e=>r.set(e.item.tag,e.item)),r)){if(n[i]={errorMessages:[]},!s.repository){n[i].errorMessages.push("Repository is required");continue}let[a,r]=s.repository.split("/");if(!a||!r){n[i].errorMessages.push('Repository must be in the format "owner/repo"');continue}let o=await (0,nc.tZ)(e,a,r);if(!o){n[i].errorMessages.push("Repository not found");continue}if(!o.hasIssuesEnabled){n[i].errorMessages.push("Repository does not have issues enabled");continue}if(o.viewerInteractionLimitReasonHTML){n[i].errorMessages.push(o.viewerInteractionLimitReasonHTML);continue}let l=s.template?await nT(e,o.id,s.template):void 0;if(s.template&&!l){n[i].errorMessages.push("Issue template not found");continue}if(!o.isBlankIssuesEnabled&&!l){n[i].errorMessages.push("Issue template is required");continue}let c=(0,nj.O_)(s.name);if(c.isValid||n[i].errorMessages.push(c.errorMessage||"Issue title is invalid"),l&&(0,nS.GQ)(l.data)){t.current=null;let a=document.createElement("div"),r=(0,nI.H)(a);if((0,nw.flushSync)(()=>{r.render((0,m.jsx)(nN.c,{partialName:"copilot-creates-issues-bulk-validation",wasServerRendered:!1,children:(0,m.jsx)(ax.RelayEnvironmentProvider,{environment:e,children:(0,m.jsx)(nL,{repository:o,draftIssue:s,template:l,outputRef:t})})}))}),!t.current)throw Error("IssueFormRef is not set");let c=t.current;try{if(c.getInvalidInputs().length>0){n[i].errorMessages.push("Invalid form input");continue}s.body=c.markdown()}finally{c.clearSessionStorage(),r.unmount(),a.remove()}}let d=(0,nj.QK)(s.body??"");d.isValid||n[i].errorMessages.push(d.errorMessage||"Issue body is invalid")}return n}function nL(e){let t,a,n,r=(0,p.c)(10),{repository:i,draftIssue:s,template:o,outputRef:l}=e,c=`${i.owner.login}/${i.name}`;if(r[0]!==i.databaseId||r[1]!==i.slashCommandsEnabled||r[2]!==c?(a={type:"issue",repository:{databaseId:i.databaseId,nwo:c,slashCommandsEnabled:i.slashCommandsEnabled}},r[0]=i.databaseId,r[1]=i.slashCommandsEnabled,r[2]=c,r[3]=a):a=r[3],t=a,!(0,nS.GQ)(o.data))return;let d=`copilot-creates-issues:${s.tag}`;return r[4]!==s.defaultValuesById||r[5]!==l||r[6]!==t||r[7]!==d||r[8]!==o.data?(n=(0,m.jsx)(nC.Z,{outputRef:l,issueFormRef:o.data,subject:t,sessionStorageKey:d,defaultValuesById:s.defaultValuesById}),r[4]=s.defaultValuesById,r[5]=l,r[6]=t,r[7]=d,r[8]=o.data,r[9]=n):n=r[9],n}try{nL.displayName||(nL.displayName="IssueFormWrapper")}catch{}var nD=a(99377),nR=a(44435),nP=a(20382);function nO(e){let{messages:t}=(0,$.Pk)();return`new-issue:${e}#${t.length}`}function nB(e,t){return e.set(t.tag,t),e}function nF({issueNode:e,onComplete:t,onCancel:a}){let n=(0,x.useMemo)(()=>{let t=e;for(;t?.parent;)t=t.parent;return t},[e]),r=(0,x.useMemo)(()=>{let e=0;return nm(n,()=>e++),e},[n]),{mutate:i,isLoading:s,data:o,isComplete:l,isError:c,error:d}=function(e){let t,a,n,r=(0,p.c)(13),{issueNode:i}=e;r[0]!==i?(t={issueNode:i},r[0]=i,r[1]=t):t=r[1];let s=function(e){let t,a,n,r=(0,p.c)(9),{issueNode:i}=e,s=(0,ax.useRelayEnvironment)(),o=nv();return r[0]!==i.item.tag?(t=["copilot-issues-bulk-create",i.item.tag],r[0]=i.item.tag,r[1]=t):t=r[1],r[2]!==s||r[3]!==i||r[4]!==o?(a=async()=>{let e=new Map;nm(i,t=>e.set(t.item.tag,t.item));let t=[],a=new Map;for(let[,n]of e){let e=n.body;if(e&&n.repository){let t=a.get(n.repository);if(!t){let[e,r]=n.repository.split("/");null!=e&&null!=r&&(t=await (0,nc.tZ)(s,e,r),a.set(n.repository,t))}e=await o(t,e)}t.push({title:n.name,tag:n.tag,repository_nwo:n.repository,body:e,parent_tag:n.parentTag,labels:n.labels,assignees:n.assignees,milestone:n.milestone,issue_type:n.issueType,template:n.template,projects:n.projects})}let n=await (0,td.Sr)("/copilot_issues/bulk_create",{method:"POST",body:{data:{issues:t}}});if(429===n.status)throw Error((await n.json()).error||"Rate limit exceeded. Please try again later.");if(!n.ok)throw Error((await n.json()).error.message||"Failed to create issues.");return await n.json()},r[2]=s,r[3]=i,r[4]=o,r[5]=a):a=r[5],r[6]!==t||r[7]!==a?(n={mutationKey:t,mutationFn:a},r[6]=t,r[7]=a,r[8]=n):n=r[8],(0,nd.n)(n)}(t),o=function(e){let t,a,n,r=(0,p.c)(7),i=!!e;return r[0]!==e?(t=["copilot-issues-bulk-create-status",e],a=async t=>{let a=await (0,td.Sr)(e);if(!a.ok){let e=await a.json();throw t.client.setQueryData(t.queryKey,e),Error(e?.job.error_message||"Failed to fetch job status")}return await a.json()},r[0]=e,r[1]=t,r[2]=a):(t=r[1],a=r[2]),r[3]!==i||r[4]!==t||r[5]!==a?(n={enabled:i,queryKey:t,queryFn:a,refetchInterval:nb},r[3]=i,r[4]=t,r[5]=a,r[6]=n):n=r[6],(0,nu.I)(n)}(s.data?.jobStatusUrl),l=s.error||o.error,c=s.isError||o.isError;r[2]!==s.isPending||r[3]!==o.data?.job.state||r[4]!==o.isLoading?(a=s.isPending||o.isLoading||["pending","queued","started"].includes(o.data?.job.state||""),r[2]=s.isPending,r[3]=o.data?.job.state,r[4]=o.isLoading,r[5]=a):a=r[5];let d=o.data?.job.state==="success";return r[6]!==s.mutate||r[7]!==o.data||r[8]!==l||r[9]!==c||r[10]!==a||r[11]!==d?(n={mutate:s.mutate,data:o.data,error:l,isError:c,isLoading:a,isComplete:d},r[6]=s.mutate,r[7]=o.data,r[8]=l,r[9]=c,r[10]=a,r[11]=d,r[12]=n):n=r[12],n}({issueNode:n}),u=function(e){let t,a=(0,p.c)(10),{tag:n}=e,r=(0,$.Pk)(),i=(0,H.b)(),{items:s,versionedItems:o,updateItem:l,openItem:c,closeItems:d,openPreviewPane:u}=(0,av.xx)(),m=nO(n);return a[0]!==d||a[1]!==s||a[2]!==i||a[3]!==c||a[4]!==u||a[5]!==r||a[6]!==l||a[7]!==m||a[8]!==o?(t=async e=>{let{parentIssue:t,createdIssues:a}=e;(0,e9.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUES_BULK_CREATED",mode:"immersive",threadId:(0,nR.W)(r)?.id,repositoryId:t.repository.databaseId});let n=a.reduce(nB,new Map),p=[],h=[],f=[];for(let e of a){let t=e.number,a=e.repository.owner.login,r=e.repository.name,i=e.title;l({id:`issue:${a}/${r}/${t}`,messageId:nD.Wp,name:i,owner:a,repo:r,number:t,href:e.url,type:"issue"});let s=`new-issue:${e.tag}`;for(let e of o.get(s)??[])p.push(e);h.push(`[${a}/${r}#${t}](${e.url})`),f.push({url:e.url,parentUrl:e.parentTag?n.get(e.parentTag)?.url:void 0,title:e.title,repository:`${e.repository.owner.login}/${e.repository.name}`,number:e.number,state:"open"})}d(p),c(`issue:${t.repository.owner.login}/${t.repository.name}/${t.number}`),u();let g=(0,nP.Bh)({data:f},{forceQuotes:!0,noArrayIndent:!0,lineWidth:-1}),y=[{type:"text",name:`timeline-event: {"type": "issue-created", "markdownContent": "Created ${a.length} issues"}`,text:`Fetch the details for all saved issues and return them in a code block with YAML following this example format:
\`\`\`\`yaml type="issue-tree"
${g}\`\`\`\``}],x=s.get(m);x?.type==="new-issue"&&y.push((0,aT.g)(x)),await i.sendChatMessage({thread:(0,nR.W)(r),content:`Saved the issues to ${h.join(", ")} in repo ${t.repository.name}`,references:y,topic:r.currentTopic,context:r.context,customInstructions:r.customInstructions,model:r.model})},a[0]=d,a[1]=s,a[2]=i,a[3]=c,a[4]=u,a[5]=r,a[6]=l,a[7]=m,a[8]=o,a[9]=t):t=a[9],t}(n.item),{loading:h,result:f}=function(e){let t,a,n,r,i=(0,p.c)(8),[s,o]=(0,x.useState)(!1);i[0]===Symbol.for("react.memo_cache_sentinel")?(t={},i[0]=t):t=i[0];let[l,c]=(0,x.useState)(t),d=(0,ax.useRelayEnvironment)(),u=(0,x.useRef)(null);return i[1]!==d||i[2]!==e?(a=()=>{let t=async function(){o(!0),c(await nA(d,u,e)),o(!1)};(0,Q.G7)("copilot_immersive_draft_issue_tree_validation")&&t()},n=[d,e],i[1]=d,i[2]=e,i[3]=a,i[4]=n):(a=i[3],n=i[4]),(0,x.useEffect)(a,n),i[5]!==s||i[6]!==l?(r={loading:s,result:l},i[5]=s,i[6]=l,i[7]=r):r=i[7],r}(n),g=(0,x.useMemo)(()=>f&&Object.values(f).some(e=>e.errorMessages.length>0),[f]);(0,x.useEffect)(()=>{if(!o||!l)return;let e=new Map;nm(n,t=>{e.set(t.item.tag,t.item)});let a=o.job.completed_issues.map(t=>{let a=e.get(t.tag),[n,r]=a.repository.split("/");return{tag:t.tag,parentTag:a.parentTag,repository:{databaseId:t.repository_id,name:r,owner:{login:n}},number:t.number,title:a.name,url:t.href}}),r={parentIssue:a.find(e=>e.tag===n.item.tag),createdIssues:a};t(),u(r)},[n,o,l,t,u]);let y=(0,x.useCallback)(()=>{s||l||i()},[s,l,i]),v=(0,x.useCallback)(()=>{s||l||a()},[s,l,a]);return(0,m.jsx)(a2.l,{title:"Create all linked draft issues?",onClose:v,renderFooter:()=>h?null:(0,m.jsxs)(a2.l.Footer,{className:a5.dialogFooter,children:[(0,m.jsx)("div",{className:a5.dialogFooterStatus,children:c&&(0,m.jsx)(a4.v,{variant:"critical",children:d?.message})}),(0,m.jsxs)("div",{className:a5.dialogFooterActions,children:[(0,m.jsx)(eU.Q,{variant:"default",onClick:v,inactive:s||l,children:"Cancel"}),(0,m.jsxs)(eU.Q,{variant:"primary",onClick:y,loading:s||l,disabled:g||c,children:["Create ",r," issues"]})]})]}),children:h?(0,m.jsx)("div",{className:a5.loadingIndicator,role:"status","aria-label":"Validating issues",children:(0,m.jsx)(a3.A,{})}):g?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(G.l,{variant:"warning",hideTitle:!0,title:"Validation errors",description:"Fill out missing required fields to create all of these issues.",className:"mb-3"}),(0,m.jsx)(nM,{issueNode:n,iconSelector:e=>{if(f?.[e.item.tag]?.errorMessages.length)return(0,m.jsx)(P.AlertIcon,{className:"fgColor-attention","data-testid":`warning-icon-${e.item.tag}`})}})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{children:"These drafts are linked. Creating a sub-issue automatically publishes its parent and any nested drafts."}),(0,m.jsx)(nM,{issueNode:n,iconSelector:e=>{if(o?.job.completed_issues.some(t=>t.tag===e.item.tag))return(0,m.jsx)(P.CheckIcon,{className:"fgColor-success","data-testid":`success-icon-${e.item.tag}`})}})]})})}function nM({issueNode:e,iconSelector:t}){let{versionedItems:a}=(0,av.xx)(),n=(0,x.useMemo)(()=>{let t=0;return nm(e,e=>{e.parent&&t++}),t},[e]),r=e=>{let n=(0,aT.LU)(e.item.id,a);return(0,m.jsx)(nl.Item,{title:e.item.name,leadingVisual:(0,m.jsx)(P.IssueDraftIcon,{className:"fgColor-muted"}),trailingBadge:null!=n?(0,m.jsx)(aJ.g,{version:n}):void 0,trailingVisual:t?.(e),children:e.children.length>0&&e.children.map(r)},e.item.tag)},i=(0,aT.LU)(e.item.id,a);return(0,m.jsxs)(nl,{subIssueCount:n,hasTrailingVisuals:!0,children:[(0,m.jsx)(nl.RootItem,{title:e.item.name,leadingVisual:(0,m.jsx)(P.IssueDraftIcon,{className:"fgColor-muted"}),trailingBadge:null!=i?(0,m.jsx)(aJ.g,{version:i}):void 0,trailingVisual:t?.(e)}),e.children.length>0&&e.children.map(r)]})}try{nF.displayName||(nF.displayName="BulkCreateDialog")}catch{}try{nM.displayName||(nM.displayName="IssueTree")}catch{}function nV({issueTemplate:e,issueNode:t,issueFormRef:a,noRepoAccess:n=!1,onClose:r}){let[i,s]=x.useState(!1),o=x.useRef(null),{repository:l}=(0,a0.u)(),c=l&&!e&&!l.isBlankIssuesEnabled,{clearSessionData:d}=(0,a0.u)(),u=(0,x.useCallback)(()=>{d(),a.current?.clearSessionStorage()},[d,a]),p=(0,x.useCallback)(()=>{u(),r?.()},[u,r]),[h,f]=x.useState(!1);return eE.W.draftIssueTree&&(t?.parent||t?.children.length)?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a1.cQ,{commandId:"github:submit-form",variant:"primary",disabled:n,"data-testid":"create-bulk-issue-dialog-button",ref:o,showKeybindingHint:!0,onClick:e=>{e.preventDefault(),f(!0)},children:"Create all"}),h&&(0,m.jsx)(nF,{issueNode:t,onComplete:()=>{f(!1),p()},onCancel:()=>{f(!1)}})]}):l&&l.hasIssuesEnabled?c?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a1.cQ,{commandId:"github:submit-form",variant:"primary","data-testid":"create-issue-dialog-button",ref:o,showKeybindingHint:!0,onClick:e=>{e.preventDefault(),s(!0)},children:"Create"}),i&&(0,m.jsx)(a2.l,{title:"Select a template",onClose:()=>s(!1),footerButtons:[{buttonType:"primary",content:"OK",onClick:()=>s(!1)}],returnFocusRef:o,children:"This repository requires all issues to have a template. To create this issue, first select the appropriate template from the template dropdown."})]}):(0,m.jsx)(aZ.l,{hideCreateMore:!0,className:"width-auto"}):null}try{nV.displayName||(nV.displayName="CreateIssueButton")}catch{}var nU=a(43201),n$=a(13233),nW=a(78758);function nz(e){let t,a,n,r,i,s=(0,p.c)(20),{className:o,messageId:l,messageIndex:c,messageTimestamp:d,references:u,size:h}=e;s[0]!==l||s[1]!==c||s[2]!==d?(t={messageId:l,messageIndex:c,messageTimestamp:d},s[0]=l,s[1]=c,s[2]=d,s[3]=t):t=s[3];let f=aA(t),{updateItem:g,versionedItems:y}=(0,av.xx)();return s[4]!==l||s[5]!==c||s[6]!==d||s[7]!==u||s[8]!==g?(a=()=>{for(let e of u){let t=(0,aT.oR)({ref:e,messageIndex:void 0!==c?c:1,messageId:l,timestamp:d});null!=t&&g(t)}},n=[l,c,d,u,g],s[4]=l,s[5]=c,s[6]=d,s[7]=u,s[8]=g,s[9]=a,s[10]=n):(a=s[9],n=s[10]),(0,x.useEffect)(a,n),s[11]!==c||s[12]!==y?(r=e=>(0,aT.wt)(e,c,y),s[11]=c,s[12]=y,s[13]=r):r=s[13],s[14]!==o||s[15]!==f||s[16]!==u||s[17]!==h||s[18]!==r?(i=(0,m.jsx)(nW.t,{references:u,onClickReference:f,size:h,className:o,getReferenceVersion:r}),s[14]=o,s[15]=f,s[16]=u,s[17]=h,s[18]=r,s[19]=i):i=s[19],i}try{nz.displayName||(nz.displayName="ChatMessageReferences")}catch{}var nH=a(24991);let nq=(0,x.createContext)(null),nG=()=>{let e=(0,x.useContext)(nq);if(!e)throw Error("Missing required ContentPreviewBlockContext provider.");return e};try{nq.displayName||(nq.displayName="ContentPreviewBlockContext")}catch{}var nK=a(23896),nQ=a(65011),nJ=a(57746);function nY(e){let t,a,n,r=(0,p.c)(4),{className:i}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("g",{clipPath:"url(#clip0_6911_7629)",fill:"currentColor",children:(0,m.jsx)("path",{d:"M14.722 6.047a.75.75 0 11-1.5 0V3.615L10.2 6.638a.75.75 0 01-1.06-1.06l3.023-3.024H9.729a.75.75 0 010-1.499h4.243a.75.75 0 01.75.75v4.242zM1.278 9.953a.75.75 0 111.5 0v2.432L5.8 9.362a.75.75 0 011.06 1.06l-3.023 3.024h2.433a.75.75 0 010 1.499H2.028a.75.75 0 01-.75-.75V9.953z"})}),r[0]=t):t=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)("defs",{children:(0,m.jsx)("clipPath",{id:"clip0_6911_7629",children:(0,m.jsx)("path",{fill:"#fff",d:"M0 0H16V16H0z"})})}),r[1]=a):a=r[1],r[2]!==i?(n=(0,m.jsxs)("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"presentation",className:i,children:[t,a]}),r[2]=i,r[3]=n):n=r[3],n}try{nY.displayName||(nY.displayName="ExpandIcon")}catch{}let nX={container:"FileBlock-module__container--zWu5c",header:"FileBlock-module__header--X7DLN",language:"FileBlock-module__language--fbEB2",name:"FileBlock-module__name--rkkGx",previewCode:"FileBlock-module__previewCode--EieE9",isClipped:"FileBlock-module__isClipped--Z6AMg",expandIconContainer:"FileBlock-module__expandIconContainer--JwHHA",insightsButtonContainer:"FileBlock-module__insightsButtonContainer--BRMgP"};function nZ(e){let t,a,n,r,i,s,o,l,c,d,u,h,f,g,v,_,b,j,S,C=(0,p.c)(71),{language:N,name:w,code:I,line:k,children:E,isClipped:T,isStreaming:A,index:L,startOffset:D,endOffset:R}=e,{message:O}=(0,eB.V)(),{updateItem:B,openItem:F,openPreviewPane:M,versionedItems:V,getOpenItems:U}=(0,av.xx)(),{messageIndex:$,messageId:W,messageTimestamp:z,autoOpenPreviewPane:H,markdown:q,hasAutoOpenedPreviewPaneRef:G,setHasAutoOpenedPreviewPane:K}=nG(),{name:Q}=(0,nQ.vL)(N),J=`file:${w}`,Y=`${J}#${$}.${k}`,X=!!I,Z=V.get(J)??[],ee=Z.indexOf(Y),et=Z.length>1&&-1!==ee?ee+1:null;C[0]!==U||C[1]!==Y||C[2]!==L||C[3]!==F||C[4]!==M?(t=(e,t)=>{(0,e9.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_OPENED",mode:"immersive"}),F(Y,void 0===t||t||U().length<1||0===L),e&&M()},C[0]=U,C[1]=Y,C[2]=L,C[3]=F,C[4]=M,C[5]=t):t=C[5];let ea=t;C[6]!==I||C[7]!==Y||C[8]!==A||C[9]!==N||C[10]!==q||C[11]!==W||C[12]!==z||C[13]!==w||C[14]!==X||C[15]!==B?(a=()=>{let e=I?.trimEnd();X&&W!==nD.Wp&&-1!==q.indexOf(e)&&B({messageId:W,id:Y,language:N,name:w,value:I,type:"file",timestamp:new Date(z),isStreaming:A,isUserEdited:!1})},n=[I,N,W,w,B,Y,X,z,A,q],C[6]=I,C[7]=Y,C[8]=A,C[9]=N,C[10]=q,C[11]=W,C[12]=z,C[13]=w,C[14]=X,C[15]=B,C[16]=a,C[17]=n):(a=C[16],n=C[17]),(0,x.useEffect)(a,n),C[18]!==H||C[19]!==G||C[20]!==A||C[21]!==W||C[22]!==ea||C[23]!==X||C[24]!==K?(r=()=>{A&&X&&W!==nD.Wp&&(ea(H&&!G.current,!1),K(!0))},i=[A,X,ea,H,W,G,K],C[18]=H,C[19]=G,C[20]=A,C[21]=W,C[22]=ea,C[23]=X,C[24]=K,C[25]=r,C[26]=i):(r=C[25],i=C[26]),(0,x.useEffect)(r,i);let[en,er]=(0,x.useState)(!1),{publicCodeReferences:ei,codeVulnerabilities:es}=(0,nK.R)(O.copilotAnnotations,D,R);C[27]!==ea?(s=()=>ea(!0),C[27]=ea,C[28]=s):s=C[28];let eo=`View file: ${w}`,el=`chat-message-view-file-${w}`,ec=A?(0,m.jsx)(a3.A,{size:"small",className:nH.sX}):nQ.Yr.has(Q)?(0,m.jsx)(P.MarkdownIcon,{className:nH.sX}):(0,m.jsx)(P.CodeIcon,{className:nH.sX});C[29]!==w?(o=(0,m.jsx)("span",{className:nX.name,children:w}),C[29]=w,C[30]=o):o=C[30],C[31]!==et?(l=null!==et&&(0,m.jsx)(aJ.g,{version:et}),C[31]=et,C[32]=l):l=C[32],C[33]!==nX.language||C[34]!==ec||C[35]!==o||C[36]!==l?(c=(0,m.jsxs)("div",{className:nX.language,children:[ec,o,l]}),C[33]=nX.language,C[34]=ec,C[35]=o,C[36]=l,C[37]=c):c=C[37],C[38]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)("div",{className:nX.expandIconContainer,children:(0,m.jsx)(nY,{})}),C[38]=d):d=C[38],C[39]!==nX.header||C[40]!==c?(u=(0,m.jsxs)("div",{className:nX.header,children:[c,d]}),C[39]=nX.header,C[40]=c,C[41]=u):u=C[41];let ed=T&&nX.isClipped;return C[42]!==ed?(h=(0,y.$)(nX.previewCode,ed),C[42]=ed,C[43]=h):h=C[43],C[44]!==E?(f=(0,m.jsx)("code",{children:E}),C[44]=E,C[45]=f):f=C[45],C[46]!==h||C[47]!==f?(g=(0,m.jsx)("pre",{className:h,"aria-hidden":!0,children:f}),C[46]=h,C[47]=f,C[48]=g):g=C[48],C[49]!==el||C[50]!==u||C[51]!==g||C[52]!==nX.container||C[53]!==s||C[54]!==eo?(v=(0,m.jsxs)("button",{className:nX.container,onClick:s,"aria-label":eo,"data-testid":el,children:[u,g]}),C[49]=el,C[50]=u,C[51]=g,C[52]=nX.container,C[53]=s,C[54]=eo,C[55]=v):v=C[55],C[56]!==es||C[57]!==ei.length||C[58]!==er?(_=(ei.length>0||es.length>0)&&(0,m.jsx)("div",{className:nX.insightsButtonContainer,children:(0,m.jsx)(tF.K,{variant:"invisible",size:"small",icon:P.ShieldIcon,"aria-label":"Code insights",onClick:()=>er(!0)})}),C[56]=es,C[57]=ei.length,C[58]=er,C[59]=_):_=C[59],C[60]!==v||C[61]!==_?(b=(0,m.jsxs)("div",{className:"position-relative",children:[v,_]}),C[60]=v,C[61]=_,C[62]=b):b=C[62],C[63]!==es||C[64]!==en||C[65]!==ei||C[66]!==er?(j=en&&(0,m.jsx)(nJ.t,{publicCodeReferences:ei,codeVulnerabilities:es,onClose:()=>er(!1)}),C[63]=es,C[64]=en,C[65]=ei,C[66]=er,C[67]=j):j=C[67],C[68]!==b||C[69]!==j?(S=(0,m.jsxs)(m.Fragment,{children:[b,j]}),C[68]=b,C[69]=j,C[70]=S):S=C[70],S}try{nZ.displayName||(nZ.displayName="FileBlock")}catch{}let n0="data-fileblock-props",n1=(0,eR.F)(n0),n2=/^name=(?<name>[^\s]+)/,n3=/^name=(?<name>[^\s]+)\n?/,n4={code:(e,t)=>{let a=(0,eR.k)(e,n0);return a?(0,m.jsx)(nZ,{...a,children:e.children}):t}},n5=/^type=(?<type>[^\s]+)\n?/,n6=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e;function n7(e){let{messages:t}=(0,$.Pk)(),a=(0,nx.B)(t);return function(e,t){if(!e)return"";let a=e.match(/(!\[.*?\]\(image\d+\))/g);if(null==a)return e;for(let n of a){let a=/\(image(\d+)\)/,r=parseInt(n.match(a)[1],10),i=t.length-r,s=t[i]?.chatAttachmentUrl||t[i]?.url;if(s){let t=n.replace(a,`(${s})`);e=e.replace(n,t)}}return e}(e,(0,x.useMemo)(()=>a.flatMap(e=>e.mediaContent||[]),[a]))}let n8={container:"DraftIssueBlock-module__container--xuyX4",icon:"DraftIssueBlock-module__icon--unPEF",previewText:"DraftIssueBlock-module__previewText--G_AS3"},n9="data-draft-issue-block",re={fromUnknown:e=>{if("object"!=typeof e||null==e)return null;let t={};return"title"in e&&"string"==typeof e.title&&(t.title=e.title),"tag"in e&&"string"==typeof e.tag&&(t.tag=e.tag),"template-form-values"in e&&"object"==typeof e["template-form-values"]&&null!=e["template-form-values"]&&(t.templateFormValues=Object.fromEntries(Object.entries(e["template-form-values"]).map(([e,t])=>[e,"string"==typeof t?t.trim():t]))),"description"in e&&"string"==typeof e.description&&(t.body=e.description),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"assignees"in e&&Array.isArray(e.assignees)&&(t.assignees=e.assignees.filter(e=>"string"==typeof e)),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"template"in e&&"string"==typeof e.template&&(t.template=e.template),"type"in e&&"string"==typeof e.type&&(t.issueType=e.type),"projects"in e&&Array.isArray(e.projects)&&(t.projects=e.projects.filter(e=>"string"==typeof e)),"milestone"in e&&"string"==typeof e.milestone&&(t.milestone=e.milestone),"parentTag"in e&&"string"==typeof e.parentTag&&(t.parentTag=e.parentTag),t}},rt=e=>{try{let t=(0,nP.Hh)(e);return re.fromUnknown(t)}catch{return null}};function ra({yaml:e,isStreaming:t}){let[a,n]=(0,x.useState)(t);(0,x.useEffect)(()=>{t&&n(!0)},[t]);let{updateItem:r,openItem:i,openPreviewPane:s,versionedItems:o,items:l}=(0,av.xx)(),{messageId:c,messageIndex:d,autoOpenPreviewPane:u,hasAutoOpenedPreviewPaneRef:p,setHasAutoOpenedPreviewPane:h}=nG();e=n7(e);let f=(0,x.useRef)({}),g=(0,x.useMemo)(()=>{let t=rt(e);return null!=t?(f.current=t,t):f.current},[e]);(0,x.useEffect)(()=>(0,e9.BI)("dotcom_chat.activate",{target:"ISSUE_DRAFT_BLOCK_RENDERED",mode:"immersive"}),[]);let y=null!=g.tag?`new-issue:${g.tag}#${d}`:void 0,v=null!=y?(0,aT.LU)(y,o):null,_=null!=y?l.get(y):void 0,b=g.repository||_?.type!=="new-issue"?g.repository:_.repository||"",j=(0,x.useCallback)(({selectItem:e})=>{null!=y&&(i(y,e),(e||u&&!p.current)&&(s(),h(!0)),(0,e9.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},[y,i,u,p,s,h]);(0,x.useEffect)(()=>{null!=y&&r({messageId:c,name:g.title??"",body:g.body,repository:b,id:y,type:"new-issue",tag:g.tag??"",isStreaming:t,template:g.template,issueType:g.issueType,milestone:g.milestone,assignees:g.assignees?.sort()??[],labels:g.labels?.sort()??[],projects:g.projects?.sort()??[],isUserEdited:!1,defaultValuesById:g.templateFormValues??{}})},[y,t,b,g.assignees,g.body,g.tag,g.title,g.labels,g.template,g.issueType,g.projects,g.milestone,g.templateFormValues,c,r]),(0,x.useEffect)(()=>{null!=y&&a&&j({selectItem:!0})},[y,j,a]);let S=(0,x.useCallback)(()=>j({selectItem:!0}),[j]);return(0,m.jsxs)("div",{className:n8.container,role:"button",onClick:S,onKeyDown:e=>{("Enter"===e.code||"Space"===e.code)&&S()},tabIndex:0,children:[t?(0,m.jsx)(a3.A,{size:"small",className:nH.sX}):(0,m.jsx)(P.IssueDraftIcon,{className:n8.icon}),(0,m.jsx)("span",{className:n8.previewText,children:g.title}),null!=v&&(0,m.jsx)(aJ.g,{version:v})]})}try{ra.displayName||(ra.displayName="DraftIssueBlock")}catch{}let rn=(0,eR.F)(n9),rr={div:(e,t)=>{let a=(0,eR.k)(e,n9);return a?(0,m.jsx)(ra,{...a}):t}};function ri({data:e,isStreaming:t}){e=n7(e);let a=(0,x.useRef)([]),n=(0,x.useMemo)(()=>{let t=function(e){try{let t=(0,nP.gh)(e);if(Array.isArray(t))return t.map(re.fromUnknown).filter(e=>!!e).filter(e=>!!e.tag);return null}catch{return null}}(e);return t&&(a.current=t),a.current},[e]),{updateItem:r,openItem:i,openPreviewPane:s,versionedItems:o}=(0,av.xx)(),{messageId:l,messageIndex:c,autoOpenPreviewPane:d,hasAutoOpenedPreviewPaneRef:u,setHasAutoOpenedPreviewPane:h}=nG(),f=(0,x.useCallback)(e=>e.tag?`new-issue:${e.tag}#${c}`:void 0,[c]);(0,x.useEffect)(()=>{for(let e of n){let a=f(e);a&&r({messageId:l,type:"new-issue",id:a,tag:e.tag??"",parentTag:e.parentTag,name:e.title??"",body:e.body,repository:e.repository,template:e.template,issueType:e.issueType,milestone:e.milestone,assignees:e.assignees?.sort()??[],labels:e.labels?.sort()??[],projects:e.projects?.sort()??[],defaultValuesById:e.templateFormValues??{},isUserEdited:!1,isStreaming:t})}},[f,t,n,l,c,r]);let g=(0,x.useCallback)((e,{selectItem:t})=>{let a=f(e);a&&(i(a,t),(t||d&&!u.current)&&(s(),h(!0)),(0,e9.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},[f,i,d,u,s,h]),y=(0,x.useMemo)(()=>{let e=n.reduce((e,t)=>(e.set(t.tag,{item:t,parent:null,children:[]}),e),new Map);for(let t of n){if(!t.parentTag)continue;let a=e.get(t.parentTag),n=e.get(t.tag);a&&n&&(n.parent=a,a.children.push(n))}return Array.from(e.values()).filter(e=>!e.item.parentTag)},[n]),v=function(e){let t,a,n=(0,p.c)(4),[r,i]=(0,x.useState)(!1),s=(0,x.useRef)(e);return n[0]!==r||n[1]!==e?(t=()=>{e&&(s.current=!0),e||!s.current||r||i(!0)},a=[e,r],n[0]=r,n[1]=e,n[2]=t,n[3]=a):(t=n[2],a=n[3]),(0,x.useEffect)(t,a),r}(t);(0,x.useEffect)(()=>{if(v)for(let[e,t]of y.entries())g(t.item,{selectItem:0===e})},[v,y,g]);let _=e=>{let a=f(e.item),n=a?(0,aT.LU)(a,o):null;return(0,m.jsx)(nl.Item,{title:e.item.title??"",leadingVisual:t?(0,m.jsx)(a3.A,{size:"small",className:nH.sX}):(0,m.jsx)(P.IssueDraftIcon,{className:"fgColor-muted"}),trailingBadge:null!=n?(0,m.jsx)(aJ.g,{version:n}):void 0,onClick:()=>g(e.item,{selectItem:!0}),children:e.children.length>0&&e.children.map(_)},e.item.tag)};return(0,m.jsx)(m.Fragment,{children:y.map(e=>{let a=f(e.item),n=a?(0,aT.LU)(a,o):null,r=-1;return nm(e,()=>r++),(0,m.jsxs)(nl,{subIssueCount:r,children:[(0,m.jsx)(nl.RootItem,{title:e.item.title??"",leadingVisual:t?(0,m.jsx)(a3.A,{size:"small",className:nH.sX}):(0,m.jsx)(P.IssueDraftIcon,{className:"fgColor-muted"}),trailingBadge:null!=n?(0,m.jsx)(aJ.g,{"data-testid":"version-label",version:n}):void 0,onClick:()=>g(e.item,{selectItem:!0})}),e.children.length>0&&e.children.map(_)]},e.item.tag)})})}try{ri.displayName||(ri.displayName="DraftIssueTreeBlock")}catch{}let rs="data-draft-tree-issue-block",ro=(0,eR.F)(rs);var rl=a(72534);function rc(e){let t,a,n,r,i,s,o=(0,p.c)(28),{owner:l,repo:c,issueNumber:d,href:u,children:h}=e,{updateItem:f,openItem:g,openPreviewPane:y,items:v}=(0,av.xx)(),{messageId:_}=nG(),b=(0,$.A3)("messages"),j=Number(d),S=`issue:${l}/${c}/${j}`;o[0]!==S||o[1]!==v?(t=v.get(S),o[0]=S,o[1]=v,o[2]=t):t=o[2];let C=t;o[3]!==C?.name||o[4]!==_||o[5]!==b||o[6]!==j||o[7]!==l||o[8]!==c?(a=function(e,t,a,n,r){if(!a||!n||!r||isNaN(r))return;let i=e.find(e=>e.id===t),s=i?.references,o=s?.find(e=>"issue"===e.type&&e.number===r&&e.repository.name===n&&e.repository.owner===a),l=o?.title;if(l)return l;let c=s?.find(e=>"api-response"===e.type&&"Issue"===e.resourceType&&e.repo===`${a}/${n}`&&e.data.number===r),d=c?.data;return d?.title}(b,_,l,c,j)??C?.name??`Issue #${j}`,o[3]=C?.name,o[4]=_,o[5]=b,o[6]=j,o[7]=l,o[8]=c,o[9]=a):a=o[9];let N=a;return o[10]!==u||o[11]!==S||o[12]!==_||o[13]!==j||o[14]!==l||o[15]!==c||o[16]!==N||o[17]!==f?(n=()=>{l&&c&&f({messageId:_,name:N,number:j,owner:l,repo:c,id:S,href:u,type:"issue"})},r=[S,_,u,j,l,c,N,f],o[10]=u,o[11]=S,o[12]=_,o[13]=j,o[14]=l,o[15]=c,o[16]=N,o[17]=f,o[18]=n,o[19]=r):(n=o[18],r=o[19]),(0,x.useEffect)(n,r),o[20]!==S||o[21]!==g||o[22]!==y?(i=e=>{e.metaKey||e.ctrlKey||(g(S),y(),(0,e9.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_OPENED",mode:"immersive"}),e.preventDefault())},o[20]=S,o[21]=g,o[22]=y,o[23]=i):i=o[23],o[24]!==h||o[25]!==u||o[26]!==i?(s=(0,m.jsx)(aM.A,{href:u,onClick:i,target:"_blank",rel:"noreferrer",children:h}),o[24]=h,o[25]=u,o[26]=i,o[27]=s):s=o[27],s}try{rc.displayName||(rc.displayName="IssueLinkBlock")}catch{}let rd="data-issuelink-props",ru=(0,eR.F)(rd),rm=/\/(?<owner>[^/]+)\/(?<repo>[^/]+)\/issues\/(?<number>\d+)/,rp={span:(e,t)=>{let a=(0,eR.k)(e,rd);return a?(0,m.jsx)(rc,{...a}):t}};var rh=a(39459),rf=a(89169),rg=a(70892);let ry={list:"IssueListBlock-module__list--GM7vt",streaming:"IssueListBlock-module__streaming--HSaKx",toggleContent:"IssueListBlock-module__toggleContent--QwoUs",item:"IssueListBlock-module__item--Z3Nv7",link:"IssueListBlock-module__link--xHV6N",content:"IssueListBlock-module__content--kXyl1",metadata:"IssueListBlock-module__metadata--fIv1v",header:"IssueListBlock-module__header--tb2Am",title:"IssueListBlock-module__title--KvqP1",unknownTitle:"IssueListBlock-module__unknownTitle--tj7iM",number:"IssueListBlock-module__number--FIbRR",labels:"IssueListBlock-module__labels--ergn3",labelIcon:"IssueListBlock-module__labelIcon--AdciQ",description:"IssueListBlock-module__description--FVdIE",icon:"IssueListBlock-module__icon--KVpem",open:"IssueListBlock-module__open--yTQ0j",draft:"IssueListBlock-module__draft--FrF8w",done:"IssueListBlock-module__done--SRM4P",closed:"IssueListBlock-module__closed--jfPZH",unassignedAvatar:"IssueListBlock-module__unassignedAvatar--SawNd",toggleButton:"IssueListBlock-module__toggleButton--BwD3L",shimmer:"IssueListBlock-module__shimmer--BIYQB",toggleIcon:"IssueListBlock-module__toggleIcon--RYlGV"},rx={fromUnknown:e=>{if("object"!=typeof e||null===e)return{};let t={};return"url"in e&&"string"==typeof e.url&&(t.url=e.url),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"draft"in e&&"boolean"==typeof e.draft&&(t.draft=e.draft),"created_at"in e&&"string"==typeof e.created_at&&(t.created_at=e.created_at),"closed_at"in e&&"string"==typeof e.closed_at&&(t.closed_at=e.closed_at),"merged_at"in e&&"string"==typeof e.merged_at&&(t.merged_at=e.merged_at),"title"in e&&"string"==typeof e.title&&(t.title=e.title),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"author"in e&&"string"==typeof e.author&&(t.author=e.author),"comments"in e&&"number"==typeof e.comments&&(t.comments=e.comments),"assignees_avatar_urls"in e&&Array.isArray(e.assignees_avatar_urls)&&(t.assignees_avatar_urls=e.assignees_avatar_urls.filter(e=>"string"==typeof e)),t}};function rv(e){let t,a,n,r,i,s=(0,p.c)(8),{item:o,isStreaming:l}=e,c=o.author;return o.merged_at?(r=o.merged_at,i="Merged"):o.closed_at?(r=o.closed_at,i="Closed"):o.created_at&&(r=o.created_at,i="Opened"),s[0]!==r?(a=(t=r?new Date(r):null)&&isNaN(t.getTime()),s[0]=r,s[1]=t,s[2]=a):(t=s[1],a=s[2]),a&&(t=null),s[3]!==i||s[4]!==c||s[5]!==l||s[6]!==t?(n=c&&t||!l?(0,m.jsxs)("span",{className:ry.description,children:[c," ",c?i?.toLowerCase():i," ",t&&(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(rf.A,{date:t,format:"relative"})})]}):null,s[3]=i,s[4]=c,s[5]=l,s[6]=t,s[7]=n):n=s[7],n}let r_=e=>{try{let t=(0,nP.Hh)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(rx.fromUnknown);return null}catch{return null}};function rb(e){let t,a,n,r,i,s,o,l,c,d,u,h=(0,p.c)(39),{data:f,type:g,isStreaming:v}=e;h[0]!==f?(t=()=>r_(f)??[],h[0]=f,h[1]=t):t=h[1];let[_,b]=(0,x.useState)(t),{updateItem:j,openItem:S,openPreviewPane:C}=(0,av.xx)(),{messageId:N}=nG(),[w,I]=(0,x.useState)(!0);h[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,Q.G7)("copilot_issue_list_show_more"),h[2]=a):a=h[2];let k=a;h[3]!==w||h[4]!==_?(n=k&&w?_.slice(0,10):_,h[3]=w,h[4]=_,h[5]=n):n=h[5];let E=n,T=k&&_.length>10;h[6]!==f?(r=()=>b(e=>r_(f)??e),i=[f],h[6]=f,h[7]=r,h[8]=i):(r=h[7],i=h[8]),(0,x.useEffect)(r,i),h[9]!==g?(s=()=>{"issue"===g?(0,e9.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_RENDERED",mode:"immersive"}):(0,e9.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_RENDERED",mode:"immersive"})},o=[g],h[9]=g,h[10]=s,h[11]=o):(s=h[10],o=h[11]),(0,x.useEffect)(s,o);let A=v&&ry.streaming;if(h[12]!==A?(l=(0,y.$)(ry.list,A),h[12]=A,h[13]=l):l=h[13],h[14]!==v||h[15]!==N||h[16]!==S||h[17]!==C||h[18]!==g||h[19]!==j||h[20]!==E){let e;h[22]!==v||h[23]!==N||h[24]!==S||h[25]!==C||h[26]!==g||h[27]!==j||h[28]!==E.length?(e=(e,t)=>{let a={...e,type:g},n=v&&t===E.length-1,{icon:r,colorClass:i}=function(e){let t,a=null;if("issue"===e.type)"open"!==e.state||e.draft?"closed"!==e.state||e.draft?"open"===e.state&&e.draft?(a=(0,m.jsx)(P.IssueDraftIcon,{"aria-label":"Draft issue"}),t=ry.draft):"closed"===e.state&&e.draft&&(a=(0,m.jsx)(P.SkipIcon,{"aria-label":"Closed draft issue"}),t=ry.draft):(a=(0,m.jsx)(P.IssueClosedIcon,{"aria-label":"Closed issue"}),t=ry.done):(a=(0,m.jsx)(P.IssueOpenedIcon,{"aria-label":"Open issue"}),t=ry.open);else if("pr"===e.type){let n="string"==typeof e.merged_at&&e.merged_at.length>0;"open"===e.state&&!n&&e.draft?(a=(0,m.jsx)(P.GitPullRequestDraftIcon,{"aria-label":"Draft pull request"}),t=ry.draft):"open"!==e.state||n||e.draft?"closed"!==e.state||n?"closed"===e.state&&n&&(a=(0,m.jsx)(P.GitMergeIcon,{"aria-label":"Merged pull request"}),t=ry.done):(a=(0,m.jsx)(P.GitPullRequestClosedIcon,{"aria-label":"Closed pull request"}),t=ry.closed):(a=(0,m.jsx)(P.GitPullRequestIcon,{"aria-label":"Pull request"}),t=ry.open)}return{icon:a,colorClass:t}}(a);return(0,m.jsx)("li",{className:ry.item,children:(0,m.jsxs)("div",{className:ry.content,children:[(0,m.jsx)("div",{className:(0,y.$)(i,ry.icon),children:r}),(0,m.jsxs)("div",{className:ry.header,children:[n&&!a.title?null:(0,m.jsx)("a",{...(0,aG.G)("issue-list-item-link"),href:a.url??"#",className:ry.link,onClick:e=>{if(!e.metaKey&&!e.ctrlKey&&(e.preventDefault(),a.url))if("issue"===a.type){(0,e9.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_ITEM_OPEN",mode:"immersive"});let{owner:e,repo:t,number:n}=function(e){let t=/^https?:\/\/[^/]+\/([^/]+)\/([^/]+)\/issues\/(\d+)(\/.*)?$/.exec(e);if(!t)return{};let a=parseInt(t[3]??"0",10);return{owner:t[1],repo:t[2],number:a}}(a.url);if(e&&t&&n){let r=`issue:${e}/${t}/${n}`;j({messageId:N,name:a.title??`Issue #${n}`,number:n,owner:e,repo:t,id:r,href:a.url,type:"issue"}),S(r),C()}}else(0,e9.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_ITEM_OPEN",mode:"immersive"}),window.open(a.url,"_self")},target:"_blank",rel:"noreferrer",children:a.title||void 0===a.number?(0,m.jsxs)(m.Fragment,{children:[a.title?(0,m.jsx)("span",{className:ry.title,children:a.title}):(0,m.jsx)("span",{className:(0,y.$)(ry.title,ry.unknownTitle),children:"Unknown issue"}),void 0!==a.number&&(0,m.jsxs)("span",{className:ry.number,children:["#",a.number]})]}):(0,m.jsxs)("span",{className:ry.title,children:["#",a.number]})}),(0,m.jsxs)("div",{className:ry.labels,children:[a.labels?.length?a.labels.map(rS):null,0!==a.comments&&void 0!==a.comments&&(0,m.jsxs)(ej.A,{size:"small",variant:"secondary",children:[(0,m.jsx)(P.CommentIcon,{className:ry.labelIcon,size:12}),a.comments]})]})]}),(0,m.jsx)(rv,{item:a,isStreaming:n}),(0,m.jsx)("div",{className:ry.metadata,children:void 0===a.assignees_avatar_urls?null:0===a.assignees_avatar_urls.length?(0,m.jsx)("div",{className:ry.unassignedAvatar,role:"img","aria-label":"Unassigned",children:(0,m.jsx)(P.PersonIcon,{size:12})}):(0,m.jsx)("div",{role:"img","aria-label":`${a.assignees_avatar_urls.length} ${1===a.assignees_avatar_urls.length?"assignee":"assignees"}`,children:(0,m.jsx)(rg.A,{disableExpand:!0,children:a.assignees_avatar_urls.map(rj)})})})]})},t)},h[22]=v,h[23]=N,h[24]=S,h[25]=C,h[26]=g,h[27]=j,h[28]=E.length,h[29]=e):e=h[29],c=E.map(e),h[14]=v,h[15]=N,h[16]=S,h[17]=C,h[18]=g,h[19]=j,h[20]=E,h[21]=c}else c=h[21];return h[30]!==w||h[31]!==T||h[32]!==v||h[33]!==_?(d=T&&(0,m.jsx)("li",{className:ry.item,children:(0,m.jsx)("div",{className:(0,y.$)(ry.content,ry.toggleContent),children:(0,m.jsxs)("button",{type:"button",className:(0,y.$)(ry.toggleButton,v&&ry.shimmer),onClick:()=>I(!w),"aria-expanded":!w,"aria-controls":"issue-list",children:[(0,m.jsx)("span",{className:ry.toggleIcon,children:w?(0,m.jsx)(P.UnfoldIcon,{size:16}):(0,m.jsx)(P.FoldIcon,{size:16})}),w?`Show ${_.length-10} more`:"Show less"]})})}),h[30]=w,h[31]=T,h[32]=v,h[33]=_,h[34]=d):d=h[34],h[35]!==c||h[36]!==d||h[37]!==l?(u=(0,m.jsx)("div",{children:(0,m.jsxs)("ul",{id:"issue-list",className:l,children:[c,d]})}),h[35]=c,h[36]=d,h[37]=l,h[38]=u):u=h[38],u}function rj(e){return(0,m.jsx)(rh.r,{src:e,alt:"Assignee avatar"},e)}function rS(e){return(0,m.jsx)(ej.A,{size:"small",variant:"secondary",children:e},e)}try{rv.displayName||(rv.displayName="Description")}catch{}try{rb.displayName||(rb.displayName="ListBlock")}catch{}let rC="data-issues-list-block",rN=(0,eR.F)(rC),rw={div:(e,t)=>{let a=(0,eR.k)(e,rC);return a?(0,m.jsx)(rb,{...a}):t}};function rI(e){if("object"!=typeof e||null===e)return null;let t={};return"url"in e&&"string"==typeof e.url&&(t.url=e.url),"parentUrl"in e&&"string"==typeof e.parentUrl&&(t.parentUrl=e.parentUrl),"title"in e&&"string"==typeof e.title&&(t.title=e.title),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"state"in e&&"string"==typeof e.state&&(t.state=e.state),t}function rk(e){try{let t=(0,nP.Hh)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(rI).filter(e=>!!e).filter(e=>!!e.url);return null}catch{return null}}function rE({data:e}){let[t,a]=(0,x.useState)(()=>rk(e)??[]);(0,x.useEffect)(()=>a(t=>rk(e)??t),[e]);let{messageId:n}=nG(),{updateItem:r,openItem:i,openPreviewPane:s}=(0,av.xx)(),o=(0,x.useMemo)(()=>{let e=t.reduce((e,t)=>(e.set(t.url,{item:t,parent:null,children:[]}),e),new Map);for(let a of t){if(!a.parentUrl)continue;let t=e.get(a.parentUrl),n=e.get(a.url);t&&n&&(n.parent=t,t.children.push(n))}return e},[t]),l=(0,x.useMemo)(()=>Array.from(o.values()).filter(e=>!e.parent),[o]);function c(e){if(!e.url)return;let[t,a]=e.repository?.split("/")??[];if(!t||!a||!e.number)return;let o=`issue:${t}/${a}/${e.number}`;r({messageId:n,name:e.title??"",number:e.number,owner:t,repo:a,id:o,href:e.url,type:"issue"}),i(o),s()}function d(e){return(0,m.jsx)(nl.Item,{title:e.item.title??"",leadingVisual:(0,m.jsx)(rT,{item:e.item}),trailingBadge:(0,m.jsxs)("span",{className:"fgColor-muted",children:[e.item.repository,"#",e.item.number]}),href:e.item.url??"#",onClick:t=>{if(!t.metaKey&&!t.ctrlKey)return t.preventDefault(),c(e.item)},children:e.children.length>0&&e.children.map(d)},e.item.url)}return(0,m.jsx)(m.Fragment,{children:l.map(e=>{let t=-1;return nm(e,()=>t++),(0,m.jsxs)(nl,{subIssueCount:t,children:[(0,m.jsx)(nl.RootItem,{leadingVisual:(0,m.jsx)(rT,{item:e.item}),title:e.item.title??"",trailingBadge:(0,m.jsxs)("span",{className:"fgColor-muted",children:[e.item.repository,"#",e.item.number]}),href:e.item.url??"#",onClick:t=>{if(!t.metaKey&&!t.ctrlKey)return t.preventDefault(),c(e.item)}}),e.children.map(d)]},e.item.url)})})}function rT(e){let t=(0,p.c)(2),{item:a}=e;if("open"===a.state){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(P.IssueOpenedIcon,{className:"fgColor-open"}),t[0]=e):e=t[0],e}if("closed"===a.state){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(P.IssueClosedIcon,{className:"fgColor-done"}),t[1]=e):e=t[1],e}}try{rE.displayName||(rE.displayName="IssueTreeBlock")}catch{}try{rT.displayName||(rT.displayName="LeadingVisual")}catch{}let rA="data-tree-issue-block",rL=(0,eR.F)(rA),rD={markdownOverrides:"MarkdownViewer-module__markdownOverrides--ghD5J"},rR=e=>{let t,a,n,r,i,s,o,l,c,d,u,h,f,g,y,v,_,b,j=(0,p.c)(34);j[0]!==e?({messageId:n,messageIndex:r,messageTimestamp:i,autoOpenPreviewPane:t,markdown:a,...s}=e,j[0]=e,j[1]=t,j[2]=a,j[3]=n,j[4]=r,j[5]=i,j[6]=s):(t=j[1],a=j[2],n=j[3],r=j[4],i=j[5],s=j[6]);let S=(0,x.useRef)(!1);j[7]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{S.current=e},j[7]=o):o=j[7];let C=o;j[8]!==s.extensions?(c=s.extensions??[],d=function(e){return{transformMarkdown:t=>(0,eP.YR)(t,"code",t=>{let a=t.lang??"",{name:n,code:r}=function(e,t){let a=e&&n2.exec(e);if(a)return{name:a.groups?.name,code:t};let n=n3.exec(t);return n?{name:n.groups?.name,code:t.replace(n3,"")}:{code:t}}(t.meta??void 0,t.value);if(!n)return;e.includes(n)||e.push(n);let i=r.split(`
`,6),s=6===i.length,o=s?i.join(`
`):`${i.join(`
`)}
`,l=t.position?.start.line??0;t.value=o,t.data={...t.data,hName:"code",hProperties:{[n1]:JSON.stringify({language:a,name:n,code:r,line:l,isStreaming:t.isStreaming??!1,isClipped:s,index:e.indexOf(n),startOffset:t.position?.start.offset??-1,endOffset:t.position?.end.offset??-1})}}}),transformHtml:e=>(0,eP.YR)(e,"element",(e,t,a)=>{let n=e.children?.[0];a&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&n?.type==="element"&&"code"===n.tagName&&n1 in n.properties&&a.children.splice(t,1,n)}),reactComponents:n4}}([]),j[8]=s.extensions,j[9]=c,j[10]=d):(c=j[9],d=j[10]),j[11]===Symbol.for("react.memo_cache_sentinel")?(u={transformMarkdown:e=>(0,eP.YR)(e,"link",e=>{try{if(new URL(e.url,window.location.origin).origin!==window.location.origin)return}catch{return}let t=rm.exec(e.url);if(!t?.groups)return;let{owner:a="",repo:n="",number:r=""}=t.groups;e.data={hName:"span",hProperties:{[ru]:JSON.stringify({owner:a,repo:n,issueNumber:r,href:e.url,children:(0,rl.d)(e)})}}}),reactComponents:rp},h={transformMarkdown:e=>(0,eP.YR)(e,"code",e=>{if("list"!==e.lang)return;let t=n6(n5.exec(e.meta??"")?.groups?.type??"");("issue"===t||"pr"===t)&&(e.data={hName:"div",hProperties:{[rN]:JSON.stringify({data:e.value,type:t,isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,eP.YR)(e,"element",(e,t,a)=>{let n=e.children?.[0];a&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&n?.type==="element"&&rN in n.properties&&a.children.splice(t,1,n)}),reactComponents:rw},f={transformMarkdown:e=>(0,eP.YR)(e,"code",e=>{"yaml"===e.lang&&"draft-issue"===n6(n5.exec(e.meta??"")?.groups?.type??"")&&(e.data={hName:"div",hProperties:{[rn]:JSON.stringify({yaml:e.value,isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,eP.YR)(e,"element",(e,t,a)=>{let n=e.children?.[0];a&&null!=t&&"pre"===e.tagName&&e.children?.length===1&&n?.type==="element"&&rn in n.properties&&a.children.splice(t,1,n)}),reactComponents:rr},j[11]=u,j[12]=h,j[13]=f):(u=j[11],h=j[12],f=j[13]),j[14]!==c||j[15]!==d?(g=[...c,d,u,h,f],j[14]=c,j[15]=d,j[16]=g):g=j[16];let N=g;if(eE.W.draftIssueTree){let e,t,a,n=N;j[17]===Symbol.for("react.memo_cache_sentinel")?(e={transformMarkdown:e=>(0,eP.YR)(e,"code",e=>{"yaml"===e.lang&&"draft-issue-tree"===n6(n5.exec(e.meta??"")?.groups?.type??"")&&(e.data={hName:"div",hProperties:{[ro]:JSON.stringify({data:e.value,isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,eP.YR)(e,"element",(e,t,a)=>{let n=e.children?.[0];a&&null!=t&&"pre"===e.tagName&&e.children?.length===1&&n?.type==="element"&&ro in n.properties&&a.children.splice(t,1,n)}),reactComponents:{div:(e,t)=>{let a=(0,eR.k)(e,rs);return a?(0,m.jsx)(ri,{...a}):t}}},t={transformMarkdown:e=>(0,eP.YR)(e,"code",e=>{"yaml"===e.lang&&"issue-tree"===n6(n5.exec(e.meta??"")?.groups?.type??"")&&(e.data={hName:"div",hProperties:{[rL]:JSON.stringify({data:e.value})},hChildren:[]})}),transformHtml:e=>(0,eP.YR)(e,"element",(e,t,a)=>{let n=e.children?.[0];a&&null!=t&&"pre"===e.tagName&&e.children?.length===1&&n?.type==="element"&&rL in n.properties&&a.children.splice(t,1,n)}),reactComponents:{div:(e,t)=>{let a=(0,eR.k)(e,rA);return a?(0,m.jsx)(rE,{...a}):t}}},j[17]=e,j[18]=t):(e=j[17],t=j[18]),j[19]!==N?(a=[...n,e,t],j[19]=N,j[20]=a):a=j[20],N=a}return l=N,j[21]!==t||j[22]!==a||j[23]!==n||j[24]!==r||j[25]!==i?(v={messageId:n,messageIndex:r,messageTimestamp:i,autoOpenPreviewPane:t,markdown:a,hasAutoOpenedPreviewPaneRef:S,setHasAutoOpenedPreviewPane:C},j[21]=t,j[22]=a,j[23]=n,j[24]=r,j[25]=i,j[26]=v):v=j[26],y=v,j[27]!==l||j[28]!==a||j[29]!==s?(_=(0,m.jsx)(nH.To,{...s,markdown:a,extensions:l,chatMode:"immersive",className:rD.markdownOverrides}),j[27]=l,j[28]=a,j[29]=s,j[30]=_):_=j[30],j[31]!==_||j[32]!==y?(b=(0,m.jsx)(nq.Provider,{value:y,children:_}),j[31]=_,j[32]=y,j[33]=b):b=j[33],b},rP=x.memo(rR);try{rR.displayName||(rR.displayName="MarkdownViewer")}catch{}try{rP.displayName||(rP.displayName="MemoizedMarkdownViewer")}catch{}let rO={timelineEvent:"TimelineEvents-module__timelineEvent--Piv5d",icon:"TimelineEvents-module__icon--IYNGr",situationalTimelineEvent:"TimelineEvents-module__situationalTimelineEvent--vlwlp TimelineEvents-module__timelineEvent--Piv5d",references:"TimelineEvents-module__references--r1iWF ChatMessage-module__references--Kunt2"};function rB(e){return"text"===e.type&&null!=e.name&&e.name.startsWith("timeline-event:")}function rF(e,t){return e.references?.some(e=>rB(e)&&(void 0===t||e.name.startsWith(`timeline-event: {"type": "${t}"`)))??!1}function rM(e){let t,a,n,r=(0,p.c)(10),{message:i,messageIndex:s,isViewingSharedThread:o,isSharedMessage:l,isLatestMessage:c}=e;return r[0]!==i||r[1]!==s?(t=rF(i)&&(0,m.jsx)(rV,{message:i,messageIndex:s}),r[0]=i,r[1]=s,r[2]=t):t=r[2],r[3]!==c||r[4]!==l||r[5]!==o?(a=(0,m.jsx)(r$,{isViewingSharedThread:o,isSharedMessage:l,isLatestMessage:c}),r[3]=c,r[4]=l,r[5]=o,r[6]=a):a=r[6],r[7]!==t||r[8]!==a?(n=(0,m.jsxs)(m.Fragment,{children:[t,a]}),r[7]=t,r[8]=a,r[9]=n):n=r[9],n}function rV(e){let t,a,n,r,i,s,o,l=(0,p.c)(24),{message:c,messageIndex:d}=e,{updateItem:u}=(0,av.xx)();if(l[0]!==c.createdAt||l[1]!==c.id||l[2]!==c.references||l[3]!==d||l[4]!==u?(t=()=>{if(c.references)for(let e of c.references){let t=(0,aT.oR)({ref:e,messageIndex:d,messageId:c.id,timestamp:c.createdAt});null!=t&&u(t)}},a=[c.references,c.id,d,c.createdAt,u],l[0]=c.createdAt,l[1]=c.id,l[2]=c.references,l[3]=d,l[4]=u,l[5]=t,l[6]=a):(t=l[5],a=l[6]),(0,x.useEffect)(t,a),l[7]!==c.references){n=Symbol.for("react.early_return_sentinel");e:{let e=c.references?.filter(rU);if(!e){n=void 0;break e}for(let t of(r=[],e)){let e=JSON.parse(t.name.replace("timeline-event: ","")),a=t.icon||P.CheckIcon;r.push({type:e.type,markdownContent:e.markdownContent,icon:a})}}l[7]=c.references,l[8]=n,l[9]=r}else n=l[8],r=l[9];return n!==Symbol.for("react.early_return_sentinel")?n:(l[10]!==c.createdAt||l[11]!==c.id||l[12]!==c.references||l[13]!==d?(i=c.references&&c.references.length>0&&(0,m.jsx)(nz,{className:rO.references,messageId:c.id,messageTimestamp:c.createdAt,messageIndex:d,references:c.references,size:"medium"}),l[10]=c.createdAt,l[11]=c.id,l[12]=c.references,l[13]=d,l[14]=i):i=l[14],l[15]!==c.content||l[16]!==c.createdAt||l[17]!==c.id||l[18]!==d||l[19]!==r?(s=r.map(e=>{let{type:t,markdownContent:a,icon:n}=e;return(0,m.jsxs)("div",{className:rO.timelineEvent,children:[(0,m.jsx)(n,{className:rO.icon}),(0,m.jsx)(rR,{autoOpenPreviewPane:!1,markdown:a,messageId:c.id,messageIndex:d,messageTimestamp:c.createdAt,accessibleHeader:(0,ek.hV)("Timeline",c.content??"")})]},t)}),l[15]=c.content,l[16]=c.createdAt,l[17]=c.id,l[18]=d,l[19]=r,l[20]=s):s=l[20],l[21]!==i||l[22]!==s?(o=(0,m.jsxs)(m.Fragment,{children:[i,s]}),l[21]=i,l[22]=s,l[23]=o):o=l[23],o)}function rU(e){return rB(e)}function r$(e){let t,a,n,r=(0,p.c)(9),{isSharedMessage:i,isViewingSharedThread:s,isLatestMessage:o}=e;return r[0]!==i||r[1]!==s?(t=i&&!s&&(0,m.jsxs)("div",{className:rO.situationalTimelineEvent,children:[(0,m.jsx)(P.LinkIcon,{className:rO.icon})," Messages up to this point are included in shared link"]}),r[0]=i,r[1]=s,r[2]=t):t=r[2],r[3]!==o||r[4]!==s?(a=o&&eE.W.copilotDuplicateThread&&s&&(0,m.jsxs)("div",{className:rO.situationalTimelineEvent,children:[(0,m.jsx)(P.RepoForkedIcon,{className:rO.icon})," Messages beyond this point will start a new private conversation"]}),r[3]=o,r[4]=s,r[5]=a):a=r[5],r[6]!==t||r[7]!==a?(n=(0,m.jsxs)(m.Fragment,{children:[t,a]}),r[6]=t,r[7]=a,r[8]=n):n=r[8],n}try{rM.displayName||(rM.displayName="TimelineEvents")}catch{}try{rV.displayName||(rV.displayName="UserMessageTimelineEvent")}catch{}try{r$.displayName||(r$.displayName="SituationalTimelineEvents")}catch{}var rW=a(95629),rz=a(17063),rH=a(9039),rq=a(630),rG=a(25862),rK=a(70924),rQ=a(83779),rJ=a(50146);function rY({issue:e}){let{openItem:t,versionedItems:a}=(0,av.xx)(),n=np(),r=function(){let e,t=(0,p.c)(4),a=(0,H.b)(),n=(0,$.Pk)(),{updateItem:r}=(0,av.xx)();return t[0]!==a||t[1]!==n||t[2]!==r?(e=async e=>{let t={type:"text",name:`timeline-event: {"type": "unlink-sub-issue", "markdownContent": "Unlinked sub-issue '${e.name}'"}`,text:`Unlink the sub issue '${e.tag}' from its parent issue by removing the 'parentTag' field. Return the updated '${e.tag}' draft-issue.`},i={...e,parentTag:void 0,isUserEdited:!1};r(i);let s=(0,aT.g)(i);await a.sendChatMessage({thread:(0,nR.W)(n),content:"Unlink the sub-issue from its parent issue",references:[t,s],topic:n.currentTopic,context:n.context,customInstructions:n.customInstructions,model:n.model})},t[0]=a,t[1]=n,t[2]=r,t[3]=e):e=t[3],e}(),i=n.get(e.tag),s=i?i.children:[],o=(0,x.useMemo)(()=>{if(!i)return 0;let e=-1;return nm(i,()=>e++),e},[i]);if(!eE.W.draftIssueTree)return null;let l=e=>{let n=(0,aT.LU)(e.item.id,a);return(0,m.jsx)(rz.r,{title:(0,m.jsx)(rK.T,{value:e.item.name,onClick:()=>{t(e.item.id,!0)},trailingBadges:null!=n?[(0,m.jsx)(aJ.g,{version:n},`${e.item.tag}#${n}`)]:void 0}),secondaryActions:(0,m.jsx)(rH.o,{actions:[],staticMenuActions:[{key:"unlink",render:()=>(0,m.jsxs)(tM.l.Item,{onSelect:()=>r(e.item),children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.LinkIcon,{})}),"Unlink sub-issue"]},`${e.item.tag}-unlink`)}]}),subItems:e.children?.length?e.children.map(l):void 0,defaultExpanded:!0,children:(0,m.jsx)(rq.Q,{children:(0,m.jsx)(rG.D,{children:(0,m.jsx)(P.IssueDraftIcon,{})})})},e.item.tag)};return(0,m.jsx)("div",{className:"mt-2 border rounded-2",children:(0,m.jsx)(rW.v,{title:"Sub-issues",header:(0,m.jsx)(rQ.s,{title:(0,m.jsx)(rJ.c,{title:"Sub-issues",className:"p-0",children:(0,m.jsx)(a6.A,{children:o})}),className:"border-0 bgColor-default"}),children:s.map(l)})})}try{rY.displayName||(rY.displayName="SubissuesList")}catch{}var rX=a(52374),rZ=a(11057),r0=a(69487);function r1(e){return(0,r0.readInlineData)(rX.G1,e)}function r2(e){return!!e}var r3=a(23812),r4=a(46996);function r5(e){let{openItem:t,updateItem:a}=(0,av.xx)(),{selectedThreadID:n}=(0,$.Pk)(),r=nO(e.tag),i=`edited-${n}-${r}`,[s,o]=(0,r3.Fo)(i,void 0);return(0,x.useCallback)((i,s=!1)=>{let l,c=!1;for(l in i)(0,r4.A)(i[l],e[l])||(c=!0,"name"!==l&&"body"!==l&&"defaultValuesById"!==l&&(0,e9.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_USER_CHANGED_FIELD",mode:"immersive",threadId:n,repository:e.repository,issueTag:e.tag,userChangedField:l,wasEmpty:function(e){switch(typeof e){case"string":return!e;case"object":if(Array.isArray(e))return!e||0===e.length;return null==e;default:return null==e}}(e[l])}));if(!c)return;let d={...e,...i};!s&&(d.id=r,d.isUserEdited=!0,eE.W.copilotPersistEditedDraftIssues&&o(d)),a(d),t(d.id)},[e,a,t,n,r,o])}function r6(e){return e.login}function r7(e){return e.login}let r8=function(){var e={defaultValue:100,kind:"LocalArgument",name:"count"},t={defaultValue:"",kind:"LocalArgument",name:"labelNames"},a={defaultValue:null,kind:"LocalArgument",name:"owner"},n={defaultValue:null,kind:"LocalArgument",name:"repo"},r=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],i=[{kind:"Variable",name:"first",variableName:"count"},{kind:"Variable",name:"names",variableName:"labelNames"},{kind:"Literal",name:"orderBy",value:{direction:"ASC",field:"NAME"}}],s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o=[s,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameHTML",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}];return{fragment:{argumentDefinitions:[e,t,a,n],kind:"Fragment",metadata:null,name:"useLabelsQueryQuery",selections:[{alias:null,args:r,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:i,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"InlineDataFragmentSpread",name:"LabelPickerLabel",selections:o,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,n,t,e],kind:"Operation",name:"useLabelsQueryQuery",selections:[{alias:null,args:r,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:i,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:o,storageKey:null}],storageKey:null},s],storageKey:null}]},params:{id:"b807cb351c9187646a1c1af734d12afb",metadata:{},name:"useLabelsQueryQuery",operationKind:"query",text:null}}}();r8.hash="e88ca04244b8cb67aad293081213c7ad";var r9=a(62110);function ie(e){return(0,r9.P5)(e)}function it(e){return!!e}function ia(e){return e.name}function ir(e){return e.name}var ii=a(71400),is=a(90189);function io(e){return!1===e.hasReachedItemsLimit}function il(e){return!1===e.closed}function ic(e){return e.toLowerCase()}function id(e,t){return e.set(t.id,t),e}function iu(e){return(0,r0.readInlineData)(is.dW,e)}function im(e){return!!e}function ip(e){return e?.node}function ih(e){return(0,r0.readInlineData)(is.dW,e)}function ig(e){return!!e}function iy(e){return e?.node}function ix(e){return(0,r0.readInlineData)(is.dW,e)}function iv(e){return!!e}function i_(e){return e?.node}function ib(e){return(0,r0.readInlineData)(is.dW,e)}function ij(e){return!!e}function iS(e){return e.title}function iC(e){return e.title}var iN=a(3213);function iw(e){return(0,r0.readInlineData)(iN.sH,e)}function iI(e){return!!e}function ik(e){return e?.node}function iE(e,t){return e?.toLowerCase()===t?.toLowerCase()}function iT({draftIssue:e,issueNode:t,template:a,issueFormRef:n,loadingTopRepos:r,onCreate:i,onChange:s,onClose:o,onBeforeCreate:l,onFieldChange:c}){let{name:d,body:u="",defaultValuesById:h}=e,{repository:f,clearSessionData:g}=(0,a0.u)(),[y,v]=(0,x.useState)(d),[_,b]=(0,x.useState)(u),j=function(){let e,t=(0,p.c)(3),a=(0,H.b)(),n=(0,$.Pk)();return t[0]!==a||t[1]!==n?(e=async(e,t)=>{let r;if(e.parentMessageID&&(r=n.messages.findLast(t=>t.id===e.parentMessageID&&"root"!==t.id)),!r||!r.content)return;let i={type:"text",name:`timeline-event: {"type": "automatic-retry", "markdownContent": "${t??"Copilot failed to generate a response, retrying\u2026"}"}`,text:r.content,icon:P.XIcon};await a.sendChatMessage({thread:(0,nR.W)(n),content:r.content,references:[...r.references??[],i],topic:n.currentTopic,context:n.context,customInstructions:n.customInstructions,model:n.model,parentMessageId:e.id})},t[0]=a,t[1]=n,t[2]=e):e=t[2],e}(),S=(0,$.Pk)(),C=(0,x.useCallback)(()=>{g(),n.current?.clearSessionStorage()},[g,n]),N=(0,x.useCallback)(()=>{C(),o?.()},[C,o]);if((0,x.useEffect)(()=>{v(d),b(u)},[u,d]),!function(e){let t,a,n,r,i,s,o,l=(0,p.c)(26),{repository:c,assignees:d,setAssignees:u}=(0,a0.u)(),[m,h]=(0,x.useState)(d),f=c?.owner.login,g=c?.name;l[0]!==e.assignees||l[1]!==f||l[2]!==g?(t={owner:f,repo:g,assignees:e.assignees},l[0]=e.assignees,l[1]=f,l[2]=g,l[3]=t):t=l[3];let{isLoading:y,data:v}=function(e){let t,a,n,r,i,s=(0,p.c)(16),{owner:o,repo:l,assignees:c}=e,d=(0,ax.useRelayEnvironment)();s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,rZ.M)({includeAuthorableBots:!1,includeAssignableBots:!0}),s[0]=t):t=s[0];let u=t;return s[1]!==d?(a=JSON.stringify(d),s[1]=d,s[2]=a):a=s[2],s[3]!==c||s[4]!==o||s[5]!==l||s[6]!==a?(n=["copilot-immersive-assignees",a,u,o,l,c],s[3]=c,s[4]=o,s[5]=l,s[6]=a,s[7]=n):n=s[7],s[8]!==c||s[9]!==d||s[10]!==o||s[11]!==l?(r=async()=>{if(!o||!l||!c)return[];let e=await (0,au.SD)({environment:d,query:rX.OE,variables:{owner:o,name:l,loginNames:c.join(",")??[],first:c.length??0,capabilities:u}}).toPromise();return e?.repository?.suggestedActors?.ok?(e?.repository?.suggestedActors?.value.nodes??[]).filter(r2).map(r1):[]},s[8]=c,s[9]=d,s[10]=o,s[11]=l,s[12]=r):r=s[12],s[13]!==n||s[14]!==r?(i={queryKey:n,queryFn:r},s[13]=n,s[14]=r,s[15]=i):i=s[15],(0,nu.I)(i)}(t);l[4]!==v?(a=v?.map(r7)??[],l[4]=v,l[5]=a):a=l[5],l[6]!==e||l[7]!==a?(n={...e,assignees:a},l[6]=e,l[7]=a,l[8]=n):n=l[8];let _=r5(n);l[9]!==y||l[10]!==c||l[11]!==v||l[12]!==u?(r=()=>{!y&&v&&(c?.viewerIssueCreationPermissions?.assignable?u(v):null!=c&&u([]))},l[9]=y,l[10]=c,l[11]=v,l[12]=u,l[13]=r):r=l[13];let b=c?.viewerIssueCreationPermissions?.assignable;l[14]!==y||l[15]!==c||l[16]!==v||l[17]!==u||l[18]!==b?(i=[y,v,u,b,c],l[14]=y,l[15]=c,l[16]=v,l[17]=u,l[18]=b,l[19]=i):i=l[19],(0,x.useEffect)(r,i),l[20]!==d||l[21]!==m||l[22]!==y||l[23]!==_?(s=()=>{y||m===d||(_({assignees:d.map(r6)}),h(d))},o=[y,m,d,_],l[20]=d,l[21]=m,l[22]=y,l[23]=_,l[24]=s,l[25]=o):(s=l[24],o=l[25]),(0,x.useEffect)(s,o)}(e),!function(e){let t,a,n,r,i,s,o,l=(0,p.c)(26),{repository:c,labels:d,setLabels:u}=(0,a0.u)(),[m,h]=(0,x.useState)(d),f=c?.owner.login,g=c?.name;l[0]!==e.labels||l[1]!==f||l[2]!==g?(t={owner:f,repo:g,labels:e.labels},l[0]=e.labels,l[1]=f,l[2]=g,l[3]=t):t=l[3];let{isLoading:y,data:v}=function(e){let t,a,n,r,i=(0,p.c)(15),{owner:s,repo:o,labels:l}=e,c=(0,ax.useRelayEnvironment)();return i[0]!==c?(t=JSON.stringify(c),i[0]=c,i[1]=t):t=i[1],i[2]!==l||i[3]!==s||i[4]!==o||i[5]!==t?(a=["copilot-immersive-labels",t,s,o,l],i[2]=l,i[3]=s,i[4]=o,i[5]=t,i[6]=a):a=i[6],i[7]!==c||i[8]!==l||i[9]!==s||i[10]!==o?(n=async()=>{if(!s||!o||!l)return[];let e=await (0,au.SD)({environment:c,query:r8,variables:{owner:s,repo:o,labelNames:l.join(","),count:l.length}}).toPromise();return(e?.repository?.labels?.nodes??[]).filter(it).map(ie)},i[7]=c,i[8]=l,i[9]=s,i[10]=o,i[11]=n):n=i[11],i[12]!==a||i[13]!==n?(r={queryKey:a,queryFn:n},i[12]=a,i[13]=n,i[14]=r):r=i[14],(0,nu.I)(r)}(t);l[4]!==v?(a=v?.map(ir)??[],l[4]=v,l[5]=a):a=l[5],l[6]!==e||l[7]!==a?(n={...e,labels:a},l[6]=e,l[7]=a,l[8]=n):n=l[8];let _=r5(n);l[9]!==y||l[10]!==c||l[11]!==v||l[12]!==u?(r=()=>{!y&&v&&(c?.viewerIssueCreationPermissions?.labelable?u(v):null!=c&&u([]))},l[9]=y,l[10]=c,l[11]=v,l[12]=u,l[13]=r):r=l[13];let b=c?.viewerIssueCreationPermissions?.labelable;l[14]!==y||l[15]!==c||l[16]!==v||l[17]!==u||l[18]!==b?(i=[y,v,u,b,c],l[14]=y,l[15]=c,l[16]=v,l[17]=u,l[18]=b,l[19]=i):i=l[19],(0,x.useEffect)(r,i),l[20]!==d||l[21]!==m||l[22]!==y||l[23]!==_?(s=()=>{y||m===d||(_({labels:d.map(ia)}),h(d))},o=[y,m,d,_],l[20]=d,l[21]=m,l[22]=y,l[23]=_,l[24]=s,l[25]=o):(s=l[24],o=l[25]),(0,x.useEffect)(s,o)}(e),!function(e){let t,a,n,r,i,s,o,l=(0,p.c)(30),{repository:c,issueType:d,setIssueType:u}=(0,a0.u)(),[m,h]=(0,x.useState)(d),f=c?.owner.login,g=c?.name;l[0]!==f||l[1]!==g?(t={owner:f,repo:g},l[0]=f,l[1]=g,l[2]=t):t=l[2];let{isLoading:y,data:v}=function(e){let t,a,n,r,i=(0,p.c)(13),{owner:s,repo:o}=e,l=(0,ax.useRelayEnvironment)();return i[0]!==l?(t=JSON.stringify(l),i[0]=l,i[1]=t):t=i[1],i[2]!==s||i[3]!==o||i[4]!==t?(a=["copilot-immersive-issue-types",t,s,o],i[2]=s,i[3]=o,i[4]=t,i[5]=a):a=i[5],i[6]!==l||i[7]!==s||i[8]!==o?(n=async()=>{if(!s||!o)return[];let e=await (0,au.SD)({environment:l,query:iN.xS,variables:{owner:s,repo:o,issueTypesPageSize:25}}).toPromise();if(!e?.repository)return[];let t=(0,r0.readInlineData)(iN.Jc,e.repository);return(t?.issueTypes?.edges?.flatMap(ik)??[]).filter(iI).map(iw)},i[6]=l,i[7]=s,i[8]=o,i[9]=n):n=i[9],i[10]!==a||i[11]!==n?(r={queryKey:a,queryFn:n},i[10]=a,i[11]=n,i[12]=r):r=i[12],(0,nu.I)(r)}(t);e:{let t;if(!e.issueType||y){a=null;break e}l[3]!==e.issueType||l[4]!==v?(t=v?.find(t=>iE(t.name,e.issueType)),l[3]=e.issueType,l[4]=v,l[5]=t):t=l[5],a=t}let _=a,b=_?.name;l[6]!==e||l[7]!==b?(n={...e,issueType:b},l[6]=e,l[7]=b,l[8]=n):n=l[8];let j=r5(n);l[9]!==y||l[10]!==c||l[11]!==_||l[12]!==u?(r=()=>{y||(c?.viewerIssueCreationPermissions?.typeable?u(_??null):null!=c&&u(null))},l[9]=y,l[10]=c,l[11]=_,l[12]=u,l[13]=r):r=l[13];let S=c?.viewerIssueCreationPermissions?.typeable;l[14]!==y||l[15]!==c||l[16]!==_||l[17]!==u||l[18]!==S?(i=[y,_,u,S,c],l[14]=y,l[15]=c,l[16]=_,l[17]=u,l[18]=S,l[19]=i):i=l[19],(0,x.useEffect)(r,i),l[20]!==d||l[21]!==m?.name||l[22]!==y||l[23]!==j?(s=()=>{y||iE(m?.name,d?.name)||(j({issueType:d?.name}),h(d))},l[20]=d,l[21]=m?.name,l[22]=y,l[23]=j,l[24]=s):s=l[24],l[25]!==d||l[26]!==m||l[27]!==y||l[28]!==j?(o=[y,m,d,j],l[25]=d,l[26]=m,l[27]=y,l[28]=j,l[29]=o):o=l[29],(0,x.useEffect)(s,o)}(e),!function(e){let t,a,n,r,i,s,o=(0,p.c)(28),{repository:l,milestone:c,setMilestone:d}=(0,a0.u)(),[u,m]=(0,x.useState)(c),h=l?.owner.login,f=l?.name;o[0]!==e.milestone||o[1]!==h||o[2]!==f?(t={owner:h,repo:f,milestone:e.milestone},o[0]=e.milestone,o[1]=h,o[2]=f,o[3]=t):t=o[3];let{isLoading:g,data:y}=function(e){let t,a,n,r,i=(0,p.c)(15),{owner:s,repo:o,milestone:l}=e,c=(0,ax.useRelayEnvironment)();return i[0]!==c?(t=JSON.stringify(c),i[0]=c,i[1]=t):t=i[1],i[2]!==l||i[3]!==s||i[4]!==o||i[5]!==t?(a=["copilot-immersive-milestones",t,s,o,l],i[2]=l,i[3]=s,i[4]=o,i[5]=t,i[6]=a):a=i[6],i[7]!==c||i[8]!==l||i[9]!==s||i[10]!==o?(n=async()=>s&&o&&l?(await (0,ii.Ud)(c,{owner:s,repo:o,query:l,count:1}))[0]??null:null,i[7]=c,i[8]=l,i[9]=s,i[10]=o,i[11]=n):n=i[11],i[12]!==a||i[13]!==n?(r={queryKey:a,queryFn:n},i[12]=a,i[13]=n,i[14]=r):r=i[14],(0,nu.I)(r)}(t),v=y?.title;o[4]!==e||o[5]!==v?(a={...e,milestone:v},o[4]=e,o[5]=v,o[6]=a):a=o[6];let _=r5(a);o[7]!==g||o[8]!==l||o[9]!==y||o[10]!==d?(n=()=>{g||(l?.viewerIssueCreationPermissions?.milestoneable?d(y??null):null!=l&&d(null))},o[7]=g,o[8]=l,o[9]=y,o[10]=d,o[11]=n):n=o[11];let b=l?.viewerIssueCreationPermissions?.milestoneable;o[12]!==g||o[13]!==l||o[14]!==y||o[15]!==d||o[16]!==b?(r=[g,y,d,b,l],o[12]=g,o[13]=l,o[14]=y,o[15]=d,o[16]=b,o[17]=r):r=o[17],(0,x.useEffect)(n,r),o[18]!==c||o[19]!==u?.title||o[20]!==g||o[21]!==_?(i=()=>{var e,t;g||(e=u?.title,t=c?.title,e?.toLowerCase()===t?.toLowerCase())||(_({milestone:c?.title}),m(c))},o[18]=c,o[19]=u?.title,o[20]=g,o[21]=_,o[22]=i):i=o[22],o[23]!==c||o[24]!==u||o[25]!==g||o[26]!==_?(s=[g,u,c,_],o[23]=c,o[24]=u,o[25]=g,o[26]=_,o[27]=s):s=o[27],(0,x.useEffect)(i,s)}(e),!function(e){let t,a,n,r,i,s,o,l=(0,p.c)(26),{repository:c,projects:d,setProjects:u}=(0,a0.u)(),[m,h]=(0,x.useState)(d),f=c?.owner.login,g=c?.name;l[0]!==e.projects||l[1]!==f||l[2]!==g?(t={owner:f,repo:g,projects:e.projects},l[0]=e.projects,l[1]=f,l[2]=g,l[3]=t):t=l[3];let{isLoading:y,data:v}=function(e){let t,a,n,r,i=(0,p.c)(15),{owner:s,repo:o,projects:l}=e,c=(0,ax.useRelayEnvironment)();return i[0]!==c?(t=JSON.stringify(c),i[0]=c,i[1]=t):t=i[1],i[2]!==s||i[3]!==l||i[4]!==o||i[5]!==t?(a=["copilot-immersive-projects",t,s,o,l],i[2]=s,i[3]=l,i[4]=o,i[5]=t,i[6]=a):a=i[6],i[7]!==c||i[8]!==s||i[9]!==l||i[10]!==o?(n=async()=>{if(!s||!o||!l||!l.length)return[];let e=await (0,r0.fetchQuery)(c,is.BT,{owner:s,repo:o,query:l.join(",")}).toPromise(),t=(e?.repository?.projectsV2?.nodes??[]).filter(ij).map(ib),a=(e?.repository?.recentProjects?.edges??[]).map(i_).filter(iv).map(ix),n=[...[...t,...a,...(e?.repository?.owner?.projectsV2?.edges??[]).map(iy).filter(ig).map(ih),...(e?.repository?.owner?.recentProjects?.edges??[]).map(ip).filter(im).map(iu)].reduce(id,new Map).values()],r=new Set(l.map(ic));return n.filter(il).filter(io).filter(e=>r.has(e.title.toLowerCase()))},i[7]=c,i[8]=s,i[9]=l,i[10]=o,i[11]=n):n=i[11],i[12]!==a||i[13]!==n?(r={queryKey:a,queryFn:n},i[12]=a,i[13]=n,i[14]=r):r=i[14],(0,nu.I)(r)}(t);l[4]!==v?(a=v?.map(iC)??[],l[4]=v,l[5]=a):a=l[5],l[6]!==e||l[7]!==a?(n={...e,projects:a},l[6]=e,l[7]=a,l[8]=n):n=l[8];let _=r5(n);l[9]!==y||l[10]!==c||l[11]!==v||l[12]!==u?(r=()=>{!y&&v&&(c?.viewerIssueCreationPermissions?.triageable?u(v):null!=c&&u([]))},l[9]=y,l[10]=c,l[11]=v,l[12]=u,l[13]=r):r=l[13];let b=c?.viewerIssueCreationPermissions?.triageable;l[14]!==y||l[15]!==c||l[16]!==v||l[17]!==u||l[18]!==b?(i=[y,v,u,b,c],l[14]=y,l[15]=c,l[16]=v,l[17]=u,l[18]=b,l[19]=i):i=l[19],(0,x.useEffect)(r,i),l[20]!==d||l[21]!==m||l[22]!==y||l[23]!==_?(s=()=>{y||m===d||(_({projects:d.map(iS)}),h(d))},o=[y,m,d,_],l[20]=d,l[21]=m,l[22]=y,l[23]=_,l[24]=s,l[25]=o):(s=l[24],o=l[25]),(0,x.useEffect)(s,o)}(e),null==f)return r?(0,m.jsx)(aq.Q,{optionConfig:{useViewportQueries:!1}}):(0,m.jsx)(aQ,{title:"Repository required",description:"Please select a repository above to continue creating your issue.",icon:P.IssueDraftIcon});let w=S.messages.at(-1);if(w&&rF(w,"switch-issue-template"))return(0,m.jsx)(aq.Q,{optionConfig:{useViewportQueries:!1}});let I=S.messages.find(t=>t.id===e.messageId),k=I?.parentMessageIndex!==void 0?S.messages[I.parentMessageIndex]:void 0;if(eE.W.draftIssueTemplateFormUI&&I&&k){let e=a&&(0,nS.GQ)(a.data),t=0===Object.keys(h||{}).length,n=!S.isWaitingOnCopilot,r=I.messageIndex===S.messages.length-1,i="assistant"===I.role,s=rF(k,"automatic-retry");if(e&&t)if(!n)return(0,m.jsx)(aq.Q,{optionConfig:{useViewportQueries:!1}});else if(r&&i&&!s)return j(I,"Copilot failed to use the issue template, retrying\u2026"),(0,m.jsx)(aq.Q,{optionConfig:{useViewportQueries:!1}});else return(0,m.jsx)(aQ,{title:"Copilot failed to create an issue",description:"Copilot failed to use the issue template. Please retry or choose a different template.",icon:P.IssueDraftIcon})}return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(nU.e,{repository:f,title:y,body:_,setTitle:e=>{v(e),s?.({name:e})},setBody:e=>{b(e),s?.({body:e})},clearOnCreate:N,issueFormRef:n,onCreateSuccess:({issue:e})=>i?.(e),onCreateError:n$.l,onCancel:N,onBeforeCreate:l,defaultValuesById:h,selectedTemplate:a,onFieldChange:c}),t?.children&&t.children.length>0&&(0,m.jsx)(rY,{issue:e})]})}try{iT.displayName||(iT.displayName="CreateIssueForm")}catch{}let iA={container:"CreateIssuePreview-module__container--UdBdV",toolbar:"CreateIssuePreview-module__toolbar--KnRki FilePreview-module__toolbar--toYCM",toolbarLeft:"CreateIssuePreview-module__toolbarLeft--WCzxL FilePreview-module__toolbarLeft--FG_Fy",toolbarActions:"CreateIssuePreview-module__toolbarActions--euLmx FilePreview-module__toolbarActions--GZPSm",feedbackLink:"CreateIssuePreview-module__feedbackLink--i1Sf3",parentSelectorAnchor:"CreateIssuePreview-module__parentSelectorAnchor--rUXEz",truncateText:"CreateIssuePreview-module__truncateText--ggLwU",form:"CreateIssuePreview-module__form--t92hw"};var iL=a(66576);let iD={container:"RepositoryPicker-module__container--LguWf",label:"RepositoryPicker-module__label--UrLpA",ssoBanner:"RepositoryPicker-module__ssoBanner--iob3k"};function iR(e){let t,a,n,r,i,s,o,l,c,d=(0,p.c)(22),{draftIssue:u,resolvedDraftIssueRepo:h,loadingDraftIssueRepo:f,topRepos:g}=e,[v,_]=(0,x.useState)(void 0),{repository:b,setRepository:j}=(0,a0.u)(),S=r5(u);d[0]!==S||d[1]!==j?(t=e=>{null!=e&&(S({repository:e.nameWithOwner,template:void 0},!1),j(e))},d[0]=S,d[1]=j,d[2]=t):t=d[2];let C=t;!function(e,t,a,n){let r,i,s,o,l,c=(0,p.c)(13),{repository:d,setRepository:u}=(0,a0.u)(),[m,h]=(0,x.useState)(d),f=r5(e);t?.nameWithOwner,d?.nameWithOwner,r=!a&&t?.nameWithOwner==null||t?.nameWithOwner===d?.nameWithOwner,c[0]!==e.isStreaming||c[1]!==a||c[2]!==t||c[3]!==u||c[4]!==n?(i=()=>{e.isStreaming||a||(null!=t?u(t):null!=n&&n.length>0?u(n[0]):u(void 0))},s=[e.isStreaming,a,t,u,n],c[0]=e.isStreaming,c[1]=a,c[2]=t,c[3]=u,c[4]=n,c[5]=i,c[6]=s):(i=c[5],s=c[6]),(0,x.useEffect)(i,s),c[7]!==d||c[8]!==m||c[9]!==f||c[10]!==r?(o=()=>{m!==d&&(f({repository:d?.nameWithOwner},r),h(d))},l=[f,d,r,m],c[7]=d,c[8]=m,c[9]=f,c[10]=r,c[11]=o,c[12]=l):(o=c[11],l=c[12]),(0,x.useEffect)(o,l)}(u,h,f,g),d[3]!==b||d[4]!==f||d[5]!==g?(a=()=>{f||null==b||null==g||g.find(e=>e.id===b.id)||_(b.id)},n=[b,f,g],d[3]=b,d[4]=f,d[5]=g,d[6]=a,d[7]=n):(a=d[6],n=d[7]),(0,x.useEffect)(a,n);let{ssoOrganizations:N}=(0,$.Pk)();d[8]!==N?(i=N?.map(iO)??[],d[8]=N,d[9]=i):i=d[9],r=i;let w=b??g?.[0],I=u.isStreaming||f;return d[10]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(iL.A,{className:(0,y.$)(iD.label,"sr-only"),required:!0,children:"Repository"}),d[10]=s):s=d[10],d[11]!==I?(o={hasIssuesEnabled:!0,readonly:I},d[11]=I,d[12]=o):o=d[12],d[13]!==r?(l=(0,m.jsx)(W.x,{className:iD.ssoBanner,forceWrap:!0,protectedOrgs:r,maxVisibleOrgNames:0,redirectURI:iP}),d[13]=r,d[14]=l):l=d[14],d[15]!==v||d[16]!==C||d[17]!==w||d[18]!==o||d[19]!==l||d[20]!==g?(c=(0,m.jsxs)("div",{className:iD.container,children:[s,(0,m.jsx)(nc.f0,{initialRepository:w,onSelect:C,options:o,topRepositories:g,enforceAtleastOneSelected:!0,subtitle:l},v)]}),d[15]=v,d[16]=C,d[17]=w,d[18]=o,d[19]=l,d[20]=g,d[21]=c):c=d[21],c}function iP(){return`/search/refresh_blackbird_caches?return_to=${location.href}`}function iO(e){return e.login}try{iR.displayName||(iR.displayName="RepositoryPicker")}catch{}let iB=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"owner"},{defaultValue:null,kind:"LocalArgument",name:"repo"}],t=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"filename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},i=[a,n,r,{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],s=[a,n,r,{alias:null,args:null,kind:"ScalarField",name:"about",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"TemplatePickerQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:[a,{kind:"InlineDataFragmentSpread",name:"TemplatePickerForm",selections:i,args:null,argumentDefinitions:[]}],storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:[a,{kind:"InlineDataFragmentSpread",name:"TemplatePickerTemplate",selections:s,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"TemplatePickerQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:i,storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:s,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"453f03781d915408c3c338e5d346e0be",metadata:{},name:"TemplatePickerQuery",operationKind:"query",text:null}}}();iB.hash="582a468668cd62a5a95ad0f91f7ea5e5";let iF={kind:"InlineDataFragment",name:"TemplatePickerForm"};iF.hash="277026edd019ed6ef2c9d27b3d3d6c4a";let iM={kind:"InlineDataFragment",name:"TemplatePickerTemplate"};iM.hash="fa6038bb9389af7bff23ba3491dd0507";var iV=a(52550);function iU(e,t){return e.filename.localeCompare(t.filename)}function i$(e){return(0,r0.readInlineData)(iF,e)}function iW(e){return(0,r0.readInlineData)(iM,e)}function iz(e){let t,a,n,r,i=(0,p.c)(10),{draftIssue:s}=e,{repository:o}=(0,a0.u)(),l=o?.owner.login,c=o?.name;i[0]!==l||i[1]!==c?(t={owner:l,repo:c},i[0]=l,i[1]=c,i[2]=t):t=i[2];let{data:d}=function(e){let t,a,n,r,i=(0,p.c)(13),{owner:s,repo:o}=e,l=(0,ax.useRelayEnvironment)();return i[0]!==l?(t=JSON.stringify(l),i[0]=l,i[1]=t):t=i[1],i[2]!==s||i[3]!==o||i[4]!==t?(a=["copilot-immersive-templates",t,s,o],i[2]=s,i[3]=o,i[4]=t,i[5]=a):a=i[5],i[6]!==l||i[7]!==s||i[8]!==o?(n=async()=>{if(!s||!o)return[];let e=await (0,r0.fetchQuery)(l,iB,{owner:s,repo:o}).toPromise();return[...(e?.repository?.issueTemplates||[]).map(iW),...(e?.repository?.issueForms||[]).map(i$)].sort(iU)},i[6]=l,i[7]=s,i[8]=o,i[9]=n):n=i[9],i[10]!==a||i[11]!==n?(r={queryKey:a,queryFn:n},i[10]=a,i[11]=n,i[12]=r):r=i[12],(0,nu.I)(r)}(t);if(null==d||0===d.length)return null;i[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)("span",{children:"/"}),i[3]=a):a=i[3],i[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(iL.A,{className:(0,y.$)(iD.label,"sr-only"),children:"Template"}),i[4]=n):n=i[4];let u=o?.nameWithOwner,h=o?.isBlankIssuesEnabled;return i[5]!==s||i[6]!==u||i[7]!==h||i[8]!==d?(r=(0,m.jsxs)(m.Fragment,{children:[a,(0,m.jsxs)("div",{className:iD.container,children:[n,(0,m.jsx)(iH,{templates:d,draftIssue:s,repositoryNwo:u,isBlankIssuesEnabled:h})]})]}),i[5]=s,i[6]=u,i[7]=h,i[8]=d,i[9]=r):r=i[9],r}function iH(e){let t,a,n,r,i,s,o,l,c=(0,p.c)(23),{templates:d,draftIssue:u,isBlankIssuesEnabled:h,repositoryNwo:f}=e,[g,y]=(0,x.useState)("");e:{let e;if(!g){t=d;break e}c[0]!==g||c[1]!==d?(e=d?.filter(e=>e.name?.toLowerCase().includes(g.toLowerCase())),c[0]=g,c[1]=d,c[2]=e):e=c[2],t=e}let v=t,[_,b]=(0,x.useState)(void 0);c[3]!==u.template||c[4]!==d?(a=()=>{if(!u.template)return void b(void 0);let e=u.template.split("/").pop();b(d?.find(t=>t.filename===e))},n=[d,u.template],c[3]=u.template,c[4]=d,c[5]=a,c[6]=n):(a=c[5],n=c[6]),(0,x.useEffect)(a,n);let j=function(){let e,t=(0,p.c)(4),a=(0,H.b)(),n=(0,$.Pk)(),{updateItem:r}=(0,av.xx)();return t[0]!==a||t[1]!==n||t[2]!==r?(e=async(e,t,i)=>{let s=[{type:"text",name:`timeline-event: {"type": "switch-issue-template", "markdownContent": "${t?`Changing template to '${t.name}'\u{2026}`:"Removing template\u2026"}"}`,text:t?`Update the selected draft issue with the \`${t.filename}\` template${i?` in the \`${i}\` repository`:""}. Regenerate the title and description following the new template. Maintain all conversation context. Update the metadata to follow the new template. DO NOT change the \`tag\` field.`:"Update the selected draft issue to remove the template formatting. Regenerate the title and description to follow a generic format. Maintain all conversation context. DO NOT change the `tag` field."}];if(e.isUserEdited){let t={...e,...i&&{repository:i},isUserEdited:!1};r(t),s.push((0,aT.g)(t))}await a.sendChatMessage({thread:(0,nR.W)(n),content:t?`Use the '${t.name}' template`:"Remove the template",references:s,topic:n.currentTopic,context:n.context,customInstructions:n.customInstructions,model:n.model})},t[0]=a,t[1]=n,t[2]=r,t[3]=e):e=t[3],e}(),S=(0,x.useRef)(null),C=null!=h&&!h;return c[7]!==v?(r=v??[],c[7]=v,c[8]=r):r=c[8],c[9]!==_?(i=_?[_]:[],c[9]=_,c[10]=i):i=c[10],c[11]!==_||c[12]!==C?(s=e=>(0,m.jsxs)(eU.Q,{trailingVisual:P.TriangleDownIcon,...e,ref:S,children:[_?(0,m.jsx)("span",{children:_.name}):"Select template",C&&(0,m.jsx)("span",{style:{color:"red",marginLeft:4},children:"*"})]}),c[11]=_,c[12]=C,c[13]=s):s=c[13],c[14]!==u||c[15]!==j||c[16]!==f?(o=async e=>{let[t]=e;b(t),await j(u,t,f)},c[14]=u,c[15]=j,c[16]=f,c[17]=o):o=c[17],c[18]!==r||c[19]!==i||c[20]!==s||c[21]!==o?(l=(0,m.jsx)(iV.O,{items:r,initialSelectedItems:i,placeholderText:"Select template",selectionVariant:"single",filterItems:y,renderAnchor:s,getItemKey:iG,convertToItemProps:iq,onSelectionChange:o,selectPanelRef:S,height:"large",width:"medium"}),c[18]=r,c[19]=i,c[20]=s,c[21]=o,c[22]=l):l=c[22],l}function iq(e){return{id:e.filename,text:e.name,description:("IssueTemplate"===e.__typename?e.about:e.description)||void 0,descriptionVariant:"block",source:e}}function iG(e){return e.filename}try{iz.displayName||(iz.displayName="TemplatePicker")}catch{}try{iH.displayName||(iH.displayName="TemplatePickerInternal")}catch{}var iK=a(24058);function iQ(e){var t;let a,n,r,i,s,o,l,c,d,u,h,f,g,y,v,_,b,j,S,C,N,w,I,k,E,T,A,L=(0,p.c)(79),{isPreviewOpening:D,issue:R,onClose:O}=e,{openItem:B}=(0,av.xx)(),F=np();L[0]!==R.tag||L[1]!==F?(a=F.get(R.tag),L[0]=R.tag,L[1]=F,L[2]=a):a=L[2];let M=a,[V,U]=(0,x.useState)(D);L[3]!==V?(n=()=>{if(V){let e=setTimeout(()=>U(!1),400);return()=>clearTimeout(e)}},r=[V],L[3]=V,L[4]=n,L[5]=r):(n=L[4],r=L[5]),(0,x.useEffect)(n,r);let{selectedThreadID:W}=(0,$.Pk)(),{isLoading:z,data:q}=function(){let e,t,a,n,r=(0,p.c)(9),i=(0,ax.useRelayEnvironment)();return r[0]!==i?(e=JSON.stringify(i),r[0]=i,r[1]=e):e=r[1],r[2]!==e?(t=["copilot-immersive-top-repos",e],r[2]=e,r[3]=t):t=r[3],r[4]!==i?(a=async()=>await (0,nc.St)(i,{first:10,hasIssuesEnabled:!0}),r[4]=i,r[5]=a):a=r[5],r[6]!==t||r[7]!==a?(n={queryKey:t,queryFn:a},r[6]=t,r[7]=a,r[8]=n):n=r[8],(0,nu.I)(n)}();L[6]!==R.repository?(i=R.repository?.split("/")??[],L[6]=R.repository,L[7]=i):i=L[7];let[G,K]=i;L[8]!==G||L[9]!==K?(s={owner:G,repo:K},L[8]=G,L[9]=K,L[10]=s):s=L[10];let{isLoading:Q,data:Y}=function(e){let t,a,n,r,i=(0,p.c)(13),{owner:s,repo:o}=e,l=(0,ax.useRelayEnvironment)();return i[0]!==l?(t=JSON.stringify(l),i[0]=l,i[1]=t):t=i[1],i[2]!==s||i[3]!==o||i[4]!==t?(a=["copilot-immersive-current-repo",t,s,o],i[2]=s,i[3]=o,i[4]=t,i[5]=a):a=i[5],i[6]!==l||i[7]!==s||i[8]!==o?(n=async()=>s&&o?await (0,nc.tZ)(l,s,o):null,i[6]=l,i[7]=s,i[8]=o,i[9]=n):n=i[9],i[10]!==a||i[11]!==n?(r={queryKey:a,queryFn:n},i[10]=a,i[11]=n,i[12]=r):r=i[12],(0,nu.I)(r)}(s),[X,Z]=(0,x.useState)(Y);L[11]!==Y?(o=()=>{Y&&Z(Y)},l=[Y],L[11]=Y,L[12]=o,L[13]=l):(o=L[12],l=L[13]),(0,x.useEffect)(o,l),c=null!=X&&(!X.hasIssuesEnabled||null!=X.viewerInteractionLimitReasonHTML&&X.viewerInteractionLimitReasonHTML?.length>0);let ee=nv(),et=function(e){let t,a=(0,p.c)(10),{tag:n,template:r}=e,i=(0,$.Pk)(),s=(0,H.b)(),{items:o,updateItem:l,openItem:c,closeItem:d,openPreviewPane:u}=(0,av.xx)(),m=nO(n);return a[0]!==d||a[1]!==o||a[2]!==s||a[3]!==c||a[4]!==u||a[5]!==i||a[6]!==r||a[7]!==l||a[8]!==m?(t=async e=>{(0,e9.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_CREATED",mode:"immersive",threadId:(0,nR.W)(i)?.id,repositoryId:e.repository.databaseId,issueNumber:e.number,chatReferrer:document.referrer,templateType:r?r.endsWith(".md")?"markdown":"yaml":"none"});let t=e.number,a=e.repository.owner.login,n=e.repository.name,p=e.title,h=`issue:${a}/${n}/${t}`;l({id:h,messageId:nD.Wp,name:p,owner:a,repo:n,number:t,href:e.url,type:"issue"}),d(m),c(h),u();let f=[{type:"text",name:`timeline-event: {"type": "issue-created", "markdownContent": "Issue saved to [${a}/${n}#${t}](${e.url})"}`,text:`Fetch the issue details and return them in a code block with YAML following this example format:
\`\`\`list type="issue"
data:
- url: ${e.url}
  state: "open"
  draft: false
  title: "${p}"
  number: ${t}
  author: ${i.currentUserLogin}
  created_at: "2025-03-27T12:00:00Z"
  closed_at: "2025-03-27T12:00:00Z"
  labels:
  - name: "bug"
  - name: "good first issue"
\`\`\``}],g=o.get(m);g?.type==="new-issue"&&f.push((0,aT.g)(g)),await s.sendChatMessage({thread:(0,nR.W)(i),content:`Saved the issue to [${a}/${n}#${t}](${e.url})`,references:f,topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},a[0]=d,a[1]=o,a[2]=s,a[3]=c,a[4]=u,a[5]=i,a[6]=r,a[7]=l,a[8]=m,a[9]=t):t=a[9],t}(R),ea=r5(R),en=function(e,t){let a,n=(0,p.c)(3);return n[0]!==e||n[1]!==t?(a=(a,n,r)=>{if(!eE.W.draftIssueTemplateFormUI)return;let i=a||`${iK.y}-${n}`;if(e.defaultValuesById&&e.defaultValuesById[i]===r)return;let s={...e,defaultValuesById:{...e.defaultValuesById}};s.defaultValuesById[i]=r,t(s,!1)},n[0]=e,n[1]=t,n[2]=a):a=n[2],a}(R,ea),er=(0,x.useRef)(null),ei=function(e){let t,a=(0,p.c)(2);a[0]!==e.current?(t=()=>!e.current||e.current.clientWidth<1024,a[0]=e.current,a[1]=t):t=a[1];let n=t;return(0,x.useSyncExternalStore)(iJ,n)}(er),es=eE.W.draftIssueTree&&M?.parent!=null,eo=(0,x.useRef)(null),el=Y?.id??"",ec=R.template||"";L[14]!==ec||L[15]!==el?(d={repoId:el,filename:ec},L[14]=ec,L[15]=el,L[16]=d):d=L[16];let{isLoading:ed,data:eu}=function(e){let t,a,n,r,i=(0,p.c)(13),{repoId:s,filename:o}=e,l=(0,ax.useRelayEnvironment)();return i[0]!==l?(t=JSON.stringify(l),i[0]=l,i[1]=t):t=i[1],i[2]!==o||i[3]!==s||i[4]!==t?(a=["copilot-immersive-template-payload",t,s,o],i[2]=o,i[3]=s,i[4]=t,i[5]=a):a=i[5],i[6]!==l||i[7]!==o||i[8]!==s?(n=async()=>s&&o?await nT(l,s,o):null,i[6]=l,i[7]=o,i[8]=s,i[9]=n):n=i[9],i[10]!==a||i[11]!==n?(r={queryKey:a,queryFn:n},i[10]=a,i[11]=n,i[12]=r):r=i[12],(0,nu.I)(r)}(d),em=Y??void 0;L[17]!==em?(u={repository:em},L[17]=em,L[18]=u):u=L[18];let ep=u;if(V||z||ed){let e;return L[19]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(aq.Q,{optionConfig:{useViewportQueries:!1}}),L[19]=e):e=L[19],e}let eh=`${R.id}@${W}`;return L[20]!==ei||L[21]!==eh?(h=(0,az.S)({storageKeyPrefix:eh,insidePortal:ei}),L[20]=ei,L[21]=eh,L[22]=h):h=L[22],L[23]===Symbol.for("react.memo_cache_sentinel")?(f=(0,aG.G)("create-issue-preview"),L[23]=f):f=L[23],L[24]!==R?(g=(0,m.jsx)("div",{children:(0,m.jsx)(aX,{item:R})}),L[24]=R,L[25]=g):g=L[25],L[26]!==M||L[27]!==B||L[28]!==es?(y=es&&(0,m.jsx)("div",{children:(0,m.jsx)(iY,{node:M,onItemSelected:e=>B(e.item.id,!0)})}),L[26]=M,L[27]=B,L[28]=es,L[29]=y):y=L[29],L[30]!==g||L[31]!==y?(v=(0,m.jsxs)("div",{className:iA.toolbarLeft,children:[g,y]}),L[30]=g,L[31]=y,L[32]=v):v=L[32],L[33]===Symbol.for("react.memo_cache_sentinel")?(_=(0,m.jsx)(aM.A,{href:"https://gh.io/copilot-create-issues-feedback",className:iA.feedbackLink,children:"Give feedback"}),L[33]=_):_=L[33],L[34]!==M||L[35]!==c||L[36]!==O||L[37]!==eu?(b=(0,m.jsxs)("div",{className:iA.toolbarActions,children:[_,(0,m.jsx)(nV,{issueTemplate:eu,issueNode:M,issueFormRef:eo,noRepoAccess:c,onClose:O})]}),L[34]=M,L[35]=c,L[36]=O,L[37]=eu,L[38]=b):b=L[38],L[39]!==v||L[40]!==b?(j=(0,m.jsxs)("div",{className:iA.toolbar,children:[v,b]}),L[39]=v,L[40]=b,L[41]=j):j=L[41],L[42]!==q?(S=q||[],L[42]=q,L[43]=S):S=L[43],L[44]!==R||L[45]!==Y||L[46]!==Q||L[47]!==S?(C=(0,m.jsx)(iR,{draftIssue:R,resolvedDraftIssueRepo:Y,loadingDraftIssueRepo:Q,topRepos:S}),L[44]=R,L[45]=Y,L[46]=Q,L[47]=S,L[48]=C):C=L[48],L[49]!==R?(N=(0,m.jsx)(iz,{draftIssue:R}),L[49]=R,L[50]=N):N=L[50],L[51]!==C||L[52]!==N?(w=(0,m.jsxs)(J.B,{direction:"horizontal",align:"center",gap:"condensed",className:"py-2",children:[C,N]}),L[51]=C,L[52]=N,L[53]=w):w=L[53],L[54]!==Y||L[55]!==c?(I=c&&((t=Y)&&!t.hasIssuesEnabled?(0,m.jsx)(aQ,{title:"Issues are disabled",description:"Issues are disabled on this repository. Please select a different repository above to continue creating your issue.",icon:P.IssueDraftIcon}):t&&t.viewerInteractionLimitReasonHTML?(0,m.jsx)(aQ,{title:"You cannot create issues in this repository",description:t.viewerInteractionLimitReasonHTML,icon:P.IssueDraftIcon}):void 0),L[54]=Y,L[55]=c,L[56]=I):I=L[56],L[57]!==M||L[58]!==R||L[59]!==Y||L[60]!==c||L[61]!==ea||L[62]!==O||L[63]!==et||L[64]!==en||L[65]!==eu||L[66]!==ee?(k=!c&&(0,m.jsx)(iT,{draftIssue:R,issueNode:M,template:eE.W.draftIssueTemplateFormUI&&eu?eu:void 0,issueFormRef:eo,onCreate:et,onChange:ea,onClose:O,onBeforeCreate:e=>ee(Y,e),onFieldChange:en}),L[57]=M,L[58]=R,L[59]=Y,L[60]=c,L[61]=ea,L[62]=O,L[63]=et,L[64]=en,L[65]=eu,L[66]=ee,L[67]=k):k=L[67],L[68]!==w||L[69]!==I||L[70]!==k?(E=(0,m.jsxs)("div",{className:iA.form,children:[w,I,k]}),L[68]=w,L[69]=I,L[70]=k,L[71]=E):E=L[71],L[72]!==j||L[73]!==E?(T=(0,m.jsxs)("div",{className:iA.container,ref:er,children:[j,E]}),L[72]=j,L[73]=E,L[74]=T):T=L[74],L[75]!==ep||L[76]!==h||L[77]!==T?(A=(0,m.jsx)(aH.S,{optionConfig:h,preselectedData:ep,...f,children:T}),L[75]=ep,L[76]=h,L[77]=T,L[78]=A):A=L[78],A}function iJ(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}function iY({node:e,onItemSelected:t}){let a=(0,x.useMemo)(()=>{let t=[],a=e;for(;a;)t.push(a),a=a.parent;return t.reverse()},[e]);if(e.parent&&eE.W.draftIssueTree)return(0,m.jsxs)(tB.W,{children:[(0,m.jsxs)(tB.W.Button,{variant:"invisible",className:iA.parentSelectorAnchor,children:[(0,m.jsx)("span",{className:"fgColor-muted",children:"Parent:"})," ",e?.parent?.item.name]}),(0,m.jsx)(tB.W.Overlay,{width:"large",children:(0,m.jsx)(tM.l,{children:a.map((a,n)=>(0,m.jsxs)(tM.l.Item,{active:a.item.tag===e.item.tag,onSelect:()=>t(a),sx:{paddingLeft:`calc(${n} * var(--base-size-12))`},children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.IssueDraftIcon,{})}),(0,m.jsx)("div",{className:iA.truncateText,children:a.item.name})]},a.item.tag))})})]})}try{iQ.displayName||(iQ.displayName="CreateIssuePreview")}catch{}try{iY.displayName||(iY.displayName="ParentSelector")}catch{}var iX=a(76325),iZ=a(8579),i0=a(67991),i1=a(23125),i2=a(67621);let i3=e=>{let t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=e.name||"file",a.click(),URL.revokeObjectURL(t)},i4={container:"FilePreview-module__container--_pENP",previewContainer:"FilePreview-module__previewContainer--vjKjn",codeMirrorContainer:"FilePreview-module__codeMirrorContainer--bIVZV",toolbar:"FilePreview-module__toolbar--toYCM",toolbarLeft:"FilePreview-module__toolbarLeft--FG_Fy",toolbarLoC:"FilePreview-module__toolbarLoC--cjBe0",toolbarActions:"FilePreview-module__toolbarActions--GZPSm",footer:"FilePreview-module__footer--pwLuO"};var i5=a(50539);let i6={ERROR:"ERROR",LOADING:"LOADING",LOADED:"LOADED",READY:"READY"};function i7(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}let i8={container:"SandboxView-module__container--_qS7F",iframe:"SandboxView-module__iframe--bgP8I"},i9={error:"ErrorMessage-module__error--EPInF",errorIcon:"ErrorMessage-module__errorIcon--qRxBg",errorHeader:"ErrorMessage-module__errorHeader--ePU6Q"};function se(e){let t,a=(0,p.c)(4),{error:n}=e;if(a[0]!==n){let e,r,i=n?.split(`
`)??[];a[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("span",{className:i9.errorIcon,children:(0,m.jsx)(P.StopIcon,{size:24})}),r=(0,m.jsx)("h2",{className:i9.errorHeader,children:"HTML rendering failed"}),a[2]=e,a[3]=r):(e=a[2],r=a[3]),t=(0,m.jsxs)("div",{className:i9.error,children:[e,r,i.length>0?(0,m.jsx)("p",{children:i.map(st)}):(0,m.jsx)("p",{children:"Refresh the page or check the HTML"})]}),a[0]=n,a[1]=t}else t=a[1];return t}function st(e){return(0,m.jsxs)(m.Fragment,{children:[e,(0,m.jsx)("br",{})]},`error-line-${e}}`)}try{se.displayName||(se.displayName="ErrorMessage")}catch{}function sa(e){let t,a,n,r,i=(0,p.c)(14),{content:s,inlineScripts:o,inlineStyles:l,headScripts:c,bodyScripts:d,styles:u,viewscreenUrl:h}=e,f=(0,Q.G7)("viewscreen_sandbox");i[0]!==h?(a=new URL("view/sandbox?url=client://sandbox",h).toString(),t=new URL(a,eg.fV.origin),i[0]=h,i[1]=t,i[2]=a):(t=i[1],a=i[2]);let g=t.origin,y=(0,x.useRef)(null),v=(0,x.useRef)(null);i[3]!==d||i[4]!==s||i[5]!==c||i[6]!==o||i[7]!==l||i[8]!==u?(n={content:s,headScripts:c,bodyScripts:d,inlineScripts:o,inlineStyles:l,styles:u},i[3]=d,i[4]=s,i[5]=c,i[6]=o,i[7]=l,i[8]=u,i[9]=n):n=i[9];let{renderState:_,errorMessage:b}=function(e,t,a,n){let r,i,s,o,l,c,d=(0,p.c)(16),[u,m]=(0,x.useState)(i6.LOADING),[h,f]=(0,x.useState)();d[0]!==t||d[1]!==e||d[2]!==n?(r=a=>(function(e,t,a,n,r,i){let s=function(e){var t;let a=e.data;if(!a)return null;if("string"==typeof a)try{a=JSON.parse(a)}catch{return null}return"object"==typeof(t=a)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?a:null}(e);if(!s)return;let o=s.body,l=a.current?.contentWindow;switch(o){case"hello":i7(l,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),i7(l,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":i(i6.ERROR),s.payload?.error&&r(s.payload.error);break;case"loading":i(i6.LOADING);break;case"loaded":if(!a.current||!n.current)return;i(i6.LOADED);break;case"ready":if(!a.current||!n.current)return;i(i6.READY)}})(a,0,e,t,f,m),d[0]=t,d[1]=e,d[2]=n,d[3]=r):r=d[3];let g=r;return d[4]!==g?(i=()=>(window.addEventListener("message",g),()=>window.removeEventListener("message",g)),s=[g],d[4]=g,d[5]=i,d[6]=s):(i=d[5],s=d[6]),(0,x.useEffect)(i,s),d[7]!==t||d[8]!==e||d[9]!==a||d[10]!==u?(o=()=>{u===i6.READY&&e.current&&t.current&&function(e,t,a){let n={type:"render:cmd",body:{cmd:"sandbox:data","sandbox:data":{...a}}};i7(e.contentWindow,n)}(e.current,t.current,a)},l=[t,e,a,u],d[7]=t,d[8]=e,d[9]=a,d[10]=u,d[11]=o,d[12]=l):(o=d[11],l=d[12]),(0,x.useEffect)(o,l),d[13]!==h||d[14]!==u?(c={renderState:u,errorMessage:h},d[13]=h,d[14]=u,d[15]=c):c=d[15],c}(y,v,n,g);if(!f)return null;for(let e of((0,e9.BI)("sandbox_view.activate",{target:"SANDBOX_INITIALIZED",enabled:f}),Array.from(new Set([...c||[],...d||[],...u||[]].map(e=>{try{return new URL(e,g).origin}catch{return null}}).filter(Boolean)))))(0,e9.BI)("sandbox_view.activate",{target:"SANDBOX_RESOURCE_ORIGIN",origin:e});return i[10]!==b||i[11]!==_||i[12]!==a?(r=(0,m.jsx)("div",{ref:v,className:i8.container,children:_===i6.ERROR?(0,m.jsx)(se,{error:b}):(0,m.jsx)("iframe",{ref:y,className:i8.iframe,sandbox:"allow-scripts allow-same-origin",title:"Preview page for the user provided code",src:a})}),i[10]=b,i[11]=_,i[12]=a,i[13]=r):r=i[13],r}try{sa.displayName||(sa.displayName="SandboxView")}catch{}let sn={loadingContainer:"HtmlPreview-module__loadingContainer--b987j",loadingHead:"HtmlPreview-module__loadingHead--abHb3",loadingText:"HtmlPreview-module__loadingText--WYXW5"};function sr(e,t,a){let n=`file:${e}`;if(!a.has(n))return null;let r=a.get(n)??[],i=r[r.length-1];if(!i)return null;let s=t.get(i);return s&&"file"===s.type?s:null}function si(e){let t,a,n=(0,p.c)(15),{file:r}=e,{previewUrl:i}=(0,V.X)(),{items:s,versionedItems:o}=(0,av.xx)(),{scripts:l,styles:c,files:d}=function(e,t,a){let n=Array.from(e.matchAll(/<script.*?src="(.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e).map(e=>sr(e,t,a)),r=(function(e){let t=Array.from(e.matchAll(/<link([^>]+)>/g)).map(e=>e[1]).filter(e=>void 0!==e),a=[];for(let e of t){if("stylesheet"!==/rel\s*=\s*"([^"]+)"/.exec(e)?.[1])continue;let t=/href\s*=\s*"([^"]+)"/.exec(e)?.[1];t&&a.push(t)}return a})(e).map(e=>sr(e,t,a)),i=Array.from(e.matchAll(/<script(?![^>]*\bsrc=).*?>(.*?)<\/script>/gms)).map(e=>e[1]).filter(e=>void 0!==e);return{scripts:[...n.map(e=>e?.value??""),...i,'document.dispatchEvent(new Event("DOMContentLoaded"))'].join(`
`),styles:r.map(e=>e?.value??"").join(`
`),files:n.concat(r)}}(r.value,s,o),[u,h]=(0,x.useState)(!1),f=(r.isStreaming||d.some(ss))&&!u;n[0]!==f||n[1]!==h?(t=()=>{if(f){let e=setTimeout(()=>{h(!0)},3e3);return()=>clearTimeout(e)}},n[0]=f,n[1]=h,n[2]=t):t=n[2],(0,x.useEffect)(t),n[3]!==r.value?(a=function(e){let t=Array.from(e.matchAll(/<script.*?src="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e),a=[],n=[];for(let r of t)e.substring(e.indexOf("<head"),e.indexOf("</head>")).includes(r)?a.push(r):n.push(r);return{headScripts:a,bodyScripts:n,styles:Array.from(e.matchAll(/<link rel="stylesheet" href="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e)}}(r.value),n[3]=r.value,n[4]=a):a=n[4];let{headScripts:g,bodyScripts:y,styles:v}=a;if(f){let e;return n[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsxs)("div",{className:sn.loadingContainer,children:[(0,m.jsx)("div",{className:sn.loadingHead,children:(0,m.jsx)(i5.N,{animationType:"thinking",loopAnimation:!0})}),(0,m.jsx)("p",{className:sn.loadingText,children:"Preparing your preview\u2026"})]}),n[5]=e):e=n[5],e}{let e;return n[6]!==y||n[7]!==v||n[8]!==r.id||n[9]!==r.value||n[10]!==g||n[11]!==i||n[12]!==l||n[13]!==c?(e=(0,m.jsx)(sa,{inlineScripts:l,inlineStyles:c,headScripts:g,bodyScripts:y,styles:v,content:r.value,viewscreenUrl:i},r.id),n[6]=y,n[7]=v,n[8]=r.id,n[9]=r.value,n[10]=g,n[11]=i,n[12]=l,n[13]=c,n[14]=e):e=n[14],e}}function ss(e){return!e||e.isStreaming}try{si.displayName||(si.displayName="HtmlPreview")}catch{}var so=a(24880),sl=a(45968),sc=a(74022);let sd={markdownPreview:"MarkdownPreview-module__markdownPreview--TTDgv",spinner:"MarkdownPreview-module__spinner--hV_1B",error:"MarkdownPreview-module__error--MpG_1",errorIcon:"MarkdownPreview-module__errorIcon--ZskC4",errorHeader:"MarkdownPreview-module__errorHeader--WHC6c"};function su(e){let t,a,n,r=(0,p.c)(7),{file:i}=e,s=function(e,t){let a,n,r,i,s=(0,p.c)(6),[o,l]=(0,x.useState)(e);return 2e3!==s[0]?(n=(0,sc.A)(l,t),s[0]=t,s[1]=n):n=s[1],a=n,s[2]!==a||s[3]!==e?(r=()=>a(e),i=[a,e],s[2]=a,s[3]=e,s[4]=r,s[5]=i):(r=s[4],i=s[5]),(0,x.useEffect)(r,i),o}(i.value,2e3);r[0]!==i.name||r[1]!==s?(t={queryKey:["copilot-immersive","MarkdownPreview",s,i.name],queryFn:async()=>{let e=await (0,td.lS)("/copilot/immersive/markdown",{method:"POST",body:{content:s,filename:i.name}});if(!e.ok)throw Error(`Failed to load rendered markdown (${e.status} on ${e.url})`);return await e.json()},placeholderData:so.rX,staleTime:1/0},r[0]=i.name,r[1]=s,r[2]=t):t=r[2];let{status:o,data:l}=(0,nu.I)(t);return r[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,y.$)("readme html-blob blob",sd.markdownPreview),r[3]=a):a=r[3],r[4]!==l||r[5]!==o?(n=(0,m.jsx)("div",{className:a,children:"pending"===o?(0,m.jsx)("div",{className:sd.spinner,children:(0,m.jsx)(a3.A,{srText:"Loading Markdown preview\u2026"})}):"error"===o?(0,m.jsxs)("div",{className:sd.error,children:[(0,m.jsx)("span",{className:sd.errorIcon,children:(0,m.jsx)(P.StopIcon,{size:24})}),(0,m.jsx)("h2",{className:sd.errorHeader,children:"Markdown rendering failed"}),(0,m.jsx)("p",{children:"Refresh the page or check the markdown code"})]}):(0,m.jsx)(sl.$6,{className:"markdown-body",html:l.html})}),r[4]=l,r[5]=o,r[6]=n):n=r[6],n}try{su.displayName||(su.displayName="MarkdownPreview")}catch{}function sm(e){let t,a,n,r,i,s,o,l,c,d,u,h,f,g,y=(0,p.c)(44),{isPreviewOpening:v,file:_,onClose:b}=e,{updateItem:j}=(0,av.xx)(),S=(0,$.Pk)();y[0]!==_.isStreaming||y[1]!==_.messageId||y[2]!==S.messages?(t=_.isStreaming?S.messages[S.messages.length-1]:S.messages.find(e=>e.id===_.messageId),y[0]=_.isStreaming,y[1]=_.messageId,y[2]=S.messages,y[3]=t):t=y[3];let C=t,{linesOfCode:N,isPreviewable:w,size:I}=function(e){let t,a,n,r,i=(0,p.c)(12);if(i[0]!==e.language||i[1]!==e.value){let r,s,o=new Blob([e.value]).size;i[5]===Symbol.for("react.memo_cache_sentinel")?(r=new Set(["markdown","html"]),i[5]=r):r=i[5];let l=r;i[6]!==e.value?(s=e.value.split(`
`),i[6]=e.value,i[7]=s):s=i[7],t=s.length,a=l.has(e.language),n=function(e){if(0===e)return"0 bytes";if(1===e)return"1 byte";let t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["bytes","KB","MB","GB","TB"][t]}`}(o),i[0]=e.language,i[1]=e.value,i[2]=t,i[3]=a,i[4]=n}else t=i[2],a=i[3],n=i[4];return i[8]!==t||i[9]!==a||i[10]!==n?(r={linesOfCode:t,isPreviewable:a,size:n},i[8]=t,i[9]=a,i[10]=n,i[11]=r):r=i[11],r}(_);!function(e,t){let a,n,r,i,s,o,l,c=(0,p.c)(25),{reference:d}=e,u=(0,H.b)(),m=d?.type;c[0]!==d?(a=d?(0,ek.Vb)(d):void 0,c[0]=d,c[1]=a):a=c[1],c[2]!==m||c[3]!==a?(n=["copilot-reference-preview","copilot","references",m,a],c[2]=m,c[3]=a,c[4]=n):n=c[4],c[5]!==e||c[6]!==u||c[7]!==d||c[8]!==t?(r=async()=>{if(!d||"file"!==d.type||e.value)return null;let a=await u.service.hydrateReference(d);return a.ok?(t({...e,value:a.payload.contents,isStreaming:!1}),a.payload):null},c[5]=e,c[6]=u,c[7]=d,c[8]=t,c[9]=r):r=c[9],c[10]!==n||c[11]!==r?(i={queryKey:n,queryFn:r,staleTime:Number.POSITIVE_INFINITY},c[10]=n,c[11]=r,c[12]=i):i=c[12];let{isLoading:h,isError:f,data:g}=(0,nu.I)(i);c[13]!==g||c[14]!==e||c[15]!==t?(s=()=>{g?.contents&&e.value!==g.contents&&t({...e,value:g.contents,isStreaming:!1})},c[13]=g,c[14]=e,c[15]=t,c[16]=s):s=c[16];let y=g?.contents;c[17]!==e||c[18]!==y||c[19]!==t?(o=[y,e,t],c[17]=e,c[18]=y,c[19]=t,c[20]=o):o=c[20],(0,x.useEffect)(s,o),c[21]!==g||c[22]!==f||c[23]!==h?(l={isLoading:h,isError:f,data:g},c[21]=g,c[22]=f,c[23]=h,c[24]=l):l=c[24]}(_,j);let[k,E]=(0,x.useState)("code"),[T,A]=(0,x.useState)(void 0);y[4]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{A(e)},y[4]=a):a=y[4];let L=a;y[5]!==C?.error?.type||y[6]!==b?(n=()=>{(C?.error?.type==="publicCode"||C?.error?.type==="filtered")&&b()},y[5]=C?.error?.type,y[6]=b,y[7]=n):n=y[7];let D=C?.error;y[8]!==b||y[9]!==D?(r=[D,b],y[8]=b,y[9]=D,y[10]=r):r=y[10],(0,x.useEffect)(n,r),y[11]!==w||y[12]!==k?(i=w&&(0,m.jsxs)(i0.I,{"aria-label":"File view",onChange:e=>{let t=0===e?"preview":"code";E(t),(0,e9.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_VIEW_OPTION",option:t})},children:[(0,m.jsx)(i0.I.Button,{selected:"preview"===k,children:"Preview"}),(0,m.jsx)(i0.I.Button,{selected:"code"===k,children:"Code"})]}),y[11]=w,y[12]=k,y[13]=i):i=y[13],y[14]!==_?(s=(0,m.jsx)(aX,{item:_,onVersionSelect:L}),y[14]=_,y[15]=s):s=y[15];let R=1===N?"line":"lines";return y[16]!==N||y[17]!==I||y[18]!==R?(o=(0,m.jsxs)("p",{className:i4.toolbarLoC,children:[N," ",R," \xb7 ",I]}),y[16]=N,y[17]=I,y[18]=R,y[19]=o):o=y[19],y[20]!==i||y[21]!==s||y[22]!==o?(l=(0,m.jsxs)("div",{className:i4.toolbarLeft,children:[i,s,o]}),y[20]=i,y[21]=s,y[22]=o,y[23]=l):l=y[23],y[24]!==_.value?(c=(0,m.jsx)(iZ.T,{textToCopy:_.value,ariaLabel:"Copy code",onCopy:sp}),y[24]=_.value,y[25]=c):c=y[25],y[26]!==_.name||y[27]!==_.value||y[28]!==T?(d=(0,m.jsx)(tF.K,{"aria-label":"Download code",icon:P.DownloadIcon,variant:"invisible",onClick:()=>{let e=(()=>{let e=_.name.lastIndexOf(".");if(e>0){let t=_.name.substring(0,e),a=_.name.substring(e);return void 0!==T?`${t}_${T}${a}`:_.name}return void 0!==T?`${_.name}_${T}`:_.name})();i3(new File([_.value],e)),(0,e9.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})}}),y[26]=_.name,y[27]=_.value,y[28]=T,y[29]=d):d=y[29],y[30]!==c||y[31]!==d?(u=(0,m.jsxs)("div",{className:i4.toolbarActions,children:[c,d]}),y[30]=c,y[31]=d,y[32]=u):u=y[32],y[33]!==l||y[34]!==u?(h=(0,m.jsxs)("div",{className:i4.toolbar,children:[l,u]}),y[33]=l,y[34]=u,y[35]=h):h=y[35],y[36]!==_||y[37]!==v||y[38]!==w||y[39]!==k?(f=w&&"preview"===k?(0,m.jsx)(sg,{file:_}):(0,m.jsx)(sf,{file:_,isPreviewOpening:v}),y[36]=_,y[37]=v,y[38]=w,y[39]=k,y[40]=f):f=y[40],y[41]!==h||y[42]!==f?(g=(0,m.jsxs)("div",{className:i4.container,children:[h,f]}),y[41]=h,y[42]=f,y[43]=g):g=y[43],g}function sp(){return(0,e9.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"})}let sh=(0,i1.A)((e,t,a)=>{a({...e,value:t})},500,{leading:!1,trailing:!0});function sf({file:e,isPreviewOpening:t}){let{openItem:a,updateItem:n,versionedItems:r}=(0,av.xx)(),i=(0,x.useRef)(!1),s=function(e,t){let a=e.get((0,aT.oy)(t.id))??[];return a[a.length-1]===t.id}(r,e),o=!e.reference||"thread-scoped-file"===e.reference.type,l=o&&!e.isStreaming&&s,c=(0,x.useId)(),d=function(e){let t,a,n,r=(0,p.c)(6);return r[0]!==e?(a=function({language:e,value:t}){var a;let n=(a=t,/^\t/m.test(a)?"tab":"space");return{indentUnit:function(e,t){if("space"!==t)return 8;{var a;let t=e.match(/^( +)[^*]/im);return void 0!==(a=t?.[1]?.length)&&a>=1&&a<=12?a:2}}(t,n),indentWithTabs:"tab"===n,lineWrapping:function(e){let t=(0,nQ.vL)(e);return t?.wrap??!1}(e)}}(e),r[0]=e,r[1]=a):a=r[1],t=a,r[2]!==t.indentUnit||r[3]!==t.indentWithTabs||r[4]!==t.lineWrapping?(n={indentUnit:t.indentUnit,indentWithTabs:t.indentWithTabs,lineWrapping:t.lineWrapping},r[2]=t.indentUnit,r[3]=t.indentWithTabs,r[4]=t.lineWrapping,r[5]=n):n=r[5],n}(e),[u,h]=(0,x.useState)(),f=u?.id===e.id?u.value:e.value,[g,y]=(0,x.useState)(!0),{messages:v}=(0,$.Pk)(),_=(0,x.useRef)(null),b=(0,x.useRef)(null),j=e=>{b.current=e},S=(0,x.useRef)(null);(0,x.useEffect)(()=>{y(!1)},[]),(0,x.useEffect)(()=>{if(!S.current)return;let e=S.current.querySelector(".cm-scroller");if(_.current=e,!e)return;let t=()=>{j(e.scrollTop)};return e.addEventListener("wheel",t,{passive:!0}),e.addEventListener("touchstart",t,{passive:!0}),e.addEventListener("mousedown",t),e.addEventListener("keydown",t),()=>{e.removeEventListener("wheel",t),e.removeEventListener("touchstart",t),e.removeEventListener("mousedown",t),e.removeEventListener("keydown",t)}},[]),(0,x.useEffect)(()=>{let t=_.current;t&&(e.isUserEdited||(t.scrollTop=b.current??0))},[e.isUserEdited,f]),(0,x.useEffect)(()=>{t&&(i.current=!0)},[t]);let C=(0,i2.K)((0,x.useCallback)(t=>{if(l&&t!==e.value)if(e.isUserEdited)h({value:t,id:e.id}),sh(e,t,n);else{let r={...e,messageId:nD.Wp,id:`file:${e.name}#${v.length}`,timestamp:new Date,isUserEdited:!0,value:t};n(r),a(r.id),h({value:t,id:r.id})}},[e,l,v.length,a,n]));return(0,m.jsxs)("div",{ref:S,className:i4.codeMirrorContainer,children:[(0,m.jsxs)("span",{id:c,className:"sr-only",children:[e.name," file contents"]}),(0,m.jsx)(iX.default,{ariaLabelledBy:c,containerClassName:i4.codeMirrorContainer,fileName:e.name,height:"100%",isReadOnly:!l,spacing:d,value:g?"":f,onChange:C,focusNextRenderRef:i,placeholder:"Loading...",hideHelp:!0}),o&&!s&&(0,m.jsx)("div",{className:i4.footer,children:"Switch to the latest version to edit this file."})]})}function sg(e){let t=(0,p.c)(4),{file:a}=e;if("markdown"===a.language){let e;return t[0]!==a?(e=(0,m.jsx)("div",{className:i4.previewContainer,children:(0,m.jsx)(su,{file:a})}),t[0]=a,t[1]=e):e=t[1],e}if("html"!==a.language)return null;{let e;return t[2]!==a?(e=(0,m.jsx)("div",{className:i4.previewContainer,children:(0,m.jsx)(si,{file:a})}),t[2]=a,t[3]=e):e=t[3],e}}try{sm.displayName||(sm.displayName="FilePreview")}catch{}try{sf.displayName||(sf.displayName="CodeMirrorView")}catch{}try{sg.displayName||(sg.displayName="PreviewComponent")}catch{}let sy={container:"ImagePreview-module__container--AUrb4",imageElement:"ImagePreview-module__imageElement--DNVl1"};function sx(e){let t,a=(0,p.c)(3),{image:n}=e;return a[0]!==n.altText||a[1]!==n.url?(t=(0,m.jsx)("div",{className:sy.container,children:(0,m.jsx)("img",{className:sy.imageElement,src:n.url,alt:n.altText})}),a[0]=n.altText,a[1]=n.url,a[2]=t):t=a[2],t}try{sx.displayName||(sx.displayName="ImagePreview")}catch{}var sv=a(82069),s_=a(80019);let sb={container:"IssuePreview-module__container--XUu9S"},sj=(0,x.memo)(function(e){let t,a,n,r,i,s,o,l,c,d=(0,p.c)(17),{isPreviewOpening:u,issue:h,onClose:f}=e,[g,y]=(0,x.useState)(u);if(d[0]!==g?(t=()=>{if(g){let e=setTimeout(()=>y(!1),400);return()=>clearTimeout(e)}},a=[g],d[0]=g,d[1]=t,d[2]=a):(t=d[1],a=d[2]),(0,x.useEffect)(t,a),d[3]!==h.href?(r=(0,m.jsx)(tF.K,{icon:P.LinkExternalIcon,variant:"invisible","aria-label":"Open issue in new tab",onClick:()=>{window.open(h.href,"_blank")}}),d[3]=h.href,d[4]=r):r=d[4],n=r,d[5]!==f||d[6]!==n?(s={navigate:n$.l,insideSidePanel:!0,shouldSkipSetDocumentTitle:!0,titleAs:"h2",useViewportQueries:!1,withLiveUpdates:!0,onIssueDelete:f,additionalHeaderActions:n,showRepositoryPill:!0},d[5]=f,d[6]=n,d[7]=s):s=d[7],i=s,d[8]!==h.number||d[9]!==h.owner||d[10]!==h.repo?(l={owner:h.owner,repo:h.repo,number:h.number,type:"Issue"},d[8]=h.number,d[9]=h.owner,d[10]=h.repo,d[11]=l):l=d[11],o=l,g){let e;return d[12]!==i?(e=(0,m.jsx)(aq.Q,{optionConfig:i}),d[12]=i,d[13]=e):e=d[13],e}return d[14]!==o||d[15]!==i?(c=(0,m.jsx)("div",{className:sb.container,children:(0,m.jsx)(s_.e,{children:(0,m.jsx)(sv.cI,{itemIdentifier:o,optionConfig:i})})}),d[14]=o,d[15]=i,d[16]=c):c=d[16],c});try{sj.displayName||(sj.displayName="IssuePreview")}catch{}function sS(e){let t,a=(0,p.c)(16),{isOpening:n,onClose:r,previewItem:i}=e,s=null;switch(i.type){case"file":{let e;a[0]!==n||a[1]!==r||a[2]!==i?(e=(0,m.jsx)(sm,{isPreviewOpening:n,file:i,onClose:r}),a[0]=n,a[1]=r,a[2]=i,a[3]=e):e=a[3],s=e;break}case"issue":{let e;a[4]!==n||a[5]!==r||a[6]!==i?(e=(0,m.jsx)(sj,{isPreviewOpening:n,issue:i,onClose:r}),a[4]=n,a[5]=r,a[6]=i,a[7]=e):e=a[7],s=e;break}case"new-issue":{let e;a[8]!==n||a[9]!==r||a[10]!==i?(e=(0,m.jsx)(iQ,{isPreviewOpening:n,issue:i,onClose:r}),a[8]=n,a[9]=r,a[10]=i,a[11]=e):e=a[11],s=e;break}case"image":{let e;a[12]!==i?(e=(0,m.jsx)(sx,{image:i}),a[12]=i,a[13]=e):e=a[13],s=e}}return a[14]!==s?(t=s?(0,m.jsx)(aR.t,{fallback:(0,m.jsx)(a$,{regionName:"This workbench item"}),children:s}):null,a[14]=s,a[15]=t):t=a[15],t}try{sS.displayName||(sS.displayName="ContentPreviewItem")}catch{}let sC={tabContainer:"ContentPreviewTab-module__tabContainer--TyGLZ",tabContent:"ContentPreviewTab-module__tabContent--zNIXv",isActive:"ContentPreviewTab-module__isActive--xbw0T",mainButton:"ContentPreviewTab-module__mainButton--Y_fZZ",icon:"ContentPreviewTab-module__icon--Ff5yz",title:"ContentPreviewTab-module__title--WZajJ",closeButton:"ContentPreviewTab-module__closeButton--DACs7"};function sN(e){let t=(0,p.c)(3),{file:a}=e;if(a.isStreaming){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(a3.A,{size:"small"}),t[0]=e):e=t[0],e}if("markdown"===a.language){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(P.MarkdownIcon,{}),t[1]=e):e=t[1],e}{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(P.CodeIcon,{}),t[2]=e):e=t[2],e}}function sw(e){let t=(0,p.c)(5),{item:a}=e;switch(a.type){case"file":{let e;return t[0]!==a?(e=(0,m.jsx)(sN,{file:a}),t[0]=a,t[1]=e):e=t[1],e}case"image":{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(P.ImageIcon,{}),t[2]=e):e=t[2],e}case"issue":{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(P.IssueOpenedIcon,{}),t[3]=e):e=t[3],e}case"new-issue":{let e;return t[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(P.IssueDraftIcon,{}),t[4]=e):e=t[4],e}default:return null}}let sI=(0,x.forwardRef)(function(e,t){let a,n,r,i,s,o,l,c,d,u,h,f,g,v,_,b,j=(0,p.c)(38);if(j[0]!==e){let{onClick:t,onClose:c,isActive:d,item:u,controlHintId:m,tabPanelId:p,...h}=e;i=t,n=d,r=u,a=m,l=p,s=h,o=()=>{c&&c(),(0,e9.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_CLOSE",mode:"immersive"})},j[0]=e,j[1]=a,j[2]=n,j[3]=r,j[4]=i,j[5]=s,j[6]=o,j[7]=l}else a=j[1],n=j[2],r=j[3],i=j[4],s=j[5],o=j[6],l=j[7];let S=o,C=(0,x.useRef)(null),N=r.name;j[8]!==n?(c=(0,y.$)(sC.tabContent,{[sC.isActive]:n}),j[8]=n,j[9]=c):c=j[9];let w=n?"true":void 0;j[10]!==i?(d=e=>{i&&i(e),(0,e9.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_SELECT",mode:"immersive"})},j[10]=i,j[11]=d):d=j[11],j[12]!==S?(u=e=>{switch(e.key.toLowerCase()){case"delete":case"backspace":S();break;case"tab":if(e.shiftKey)break;e.preventDefault(),C.current?.focus()}},h=e=>{1===e.button&&S()},j[12]=S,j[13]=u,j[14]=h):(u=j[13],h=j[14]),j[15]!==r?(f=(0,m.jsx)("span",{className:sC.icon,children:(0,m.jsx)(sw,{item:r})}),j[15]=r,j[16]=f):f=j[16];let I=`content-preview-tab-${r.id}`;j[17]!==I||j[18]!==N?(g=(0,m.jsx)("span",{className:sC.title,"data-title":N,"data-testid":I,children:N}),j[17]=I,j[18]=N,j[19]=g):g=j[19],j[20]!==a||j[21]!==t||j[22]!==s||j[23]!==w||j[24]!==d||j[25]!==u||j[26]!==h||j[27]!==f||j[28]!==g||j[29]!==l?(v=(0,m.jsxs)("button",{className:sC.mainButton,type:"button",role:"tab","aria-selected":w,"aria-describedby":a,"aria-controls":l,onClick:d,onKeyDown:u,onAuxClick:h,ref:t,...s,children:[f,g]}),j[20]=a,j[21]=t,j[22]=s,j[23]=w,j[24]=d,j[25]=u,j[26]=h,j[27]=f,j[28]=g,j[29]=l,j[30]=v):v=j[30];let k=`Close ${N}`;return j[31]!==S||j[32]!==k?(_=(0,m.jsx)("div",{className:sC.closeButton,children:(0,m.jsx)(tF.K,{icon:P.XIcon,size:"small",variant:"invisible","aria-label":k,"aria-hidden":!0,tabIndex:-1,unsafeDisableTooltip:!0,onClick:S,ref:C})}),j[31]=S,j[32]=k,j[33]=_):_=j[33],j[34]!==v||j[35]!==_||j[36]!==c?(b=(0,m.jsx)("div",{className:sC.tabContainer,children:(0,m.jsxs)("div",{className:c,children:[v,_]})}),j[34]=v,j[35]=_,j[36]=c,j[37]=b):b=j[37],b});try{sN.displayName||(sN.displayName="CodeTabIcon")}catch{}try{sw.displayName||(sw.displayName="TabIcon")}catch{}try{sI.displayName||(sI.displayName="ContentPreviewTab")}catch{}function sk(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,m.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 .5H3A2.5 2.5 0 0 0 .5 3v10A2.5 2.5 0 0 0 3 15.5h10a2.5 2.5 0 0 0 2.5-2.5V3A2.5 2.5 0 0 0 13 .5M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm6 6.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5M12.25 5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 12.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})}),t[0]=e):e=t[0],e}try{sk.displayName||(sk.displayName="DiceIcon")}catch{}let sE={container:"EmptyState-module__container--iHvWJ",icon:"EmptyState-module__icon--e1df9",heading:"EmptyState-module__heading--p3oK5",subtitle:"EmptyState-module__subtitle--oksOj"};function sT(e){let t,a,n,r,i,s,o,l,c,d,u,h,f=(0,p.c)(23),{isOpening:g}=e,y=(0,H.b)(),v=(0,$.Pk)(),_=(0,ef.zy)(),b=(0,x.useRef)(null);f[0]!==v?(t=(0,nR.W)(v),f[0]=v,f[1]=t):t=f[1];let j=t,S=(0,V.X)();f[2]===Symbol.for("react.memo_cache_sentinel")?(a=[],f[2]=a):a=f[2];let[C,N]=(0,x.useState)(a);f[3]!==S.icebreakers?(n=()=>{var e;if(Array.isArray(e=S.icebreakers)&&e.every(e=>"type"in e&&"data"in e)){let e=S.icebreakers.find(sA);e&&e.data.length>0&&N(e.data)}},f[3]=S.icebreakers,f[4]=n):n=f[4],f[5]!==_||f[6]!==S.icebreakers?(r=[S.icebreakers,_],f[5]=_,f[6]=S.icebreakers,f[7]=r):r=f[7],(0,x.useEffect)(n,r),f[8]!==g?(i=()=>{g&&b.current&&window.requestAnimationFrame(()=>{b.current?.focus()})},s=[g],f[8]=g,f[9]=i,f[10]=s):(i=f[9],s=f[10]),(0,x.useEffect)(i,s),f[11]!==j||f[12]!==C||f[13]!==y||f[14]!==v?(o=()=>{if(0===C.length)return;let e=function(e){let t=Math.floor(Math.random()*e.length),a=e[t];if(!a)throw Error("No icebreaker found");return a}(C),t=0===v.messages.length?j:(0,nR.W)(v),a=v.currentUserLogin,n=e.message;y.sendChatMessage({thread:t,content:n.replaceAll("$$USERNAME$$",a),references:v.currentReferences,topic:v.currentTopic,context:v.context,customInstructions:v.customInstructions,model:v.model}),(0,e9.BI)("dotcom_chat.activate",{target:"CONTENT_PREVIEW_EMPTY_STATE_ICEBREAKER_BUTTON",topic:v.currentTopic?.name,mode:"immersive",suggestionId:e.id})},f[11]=j,f[12]=C,f[13]=y,f[14]=v,f[15]=o):o=f[15];let w=o;return f[16]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)(P.BrowserIcon,{size:24,className:sE.icon}),u=(0,m.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),l=(0,m.jsx)("h2",{className:sE.heading,children:"View files directly within Copilot"}),c=(0,m.jsx)("p",{className:sE.subtitle,children:"Ask to generate a file or app, or use the button below to try it yourself."}),f[16]=l,f[17]=c,f[18]=d,f[19]=u):(l=f[16],c=f[17],d=f[18],u=f[19]),f[20]!==w||f[21]!==v.isWaitingOnCopilot?(h=(0,m.jsxs)("div",{className:sE.container,children:[d,u,l,c,(0,m.jsx)(eU.Q,{ref:b,leadingVisual:sk,onClick:w,disabled:v.isWaitingOnCopilot,children:"I\u2019m feeling lucky"})]}),f[20]=w,f[21]=v.isWaitingOnCopilot,f[22]=h):h=f[22],h}function sA(e){return"interactional"===e.type}try{sT.displayName||(sT.displayName="EmptyState")}catch{}let sL={container:"LoadingState-module__container--a0Cz6"};function sD(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:sL.container,children:(0,m.jsx)(a3.A,{size:"large"})}),t[0]=e):e=t[0],e}try{sD.displayName||(sD.displayName="LoadingState")}catch{}function sR(e,t,a={}){(0,e9.BI)(e,{contentPreviewType:t.type,mode:"immersive",path:t.id,...a})}function sP({returnFocusRef:e}){let t=(0,av.tZ)(),{items:a,allOpenItems:n,selectedItem:r,openItem:i,closeItem:s,closeItems:o,closePreviewPane:l,showLoadingState:c}=(0,av.xx)(),d=(0,aP.S)(t),u=t&&!d,p=d&&!t,h=n.map(e=>a.get(e)).filter(e=>e?.type==="file"),f=(0,x.useId)(),g=(0,x.useId)(),v=(0,x.useId)(),_=n.map(e=>a.get(e)).filter(e=>!!e);(0,x.useEffect)(()=>{p&&e.current?.focus()},[p,e]);let b=async()=>{let e=h.map(e=>new File([e.value],e.name));i3(new File([await (0,aF._6)(e).blob()],"files.zip"))},j=_.find(e=>e.id===r)??_[0],S=(0,x.useCallback)((e=!1)=>{if(j){let t=e&&1===_.length;s(j.id),t&&(l(),(0,e9.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"}))}},[s,l,_.length,j]),C=(0,x.useRef)([]),N=(0,x.useRef)(null);(0,aB.G)({containerRef:N,focusableElementFilter:e=>"tab"===e.role,bindKeys:aO.z0.ArrowHorizontal|aO.z0.HomeAndEnd,focusInStrategy:"first",focusOutBehavior:"wrap"},[_]);let w=!(0,aD.g)(N),I=e=>{let t=_[e];if(!t)return;let a=C.current[e+1]??C.current[e-1]??N.current;a?.focus();let n=1===_.length;s(t.id),n&&l(),sR("filePreviewTab.close",t)};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:aW.toolbar,children:[(0,m.jsx)("div",{className:(0,y.$)(aW.actions,aW.rightDivider),children:(0,m.jsx)(sO,{})}),(0,m.jsx)("div",{className:aW.tabsContainer,children:(0,m.jsxs)("div",{className:aW.tabs,role:"tablist","aria-label":"Workbench items",ref:N,tabIndex:-1,onWheel:e=>{e.deltaY&&(e.preventDefault(),e.currentTarget.scrollLeft+=e.deltaY)},children:[_.map((e,t)=>(0,m.jsx)(sI,{id:e.id===r?f:void 0,tabPanelId:e.id===r?g:void 0,controlHintId:v,isActive:e.id===r,onClick:()=>{i(e.id),sR("filePreviewTab.click",e)},onClose:()=>I(t),item:e,ref:e=>{C.current[t]=e}},e.id)),(0,m.jsx)("span",{id:v,"aria-hidden":"true",className:"sr-only",children:"Press Delete to close."}),(0,m.jsx)("span",{})]})}),n.length>0&&(0,m.jsx)("div",{className:(0,y.$)(aW.actions,w&&aW.leftDivider),children:(0,m.jsxs)(tB.W,{children:[(0,m.jsx)(tB.W.Anchor,{children:(0,m.jsx)(tF.K,{icon:P.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible"})}),(0,m.jsx)(tB.W.Overlay,{children:(0,m.jsxs)(tM.l,{children:[h.length>0&&(0,m.jsxs)(tM.l.Item,{onSelect:b,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.FileZipIcon,{})}),"Download all files"]}),(0,m.jsxs)(tM.l.Item,{onSelect:()=>{o(),l(),(0,e9.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE_ALL_TABS",mode:"immersive"})},children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.XIcon,{})}),"Close all tabs"]})]})})]})})," "]}),(0,m.jsx)("div",{className:aW.content,role:"tabpanel",id:g,"aria-labelledby":f,children:c?(0,m.jsx)(sD,{}):j?(0,m.jsx)(sS,{isOpening:u,previewItem:j,onClose:S}):(0,m.jsx)(sT,{isOpening:u})})]})}function sO(){let e,t=(0,p.c)(2),{closePreviewPane:a}=(0,av.xx)();return t[0]!==a?(e=(0,m.jsx)(tF.K,{variant:"invisible",icon:P.SidebarCollapseIcon,"aria-label":"Close workbench",onClick:()=>{a(),(0,e9.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"})}}),t[0]=a,t[1]=e):e=t[1],e}function sB(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:aW.toolbar,children:(0,m.jsx)("div",{className:(0,y.$)(aW.actions,aW.rightDivider),children:(0,m.jsx)(sO,{})})}),(0,m.jsx)("div",{className:(0,y.$)(aW.content),children:(0,m.jsx)(a$,{regionName:"The workbench"})})]}),t[0]=e):e=t[0],e}function sF(e){let t,a,n,r,i=(0,p.c)(10),s=(0,x.useId)(),o=ad(),l=(0,av.tZ)()?o:void 0;return i[0]!==s?(t=(0,m.jsx)("h2",{id:s,className:"sr-only",children:"Workbench"}),i[0]=s,i[1]=t):t=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)(sB,{}),i[2]=a):a=i[2],i[3]!==e?(n=(0,m.jsx)(aR.t,{fallback:a,children:(0,m.jsx)(sP,{...e})}),i[3]=e,i[4]=n):n=i[4],i[5]!==s||i[6]!==l||i[7]!==t||i[8]!==n?(r=(0,m.jsxs)("div",{"aria-labelledby":s,className:aW.container,tabIndex:-1,"data-testid":"content-preview",role:"dialog",ref:l,children:[t,n]}),i[5]=s,i[6]=l,i[7]=t,i[8]=n,i[9]=r):r=i[9],r}try{sP.displayName||(sP.displayName="ContentPreviewInner")}catch{}try{sO.displayName||(sO.displayName="CloseContentPreviewButton")}catch{}try{sB.displayName||(sB.displayName="ContentPreviewFallback")}catch{}try{sF.displayName||(sF.displayName="ContentPreview")}catch{}var sM=a(80597),sV=a(24001);function sU(){let e=(0,ef.zy)(),t=eg.fV.pathname;return(!t||eE.W.improvedNavigation)&&(t=e.pathname),(0,x.useMemo)(()=>t.includes("/share/"),[t])}let s$=/\/copilot\/c\/([^/]+)/,sW=/\/copilot\/share\/([^/]+)/;function sz(){let e,t=(0,p.c)(2),a=(0,ef.zy)(),n=eg.fV.pathname||a.pathname||"",{threadID:r}=(0,ef.g)();e:{let a;t[0]!==n?(a=n.match(s$)||n.match(sW),t[0]=n,t[1]=a):a=t[1];let r=a;if(!r){e=null;break e}let[,i]=r;e=i??null}let i=e;return eE.W.improvedNavigation?r??null:i}function sH(e,t){let a,n,r=(0,p.c)(17),i=(0,$.Pk)(),{currentReferences:s,context:o}=i,l=(0,H.b)(),{reloadQuota:c}=(0,aN.xR)();r[0]!==i?(a=(0,nR.W)(i),r[0]=i,r[1]=a):a=r[1];let d=a,{updateItem:u}=(0,av.xx)(),m=sU(),h=sz(),{activeCopilotSpaceId:f}=(0,sV.C)();return r[2]!==o||r[3]!==s||r[4]!==e||r[5]!==f||r[6]!==m||r[7]!==l||r[8]!==t||r[9]!==c||r[10]!==i.customInstructions||r[11]!==i.model||r[12]!==i.skillOptions||r[13]!==d||r[14]!==h||r[15]!==u?(n=async a=>{if(c("handle_message_submit"),""===a.trim())return;for(let e of s){let a=(0,aT.oR)({ref:e,messageIndex:t});null!=a&&u({...a,isUserEdited:!1})}let n={thread:d,content:a,references:s,topic:e.current,context:o,customInstructions:i.customInstructions,model:i.model,customCopilotId:f,skillOptions:i.skillOptions};if(m){let e=await l.continueSharedThread(h);if(e){let{thread:t,messages:a}=e,r=a.at(-1)?.id;await l.sendChatMessage({...n,thread:t,parentMessageId:r})}}else await l.sendChatMessage(n)},r[2]=o,r[3]=s,r[4]=e,r[5]=f,r[6]=m,r[7]=l,r[8]=t,r[9]=c,r[10]=i.customInstructions,r[11]=i.model,r[12]=i.skillOptions,r[13]=d,r[14]=h,r[15]=u,r[16]=n):n=r[16],n}var sq=a(3246),sG=a(75718);let sK={banner:"ChatInputBanners-module__banner--QlUDL"},sQ={container:"QuotaExceededBanner-module__container--BbiER"};function sJ(){let e,t,a,n,r=(0,p.c)(12),{isLicensedLimited:i,chatQuotaRemaining:s,premiumChatQuotaRemaining:o,premiumInteractionsQuotaExceeded:l,overagesEnabled:c}=(0,aN.xR)(),[d,u]=(0,x.useState)(sY);r[0]!==s||r[1]!==c||r[2]!==l?(e=()=>{if(eE.W.premiumRequestQuotasEnabled&&void 0!==s){let e=aI.J.getQuotaExceededBannerFlag();eE.W.premiumRequestQuotasEnabled&&!c&&l?null===e?(aI.J.setQuotaExceededBannerFlag(!0),u(!0)):u(e):(aI.J.removeQuotaExceededBannerFlag(),u(!1))}},r[0]=s,r[1]=c,r[2]=l,r[3]=e):e=r[3],r[4]!==s||r[5]!==c||r[6]!==o||r[7]!==l?(t=[s,o,c,l],r[4]=s,r[5]=c,r[6]=o,r[7]=l,r[8]=t):t=r[8],(0,x.useEffect)(e,t),r[9]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{aI.J.setQuotaExceededBannerFlag(!1),u(!1)},r[9]=a):a=r[9];let m=a,h=d&&!i&&void 0!==s&&eE.W.premiumRequestQuotasEnabled;return r[10]!==h?(n={visible:h,onDismiss:m},r[10]=h,r[11]=n):n=r[11],n}function sY(){return aI.J.getQuotaExceededBannerFlag()??!1}function sX(e){let t,a,n,r,i=(0,p.c)(13),{onDismiss:s}=e,{canUpgradePlan:o,canPurchaseAdditionalQuota:l,resetDate:c}=(0,aN.xR)(),d=`You have reached your monthly limit for premium requests. ${o?`Select an upgrade option or switch to the default model. Limit resets on ${c}.`:`Enable additional requests or switch to the default model. Limit resets on ${c}.`}`;i[0]!==l||i[1]!==o?(t=o?(0,m.jsx)(ab.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:s1,children:"Upgrade"}):l?(0,m.jsx)(ab.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:s0,children:"Enable additional requests"}):null,i[0]=l,i[1]=o,i[2]=t):t=i[2];let u=t;i[3]!==l||i[4]!==o?(a=o&&l?(0,m.jsx)(aM.A,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:sZ,children:"Enable additional requests"}):null,i[3]=l,i[4]=o,i[5]=a):a=i[5];let h=a;return i[6]!==s?(n=()=>{s(),(0,e9.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_BANNER_DISMISS",mode:"immersive"})},i[6]=s,i[7]=n):n=i[7],i[8]!==d||i[9]!==u||i[10]!==h||i[11]!==n?(r=(0,m.jsx)("div",{className:sQ.container,children:(0,m.jsx)(G.l,{variant:"upsell",title:"Limit reached",description:d,hideTitle:!0,primaryAction:u,secondaryAction:h,onDismiss:n})}),i[8]=d,i[9]=u,i[10]=h,i[11]=n,i[12]=r):r=i[12],r}function sZ(){(0,e9.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}function s0(){(0,e9.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}function s1(){(0,e9.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{sX.displayName||(sX.displayName="QuotaExceededBanner")}catch{}let s2=eE.W.premiumRequestQuotasEnabled?ek.mF:10;function s3(){let e,t,a,n,r=(0,p.c)(10),{isLicensedLimited:i,chatQuotaRemaining:s,premiumChatQuotaRemaining:o,premiumInteractionsQuotaExceeded:l,overagesEnabled:c}=(0,aN.xR)(),[d,u]=(0,x.useState)(s4);r[0]!==s||r[1]!==i||r[2]!==c||r[3]!==o||r[4]!==l?(e=()=>{if((i||eE.W.premiumRequestQuotasEnabled)&&void 0!==s){let e=aI.J.getMeterBannerFlag();s>0&&s<=s2||!i&&o>0&&o<=s2||!i&&l&&c?null===e?(aI.J.setMeterBannerFlag(!0),u(!0)):u(e):(aI.J.removeMeterBannerFlag(),u(!1))}},t=[i,s,o,c,l],r[0]=s,r[1]=i,r[2]=c,r[3]=o,r[4]=l,r[5]=e,r[6]=t):(e=r[5],t=r[6]),(0,x.useEffect)(e,t),r[7]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{aI.J.setMeterBannerFlag(!1),u(!1)},r[7]=a):a=r[7];let m=a,h=d&&void 0!==s&&(i||eE.W.premiumRequestQuotasEnabled);return r[8]!==h?(n={visible:h,onDismiss:m},r[8]=h,r[9]=n):n=r[9],n}function s4(){return aI.J.getMeterBannerFlag()??!1}function s5(e){let t,a,n,r,i,s=(0,p.c)(18),{onDismiss:o,className:l}=e,{isLicensedLimited:c,canUpgradePlan:d,canPurchaseAdditionalQuota:u,premiumInteractionsQuotaExceeded:h,resetDate:f}=(0,aN.xR)(),g=c?`You have used ${100-s2}% of your free requests this month.`:h?`You have used all premium requests available this month. You will be charged per additional premium request until the limit resets on ${f}.`:`You have used ${100-s2}% of your premium responses this month. ${d?"Upgrade to increase your limit.":"Enable additional requests to get more usage after the limit is reached."}`;s[0]!==u||s[1]!==d||s[2]!==h?(t=d&&!h?(0,m.jsx)(ab.z,{as:"a",href:ek.Zs,onClick:s9,children:"Upgrade"}):u&&!h?(0,m.jsx)(ab.z,{as:"a",href:ek.pF,onClick:s8,children:"Enable additional requests"}):(0,m.jsx)(ab.z,{as:"a",href:ek.MB,onClick:s7,children:"Manage billing"}),s[0]=u,s[1]=d,s[2]=h,s[3]=t):t=s[3];let y=t;s[4]!==u||s[5]!==d||s[6]!==h?(a=d&&u&&!h?(0,m.jsx)(aM.A,{as:"a",href:ek.Zs,onClick:s6,children:"Enable additional requests"}):null,s[4]=u,s[5]=d,s[6]=h,s[7]=a):a=s[7];let x=a;return s[8]!==o?(n=()=>{o(),(0,e9.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_DISMISS",mode:"immersive"})},s[8]=o,s[9]=n):n=s[9],s[10]!==g||s[11]!==y||s[12]!==x||s[13]!==n?(r=(0,m.jsx)(G.l,{variant:"info",title:"Limit reached soon",description:g,hideTitle:!0,primaryAction:y,secondaryAction:x,onDismiss:n}),s[10]=g,s[11]=y,s[12]=x,s[13]=n,s[14]=r):r=s[14],s[15]!==l||s[16]!==r?(i=(0,m.jsx)("div",{className:l,children:r}),s[15]=l,s[16]=r,s[17]=i):i=s[17],i}function s6(){(0,e9.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}function s7(){(0,e9.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_MANAGE_BILLING",mode:"immersive"})}function s8(){(0,e9.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_OVERAGES",mode:"immersive"})}function s9(){(0,e9.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{s5.displayName||(s5.displayName="QuotaMeterBanner")}catch{}function oe(){let e,t,a,n,r=(0,p.c)(12),{ambientError:i}=(0,$.Pk)(),s=s3(),o=sJ();return r[0]!==i?(e=i&&(0,m.jsx)(sG.P,{ambientError:i,useLargerBorderRadius:!0}),r[0]=i,r[1]=e):e=r[1],r[2]!==o.onDismiss||r[3]!==o.visible?(t=o.visible&&(0,m.jsx)(sX,{onDismiss:o.onDismiss}),r[2]=o.onDismiss,r[3]=o.visible,r[4]=t):t=r[4],r[5]!==s.onDismiss||r[6]!==s.visible?(a=s.visible&&(0,m.jsx)(s5,{className:sK.banner,onDismiss:s.onDismiss}),r[5]=s.onDismiss,r[6]=s.visible,r[7]=a):a=r[7],r[8]!==e||r[9]!==t||r[10]!==a?(n=(0,m.jsxs)(m.Fragment,{children:[e,t,a]}),r[8]=e,r[9]=t,r[10]=a,r[11]=n):n=r[11],n}try{oe.displayName||(oe.displayName="ChatInputBanners")}catch{}let ot={container:"Layout-module__container--ON_wj",left:"Layout-module__left--LHTG3",main:"Layout-module__main--JKQM5",content:"Layout-module__content--s7QoY",footer:"Layout-module__footer--raJHn",spaceBannerContainer:"Layout-module__spaceBannerContainer--hYIu0",chatInputContainer:"Layout-module__chatInputContainer--DXrKy",previewPane:"Layout-module__previewPane--vF1ZO",active:"Layout-module__active--nDCtU",viewer:"Layout-module__viewer--M_UyD",fullscreenPreviewPane:"Layout-module__fullscreenPreviewPane--i4oKD",fullscreenPluginPane:"Layout-module__fullscreenPluginPane--nfB0s"},oa={notificationsSection:"NotificationsSection-module__notificationsSection--ArEtE",spaceBannerContainer:"NotificationsSection-module__spaceBannerContainer--XY6vv",banner:"NotificationsSection-module__banner--gFs8T"},on={container:"FreeChatExceededBanner-module__container--tU_jX"};function or(){let e,t,a=(0,p.c)(3),{resetDate:n}=(0,aN.xR)(),r=`You have reached your free plan limit. Limit resets on ${n}.`;a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ab.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:oi,children:"Upgrade"}),a[0]=e):e=a[0];let i=e;return a[1]!==r?(t=(0,m.jsx)("div",{className:on.container,children:(0,m.jsx)(G.l,{variant:"upsell",title:"Limit reached",description:r,hideTitle:!0,primaryAction:i})}),a[1]=r,a[2]=t):t=a[2],t}function oi(){(0,e9.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{or.displayName||(or.displayName="FreeChatExceededBanner")}catch{}function os(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(G.l,{title:"Chat is disabled",variant:"warning",description:"Conversation unavailable. The linked space may have been deleted, or you might be signed out of your organization.",hideTitle:!0}),t[0]=e):e=t[0],e}function oo(e){let t,a=(0,p.c)(3),{customCopilot:n}=e,r=(0,ef.Zp)();return a[0]!==n||a[1]!==r?(t=n&&(0,m.jsx)(G.l,{title:"Chat is disabled",variant:"critical",description:"You've exceeded the size limit for this space. Remove some references to continue chatting.",hideTitle:!0,primaryAction:(0,m.jsx)(ab.z,{as:"a",href:(0,ak.Cb)(n),onClick:e=>{e.preventDefault(),r((0,ak.Cb)(n))},children:"Edit"})}),a[0]=n,a[1]=r,a[2]=t):t=a[2],t}function ol(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(G.l,{title:"Reference size exceeded",variant:"critical",description:"You've exceeded the size limit for this space. Remove some references to continue.",hideTitle:!0,className:"mb-3"}),t[0]=e):e=t[0],e}function oc(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(G.l,{title:"Reference not found",variant:"critical",description:"We couldn't access that repository. Make sure it exists and that you have permission to use it.",hideTitle:!0,className:"mb-3"}),t[0]=e):e=t[0],e}function od(e){let t,a,n,r=(0,p.c)(8),{errorMessages:i,onDismiss:s,className:o}=e,l=void 0===o?"":o;if(0===i.length)return null;r[0]!==i?(t=Array.from(new Set(i)),r[0]=i,r[1]=t):t=r[1];let c=t;r[2]!==c?(a=1===c.length?c[0]:(0,m.jsxs)(m.Fragment,{children:["Errors during attachment upload:",(0,m.jsx)("ul",{style:{paddingLeft:"1.2em"},children:c.map(ou)})]}),r[2]=c,r[3]=a):a=r[3];let d=a;return r[4]!==l||r[5]!==d||r[6]!==s?(n=(0,m.jsx)(G.l,{variant:"critical",description:d,title:"Error during attachment upload",hideTitle:!0,className:l,onDismiss:s}),r[4]=l,r[5]=d,r[6]=s,r[7]=n):n=r[7],n}function ou(e){return(0,m.jsx)("li",{children:e},e)}try{os.displayName||(os.displayName="SpaceDeletedBanner")}catch{}try{oo.displayName||(oo.displayName="SpaceSizeExceededBanner")}catch{}try{ol.displayName||(ol.displayName="ReferenceSizeExceededBanner")}catch{}try{oc.displayName||(oc.displayName="AssociatedRepositoryReferenceNotFoundBanner")}catch{}try{od.displayName||(od.displayName="UploadErrorBanner")}catch{}let om={spaceHomepage:"spaceHomepage",customCopilotDisabled:"customCopilotDisabled",customCopilotSizeExceeded:"customCopilotSizeExceeded"};function op(e){let t=(0,p.c)(4),{variant:a,customCopilot:n}=e;switch(a){case om.customCopilotDisabled:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(os,{}),t[0]=e):e=t[0],e}case om.customCopilotSizeExceeded:{let e;return t[1]!==n?(e=(0,m.jsx)(oo,{customCopilot:n}),t[1]=n,t[2]=e):e=t[2],e}case om.spaceHomepage:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(m.Fragment,{}),t[3]=e):e=t[3],e}default:return null}}function oh(e,t){let a,n,r=(0,p.c)(9),{isPending:i,data:s,error:o}=(0,aE.Ao)(e),l=o instanceof aE.i9,c=o instanceof aE.OW;if(o&&!l&&!c)throw o;let d=i||l||c||!s?void 0:s;r[0]!==d||r[1]!==e||r[2]!==i||r[3]!==t?(a=function(e,t,a,n){if(e&&!n)return om.spaceHomepage;if(a)return null;let r=!!t;return e&&!r?om.customCopilotDisabled:(0,ak.Hh)(t)?om.customCopilotSizeExceeded:null}(e,d,i,t),r[0]=d,r[1]=e,r[2]=i,r[3]=t,r[4]=a):a=r[4];let u=a;return r[5]!==d||r[6]!==i||r[7]!==u?(n={variant:u,customCopilot:d,isLoading:i},r[5]=d,r[6]=i,r[7]=u,r[8]=n):n=r[8],n}try{op.displayName||(op.displayName="SpaceConversationBanner")}catch{}function of(){let e,t,a=(0,p.c)(16),{ambientError:n,customCopilots:r,selectedThreadID:i}=(0,$.Pk)(),s=(0,sM.G)();a[0]!==s||a[1]!==r?(e=(0,ak.JB)(r,s),a[0]=s,a[1]=r,a[2]=e):e=a[2];let o=!!e,{chatQuotaExceeded:l,isLicensedLimited:c}=(0,aN.xR)(),{variant:d,customCopilot:u}=oh(s,i),h=(!d||o)&&!(c&&l),f=s3(),g=sJ(),y=d===om.customCopilotDisabled,x=d===om.customCopilotSizeExceeded,v=h&&n,_=h&&g.visible,b=h&&f.visible,j=!h,S=y||x,C=y||x||v||_||b||j;return a[3]!==n||a[4]!==u||a[5]!==g||a[6]!==f||a[7]!==v||a[8]!==j||a[9]!==_||a[10]!==b||a[11]!==C||a[12]!==y||a[13]!==S||a[14]!==x?(t=C&&(0,m.jsxs)("section",{"aria-label":"Notifications",className:oa.notificationsSection,children:[S&&(0,m.jsxs)("div",{className:oa.spaceBannerContainer,children:[y&&(0,m.jsx)(os,{}),x&&(0,m.jsx)(oo,{customCopilot:u})]}),v&&(0,m.jsx)(sG.P,{ambientError:n,useLargerBorderRadius:!0}),!S&&(0,m.jsxs)(m.Fragment,{children:[_&&(0,m.jsx)(sX,{onDismiss:g.onDismiss}),b&&(0,m.jsx)(s5,{className:oa.banner,onDismiss:f.onDismiss}),j&&(0,m.jsx)(or,{})]})]}),a[3]=n,a[4]=u,a[5]=g,a[6]=f,a[7]=v,a[8]=j,a[9]=_,a[10]=b,a[11]=C,a[12]=y,a[13]=S,a[14]=x,a[15]=t):t=a[15],t}try{of.displayName||(of.displayName="NotificationsSection")}catch{}function og(e){let t,a,n,r,i,s=(0,p.c)(17),{textAreaRef:o,handleUserSubmit:l,nextMessageIndex:c}=e,d=(0,$.Pk)(),{chatQuotaExceeded:u,isLicensedLimited:h}=(0,aN.xR)(),f=(0,sq.G)(),g=function(){let e,t=(0,p.c)(2),{figmaAuthUrl:a}=(0,V.X)();if(a){if(t[0]!==a){let n=new URL(a,location.origin);n.searchParams.set("return_url",location.pathname+location.search),e=n.toString(),t[0]=a,t[1]=e}else e=t[1];return e}}();s[0]!==c?(t={messageIndex:c},s[0]=c,s[1]=t):t=s[1];let y=aA(t),{versionedItems:x,items:v}=(0,av.xx)();if(s[2]!==v){for(let[,e]of(n=new Set,v))"file"===e.type&&n.add(e.name);s[2]=v,s[3]=n}else n=s[3];a=n;let _=!(h&&u);return s[4]!==_||s[5]!==a||s[6]!==g||s[7]!==l||s[8]!==f||s[9]!==c||s[10]!==y||s[11]!==d||s[12]!==o||s[13]!==x?(r=_?(0,m.jsxs)(m.Fragment,{children:[eE.W.groupNotifications&&(0,m.jsx)(of,{}),!eE.W.groupNotifications&&(0,m.jsx)(oe,{}),(0,m.jsx)(tL.V,{showModelPicker:!0,onNewThreadSelected:f,textAreaRef:o,onSubmit:l,isStreaming:!!d.streamingMessage,size:"large",showSpacesSelect:!0,onSelectReference:y,getReferenceVersion:e=>(0,aT.wt)(e,c,x),existingFileNames:a,figmaAuthUrl:g})]}):!eE.W.groupNotifications&&(0,m.jsx)(or,{}),s[4]=_,s[5]=a,s[6]=g,s[7]=l,s[8]=f,s[9]=c,s[10]=y,s[11]=d,s[12]=o,s[13]=x,s[14]=r):r=s[14],s[15]!==r?(i=(0,m.jsx)("div",{className:ot.chatInputContainer,children:r}),s[15]=r,s[16]=i):i=s[16],i}try{og.displayName||(og.displayName="ChatInputContainer")}catch{}var oy=a(54005),ox=a(22469),ov=a(53850),o_=a(86571);let ob=(0,x.createContext)(void 0);function oj(e){let t,a,n,r,i,s=(0,p.c)(11),{children:o,model:l,state:c,manager:d}=e;s[0]!==d||s[1]!==l||s[2]!==c?(t=async(e,t)=>{if(!e)return;[...e].some(oS)&&!l.capabilities.supports.vision&&(d.addAmbientError(`The ${l.displayName} model doesn't support answering questions about images. Select a different model and try again.`),(0,ov.d)("vision_not_supported_for_model",{modelId:l.id,uploadType:t}));let[a,n]=ox.s.getAllowedFiles([...e],l);if(a.length>0&&new ox.s(c,d).addImageAttachments(a,t),n.length>0){let e=[],a=new o_.E(d);await Promise.allSettled(n.map(async t=>{await o_.E.isAttachable(t)?await a.addAttachment(t):e.push(t.type)})),e.length>0&&(0,ov.d)("included_unsupported_file",{fileTypes:e.join(","),uploadType:t})}},s[0]=d,s[1]=l,s[2]=c,s[3]=t):t=s[3];let u=t;s[4]!==u?(a={onFilesDrop:e=>{u(e,"drag")},targetElement:eg.XC},s[4]=u,s[5]=a):a=s[5];let{isDragging:h}=(0,oy.J)(a);return s[6]!==h?(r={isDragging:h},s[6]=h,s[7]=r):r=s[7],n=r,s[8]!==o||s[9]!==n?(i=(0,m.jsx)(ob.Provider,{value:n,children:o}),s[8]=o,s[9]=n,s[10]=i):i=s[10],i}function oS(e){return e.type.startsWith("image/")}try{ob.displayName||(ob.displayName="DragDropContext")}catch{}try{oj.displayName||(oj.displayName="DragDropProvider")}catch{}var oC=a(66837),oN=a(83139),ow=a(75320),oI=a(45518),ok=a(7479),oE=a(84464),oT=a(58691),oA=a(94280),oL=a(640),oD=a(58868),oR=a(91321);let oP={shareButton:"ManageSharedConversationButton-module__shareButton--A4cNu",menuButton:"ManageSharedConversationButton-module__menuButton--BAXN7",successState:"ManageSharedConversationButton-module__successState--o6D7d",hideOnMobile:"ManageSharedConversationButton-module__hideOnMobile--HzeSN"},oO=x.forwardRef(function(e,t){let a,n,r,i,s,o,l,c,d,u,h,f,g,y,v,_,b,j,S=(0,p.c)(46),{openDialog:C}=e,{selectedThreadID:N,threads:w}=(0,$.Pk)(),[I,k]=(0,x.useState)(!1),[E,T]=(0,x.useState)(!1),[A,L]=(0,x.useState)(!1),[D,R]=(0,x.useState)("Copy link");S[0]!==N||S[1]!==w?(a=w.get(N)?.sharedID,S[0]=N,S[1]=w,S[2]=a):a=S[2];let O=a,B=`${eg.fV.origin}/copilot/share/${O||"\u2026"}`,{messages:F}=(0,$.Pk)(),M=(0,ek.Q7)(F).length>0;S[3]!==M?(n=()=>M?"Disabled for Copilot extensions":"Anyone with the link can view this conversation",S[3]=M,S[4]=n):n=S[4];let V=n;S[5]!==N||S[6]!==B||S[7]!==O?(r=async e=>{"preventDefault"in e&&(e.preventDefault(),e.stopPropagation());try{await (0,oL.D)(B),T(!0),R("Copied!"),setTimeout(()=>{T(!1),R("Copy link")},2e3),(0,e9.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive",originalThreadId:N,sharedThreadId:O})}catch{}},S[5]=N,S[6]=B,S[7]=O,S[8]=r):r=S[8];let U=r;S[9]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{k(!0),(0,e9.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_DIALOG_OPEN",mode:"immersive"})},S[9]=i):i=S[9];let W=i;S[10]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{k(!1),(0,e9.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_DIALOG_CLOSE",mode:"immersive"})},S[10]=s):s=S[10];let z=s;S[11]!==M||S[12]!==C?(o=()=>{M||C()},S[11]=M,S[12]=C,S[13]=o):o=S[13];let H=o,q=V();S[14]!==M||S[15]!==H?(l=(0,m.jsx)(eU.Q,{leadingVisual:P.UnlockIcon,onClick:H,inactive:M,children:"Share"}),S[14]=M,S[15]=H,S[16]=l):l=S[16],S[17]!==t||S[18]!==q||S[19]!==l?(c=(0,m.jsx)(oD.m,{text:q,direction:"n",type:"label",ref:t,children:l}),S[17]=t,S[18]=q,S[19]=l,S[20]=c):c=S[20],S[21]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)(tB.W.Button,{"aria-label":"Additional share options",icon:P.TriangleDownIcon,className:oP.menuButton}),S[21]=d):d=S[21],S[22]!==E?(u=(0,m.jsx)(tM.l.LeadingVisual,{children:E?(0,m.jsx)(P.CheckIcon,{className:oP.successState}):(0,m.jsx)(P.CopyIcon,{})}),S[22]=E,S[23]=u):u=S[23];let G=E?oP.successState:void 0;return S[24]!==D||S[25]!==G?(h=(0,m.jsx)("span",{className:G,children:D}),S[24]=D,S[25]=G,S[26]=h):h=S[26],S[27]!==U||S[28]!==u||S[29]!==h?(f=(0,m.jsxs)(tM.l.Item,{onSelect:U,children:[u,h]},"copy-link"),S[27]=U,S[28]=u,S[29]=h,S[30]=f):f=S[30],S[31]===Symbol.for("react.memo_cache_sentinel")?(g=(0,m.jsxs)(tM.l.Item,{variant:"danger",onSelect:W,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.UnlinkIcon,{})}),"Unshare"]},"Unshare-link"),S[31]=g):g=S[31],S[32]!==f?(y=(0,m.jsx)(tB.W.Overlay,{width:"small",children:(0,m.jsx)(tM.l,{children:(0,m.jsxs)(m.Fragment,{children:[f,g]})})}),S[32]=f,S[33]=y):y=S[33],S[34]!==A||S[35]!==y?(v=(0,m.jsxs)(tB.W,{open:A,onOpenChange:L,children:[d,y]}),S[34]=A,S[35]=y,S[36]=v):v=S[36],S[37]!==v||S[38]!==c?(_=(0,m.jsxs)(oR.A,{"data-testid":"manage-shared-conversations",className:`${oP.shareButton} ${oP.hideOnMobile}`,children:[c,v]}),S[37]=v,S[38]=c,S[39]=_):_=S[39],S[40]!==N||S[41]!==I?(b=I&&(0,m.jsx)(oA.Q,{threadId:N,closeDialog:z}),S[40]=N,S[41]=I,S[42]=b):b=S[42],S[43]!==_||S[44]!==b?(j=(0,m.jsxs)(m.Fragment,{children:[_,b]}),S[43]=_,S[44]=b,S[45]=j):j=S[45],j});try{oO.displayName||(oO.displayName="ManageSharedConversationButton")}catch{}try{(i=ManageSharedConversationButtonWithRef).displayName||(i.displayName="ManageSharedConversationButtonWithRef")}catch{}let oB={shareButton:"ShareConversationButton-module__shareButton--_CML9",hideOnMobile:"ShareConversationButton-module__hideOnMobile--AYVjz"},oF=x.forwardRef(function(e,t){let a,n,r,i,s=(0,p.c)(12),{openDialog:o}=e,{messages:l}=(0,$.Pk)(),c=(0,ek.Q7)(l).length>0;s[0]!==c||s[1]!==o?(a=()=>{c||o()},s[0]=c,s[1]=o,s[2]=a):a=s[2];let d=a;s[3]!==c?(n=()=>c?"Disabled for Copilot extensions":"This conversation has not yet been shared",s[3]=c,s[4]=n):n=s[4];let u=n();return s[5]!==c||s[6]!==d?(r=(0,m.jsx)(eU.Q,{leadingVisual:P.LockIcon,inactive:c,onClick:d,className:`${oB.shareButton} ${oB.hideOnMobile}`,children:"Share"}),s[5]=c,s[6]=d,s[7]=r):r=s[7],s[8]!==t||s[9]!==u||s[10]!==r?(i=(0,m.jsx)(oD.m,{text:u,direction:"n",type:"label",ref:t,children:r}),s[8]=t,s[9]=u,s[10]=r,s[11]=i):i=s[11],i});try{oF.displayName||(oF.displayName="ShareConversationButton")}catch{}try{(s=ShareConversationButtonWithRef).displayName||(s.displayName="ShareConversationButtonWithRef")}catch{}let oM=()=>{let e,t,a,n,r,i,s=(0,p.c)(12),{selectedThreadID:o,threads:l}=(0,$.Pk)();s[0]!==o||s[1]!==l?(e=o&&l.get(o)?.sharedID,s[0]=o,s[1]=l,s[2]=e):e=s[2];let c=!!e,[d,u]=(0,x.useState)(!1),h=(0,x.useRef)(null);s[3]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{u(!0),(0,e9.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_OPEN",mode:"immersive"})},s[3]=t):t=s[3];let f=t;s[4]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{u(!1),(0,e9.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"})},s[4]=a):a=s[4];let g=a;return s[5]!==c?(n=c?(0,m.jsx)(oO,{openDialog:f,ref:h}):(0,m.jsx)(oF,{openDialog:f,ref:h}),s[5]=c,s[6]=n):n=s[6],s[7]!==d?(r=d&&(0,m.jsx)(oT.S,{closeDialog:g,returnFocusRef:h}),s[7]=d,s[8]=r):r=s[8],s[9]!==n||s[10]!==r?(i=(0,m.jsxs)(m.Fragment,{children:[n,r]}),s[9]=n,s[10]=r,s[11]=i):i=s[11],i};try{oM.displayName||(oM.displayName="ConversationSharingButton")}catch{}let oV={header:"Header-module__header--ufLgW",rightControls:"Header-module__rightControls--Ce65x",editedPromptIndicator:"Header-module__editedPromptIndicator--k1vcE",leadingVisual:"Header-module__leadingVisual--O6MuP"};var oU=a(74547);let o$=()=>{let e=(0,$.Pk)(),t=(0,sM.G)(),a=(0,ak.JB)(e.customCopilots,t),n=(0,ak.mM)(),r=(0,ak.FQ)(),i=n||a,s=!r&&a;return{updateGlobalNavigationBreadcrumbs:()=>{let e=[{label:"Copilot",href:"/copilot"}];i&&e.push({label:"Spaces",href:ek.VR}),s&&a&&e.push({label:a.name,href:(0,ak.Cb)(a)}),(0,oU.FC)(e)}}},oW={dialog:"SystemPromptDialog-module__dialog--DZtq2",content:"SystemPromptDialog-module__content--OeMCM",description:"SystemPromptDialog-module__description--eb7_P",textareaContainer:"SystemPromptDialog-module__textareaContainer--MN8c4",textarea:"SystemPromptDialog-module__textarea--MK1JE"},oz=(0,x.forwardRef)(function(e,t){let a,n,r,i,s,o,l,c=(0,p.c)(12),d=(0,H.b)(),[u,h]=(0,x.useState)(!1),[f,g]=(0,x.useState)(void 0);c[0]===Symbol.for("react.memo_cache_sentinel")?(a=()=>({openDialog:()=>h(!0)}),c[0]=a):a=c[0],(0,x.useImperativeHandle)(t,a),c[1]!==d?(n=()=>{(async()=>{g(await d.getSystemPrompt())})()},r=[d],c[1]=d,c[2]=n,c[3]=r):(n=c[2],r=c[3]),(0,x.useEffect)(n,r),c[4]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{h(!1),(0,e9.BI)("dotcom_chat.activate",{target:"SYSTEM_PROMPT_DIALOG_CLOSE",mode:"immersive"})},c[4]=i):i=c[4];let y=i;c[5]!==f?(s=()=>(0,m.jsxs)("div",{className:oW.content,children:[(0,m.jsxs)("p",{className:oW.description,children:["The system prompt for"," ",(0,m.jsx)(aM.A,{muted:!0,inline:!0,href:"https://github.com/copilot",children:"GitHub Copilot"})," ","is a set of instructions that guides the LLM to provide enhanced functionality and output quality based on user input."]}),(0,m.jsx)("div",{className:oW.textareaContainer,children:(0,m.jsx)("textarea",{className:oW.textarea,readOnly:!0,children:f})})]}),c[5]=f,c[6]=s):s=c[6];let v=s;return c[7]!==u||c[8]!==v?(o=u&&(0,m.jsx)(a2.l,{onClose:y,title:"System prompt",renderBody:v,className:oW.dialog}),c[7]=u,c[8]=v,c[9]=o):o=c[9],c[10]!==o?(l=(0,m.jsx)(m.Fragment,{children:o}),c[10]=o,c[11]=l):l=c[11],l});try{oz.displayName||(oz.displayName="SystemPromptDialog")}catch{}function oH(e){let t,a,n,r,i,s,o,l,c,d,u,h,g,v,_,b,j,S,C,N,w,I,k,E,T,A,L,D,R,O,B,F,M,U,W,z=(0,p.c)(75),{showPreviewPaneButton:q,conversationSpecificItems:G,customButtons:K}=e,J=void 0===q||q,Y=(0,H.b)(),X=(0,$.Pk)(),{repoCustomInstructionsEnabled:Z,selectedThreadID:ee,threads:et,messagesLoading:ea,currentReferences:en}=X,er=(0,$.pn)(oQ),ei=sU(),es=(0,sM.G)(),eo=(0,ak.JB)(X.customCopilots,es);eo?(0,f.D)(`${er} \xb7 GitHub Copilot Spaces \xb7 ${eo.name}`):ei?(0,f.D)("Shared conversation \xb7 GitHub Copilot"):(0,f.D)(`${er} \xb7 GitHub Copilot`);let{updateGlobalNavigationBreadcrumbs:el}=o$();z[0]!==el?(t=()=>{el()},z[0]=el,z[1]=t):t=z[1],z[2]!==es||z[3]!==el?(a=[el,es],z[2]=es,z[3]=el,z[4]=a):a=z[4],(0,x.useEffect)(t,a);let ec=(0,x.useRef)(null),ed=(0,x.useRef)(null);z[5]===Symbol.for("react.memo_cache_sentinel")?(r=(0,ok.X)(),z[5]=r):r=z[5],n=r,z[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,Q.G7)("copilot_staff_prompt_dialog")&&n,z[6]=i):i=z[6];let eu=i,[em,ep]=(0,x.useState)(!1),[eh,ef]=(0,x.useState)(!1),eg=(0,x.useRef)(null),ey=!!aI.J.settings?.instructionPrompt,{isLicensedLimited:ex}=(0,aN.xR)(),ev=(0,x.useRef)(null),[e_,eb]=(0,x.useState)(null),eS=(0,ek.NJ)(en).length>0,[eC,eN,ew]=(0,oE.B)(!1),{canShareThread:eI}=(0,V.X)(),eE="loaded"===ea.state,[eT,eA]=(0,x.useState)(!1),eL=eI&&!ei&&ee&&!es&&eE,eD=(0,ak.mM)(),eR=!!(es||eD);return z[7]!==eL?(s=eL&&(0,m.jsx)(oM,{}),z[7]=eL,z[8]=s):s=z[8],z[9]===Symbol.for("react.memo_cache_sentinel")?(o=(0,y.$)(ey&&oV.editedPromptIndicator),z[9]=o):o=z[9],z[10]!==eC?(l=(0,m.jsx)(tB.W.Anchor,{children:(0,m.jsx)(tF.K,{icon:P.KebabHorizontalIcon,"aria-label":"Menu",onClick:oK,className:o,loading:eC})}),z[10]=eC,z[11]=l):l=z[11],z[12]!==ei||z[13]!==es||z[14]!==ee||z[15]!==et?(c=ee&&!ei&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(tM.l.Group,{children:[(0,m.jsx)(tM.l.GroupHeading,{children:"Conversation"}),(0,m.jsx)(oC.V,{onOpenDialog:eb,isShared:!!et.get(ee)?.sharedID,showShare:!es,hideShareOnDesktop:!0})]}),(0,m.jsx)(tM.l.Divider,{})]}),z[12]=ei,z[13]=es,z[14]=ee,z[15]=et,z[16]=c):c=z[16],z[17]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)(tM.l.GroupHeading,{children:"Prompt"}),z[17]=d):d=z[17],z[18]!==Y||z[19]!==Z||z[20]!==eS?(u=eS&&(0,m.jsxs)(tM.l.Item,{onSelect:()=>{Y.toggleRepoCustomInstructions(!Z)},children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.RepoIcon,{})}),Z?"Disable custom instructions":"Enable custom instructions"]}),z[18]=Y,z[19]=Z,z[20]=eS,z[21]=u):u=z[21],z[22]===Symbol.for("react.memo_cache_sentinel")?(h=()=>{ef(!0),(0,e9.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_PERSONAL_INSTRUCTIONS",mode:"immersive"})},z[22]=h):h=z[22],z[23]===Symbol.for("react.memo_cache_sentinel")?(g=(0,m.jsxs)(tM.l.Item,{onSelect:h,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.NoteIcon,{})}),"Personal instructions"]}),z[23]=g):g=z[23],z[24]===Symbol.for("react.memo_cache_sentinel")?(v=()=>{ed.current?.openDialog(),(0,e9.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SYSTEM_PROMPT",mode:"immersive"})},z[24]=v):v=z[24],z[25]===Symbol.for("react.memo_cache_sentinel")?(_=(0,m.jsxs)(tM.l.Item,{onSelect:v,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.CpuIcon,{})}),"System prompt"]}),b=eu&&(0,m.jsxs)(tM.l.Item,{onSelect:()=>ep(!0),children:[(0,m.jsx)(tM.l.LeadingVisual,{children:ey?(0,m.jsx)("span",{className:(0,y.$)(oV.editedPromptIndicator,oV.leadingVisual),children:(0,m.jsx)(P.BeakerIcon,{})}):(0,m.jsx)(P.BeakerIcon,{})}),"Edit prompt",(0,m.jsx)(tM.l.TrailingVisual,{children:(0,m.jsx)(ej.A,{variant:"attention",children:"Staff"})})]}),z[25]=_,z[26]=b):(_=z[25],b=z[26]),z[27]!==u?(j=(0,m.jsxs)(tM.l.Group,{children:[d,u,g,_,b]}),z[27]=u,z[28]=j):j=z[28],z[29]===Symbol.for("react.memo_cache_sentinel")?(S=(0,m.jsx)(tM.l.Divider,{}),z[29]=S):S=z[29],z[30]!==eR?(C=!eR&&(0,m.jsxs)(tM.l.Item,{onSelect:()=>{eA(!0)},children:["Manage shared conversations",(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.ListUnorderedIcon,{})})]}),z[30]=eR,z[31]=C):C=z[31],z[32]===Symbol.for("react.memo_cache_sentinel")?(N=()=>{ec.current?.openDialog(),(0,e9.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_GIVE_FEEDBACK",mode:"immersive"})},z[32]=N):N=z[32],z[33]===Symbol.for("react.memo_cache_sentinel")?(w=(0,m.jsxs)(tM.l.Item,{onSelect:N,children:["Give feedback",(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.CommentIcon,{})})]}),z[33]=w):w=z[33],z[34]!==ex?(I=ex&&(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(tM.l.LinkItem,{href:"/github-copilot/signup/copilot_individual",onClick:oG,children:["Upgrade to Pro",(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.CopilotIcon,{})})]})}),z[34]=ex,z[35]=I):I=z[35],z[36]===Symbol.for("react.memo_cache_sentinel")?(k=(0,m.jsxs)(tM.l.LinkItem,{href:"/settings/copilot",onClick:oq,children:["Settings",(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.GearIcon,{})})]}),z[36]=k):k=z[36],z[37]!==C||z[38]!==I?(E=(0,m.jsxs)(tM.l.Group,{children:[C,w,I,k]}),z[37]=C,z[38]=I,z[39]=E):E=z[39],z[40]!==G||z[41]!==c||z[42]!==j||z[43]!==E?(T=(0,m.jsx)(tB.W.Overlay,{width:"small",children:(0,m.jsxs)(tM.l,{children:[G,c,j,S,E]})}),z[40]=G,z[41]=c,z[42]=j,z[43]=E,z[44]=T):T=z[44],z[45]!==T||z[46]!==l?(A=(0,m.jsxs)(tB.W,{anchorRef:ev,children:[l,T]}),z[45]=T,z[46]=l,z[47]=A):A=z[47],z[48]!==J?(L=J&&(0,m.jsx)(oJ,{}),z[48]=J,z[49]=L):L=z[49],z[50]===Symbol.for("react.memo_cache_sentinel")?(D=(0,m.jsx)(oz,{ref:ed}),R=(0,m.jsx)(tO.l,{ref:ec,mode:"immersive",returnFocusRef:ev}),z[50]=D,z[51]=R):(D=z[50],R=z[51]),z[52]!==e_||z[53]!==ee||z[54]!==eN||z[55]!==ew||z[56]!==er?(O=ee&&(0,m.jsx)(oC.p,{visibleDialog:e_,onClose:()=>{(0,nw.flushSync)(()=>eb(null)),ev.current?.focus()},threadName:er,threadId:ee,selectedThreadId:ee,onStartLoading:eN,onFinishLoading:ew,returnFocusRef:ev}),z[52]=e_,z[53]=ee,z[54]=eN,z[55]=ew,z[56]=er,z[57]=O):O=z[57],z[58]!==K||z[59]!==A||z[60]!==L||z[61]!==O||z[62]!==s?(B=(0,m.jsxs)("div",{className:oV.rightControls,children:[s,K,A,L,D,R,O]}),z[58]=K,z[59]=A,z[60]=L,z[61]=O,z[62]=s,z[63]=B):B=z[63],z[64]!==em?(F=em&&(0,m.jsx)(oI.X,{promptDialogRef:eg,onDismiss:()=>ep(!1)}),z[64]=em,z[65]=F):F=z[65],z[66]!==eh?(M=eh&&(0,m.jsx)(ow.Y,{onDismiss:()=>ef(!1),returnFocusRef:ev}),z[66]=eh,z[67]=M):M=z[67],z[68]!==eT?(U=eT&&(0,m.jsx)(oN.b,{closeDialog:()=>{eA(!1)}}),z[68]=eT,z[69]=U):U=z[69],z[70]!==B||z[71]!==F||z[72]!==M||z[73]!==U?(W=(0,m.jsxs)("div",{className:oV.header,children:[B,F,M,U]}),z[70]=B,z[71]=F,z[72]=M,z[73]=U,z[74]=W):W=z[74],W}function oq(){return(0,e9.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SETTINGS",mode:"immersive"})}function oG(){return(0,e9.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_UPGRADE_PRO",mode:"immersive"})}function oK(){return(0,e9.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU",mode:"immersive"})}function oQ(e){return(0,ek.CB)((0,nR.W)(e))}function oJ(){let e,t=(0,p.c)(4),a=(0,av.tZ)(),{openPreviewPane:n}=(0,av.xx)(),r=ad();return t[0]!==r||t[1]!==n||t[2]!==a?(e=!a&&(0,m.jsx)(tF.K,{icon:P.SidebarExpandIcon,"aria-label":"Open workbench",onClick:()=>{(0,e9.BI)("dotcom_chat.activate",{target:"BROWSER_OPEN_BUTTON",mode:"immersive"}),n()},ref:r}),t[0]=r,t[1]=n,t[2]=a,t[3]=e):e=t[3],e}try{oH.displayName||(oH.displayName="Header")}catch{}try{oJ.displayName||(oJ.displayName="PreviewPaneButton")}catch{}let oY={container:"Breadcrumbs-module__container--YKNHG",list:"Breadcrumbs-module__list--TnuV6",item:"Breadcrumbs-module__item--_vfSo",link:"Breadcrumbs-module__link--mbjKG",text:"Breadcrumbs-module__text--GhYWN",icon:"Breadcrumbs-module__icon--_xcXd",condensed:"Breadcrumbs-module__condensed--KZIuk",condensedList:"Breadcrumbs-module__condensedList--T81hu",alwaysVisible:"Breadcrumbs-module__alwaysVisible--fSIsP",fullList:"Breadcrumbs-module__fullList--soXW5"},oX=e=>{let t,a,n,r,i,s=(0,p.c)(31),{children:o,"aria-label":l,condensed:c}=e,d=void 0===l?"Breadcrumbs":l;if(s[0]!==o){t=[];let e=(a,n)=>{let r=void 0===n?"":n;for(let[n,i]of x.Children.toArray(a).entries())(0,x.isValidElement)(i)&&(i.type===x.Fragment||"Symbol(react.fragment)"===i.type.toString()?e(i.props.children,`${r}fragment-${n}-`):i.type===oZ?t.push({key:i.key?.toString()||`${r}item-${n}`,href:i.props.href,children:i.props.children,hasMenu:!1}):i.type===o0&&t.push({key:i.key?.toString()||`${r}item-${n}`,children:i.props.children,hasMenu:!0,menuOverlay:i.props.menuOverlay}))};e(o),s[0]=o,s[1]=t}else t=s[1];let u=t[t.length-1];s[2]!==t?(a=t.slice(0,-1),s[2]=t,s[3]=a):a=s[3];let h=a,f=t.length>=3,g=void 0!==c&&c&&f,y=x.useRef(null);if(void 0!==c)if(g){let e,t,a,n,r;return s[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(eU.Q,{ref:y,className:oY.link,children:"..."}),s[4]=e):e=s[4],s[5]!==h?(t=(0,m.jsx)("li",{className:oY.item,children:(0,m.jsxs)(tB.W,{children:[e,(0,m.jsx)(tB.W.Overlay,{children:(0,m.jsx)(tM.l,{children:h.map(o1)})})]})}),s[5]=h,s[6]=t):t=s[6],s[7]!==u?(a=u&&(u.hasMenu&&u.menuOverlay?(0,m.jsx)(o0,{menuOverlay:u.menuOverlay,children:u.children}):u.href?(0,m.jsx)(oZ,{href:u.href,children:u.children}):null),s[7]=u,s[8]=a):a=s[8],s[9]!==t||s[10]!==a?(n=(0,m.jsxs)("ol",{className:oY.list,children:[t,a]}),s[9]=t,s[10]=a,s[11]=n):n=s[11],s[12]!==d||s[13]!==n?(r=(0,m.jsx)("nav",{className:`${oY.container} ${oY.condensed}`,"aria-label":d,children:n}),s[12]=d,s[13]=n,s[14]=r):r=s[14],r}else{let e,t;return s[15]!==o?(e=(0,m.jsx)("ol",{className:oY.list,children:o}),s[15]=o,s[16]=e):e=s[16],s[17]!==d||s[18]!==e?(t=(0,m.jsx)("nav",{className:oY.container,"aria-label":d,children:e}),s[17]=d,s[18]=e,s[19]=t):t=s[19],t}let v=`${oY.list} ${f?oY.fullList:oY.alwaysVisible}`;return s[20]!==o||s[21]!==v?(n=(0,m.jsx)("ol",{className:v,children:o}),s[20]=o,s[21]=v,s[22]=n):n=s[22],s[23]!==f||s[24]!==u||s[25]!==h?(r=f&&(0,m.jsxs)("ol",{className:`${oY.list} ${oY.condensedList}`,children:[(0,m.jsx)("li",{className:oY.item,children:(0,m.jsxs)(tB.W,{children:[(0,m.jsx)(eU.Q,{ref:y,className:oY.link,children:"..."}),(0,m.jsx)(tB.W.Overlay,{children:(0,m.jsx)(tM.l,{children:h.map(o2)})})]})}),u&&(u.hasMenu&&u.menuOverlay?(0,m.jsx)(o0,{menuOverlay:u.menuOverlay,children:u.children}):u.href?(0,m.jsx)(oZ,{href:u.href,children:u.children}):null)]}),s[23]=f,s[24]=u,s[25]=h,s[26]=r):r=s[26],s[27]!==d||s[28]!==n||s[29]!==r?(i=(0,m.jsxs)("nav",{className:oY.container,"aria-label":d,children:[n,r]}),s[27]=d,s[28]=n,s[29]=r,s[30]=i):i=s[30],i},oZ=e=>{let t,a,n,r,i,s=(0,p.c)(10);return s[0]!==e?({href:a,children:t,...n}=e,s[0]=e,s[1]=t,s[2]=a,s[3]=n):(t=s[1],a=s[2],n=s[3]),s[4]!==t?(r=(0,m.jsx)("span",{className:oY.text,children:t}),s[4]=t,s[5]=r):r=s[5],s[6]!==a||s[7]!==n||s[8]!==r?(i=(0,m.jsx)("li",{className:oY.item,children:(0,m.jsx)(ef.N_,{...n,to:a,className:oY.link,"aria-current":"page",children:r})}),s[6]=a,s[7]=n,s[8]=r,s[9]=i):i=s[9],i},o0=e=>{let t,a,n,r,i=(0,p.c)(8),{children:s,menuOverlay:o}=e;return i[0]!==s?(t=(0,m.jsx)("span",{className:oY.text,children:s}),i[0]=s,i[1]=t):t=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)("span",{className:oY.icon,children:(0,m.jsx)(P.TriangleDownIcon,{})}),i[2]=a):a=i[2],i[3]!==t?(n=(0,m.jsx)(tB.W.Anchor,{children:(0,m.jsxs)("button",{className:oY.link,"aria-current":"page","aria-haspopup":"true",children:[t,a]})}),i[3]=t,i[4]=n):n=i[4],i[5]!==o||i[6]!==n?(r=(0,m.jsx)("li",{className:oY.item,children:(0,m.jsxs)(tB.W,{children:[n,o]})}),i[5]=o,i[6]=n,i[7]=r):r=i[7],r};oX.Item=oZ,oX.ItemWithMenu=o0;try{oX.displayName||(oX.displayName="Breadcrumbs")}catch{}try{oZ.displayName||(oZ.displayName="Item")}catch{}try{o0.displayName||(o0.displayName="ItemWithMenu")}catch{}function o1(e){return(0,m.jsx)(tM.l.LinkItem,{href:e.href,children:e.children},e.key)}function o2(e){return(0,m.jsx)(tM.l.LinkItem,{href:e.href,children:e.children},e.key)}let o3={header:"HeaderV2-module__header--cIsU8",leftControls:"HeaderV2-module__leftControls--QxvCJ",rightControls:"HeaderV2-module__rightControls--BPxjz"};function o4(e){let t,a,n,r,i,s,o,l,c,d,u=(0,p.c)(34),{showPreviewPaneButton:h,conversationSpecificItems:g,customButtons:y}=e,v=void 0===h||h,_=(0,$.Pk)(),{selectedThreadID:b,threads:j,messagesLoading:S,messages:C}=_,N=(0,$.pn)(o5),w=sU(),I=(0,sM.G)(),k=(0,ak.JB)(_.customCopilots,I),E=(0,aE.BV)(),T=(0,ak.mM)(),A=(0,aw.v)(),[,L,D]=(0,oE.B)(!1);k?(0,f.D)(`${N} \xb7 GitHub Copilot Spaces \xb7 ${k.name}`):w?(0,f.D)("Shared conversation \xb7 GitHub Copilot"):(0,f.D)(`${N} \xb7 GitHub Copilot`);let{updateGlobalNavigationBreadcrumbs:R}=o$();u[0]!==R?(t=()=>{R()},u[0]=R,u[1]=t):t=u[1],u[2]!==I||u[3]!==R?(a=[R,I],u[2]=I,u[3]=R,u[4]=a):a=u[4],(0,x.useEffect)(t,a),u[5]!==w||u[6]!==b||u[7]!==j?(n=()=>{if(!b)return ek.Jz;if(w){let e=j.get(b)?.sharedID;return e?`/copilot/shared/${e}`:`/copilot/c/${b}`}return`/copilot/c/${b}`},u[5]=w,u[6]=b,u[7]=j,u[8]=n):n=u[8];let O=n;A?.id,r=T&&!I||!b&&!A?.id&&!T;let B=(0,x.useRef)(null),[F,M]=(0,x.useState)(null),{canShareThread:U}=(0,V.X)(),W="loaded"===S.state,z=U&&!w&&b&&!I&&W,H=(0,ek.Q7)(C).length>0;u[9]!==H||u[10]!==M?(i=()=>{H||M("share")},u[9]=H,u[10]=M,u[11]=i):i=u[11];let q=i,G=eE.W.immersiveAppShell&&(0,m.jsx)("div",{className:o3.leftControls,children:!r&&(0,m.jsx)(oX,{children:E&&I?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(oX.Item,{href:ek.VR,children:"Spaces"}),b||!g?(0,m.jsx)(oX.Item,{href:k?(0,ak.Cb)(k):ek.VR,children:k?.name||""}):(0,m.jsx)(oX.ItemWithMenu,{menuOverlay:(0,m.jsx)(tB.W.Overlay,{children:(0,m.jsx)(tM.l,{children:g})}),children:k?.name||""}),b&&(0,m.jsx)(oX.ItemWithMenu,{menuOverlay:(0,m.jsx)(tB.W.Overlay,{children:(0,m.jsx)(tM.l,{children:(0,m.jsx)(oC.V,{onOpenDialog:M,isShared:!!j.get(b)?.sharedID,showShare:!I,hideShareOnDesktop:!0})})}),children:N})]}):A?(0,m.jsx)(oX.Item,{href:`/copilot/${A.id}`,children:A.displayName||"Plugin"}):b&&!w?(0,m.jsx)(oX.ItemWithMenu,{menuOverlay:(0,m.jsx)(tB.W.Overlay,{children:(0,m.jsx)(tM.l,{children:(0,m.jsx)(oC.V,{onOpenDialog:M,isShared:!!j.get(b)?.sharedID,showShare:!I,hideShareOnDesktop:!0})})}),children:N}):w?(0,m.jsx)(oX.Item,{href:O(),children:N}):null})});return u[12]!==H||u[13]!==q||u[14]!==z?(s=z&&(0,m.jsx)(eU.Q,{leadingVisual:P.LockIcon,inactive:H,onClick:q,className:`${oB.shareButton} ${oB.hideOnMobile}`,children:"Share"}),u[12]=H,u[13]=q,u[14]=z,u[15]=s):s=u[15],u[16]!==v?(o=v&&(0,m.jsx)(o6,{}),u[16]=v,u[17]=o):o=u[17],u[18]!==F||u[19]!==b||u[20]!==M||u[21]!==L||u[22]!==D||u[23]!==N?(l=b&&(0,m.jsx)(oC.p,{visibleDialog:F,onClose:()=>{(0,nw.flushSync)(()=>M(null)),B.current?.focus()},threadName:N,threadId:b,selectedThreadId:b,onStartLoading:L,onFinishLoading:D,returnFocusRef:B}),u[18]=F,u[19]=b,u[20]=M,u[21]=L,u[22]=D,u[23]=N,u[24]=l):l=u[24],u[25]!==y||u[26]!==o||u[27]!==l||u[28]!==s?(c=(0,m.jsxs)("div",{className:o3.rightControls,children:[s,y,o,l]}),u[25]=y,u[26]=o,u[27]=l,u[28]=s,u[29]=c):c=u[29],u[30]!==c||u[31]!==o3.header||u[32]!==G?(d=(0,m.jsxs)("div",{className:o3.header,children:[G,c]}),u[30]=c,u[31]=o3.header,u[32]=G,u[33]=d):d=u[33],d}function o5(e){return(0,ek.CB)((0,nR.W)(e))}function o6(){let e,t=(0,p.c)(3),a=(0,av.tZ)(),{openPreviewPane:n}=(0,av.xx)();return t[0]!==n||t[1]!==a?(e=!a&&(0,m.jsx)(tF.K,{icon:P.SidebarExpandIcon,"aria-label":"Open workbench",onClick:()=>{(0,e9.BI)("dotcom_chat.activate",{target:"BROWSER_OPEN_BUTTON",mode:"immersive"}),n()}}),t[0]=n,t[1]=a,t[2]=e):e=t[2],e}try{o4.displayName||(o4.displayName="Header")}catch{}try{o6.displayName||(o6.displayName="PreviewPaneButton")}catch{}var o7=a(44669),o8=a(40136),o9=a(42342),le=a(84863),lt=a(59220),la=a(17515),ln=a(9205),lr=a(32702),li=a(45064),ls=a(69632),lo=a(78929),ll=a(95409),lc=a(4699),ld=a(87928),lu=a(5279),lm=a(85332),lp=a(79311),lh=a(39376),lf=a(84842),lg=a(88011),ly=a(90851),lx=a(97785);let lv={imageAttachment:"ChatImageAttachment-module__imageAttachment--YlPWs"},l_=e=>{let t,a,n,r,i=(0,p.c)(18),{messageId:s,src:o,alt:l,name:c,mode:d,squareView:u}=e,{openPreviewPane:h,openItem:f,updateItem:g}=(0,av.xx)(),y=`image:${o}`;i[0]!==y||i[1]!==f||i[2]!==h?(t=e=>{e.metaKey||e.ctrlKey||((0,e9.BI)("dotcom_chat.activate",{target:"BROWSER_IMAGE_OPENED",mode:"immersive"}),f(y),h(),e.preventDefault())},i[0]=y,i[1]=f,i[2]=h,i[3]=t):t=i[3];let v=t;return i[4]!==l||i[5]!==y||i[6]!==s||i[7]!==c||i[8]!==o||i[9]!==g?(a=()=>{g({altText:l,id:y,messageId:s,name:c,type:"image",url:o})},n=[y,l,s,c,o,g],i[4]=l,i[5]=y,i[6]=s,i[7]=c,i[8]=o,i[9]=g,i[10]=a,i[11]=n):(a=i[10],n=i[11]),(0,x.useEffect)(a,n),i[12]!==l||i[13]!==d||i[14]!==v||i[15]!==u||i[16]!==o?(r=(0,m.jsx)("div",{className:lv.imageAttachment,children:(0,m.jsx)(lx.o,{src:o,alt:l,onClick:v,mode:d,useOverlay:!0,squareView:u})}),i[12]=l,i[13]=d,i[14]=v,i[15]=u,i[16]=o,i[17]=r):r=i[17],r},lb=(0,x.memo)(l_);try{l_.displayName||(l_.displayName="ChatImageAttachmentUnmemoized")}catch{}try{lb.displayName||(lb.displayName="ChatImageAttachment")}catch{}let lj={chatMessage:"ChatMessage-module__chatMessage--rtt38",user:"ChatMessage-module__user--UoWHh",editing:"ChatMessage-module__editing--BMp49",content:"ChatMessage-module__content--MYneF",imageGrid:"ChatMessage-module__imageGrid--juCGt",imageRow:"ChatMessage-module__imageRow--HFSCK",references:"ChatMessage-module__references--Kunt2",messageArea:"ChatMessage-module__messageArea--CoOmf",userMessage:"ChatMessage-module__userMessage--xvIFp",messageSubthreadIndicator:"ChatMessage-module__messageSubthreadIndicator--DJyyk",actions:"ChatMessage-module__actions--Jllb6",ai:"ChatMessage-module__ai--WrCO3",latest:"ChatMessage-module__latest--IZwZP",actionsPlaceholder:"ChatMessage-module__actionsPlaceholder--MCwTL",avatar:"ChatMessage-module__avatar--KYI8V",sharedThreadActions:"ChatMessage-module__sharedThreadActions--Z9ffu ChatMessage-module__actions--Jllb6",skillExecutionText:"ChatMessage-module__skillExecutionText--pIBPI",errorFallback:"ChatMessage-module__errorFallback--d0bNW"},lS={container:"ChatPagingComponent-module__container--nH9hp",disabledButton:"ChatPagingComponent-module__disabledButton--hCGPC",pageIndicator:"ChatPagingComponent-module__pageIndicator--HoVKG"};function lC(e){let t,a,n,r,i,s,o=(0,p.c)(23),{currentPage:l,totalPages:c,onPrev:d,onNext:u,isUserMessage:h}=e,f=(0,$.A3)("isWaitingOnCopilot");if(l<1)throw Error("currentPage must be greater than or equal to 1");if(c<1)throw Error("totalPages must be greater than or equal to 1");if(l>c)throw Error("currentPage must be less than or equal to totalPages");let g=1===l||f,y=l===c||f,x=g?lS.disabledButton:"",v=y?lS.disabledButton:"";o[0]!==l||o[1]!==h||o[2]!==d||o[3]!==g?(t=()=>{if(g)return;let e=h?"USER_MESSAGE_ACTION_PREVIOUS_RESPONSE":"RESPONSE_ACTION_PREVIOUS_RESPONSE";(0,e9.BI)("dotcom_chat.activate",{target:e,mode:"immersive"}),d(l-1)},o[0]=l,o[1]=h,o[2]=d,o[3]=g,o[4]=t):t=o[4];let _=t;o[5]!==l||o[6]!==h||o[7]!==y||o[8]!==u?(a=()=>{if(y)return;let e=h?"USER_MESSAGE_ACTION_NEXT_RESPONSE":"RESPONSE_ACTION_NEXT_RESPONSE";(0,e9.BI)("dotcom_chat.activate",{target:e,mode:"immersive"}),u(l+1)},o[5]=l,o[6]=h,o[7]=y,o[8]=u,o[9]=a):a=o[9];let b=a;return o[10]!==_||o[11]!==x?(n=(0,m.jsx)(tF.K,{variant:"invisible","aria-label":"Previous response",onClick:_,icon:P.ChevronLeftIcon,className:x}),o[10]=_,o[11]=x,o[12]=n):n=o[12],o[13]!==l||o[14]!==c?(r=(0,m.jsxs)("span",{className:lS.pageIndicator,children:[l,"/",c]}),o[13]=l,o[14]=c,o[15]=r):r=o[15],o[16]!==b||o[17]!==v?(i=(0,m.jsx)(tF.K,{variant:"invisible","aria-label":"Next response",onClick:b,icon:P.ChevronRightIcon,className:v}),o[16]=b,o[17]=v,o[18]=i):i=o[18],o[19]!==n||o[20]!==r||o[21]!==i?(s=(0,m.jsxs)("div",{className:lS.container,"data-testid":"chat-paging-component",children:[n,r,i]}),o[19]=n,o[20]=r,o[21]=i,o[22]=s):s=o[22],s}try{lC.displayName||(lC.displayName="ChatPagingComponent")}catch{}let lN={container:"ClientConfirmations-module__container--gWbBU",text:"ClientConfirmations-module__text--WHq3j"};function lw(e){let t,a,n,r=(0,p.c)(5),{authorName:i,clientConfirmations:s}=e,o=s?.[0]?.state;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,y.$)("my-1",lN.container),r[0]=t):t=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)(P.CheckIcon,{}),r[1]=a):a=r[1],r[2]!==i||r[3]!==o?(n=(0,m.jsx)("div",{className:t,children:(0,m.jsxs)("span",{className:lN.text,children:[a," ",i," ",o," the action"]})}),r[2]=i,r[3]=o,r[4]=n):n=r[4],n}try{lw.displayName||(lw.displayName="ClientConfirmations")}catch{}let lI={container:"UserMessageEdit-module__container--rqkMG",input:"UserMessageEdit-module__input--LbiZ1",inputContainer:"UserMessageEdit-module__inputContainer--tewB2",actions:"UserMessageEdit-module__actions--_YMp2"},lk=e=>{let t,a,n,r,i,s,o,l,c,d,u,h,f,g=(0,p.c)(25),{messageContent:y,onSubmit:v,onCancel:_}=e,b=(0,$.A3)("isWaitingOnCopilot"),[j,S]=(0,x.useState)(y),C=(0,x.useRef)(null);g[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{C.current&&(C.current.style.height="auto",C.current.style.height=`${C.current.scrollHeight}px`)},g[0]=t):t=g[0],g[1]!==j?(a=[j],g[1]=j,g[2]=a):a=g[2],(0,x.useEffect)(t,a),g[3]!==j||g[4]!==v?(n=()=>{(0,e9.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_SUBMIT",mode:"immersive"}),v(j)},g[3]=j,g[4]=v,g[5]=n):n=g[5];let N=n;g[6]!==y||g[7]!==_?(r=()=>{_(),S(y),(0,e9.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_CANCEL",mode:"immersive"})},g[6]=y,g[7]=_,g[8]=r):r=g[8];let w=r,I=b?void 0:N;return g[9]!==w||g[10]!==I?(i={"copilot-chat:send-message":I,"github:cancel":w},g[9]=w,g[10]=I,g[11]=i):i=g[11],g[12]===Symbol.for("react.memo_cache_sentinel")?(s=(0,aG.G)("user-message-edit-box"),g[12]=s):s=g[12],g[13]===Symbol.for("react.memo_cache_sentinel")?(o=e=>S(e.target.value),g[13]=o):o=g[13],g[14]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{C.current&&(C.current.style.height="auto",C.current.style.height=`${C.current.scrollHeight}px`)},g[14]=l):l=g[14],g[15]!==j?(c=(0,m.jsx)("div",{className:lI.inputContainer,children:(0,m.jsx)("textarea",{ref:C,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-multiline":"true",rows:1,placeholder:"Ask Copilot",value:j,onChange:o,className:lI.input,autoFocus:!0,onInput:l,onFocus:lE})}),g[15]=j,g[16]=c):c=g[16],g[17]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)(a1.cQ,{commandId:"github:cancel",children:"Cancel"}),g[17]=d):d=g[17],g[18]===Symbol.for("react.memo_cache_sentinel")?(u=(0,aG.G)("user-message-edit-submit"),g[18]=u):u=g[18],g[19]!==b?(h=(0,m.jsxs)("div",{className:lI.actions,children:[d,(0,m.jsx)(a1.cQ,{commandId:"copilot-chat:send-message",showKeybindingHint:!0,variant:"primary",...u,disabled:b,children:"Send"})]}),g[19]=b,g[20]=h):h=g[20],g[21]!==c||g[22]!==h||g[23]!==i?(f=(0,m.jsxs)(a1.tL,{commands:i,className:lI.container,...s,children:[c,h]}),g[21]=c,g[22]=h,g[23]=i,g[24]=f):f=g[24],f};try{lk.displayName||(lk.displayName="UserMessageEdit")}catch{}function lE(e){return e.target.setSelectionRange(0,e.target.value.length)}let lT=({excludeFeedback:e,inputRef:t,isLatestMessage:a,isLatestUserMessage:n,isFirstReply:r,isStreaming:i,parentMessage:s,messageIndex:o,autoOpenPreviewPane:l,...c})=>{let{message:d}=(0,eB.V)(),u=(0,x.useMemo)(()=>(0,ek.H2)(d.references??[]),[d.references]),p=(0,H.b)(),h=(0,$.bP)("customCopilots","editingMessage","mode","wrapCodeLines"),f=(0,lg.tD)(),{items:g,versionedItems:v,openItem:_,removeItems:b,getOpenItems:j,openItemsBeforeSubthreadChange:S,setOpenItemsBeforeSubthreadChange:C,enableLoadingState:N,disableLoadingState:w}=(0,av.xx)(),I=aA({messageIndex:o,messageId:d.id,messageTimestamp:d.createdAt}),k=(0,x.useCallback)(()=>{let e=f(),t=[],a=d;for(;null!=a;)t.push(a.id),a=void 0!==a.selectedChildIndex?e.messages[a.selectedChildIndex]:void 0;let n=new Map;for(let[e,t]of g){let a=n.get(t.messageId)||[];a.push(e),n.set(t.messageId,a)}let r=[];for(let e of t){let t=n.get(e);if(t)for(let e of t)r.push(e)}for(let[e,t]of g)t.messageId===nD.Wp&&r.push(e);let i=j();C([...i]),r.some(e=>i.includes(e))&&N(),b(r)},[g,N,f,d,j,b,C]),{author:E,handleConfirmationAction:T,handleRetryErrorMessage:A,handleRetryCopilotResponse:L,handleEditUserMessage:D,hasClientConfirmations:R,isAgentError:O,isAI:B,isCopilot:F,isError:M,isInterrupted:V,isUser:U,myRef:W,rendererConfig:z,renderFeedback:q,shouldShowMessageActions:G,skillExecutionToUseForRespondingText:K,showRetryButton:Q}=(0,lh.p)({excludeFeedback:e,inputRef:t,isLatestMessage:a,isStreaming:i,removeOutdatedContentPreviewItems:k}),J=sU(),Y=h.editingMessage===d.id,X=i&&!M&&!d.confirmations&&!G&&a&&(!e||B),Z=(s?.childMessageIndexes?.findIndex(e=>e===o)||0)+1||1,ee=s?.childMessageIndexes?.length||1,et=ee>=lf.L9,ea=p.maxMessagesReached(),en=ee>1,er=(0,x.useMemo)(()=>d.mediaContent?.filter(e=>e.mediaType.startsWith("image/")),[d.mediaContent]),ei=(0,x.useMemo)(()=>eE.W.attachImagesImmersive&&void 0!==er&&er.length>0||!1,[er]),es=G&&J&&(F||en),eo=(0,x.useRef)(null),el=(0,ly.M)(e=>{let t=v.get((0,aT.oy)(e))?.at(-1);t&&_(t,!1)});(0,x.useEffect)(()=>{if(eo.current!==d.id&&a&&S.length>0){let e=setTimeout(()=>{for(let e of S)el.current(e);w(),C([])});return()=>clearTimeout(e)}eo.current=d.id},[w,d.id,S,a,C,el]);let ec=(0,x.useCallback)(()=>{let{messages:e}=f(),t=Z-1;p.setSelectedMessage(e[s.childMessageIndexes[t-1]]),k()},[Z,p,s,k,f]),ed=(0,x.useCallback)(()=>{let{messages:e}=f(),t=Z-1;p.setSelectedMessage(e[s.childMessageIndexes[t+1]]),k()},[Z,p,s,k,f]),eu=(0,sq.G)(),{model:em,availableModels:ep}=(0,$.bP)("model","availableModels"),eh=em;d.model&&(eh=(ep??[eh]).find(e=>e.id===d.model)||eh);let ef=()=>p.startEditingMessage(d.id),eg=(0,sM.G)(),ey=!!(0,ak.JB)(h.customCopilots,eg),{selectedThreadID:ex}=(0,$.bP)("selectedThreadID"),{variant:ev}=oh(eg,ex),e_=ev===om.customCopilotSizeExceeded,eb=et||ea||!!eg&&!ey||e_,ej=F&&i&&a&&!d.content,eS=(0,x.useCallback)(e=>{p.setWrapCodeLines(e)},[p]),eC=i?rR:rP;return(0,m.jsxs)("div",{className:(0,y.$)("message-container",lj.chatMessage,U&&lj.user,B&&lj.ai,Y?lj.editing:"",a&&lj.latest),ref:W,...(0,aG.G)(`message-${M?"error":i?"streaming":d.id}`),children:[B?(0,m.jsx)(li.W,{isLoading:i&&a,isLoadingSkills:(d.skillExecutions??[]).length>0&&i&&""===d.content&&a,isError:M&&d.error?.type!=="agentUnauthorized",className:lj.avatar,mode:h.mode,isFirstMessage:r,message:d.content||"",createdAt:d.createdAt}):null,U&&ei&&(0,m.jsx)("div",{className:er?.length===4?lj.imageGrid:lj.imageRow,children:er?.map(e=>(0,m.jsx)(lb,{name:e?.name||"Uploaded image",messageId:d.id,src:e?.url||"",alt:`Uploaded image${e?.name?`: ${e.name}`:""}`,mode:h.mode,squareView:er?.length>=2},e?.url||""))}),U&&d.references&&d.references.length>0&&(0,m.jsx)(nz,{className:lj.references,messageId:d.id,messageTimestamp:d.createdAt,messageIndex:o,references:d.references,size:"medium"}),!Y&&(0,m.jsx)("div",{className:lj.content,children:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:(0,y.$)("js-snippet-clipboard-copy-unpositioned",lj.messageArea),children:[R?(0,m.jsx)(lw,{authorName:E.name,clientConfirmations:d.clientConfirmations??[]}):U?(0,m.jsx)(lm.R,{accessibleHeader:(0,ek.hV)("You",d.content??""),className:lj.userMessage}):(0,m.jsxs)(m.Fragment,{children:[ej&&(0,m.jsx)(lp.b,{className:(0,y.$)(lj.skillExecutionText,"mb-2"),children:`${(0,ll.WA)(K)}...`}),d.references&&d.references.length>0&&d.content&&(0,m.jsx)(nW.s,{className:"mb-2",references:d.references,isImmersive:!0,onClick:(e,t)=>{"draft-issue"===e.type&&I(e,t)}}),"assistant"===d.role&&(u.length?(0,m.jsx)(ln.Q,{mcpToolResults:u}):null),!R&&d.content&&(0,m.jsx)(lA,{children:(0,m.jsx)(eC,{autoOpenPreviewPane:l,markdown:d.content,messageId:d.id,messageIndex:o,messageTimestamp:d.createdAt,accessibleHeader:(0,ek.hV)("Copilot",d.content??""),copilotAnnotations:d.copilotAnnotations,wrapCodeLines:h.wrapCodeLines,onWrapCodeLinesChange:eS,...z})}),M?(0,m.jsx)(ls.K,{manager:p}):null,O&&d.agentErrors&&(0,m.jsx)(ls.h,{errors:d.agentErrors}),V?(0,m.jsx)(lc.h,{messageHasContent:!!d.content||!!d.skillExecutions?.length}):null,B&&!ej&&(0,ek.Ye)(d.confirmations).map((e,t)=>"indexrepo"===e.confirmation.name?null:(0,m.jsx)(lr.m,{confirmation:e,handleConfirmation:T,isLatestMessage:a},t))]}),en&&!a&&(0,m.jsxs)("div",{className:lj.messageSubthreadIndicator,"data-testid":"chat-paging-indicator",children:[Z,"/",ee]})]}),X&&(0,m.jsx)("div",{className:lj.actionsPlaceholder}),!G&&Q&&(0,m.jsx)(ld.$,{handleRetryMessage:A,disabled:eb}),G&&!J&&(0,m.jsxs)(lu.M,{"aria-label":"Message tools",className:lj.actions,"data-testid":"nonshared-toolbar",children:[U&&(n?(0,m.jsx)(a1.N5,{commandId:"copilot-chat:edit-last-message",variant:"invisible","aria-label":"Edit message",onClick:ef,icon:P.PencilIcon,disabled:eb,...(0,aG.G)("edit-message-button")}):(0,m.jsx)(tF.K,{variant:"invisible","aria-label":"Edit message",onClick:ef,icon:P.PencilIcon,disabled:eb,...(0,aG.G)("edit-message-button")})),F&&(0,m.jsxs)(m.Fragment,{children:[q&&(0,m.jsx)(lo.G,{iconSize:"medium"}),!!d.content&&!i&&(0,m.jsx)(iZ.T,{textToCopy:d.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center",onCopy:()=>(0,e9.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})]}),Q&&M?(0,m.jsx)(ld.$,{handleRetryMessage:A,disabled:eb}):B&&!M&&!d.clientSide&&(0,m.jsx)(ld.$,{handleRetryMessage:L,disabled:eb,showModelPicker:!!ep&&ep.length>1,model:eh,navigateToNewThread:eu}),en&&(0,m.jsx)(lC,{currentPage:Z,totalPages:ee,onPrev:ec,onNext:ed,isUserMessage:U})]}),es&&(0,m.jsxs)(lu.M,{"aria-label":"Message tools",className:lj.sharedThreadActions,"data-testid":"shared-toolbar",children:[F&&(0,m.jsx)(m.Fragment,{children:!!d.content&&!i&&(0,m.jsx)(iZ.T,{textToCopy:d.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center actions",onCopy:()=>(0,e9.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})}),en&&(0,m.jsx)(lC,{currentPage:Z,totalPages:ee,onPrev:ec,onNext:ed,isUserMessage:U})]})]})}),Y&&(0,m.jsx)(lk,{messageContent:d.content||"",onSubmit:D,onCancel:()=>p.cancelEditingMessage()})]})},lA=e=>{let t,a,n=(0,p.c)(3),{children:r}=e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(G.l,{className:lj.errorFallback,variant:"warning",title:"Message cannot be displayed",description:"An unknown error occurred while attempting to display this message."}),n[0]=t):t=n[0],n[1]!==r?(a=(0,m.jsx)(aR.t,{fallback:t,children:r}),n[1]=r,n[2]=a):a=n[2],a},lL=e=>{let t,a,n,r,i,s,o,l,c=(0,p.c)(23);c[0]!==e?({message:n,messageIndex:r,isSharedMessage:a,isLatestMessage:t,...i}=e,c[0]=e,c[1]=t,c[2]=a,c[3]=n,c[4]=r,c[5]=i):(t=c[1],a=c[2],n=c[3],r=c[4],i=c[5]);let d=sU();return c[6]!==t||c[7]!==a||c[8]!==d||c[9]!==n||c[10]!==r||c[11]!==i?(s=!rF(n)&&(0,m.jsx)(lT,{...i,messageIndex:r,isSharedMessage:a,isLatestMessage:t,isViewingSharedThread:d}),c[6]=t,c[7]=a,c[8]=d,c[9]=n,c[10]=r,c[11]=i,c[12]=s):s=c[12],c[13]!==t||c[14]!==a||c[15]!==d||c[16]!==n||c[17]!==r?(o=(0,m.jsx)(rM,{message:n,messageIndex:r,isViewingSharedThread:d,isSharedMessage:a,isLatestMessage:t}),c[13]=t,c[14]=a,c[15]=d,c[16]=n,c[17]=r,c[18]=o):o=c[18],c[19]!==n||c[20]!==s||c[21]!==o?(l=(0,m.jsxs)(eB.$,{message:n,children:[s,o]}),c[19]=n,c[20]=s,c[21]=o,c[22]=l):l=c[22],l},lD=(0,x.memo)(lL),lR=e=>{let t,a,n=(0,p.c)(7),{message:r}=e,i=(0,$.Pk)();n[0]!==r||n[1]!==i.messages?(t=(0,nx.CX)(i.messages,r),n[0]=r,n[1]=i.messages,n[2]=t):t=n[2];let s=t,o="user"===r.role&&i.messages.findLast(lO)?.id===r.id;return n[3]!==o||n[4]!==s||n[5]!==e?(a=(0,m.jsx)(lD,{...e,parentMessage:s,isLatestUserMessage:o}),n[3]=o,n[4]=s,n[5]=e,n[6]=a):a=n[6],a},lP=e=>{let t,a=(0,p.c)(2);return a[0]!==e?(t=(0,m.jsx)(lA,{children:(0,m.jsx)(lR,{...e})}),a[0]=e,a[1]=t):t=a[1],t};try{lT.displayName||(lT.displayName="InnerChatMessage")}catch{}try{lA.displayName||(lA.displayName="MessageErrorBoundary")}catch{}try{lL.displayName||(lL.displayName="ChatMessageUnmemoized")}catch{}try{lD.displayName||(lD.displayName="ChatMessageMemoized")}catch{}try{lR.displayName||(lR.displayName="ChatMessageWrapped")}catch{}try{lP.displayName||(lP.displayName="ChatMessage")}catch{}function lO(e){return"user"===e.role}var lB=a(94232);let lF={ConversationLoader:"ConversationLoader-module__ConversationLoader--iaHbr",ConversationLoader__assistantGroup:"ConversationLoader-module__ConversationLoader__assistantGroup--PYCmE",ConversationLoader__userGroup:"ConversationLoader-module__ConversationLoader__userGroup--rnmbz",ConversationLoader__assistantAvatar:"ConversationLoader-module__ConversationLoader__assistantAvatar--jPmNg"};function lM(){let e,t,a=(0,p.c)(2);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:lF.ConversationLoader__userGroup,children:(0,m.jsx)(lB.O,{variant:"rounded",height:"20px",width:"random"})}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsxs)("div",{className:lF.ConversationLoader,"data-testid":"conversation-loader",children:[e,(0,m.jsxs)("div",{className:lF.ConversationLoader__assistantGroup,children:[(0,m.jsx)(lB.O,{className:lF.ConversationLoader__assistantAvatar,variant:"elliptical",sx:{position:"absolute",height:24}}),Array.from({length:Math.floor(4*Math.random())+2}).map(lV)]})]}),a[1]=t):t=a[1],t}function lV(e,t){return(0,m.jsx)(lB.O,{variant:"rounded",height:"20px",width:"random"},t)}try{lM.displayName||(lM.displayName="ConversationLoader")}catch{}let lU={container:"ErrorState-module__container--DKNLc",icon:"ErrorState-module__icon--Grz_W",description:"ErrorState-module__description--uIC8b",sso:"ErrorState-module__sso--b2klG"};function l$(e){let t,a,n,r,i,s=(0,p.c)(11),{title:o,description:l,ssoOrgs:c}=e,d=c&&c.length>0;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)(aV.E.Visual,{children:(0,m.jsx)(P.AlertIcon,{size:"medium",className:lU.icon})}),s[1]=a):a=s[1],s[2]!==o?(n=(0,m.jsx)(aV.E.Heading,{as:"h2",children:o}),s[2]=o,s[3]=n):n=s[3],s[4]!==l||s[5]!==d||s[6]!==c?(r=(void 0!==l||d)&&(0,m.jsxs)("div",{className:lU.description,children:[(0,m.jsx)(aV.E.Description,{children:(0,m.jsx)("span",{children:l})}),(0,m.jsx)("div",{className:lU.sso,children:d&&(0,m.jsx)(W.x,{protectedOrgs:c})})]}),s[4]=l,s[5]=d,s[6]=c,s[7]=r):r=s[7],s[8]!==n||s[9]!==r?(i=(0,m.jsxs)("div",{className:lU.container,children:[t,(0,m.jsxs)(aV.E,{border:!1,children:[a,n,r]})]}),s[8]=n,s[9]=r,s[10]=i):i=s[10],i}function lW(){let e,t,a,n,r,i=(0,p.c)(6),{helpUrl:s}=(0,V.X)();i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),i[0]=e):e=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(aV.E.Visual,{children:(0,m.jsx)(P.LockIcon,{size:"medium",className:lU.icon})}),a=(0,m.jsx)(aV.E.Heading,{as:"h2",children:"You don't have access to this shared conversation"}),i[1]=t,i[2]=a):(t=i[1],a=i[2]),i[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(aV.E.Description,{children:(0,m.jsx)("span",{children:"To view this shared link, you must have permissions to all resources referenced in the conversation."})}),i[3]=n):n=i[3];let o=`${s}/copilot/using-github-copilot/copilot-chat/asking-github-copilot-questions-in-github#sharing-copilot-chat-conversations`;return i[4]!==o?(r=(0,m.jsxs)("div",{className:lU.container,children:[e,(0,m.jsxs)(aV.E,{border:!1,children:[t,a,(0,m.jsxs)("div",{className:lU.description,children:[n,(0,m.jsx)(aM.A,{inline:!0,href:o,children:"Learn more"})]})]})]}),i[4]=o,i[5]=r):r=i[5],r}try{l$.displayName||(l$.displayName="ErrorState")}catch{}try{lW.displayName||(lW.displayName="SharedThreadForbidden")}catch{}let lz={container:"ImmersiveChat-module__container--Q4j2R",emptyContent:"ImmersiveChat-module__emptyContent--IQfnX",messageContent:"ImmersiveChat-module__messageContent--fpzTL",scrollToBottomButton:"ImmersiveChat-module__scrollToBottomButton--MQEF2",hidden:"ImmersiveChat-module__hidden--K3ci9"},lH=e=>{let t,a,n,r,i,s,o,l,c,d,u,h=(0,p.c)(42),{inputRef:f,isMobile:g}=e,{scrollToBottom:y}=(0,o8.b)(),v=(0,$.Pk)(),{isWaitingOnCopilot:_,messagesLoading:b,streamingMessage:j,messages:S}=v,{reloadQuota:C,premiumChatQuotaRemaining:N,isLicensedLimited:w}=(0,aN.xR)();h[0]!==v?(a=(0,nR.W)(v),t=(0,ek.CB)(a),h[0]=v,h[1]=t,h[2]=a):(t=h[1],a=h[2]);let I=t,k=a?.sharedMessageID,{messages:E,groupedMessages:T}=(0,lt.a)(v);h[3]!==E?(n=E.find(lY)?.id,h[3]=E,h[4]=n):n=h[4];let A=n;h[5]!==y?(r=()=>y("instant"),i=[y],h[5]=y,h[6]=r,h[7]=i):(r=h[6],i=h[7]),(0,la.N)(r,i);let L=(0,aP.S)(v.streamingMessage);if(h[8]!==w||h[9]!==_||h[10]!==E.length||h[11]!==b.state||h[12]!==N||h[13]!==L||h[14]!==C||h[15]!==j?(s=()=>{E.length>0&&!w&&eE.W.premiumRequestQuotasEnabled&&N<=ek.aX&&!_&&"loaded"===b.state&&L&&!j&&C("quota_low_trigger")},o=[w,_,E.length,b.state,N,L,C,j],h[8]=w,h[9]=_,h[10]=E.length,h[11]=b.state,h[12]=N,h[13]=L,h[14]=C,h[15]=j,h[16]=s,h[17]=o):(s=h[16],o=h[17]),(0,x.useEffect)(s,o),h[18]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)("h1",{children:"Copilot Chat"}),h[18]=l):l=h[18],h[19]!==I?(c=(0,m.jsxs)("div",{className:"sr-only",children:[l,(0,m.jsx)("h2",{children:I})]}),h[19]=I,h[20]=c):c=h[20],h[21]!==S||h[22]!==A||h[23]!==T||h[24]!==f||h[25]!==g||h[26]!==_||h[27]!==k||h[28]!==j?.id){let e;h[30]!==S||h[31]!==A||h[32]!==T.length||h[33]!==f||h[34]!==g||h[35]!==_||h[36]!==k||h[37]!==j?.id?(e=(e,t)=>(0,m.jsx)(o7.i,{isLastGroup:t===T.length-1,children:e.map((a,n)=>{let r=-1===a.messageIndex?S.length:a.messageIndex,i=t===T.length-1&&n===e.length-1;return(0,m.jsx)(lP,{isLatestMessage:i,isSharedMessage:a.id===k,isFirstReply:a.id===A,message:a,messageIndex:r,inputRef:f,isStreaming:a.id===j?.id||i&&_,autoOpenPreviewPane:!g},n)})},t),h[30]=S,h[31]=A,h[32]=T.length,h[33]=f,h[34]=g,h[35]=_,h[36]=k,h[37]=j?.id,h[38]=e):e=h[38],d=T.map(e),h[21]=S,h[22]=A,h[23]=T,h[24]=f,h[25]=g,h[26]=_,h[27]=k,h[28]=j?.id,h[29]=d}else d=h[29];return h[39]!==c||h[40]!==d?(u=(0,m.jsxs)("div",{children:[c,d]}),h[39]=c,h[40]=d,h[41]=u):u=h[41],u},lq=()=>{let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(l$,{title:"Conversation failed to load",description:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(aM.A,{href:"",onClick:lX,inline:!0,children:"Reload the page"})," ","to try again."]})}),t[0]=e):e=t[0],e},lG=()=>{let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(l$,{title:"Access denied",description:"You do not have permission to view this."}),t[0]=e):e=t[0],e},lK=e=>{let t,a,n=(0,p.c)(7),{isSharedThread:r}=e,{messagesLoading:i,ssoOrganizations:s}=(0,$.Pk)(),o=r?"Shared conversation not found":"Conversation not found";n[0]!==i.missingOrgIds||n[1]!==s?(t=i.missingOrgIds?.map(lZ).map(e=>s?.find(t=>t.id===e)?.login).filter(l0),n[0]=i.missingOrgIds,n[1]=s,n[2]=t):t=n[2];let l=t,c=l&&l.length>0?"This URL may be incorrect, you're signed out of your organization or the conversation may have been deleted.":"This URL may be incorrect or the conversation may have been deleted.";return n[3]!==c||n[4]!==l||n[5]!==o?(a=(0,m.jsx)(l$,{title:o,description:c,ssoOrgs:l}),n[3]=c,n[4]=l,n[5]=o,n[6]=a):a=n[6],a},lQ=e=>{let t,a,n,r,i,s=(0,p.c)(19),{inputRef:o,isMobile:l}=e,c=(0,$.Pk)(),{messagesLoading:d,threadsLoading:u,messages:h,showTopicPicker:f,pendingFirstMessage:g}=c,y=(0,nR.W)(c),{textAreaRef:x}=(0,le.Y)(o),v=sU(),_=null,b=null;if((0,nx.B)(h,g).length&&"loaded"===d.state){let e;s[0]!==l||s[1]!==x?(e=(0,m.jsx)(lH,{inputRef:x,isMobile:l}),s[0]=l,s[1]=x,s[2]=e):e=s[2],_=e}else if(("loading"===d.state||"pending"===d.state)&&c.selectedThreadID&&!f){let e;s[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(lM,{}),s[3]=e):e=s[3],_=e}else if("error"===d.state&&c.selectedThreadID&&(null===y||d.notFound))if(v&&c.fetchSharedThreads?.ok===!1&&403===c.fetchSharedThreads.status){let e;s[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(lW,{}),s[4]=e):e=s[4],b=e}else{let e;s[5]!==v?(e=(0,m.jsx)(lK,{isSharedThread:v}),s[5]=v,s[6]=e):e=s[6],b=e}else if("error"===d.state||"error"===u.state){let e;s[7]!==u.status?(e=403===u.status?(0,m.jsx)(lG,{}):(0,m.jsx)(lq,{}),s[7]=u.status,s[8]=e):e=s[8],b=e}let j=ad();return s[9]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(lJ,{}),s[9]=t):t=s[9],s[10]!==b?(a=b&&(0,m.jsx)("div",{className:lz.emptyContent,children:b}),s[10]=b,s[11]=a):a=s[11],s[12]!==_?(n=_&&(0,m.jsxs)("div",{className:lz.messageContent,children:[_,(0,m.jsx)(o9.Cb,{})]}),s[12]=_,s[13]=n):n=s[13],s[14]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(o9.zc,{}),s[14]=r):r=s[14],s[15]!==j||s[16]!==a||s[17]!==n?(i=(0,m.jsxs)(o8.$,{className:lz.container,containerRef:j,children:[t,a,n,r]}),s[15]=j,s[16]=a,s[17]=n,s[18]=i):i=s[18],i},lJ=()=>{let e,t,a,n=(0,p.c)(7),{isScrolledUp:r,scrollToBottom:i}=(0,o8.b)(),s=!r&&lz.hidden;return n[0]!==s?(e=(0,y.$)(lz.scrollToBottomButton,s),n[0]=s,n[1]=e):e=n[1],n[2]!==i?(t=()=>i("smooth"),n[2]=i,n[3]=t):t=n[3],n[4]!==e||n[5]!==t?(a=(0,m.jsx)(tF.K,{as:"a","aria-label":"Scroll to bottom",className:e,onClick:t,icon:P.ArrowDownIcon,tooltipDirection:"n",href:"#copilot-chat-textarea"}),n[4]=e,n[5]=t,n[6]=a):a=n[6],a};try{lH.displayName||(lH.displayName="Messages")}catch{}try{lq.displayName||(lq.displayName="FailedToLoadThreadError")}catch{}try{lG.displayName||(lG.displayName="AccessDeniedError")}catch{}try{lK.displayName||(lK.displayName="NotFoundError")}catch{}try{lQ.displayName||(lQ.displayName="ImmersiveChat")}catch{}try{lJ.displayName||(lJ.displayName="ScrollToBottomButton")}catch{}function lY(e){return"assistant"===e.role}function lX(e){e.preventDefault(),window.location.reload()}function lZ(e){return String(e)}function l0(e){return!!e}var l1=a(60183);let l2=JSON.parse('{"Files":{"id":"files-group","name":"Files","color":"var(--display-gray-fgColor)","icon":"file","entries":[{"id":"create-profile-readme","message":"First, create an outstanding README for my GitHub profile using only Markdown. Then ask for key details (such as profession, top skills, favorite projects, or social links) to further refine and personalize it.","titleHtml":"Profile README"},{"id":"generate-html-calculator","message":"Generate a simple calculator using HTML, CSS, and JavaScript.","titleHtml":"Simple calculator"},{"id":"make-pong","message":"Create a simple Pong game using HTML, CSS, and JavaScript. The player should control the left paddle with their mouse and arrow keys up/down, the right paddle is the computer. Make sure the game includes a bouncing ball, a scoreboard and collision detection for paddles and walls.","titleHtml":"Pong game"},{"id":"mermaid-architecture","message":"Create a Markdown file with a Mermaid diagram showing an architecture overview.","titleHtml":"Mermaid architecture overview"}]},"Pull requests":{"id":"pull-requests-group","name":"Pull requests","color":"var(--display-green-fgColor)","icon":"git-pull-request","entries":[{"id":"list-open-prs","message":"List my latest open pull requests.","titleHtml":"My open pull requests"},{"id":"summarize-pr","message":"Search for my latest merged PR and summarize it. What was the purpose and the key changes made?","titleHtml":"Summarize my latest PR"}]},"Issues":{"id":"issues-group","name":"Issues","color":"var(--display-green-fgColor)","icon":"issue-opened","entries":[{"id":"list-open-issues","message":"List the latest open issues assigned to me.","titleHtml":"Issues assigned to me"},{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"summarize-issue","message":"Summarize the latest issue that I\'ve opened including all comments.","titleHtml":"Summarize my latest issue"}]},"Git":{"id":"git-group","name":"Git","color":"var(--display-gray-fgColor)","icon":"git-branch","entries":[{"id":"basic-git-commands","message":"Explain what basic Git commands are and how to use them. Include commands like `git status`, `git init`, `git clone`, `git add`, `git commit`, `git push`, and `git pull`. Provide examples for each command.","titleHtml":"Basic Git commands"},{"id":"git-branching","message":"Explain how to create and manage branches in Git. Include commands like `git branch`, `git checkout`, `git merge`, and `git rebase`. Provide examples for each command.","titleHtml":"Git branching"},{"id":"advanced-git-commands","message":"Explain advanced Git commands and their usage. Include commands like `git stash`, `git cherry-pick`, `git revert`, and `git reset`. Provide examples for each command.","titleHtml":"Advanced Git commands"}]}}');var l3=a(65556);function l4(e){let t,a,n,r,i,s=(0,p.c)(12),{className:o}=e,[l,c]=(0,x.useState)(i5.L.Static),[d,u]=(0,x.useState)(!0),{safeSetTimeout:h}=(0,l3.A)();return s[0]!==h?(t=()=>{let e=h(()=>{aI.J.getProPlusAnimationFlag()?(c(i5.L.Activate),u(!1)):(c(i5.L.Idle),u(!0))},1e3);return()=>clearTimeout(e)},a=[h],s[0]=h,s[1]=t,s[2]=a):(t=s[1],a=s[2]),(0,x.useEffect)(t,a),s[3]!==l?(n=()=>{l===i5.L.Activate&&(c(i5.L.Idle),u(!0),aI.J.removeProPlusAnimationFlag())},s[3]=l,s[4]=n):n=s[4],s[5]!==l||s[6]!==d||s[7]!==n?(r=(0,m.jsx)(i5.N,{animationType:l,onAnimationEnd:n,loopAnimation:d,size:48}),s[5]=l,s[6]=d,s[7]=n,s[8]=r):r=s[8],s[9]!==o||s[10]!==r?(i=(0,m.jsx)("div",{className:o,children:r}),s[9]=o,s[10]=r,s[11]=i):i=s[11],i}try{l4.displayName||(l4.displayName="CopilotEmptyStateAnimation")}catch{}let l5={container:"CompactStarterGroupsWithMenu-module__container--f3r0C",icon:"CompactStarterGroupsWithMenu-module__icon--omHP2",starterMenu:"CompactStarterGroupsWithMenu-module__starterMenu--A6UZ4",shiftDown:"CompactStarterGroupsWithMenu-module__shiftDown--BG4zP"};function l6(e){let t,a,n,r,i,s,o,l=(0,p.c)(18),{groups:c,onEntrySelect:d}=e,[u,h]=(0,x.useState)(!1),f=(0,x.useRef)(null);if(l[0]!==u?(t=()=>h(!u),l[0]=u,l[1]=t):t=l[1],l[2]===Symbol.for("react.memo_cache_sentinel")?(a=tR.I&&(0,m.jsx)("div",{className:l5.icon,children:(0,m.jsx)(tR.I,{icon:"kebab-horizontal",color:"var(--fgColor-muted)"})}),l[2]=a):a=l[2],l[3]!==u||l[4]!==t?(n=(0,m.jsx)(tB.W.Anchor,{children:(0,m.jsx)("button",{ref:f,className:l5.container,onClick:t,"aria-expanded":u,"aria-label":"More starters",children:a})}),l[3]=u,l[4]=t,l[5]=n):n=l[5],l[6]===Symbol.for("react.memo_cache_sentinel")?(r={width:"260px"},l[6]=r):r=l[6],l[7]!==c||l[8]!==d){let e;l[10]!==d?(e=e=>(0,m.jsxs)(tB.W,{children:[(0,m.jsx)(tB.W.Anchor,{children:(0,m.jsx)(tM.l.Item,{children:tR.I&&(0,m.jsxs)("div",{className:l5.starterMenu,children:[(0,m.jsx)(tR.I,{icon:e.icon,color:e.color,className:l5.shiftDown}),(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("span",{children:e.name})})]})})}),(0,m.jsx)(tB.W.Overlay,{children:(0,m.jsx)(tM.l,{children:e.entries.map(e=>(0,m.jsx)(tM.l.Item,{onSelect:()=>d(e),children:(0,m.jsx)(sl.$6,{html:e.titleHtml})},e.id))})})]},e.id),l[10]=d,l[11]=e):e=l[11],i=c.map(e),l[7]=c,l[8]=d,l[9]=i}else i=l[9];return l[12]!==i?(s=(0,m.jsx)(tB.W.Overlay,{style:r,children:(0,m.jsx)(tM.l,{children:i})}),l[12]=i,l[13]=s):s=l[13],l[14]!==u||l[15]!==n||l[16]!==s?(o=(0,m.jsxs)(tB.W,{open:u,onOpenChange:h,children:[n,s]}),l[14]=u,l[15]=n,l[16]=s,l[17]=o):o=l[17],o}try{l6.displayName||(l6.displayName="CompactStarterGroupsWithMenu")}catch{}let l7={scrollContainer:"NewConversation-module__scrollContainer--Xfaaj",container:"NewConversation-module__container--Qt89h",banner:"NewConversation-module__banner--nBNmy",main:"NewConversation-module__main--GVJMw",content:"NewConversation-module__content--j88E1",alignTop:"NewConversation-module__alignTop--gdI7p",innerContainer:"NewConversation-module__innerContainer--gDENn",footer:"NewConversation-module__footer--uQNk1",starters:"NewConversation-module__starters--leV1b",starters_short:"NewConversation-module__starters_short--fE4iM",item:"NewConversation-module__item--PJdL6",spaceName:"NewConversation-module__spaceName--yEZaT"},l8={container:"StarterPill-module__container--BCDeZ",icon:"StarterPill-module__icon--ca2DE",title:"StarterPill-module__title--ODdkN",dropdown:"StarterPill-module__dropdown--wcx2F"},l9=x.forwardRef((e,t)=>{let a,n,r,i,s=(0,p.c)(14),{name:o,icon:l,color:c,onClick:d,dropdown:u,open:h}=e;return s[0]!==c||s[1]!==l?(a=tR.I&&(0,m.jsx)("div",{className:l8.icon,children:(0,m.jsx)(tR.I,{icon:l,color:c})}),s[0]=c,s[1]=l,s[2]=a):a=s[2],s[3]!==u?(n=u&&(0,m.jsx)("div",{className:l8.dropdown,children:(0,m.jsx)(P.TriangleDownIcon,{})}),s[3]=u,s[4]=n):n=s[4],s[5]!==o||s[6]!==n?(r=(0,m.jsxs)("div",{className:l8.title,children:[o,n]}),s[5]=o,s[6]=n,s[7]=r):r=s[7],s[8]!==d||s[9]!==h||s[10]!==t||s[11]!==a||s[12]!==r?(i=(0,m.jsxs)("button",{ref:t,className:l8.container,onClick:d,"aria-expanded":h,children:[a,r]}),s[8]=d,s[9]=h,s[10]=t,s[11]=a,s[12]=r,s[13]=i):i=s[13],i});function ce(){let e,t,a=(0,p.c)(5),n=(0,H.b)(),r=(0,$.Pk)();a[0]!==n||a[1]!==r?(e=()=>{let e=(0,nR.W)(r);n.sendChatMessage({thread:e,content:"First, create a new draft issue. Then ask for additional information to fill out the issue",references:r.currentReferences,topic:r.currentTopic,context:r.context,customInstructions:r.customInstructions,model:r.model}),(0,e9.BI)("dotcom_chat.activate",{target:"STARTER_CUSTOM_CREATE_ISSUE",mode:"immersive"})},a[0]=n,a[1]=r,a[2]=e):e=a[2];let i=e;return a[3]!==i?(t=(0,m.jsx)("li",{className:l7.item,children:(0,m.jsx)(l9,{name:"Create issue",icon:"issue-draft",color:"var(--fgColor-muted)",onClick:i})}),a[3]=i,a[4]=t):t=a[4],t}l9.displayName="StarterPill";try{ce.displayName||(ce.displayName="CreateIssue")}catch{}var ct=a(23985),ca=a(33036),cn=a(88245);let cr={container:"EditorUpsellBanner-module__container--CVVb2",banner:"EditorUpsellBanner-module__banner--nLwUI",title:"EditorUpsellBanner-module__title--UkB0l",description:"EditorUpsellBanner-module__description--wNgDi",actions:"EditorUpsellBanner-module__actions--tJUAU",editorButton:"EditorUpsellBanner-module__editorButton--gkwOw",closeButton:"EditorUpsellBanner-module__closeButton--qXUPm"};function ci(){let e,t,a,n,r,i=(0,p.c)(10),s=(0,$.A3)("isEditorUpsellBannerDismissed"),o=(0,H.b)(),{isLicensedLimited:l}=(0,aN.xR)(),c=(0,x.useId)(),d=cs;return s||!l?null:(i[0]!==c?(e=(0,m.jsx)("h2",{className:cr.title,id:c,children:"Install Copilot in your favorite code editor"}),i[0]=c,i[1]=e):e=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("p",{className:cr.description,children:"Copilot is available for a multitude of editors to fit your needs"}),a=eE.W.freeToPaidSettingsUpgrade?(0,m.jsx)(ct.B,{menuLocation:"editor_upsell_banner",mode:"immersive"}):(0,m.jsxs)(oR.A,{className:cr.actions,children:[(0,m.jsx)(ab.z,{className:cr.editorButton,href:cn.A.vscode.url,leadingVisual:(0,m.jsx)("img",{src:cn.A.vscode.icon,alt:"",height:"20",width:"20"}),onClick:()=>{d("vscode","ide_menu_primary_button_click")},children:cn.A.vscode.name}),(0,m.jsxs)(tB.W,{children:[(0,m.jsx)(tB.W.Anchor,{children:(0,m.jsx)(tF.K,{"aria-label":"More editors",icon:P.TriangleDownIcon,unsafeDisableTooltip:!0,onClick:()=>{d("menu","ide_menu_open")}})}),(0,m.jsx)(tB.W.Overlay,{align:"end",children:(0,m.jsx)(tM.l,{children:(0,m.jsx)(ca.t,{menuLocation:"editor_upsell_banner",mode:"immersive"})})})]})]}),i[2]=t,i[3]=a):(t=i[2],a=i[3]),i[4]!==o?(n=(0,m.jsx)(tF.K,{variant:"invisible",className:cr.closeButton,icon:P.XIcon,"aria-label":"Dismiss banner",onClick:()=>{o.dismissEditorUpsellBanner(),(0,e9.BI)("dotcom_chat.activate",{target:"EDITOR_UPSELL_BANNER_DISMISS",mode:"immersive"})}}),i[4]=o,i[5]=n):n=i[5],i[6]!==e||i[7]!==n||i[8]!==c?(r=(0,m.jsx)("div",{className:cr.container,children:(0,m.jsxs)("section",{className:cr.banner,"aria-labelledby":c,children:[e,t,a,n]})}),i[6]=e,i[7]=n,i[8]=c,i[9]=r):r=i[9],r)}function cs(e,t){eE.W.freeToPaidTelemetry?(0,ca.F)({eventName:e,menuLocation:"editor_upsell_banner",mode:"immersive",action:t}):(0,e9.BI)("dotcom_chat.activate",{target:`EDITOR_UPSELL_BANNER_${e.toUpperCase()}`,mode:"immersive"})}try{ci.displayName||(ci.displayName="EditorUpsellBanner")}catch{}function co(){return aI.J.getProPlusSuccessBannerFlag()??!1}function cl(e){let t,a,n=(0,p.c)(5),{onDismiss:r,className:i}=e;return n[0]!==r?(t=(0,m.jsx)(G.l,{variant:"success",title:"Copilot Pro+ activated",description:"Your Copilot Pro+ subscription is now active.",hideTitle:!0,onDismiss:()=>{r(),(0,e9.BI)("dotcom_chat.activate",{target:"PRO_PLUS_SUCCESS_BANNER_DISMISS",mode:"immersive"})}}),n[0]=r,n[1]=t):t=n[1],n[2]!==i||n[3]!==t?(a=(0,m.jsx)("div",{className:i,children:t}),n[2]=i,n[3]=t,n[4]=a):a=n[4],a}try{cl.displayName||(cl.displayName="ProPlusSuccessBanner")}catch{}function cc(){return(aI.J.getTrialSuccessBannerFlag()&&!aI.J.getProPlusSuccessBannerFlag())??!1}function cd(e){let t,a,n=(0,p.c)(5),{onDismiss:r,className:i}=e;return n[0]!==r?(t=(0,m.jsx)(G.l,{variant:"success",title:"Copilot Pro trial activated",description:"Your 30-day Copilot Pro trial is now active.",hideTitle:!0,onDismiss:()=>{r(),(0,e9.BI)("dotcom_chat.activate",{target:"TRIAL_SUCCESS_BANNER_DISMISS",mode:"immersive"})}}),n[0]=r,n[1]=t):t=n[1],n[2]!==i||n[3]!==t?(a=(0,m.jsx)("div",{className:i,children:t}),n[2]=i,n[3]=t,n[4]=a):a=n[4],a}try{cd.displayName||(cd.displayName="TrialSuccessBanner")}catch{}function cu(){let e,t,a,n,r=(0,p.c)(12),i=(0,aN.xR)().licenseType,s=function(){let e,t,a=(0,p.c)(3),[n,r]=(0,x.useState)(cc);a[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{aI.J.removeTrialSuccessBannerFlag(),r(!1)},a[0]=e):e=a[0];let i=e;return a[1]!==n?(t={visible:n,onDismiss:i},a[1]=n,a[2]=t):t=a[2],t}(),o=function(){let e,t,a=(0,p.c)(3),[n,r]=(0,x.useState)(co);a[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{aI.J.removeProPlusSuccessBannerFlag(),aI.J.removeTrialSuccessBannerFlag(),r(!1)},a[0]=e):e=a[0];let i=e;return a[1]!==n?(t={visible:n,onDismiss:i},a[1]=n,a[2]=t):t=a[2],t}(),l=o.visible,c=!l&&s.visible&&i===nD.mF.LicensedFull,d=!l&&!c;return r[0]!==d?(e=d&&(0,m.jsx)(ci,{}),r[0]=d,r[1]=e):e=r[1],r[2]!==c||r[3]!==s?(t=c&&(0,m.jsx)(cd,{className:sK.banner,onDismiss:s.onDismiss}),r[2]=c,r[3]=s,r[4]=t):t=r[4],r[5]!==o.onDismiss||r[6]!==l?(a=l&&(0,m.jsx)(cl,{className:sK.banner,onDismiss:o.onDismiss}),r[5]=o.onDismiss,r[6]=l,r[7]=a):a=r[7],r[8]!==e||r[9]!==t||r[10]!==a?(n=(0,m.jsxs)(m.Fragment,{children:[e,t,a]}),r[8]=e,r[9]=t,r[10]=a,r[11]=n):n=r[11],n}try{cu.displayName||(cu.displayName="NewConversationBanners")}catch{}var cm=a(88334);function cp(e){let t,a,n,r,i,s,o,l,c,d=(0,p.c)(26),{currentTopic:u}=e,[h,f]=(0,x.useState)(!1),g=(0,x.useRef)(null),y=(0,ef.Zp)();d[0]!==h?(t=()=>{f(!h)},d[0]=h,d[1]=t):t=d[1];let v=t;d[2]!==u?.name||d[3]!==y?(a=()=>{y(ek.QT),(0,e9.BI)("dotcom_chat.activate",{target:"NEW_CONVERSATION_CREATE_SPACE",topic:u?.name,mode:"immersive"})},d[2]=u?.name,d[3]=y,d[4]=a):a=d[4];let _=a;d[5]!==u?.name||d[6]!==y?(n=e=>{y((0,ak.Cb)({id:e.id,owner:e.owner})),(0,e9.BI)("dotcom_chat.activate",{target:"NEW_CONVERSATION_SPACES_MENU_ITEM",topic:u?.name,mode:"immersive",spaceId:`${e.owner}/${e.id}`})},d[5]=u?.name,d[6]=y,d[7]=n):n=d[7];let b=n,{data:j}=(0,cm.I)();d[8]!==j?(r=void 0===j?[]:j,d[8]=j,d[9]=r):r=d[9];let S=r;return(0,aE.BV)()?(d[10]!==v||d[11]!==h?(i=(0,m.jsx)(tB.W.Anchor,{children:(0,m.jsx)(l9,{ref:g,name:"Spaces",icon:"spaces",color:"gray",onClick:v,dropdown:!0,open:h})}),d[10]=v,d[11]=h,d[12]=i):i=d[12],d[13]!==S.length?(s=S.length>0?{width:"260px"}:{},d[13]=S.length,d[14]=s):s=d[14],d[15]!==_||d[16]!==b||d[17]!==S?(o=(0,m.jsx)(tM.l,{children:S.length>0?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(tM.l.Group,{children:[(0,m.jsx)(tM.l.GroupHeading,{children:"Recent"}),S.map(e=>(0,m.jsx)(tM.l.Item,{onSelect:()=>b(e),children:(0,m.jsx)("span",{className:l7.spaceName,children:e.name})},`${e.owner}, ${e.id}`))]}),(0,m.jsx)(tM.l.Divider,{}),(0,m.jsx)(tM.l.Item,{onSelect:_,children:"Create a space"})]}):(0,m.jsx)(tM.l.Item,{onSelect:_,children:"Create your first space"})}),d[15]=_,d[16]=b,d[17]=S,d[18]=o):o=d[18],d[19]!==s||d[20]!==o?(l=(0,m.jsx)(tB.W.Overlay,{style:s,children:o}),d[19]=s,d[20]=o,d[21]=l):l=d[21],d[22]!==h||d[23]!==i||d[24]!==l?(c=(0,m.jsx)("li",{className:l7.item,children:(0,m.jsxs)(tB.W,{open:h,onOpenChange:f,children:[i,l]})}),d[22]=h,d[23]=i,d[24]=l,d[25]=c):c=d[25],c):null}try{cp.displayName||(cp.displayName="SpacesMenu")}catch{}function ch(e){let t,a,n,r,i,s,o=(0,p.c)(20),{group:l,onEntrySelect:c}=e,[d,u]=(0,x.useState)(!1),h=(0,x.useRef)(null);o[0]!==d?(t=()=>{u(!d)},o[0]=d,o[1]=t):t=o[1];let f=t;if(o[2]!==l.color||o[3]!==l.icon||o[4]!==l.name||o[5]!==f||o[6]!==d?(a=(0,m.jsx)(tB.W.Anchor,{children:(0,m.jsx)(l9,{ref:h,name:l.name,icon:l.icon,color:l.color,onClick:f,dropdown:!0,open:d})}),o[2]=l.color,o[3]=l.icon,o[4]=l.name,o[5]=f,o[6]=d,o[7]=a):a=o[7],o[8]===Symbol.for("react.memo_cache_sentinel")?(n={width:"260px"},o[8]=n):n=o[8],o[9]!==l.entries||o[10]!==c){let e;o[12]!==c?(e=e=>(0,m.jsx)(tM.l.Item,{onSelect:()=>c(e),children:(0,m.jsx)(sl.$6,{html:e.titleHtml})},e.id),o[12]=c,o[13]=e):e=o[13],r=l.entries.map(e),o[9]=l.entries,o[10]=c,o[11]=r}else r=o[11];return o[14]!==r?(i=(0,m.jsx)(tB.W.Overlay,{style:n,children:(0,m.jsx)(tM.l,{children:r})}),o[14]=r,o[15]=i):i=o[15],o[16]!==d||o[17]!==a||o[18]!==i?(s=(0,m.jsx)("li",{className:l7.item,children:(0,m.jsxs)(tB.W,{open:d,onOpenChange:u,children:[a,i]})}),o[16]=d,o[17]=a,o[18]=i,o[19]=s):s=o[19],s}function cf(e){let t,a,n,r,i,s,o,l,c,d,u,h,f,g=(0,p.c)(28),{textAreaRef:y,handleUserSubmit:x,nextMessageIndex:v}=e,_=(0,H.b)(),b=(0,$.Pk)();g[0]!==b?(t=(0,nR.W)(b),g[0]=b,g[1]=t):t=g[1];let j=t;g[2]!==j||g[3]!==_||g[4]!==b?(a=e=>{let t=0===b.messages.length?j:(0,nR.W)(b),a=b.currentUserLogin||"",n=e.message.replaceAll("$$USERNAME$$",a);_.sendChatMessage({thread:t,content:n,references:b.currentReferences,topic:b.currentTopic,context:b.context,customInstructions:b.customInstructions,model:b.model}),(0,e9.BI)("dotcom_chat.activate",{target:"NEW_CONVERSATION_STARTER_MENU_ITEM",topic:b.currentTopic?.name,mode:"immersive",starterId:e.id})},g[2]=j,g[3]=_,g[4]=b,g[5]=a):a=g[5];let S=a,C=Object.values(l2);g[6]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)("div",{className:l7.banner,children:(0,m.jsx)(cu,{})}),g[6]=n):n=g[6],g[7]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),g[7]=r):r=g[7],g[8]!==x||g[9]!==v||g[10]!==y?(i=(0,m.jsx)(og,{textAreaRef:y,handleUserSubmit:x,nextMessageIndex:v}),g[8]=x,g[9]=v,g[10]=y,g[11]=i):i=g[11],g[12]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)("h2",{className:"sr-only",children:"Sample prompts to try"}),g[12]=s):s=g[12],g[13]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsx)(ce,{}),g[13]=o):o=g[13],g[14]!==b.currentTopic?(l=!eE.W.spacesInputMenuSelect&&(0,m.jsx)(cp,{currentTopic:b.currentTopic}),g[14]=b.currentTopic,g[15]=l):l=g[15],g[16]!==S?(c=e=>(0,m.jsx)(ch,{group:e,onEntrySelect:S},e.id),g[16]=S,g[17]=c):c=g[17],g[18]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)(ce,{}),g[18]=d):d=g[18],g[19]!==b.currentTopic?(u=!eE.W.spacesInputMenuSelect&&(0,m.jsx)(cp,{currentTopic:b.currentTopic}),g[19]=b.currentTopic,g[20]=u):u=g[20];let N=C[0]&&(0,m.jsx)(ch,{group:C[0],onEntrySelect:S},C[0].id),w=C.length>1&&(0,m.jsx)("li",{children:(0,m.jsx)(l6,{groups:C.slice(1),onEntrySelect:S})});return g[21]!==l7.starters_short||g[22]!==d||g[23]!==u||g[24]!==N||g[25]!==w?(h=(0,m.jsxs)("ul",{className:l7.starters_short,children:[d,u,N,w]}),g[21]=l7.starters_short,g[22]=d,g[23]=u,g[24]=N,g[25]=w,g[26]=h):h=g[26],g[27]===Symbol.for("react.memo_cache_sentinel")?(f=(0,m.jsx)("div",{className:l7.footer,children:(0,m.jsx)(tf.h,{})}),g[27]=f):f=g[27],(0,m.jsx)("div",{className:l7.scrollContainer,children:(0,m.jsxs)("div",{className:l7.container,children:[n,(0,m.jsx)("div",{className:l7.main,children:(0,m.jsx)("div",{className:l7.content,children:(0,m.jsxs)("div",{className:l7.alignTop,children:[(0,l1.u)("copilot_pro_plus_animation")?(0,m.jsx)(l4,{}):(0,m.jsx)(a_.A,{hidden:!0}),(0,m.jsxs)("div",{className:l7.innerContainer,children:[r,i,s,(0,m.jsxs)("ul",{className:l7.starters,children:[o,l,C.map(c)]}),h]})]})})}),f]})})}try{ch.displayName||(ch.displayName="StarterGroupWithMenu")}catch{}try{cf.displayName||(cf.displayName="NewConversation")}catch{}let cg={container:"QuotaExceededEmptyState-module__container--IH35J",main:"QuotaExceededEmptyState-module__main--UOew3",hero:"QuotaExceededEmptyState-module__hero--GYoHc",copy:"QuotaExceededEmptyState-module__copy--FI8o_",heading:"QuotaExceededEmptyState-module__heading--RHZjC",description:"QuotaExceededEmptyState-module__description--m4Qvb",footer:"QuotaExceededEmptyState-module__footer--xLpJU"};function cy(){let e,t,a,n,r,i,s,o,l=(0,p.c)(13),{resetDate:c,eligibleForTrial:d}=(0,aN.xR)();l[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("img",{className:cg.hero,src:"/images/modules/copilot-immersive-v1/hero.png",alt:"Hero"}),l[0]=e):e=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("h2",{className:cg.heading,children:"You\u2019ve reached your free plan limit"}),l[1]=t):t=l[1],l[2]!==c?(a=(0,m.jsxs)("p",{className:cg.description,children:["Your limits will reset on ",c,"."]}),l[2]=c,l[3]=a):a=l[3];let u=d?"Try Copilot Pro free for 30 days":"Upgrade to Pro";return l[4]!==u?(n=(0,m.jsx)(ab.z,{as:"a",variant:"primary",size:"large",href:"https://github.com/github-copilot/pro",onClick:cx,children:u}),l[4]=u,l[5]=n):n=l[5],l[6]!==a||l[7]!==n?(r=(0,m.jsxs)("div",{className:cg.main,children:[e,(0,m.jsxs)("div",{className:cg.copy,children:[t,a,n]})]}),l[6]=a,l[7]=n,l[8]=r):r=l[8],l[9]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)("strong",{children:"Part of an organization?"}),l[9]=i):i=l[9],l[10]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsxs)("div",{className:cg.footer,children:[i,(0,m.jsxs)("span",{children:["Upgrade to"," ",(0,m.jsx)(aM.A,{href:"https://github.com/github-copilot/business_signup/choose_business_type?cft=copilot_li.features_copilot.cfb",inline:!0,children:"Copilot Business"})," ","to enable across teams."]})]}),l[10]=s):s=l[10],l[11]!==r?(o=(0,m.jsxs)("div",{className:cg.container,children:[r,s]}),l[11]=r,l[12]=o):o=l[12],o}function cx(){(0,e9.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_EMPTY_STATE_LINK_UPGRADE",mode:"immersive"})}try{cy.displayName||(cy.displayName="QuotaExceededEmptyState")}catch{}function cv(e){let t,a,n,r,i,s,o,l,c,d,u=(0,p.c)(28),{isMobile:h,textAreaRef:f}=e,g=(0,$.Pk)(),{messages:y,messagesLoading:v,threadsLoading:_}=g,b=(0,H.b)(),{model:j}=(0,$.bP)("model"),S=eE.W.attachImagesImmersive&&eE.W.wholeAreaDragDrop,{chatQuotaExceeded:C}=(0,aN.xR)(),N=(0,sM.G)();u[0]!==N||u[1]!==g.customCopilots?(t=(0,ak.JB)(g.customCopilots,N),u[0]=N,u[1]=g.customCopilots,u[2]=t):t=u[2];let w=!!t,{variant:I,customCopilot:k}=oh(N,g.selectedThreadID),E=I===om.customCopilotSizeExceeded,T=(!I||w)&&!E,A=(0,x.useRef)(g.currentTopic),L=sU();a=!g.selectedThreadID&&aI.J.getEntrypointMessage();e:{if(g.selectedThreadID||g.pendingFirstMessage||a||N||C||"error"===v.state||"error"===_.state){n=!1;break e}n=!0}let D=n,R=y.length,P=sH(A,R);u[3]!==g.currentTopic?(r=()=>{A.current=g.currentTopic},i=[g.currentTopic],u[3]=g.currentTopic,u[4]=r,u[5]=i):(r=u[4],i=u[5]),(0,x.useEffect)(r,i),u[6]!==C||u[7]!==P?(s=()=>{let e=aI.J.getEntrypointMessage();e&&!C&&(aI.J.setEntrypointMessage(null),setTimeout(()=>{P(e)},100))},o=[P,C],u[6]=C,u[7]=P,u[8]=s,u[9]=o):(s=u[8],o=u[9]),(0,x.useEffect)(s,o),u[10]===Symbol.for("react.memo_cache_sentinel")?(l=eE.W.immersiveAppShell?(0,m.jsx)(o4,{}):(0,m.jsx)(oH,{}),u[10]=l):l=u[10],u[11]!==C||u[12]!==k||u[13]!==P||u[14]!==h||u[15]!==L||u[16]!==R||u[17]!==D||u[18]!==T||u[19]!==I||u[20]!==g.selectedThreadID||u[21]!==f?(c=(0,m.jsxs)(m.Fragment,{children:[l,!g.selectedThreadID&&C?(0,m.jsx)(cy,{}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:ot.content,children:D?(0,m.jsx)(cf,{textAreaRef:f,handleUserSubmit:P,nextMessageIndex:R}):(0,m.jsx)(lQ,{inputRef:f,isMobile:h})}),(!L||eE.W.copilotDuplicateThread)&&!D&&(0,m.jsxs)("div",{className:ot.footer,children:[eE.W.groupNotifications&&!T&&(0,m.jsx)(of,{}),!eE.W.groupNotifications&&I&&(0,m.jsx)("div",{className:ot.spaceBannerContainer,children:(0,m.jsx)(op,{variant:I,customCopilot:k})}),T&&(0,m.jsx)(og,{textAreaRef:f,handleUserSubmit:P,nextMessageIndex:R})]})]})]}),u[11]=C,u[12]=k,u[13]=P,u[14]=h,u[15]=L,u[16]=R,u[17]=D,u[18]=T,u[19]=I,u[20]=g.selectedThreadID,u[21]=f,u[22]=c):c=u[22];let O=c;return u[23]!==O||u[24]!==b||u[25]!==j||u[26]!==g?(d=S?(0,m.jsx)(oj,{model:j,state:g,manager:b,children:O}):O,u[23]=O,u[24]=b,u[25]=j,u[26]=g,u[27]=d):d=u[27],d}function c_(e){let t,a,n=(0,p.c)(3);return n[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(a$,{regionName:"This conversation"}),n[0]=t):t=n[0],n[1]!==e?(a=(0,m.jsx)(aR.t,{fallback:t,children:(0,m.jsx)(cv,{...e})}),n[1]=e,n[2]=a):a=n[2],a}try{cv.displayName||(cv.displayName="ConversationViewInner")}catch{}try{c_.displayName||(c_.displayName="ConversationView")}catch{}function cb(e){let t,a=(0,p.c)(4),{plugin:n}=e,r=(0,$.Pk)(),{PageComponent:i}=n;return a[0]!==i||a[1]!==n||a[2]!==r?(t=i?(0,m.jsx)(x.Suspense,{children:(0,m.jsx)(i,{chatState:r,plugin:n})}):null,a[0]=i,a[1]=n,a[2]=r,a[3]=t):t=a[3],t}try{cb.displayName||(cb.displayName="PluginPageContent")}catch{}function cj(e){let t,a=(0,p.c)(6),{plugin:n}=e,r=(0,$.Pk)(),{closePreviewPane:i,openPreviewPane:s}=(0,av.xx)(),{ViewComponent:o}=n;return a[0]!==o||a[1]!==i||a[2]!==s||a[3]!==n||a[4]!==r?(t=o?(0,m.jsx)(o,{chatState:r,closePreviewPane:i,openPreviewPane:s,plugin:n}):null,a[0]=o,a[1]=i,a[2]=s,a[3]=n,a[4]=r,a[5]=t):t=a[5],t}try{cj.displayName||(cj.displayName="PluginViewContent")}catch{}var cS=a(90495),cC=a(84217),cN=a(52464),cw=a(81007);let cI={ConversationList__container:"ConversationList-module__ConversationList__container--rX8fM",ConversationList__empty:"ConversationList-module__ConversationList__empty--sTf7Y",ConversationList:"ConversationList-module__ConversationList--LAVA0",ConversationList__section:"ConversationList-module__ConversationList__section--ihwdi",ConversationList__title:"ConversationList-module__ConversationList__title--IHb4U",ConversationList__item:"ConversationList-module__ConversationList__item--dD6z4",ConversationList__link:"ConversationList-module__ConversationList__link--Byc2c",ConversationList__text:"ConversationList-module__ConversationList__text--YbHpv",ConversationList__context:"ConversationList-module__ConversationList__context--SK6Jb"};function ck({selectedItemID:e,loadingState:t,onConversationSelect:a}){let n=(0,H.b)(),{threads:r}=(0,$.Pk)(),i=(0,x.useMemo)(()=>n.sortThreads(r).map(e=>({id:e.id,text:(0,ek.CB)(e),href:`${ek.Jz}/c/${e.id}`,date:new Date(e.updatedAt)})),[r,n]),s=function(e){let t=new Date,a=new Date(t);a.setDate(t.getDate()-1);let n=new Date(t);n.setDate(t.getDate()-7);let r=new Date(t);r.setDate(t.getDate()-30);let i=[],s=[],o=[],l=[];for(let c of e)c.date.toDateString()===t.toDateString()?i.push(c):c.date.toDateString()===a.toDateString()?s.push(c):c.date>n?o.push(c):c.date>r&&l.push(c);return{Today:i,Yesterday:s,"Last 7 days":o,"Last 30 days":l}}(i),o=0===i.length,l=(0,x.useId)();return(0,m.jsx)("nav",{"aria-labelledby":`${l}-conversations`,id:`${l}-conversation-list`,tabIndex:-1,className:cI.ConversationList__container,children:o&&("loading"===t||"pending"===t)?(0,m.jsx)(cw.r,{lines:5}):o?(0,m.jsx)(cA,{}):(0,m.jsxs)("div",{className:cI.ConversationList__section,children:[(0,m.jsx)("h3",{id:`${l}-conversations`,className:"sr-only",children:"Conversations"}),Object.entries(s).map(([t,n])=>n.length>0&&(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{id:`${l}_${t}`,className:cI.ConversationList__title,children:t}),(0,m.jsx)("ul",{className:cI.ConversationList,children:n.map(t=>(0,m.jsx)(cE,{item:t,selectedItemId:e??void 0,onSelect:a,threads:r},t.id))})]},t))]})})}function cE(e){let t,a,n,r=(0,p.c)(17),{item:i,selectedItemId:s,onSelect:o,threads:l}=e,c=i.id===s,[d,u]=(0,x.useState)(null),[h,f,g]=(0,oE.B)(!1);r[0]!==s||r[1]!==l?(t=l.get(s),r[0]=s,r[1]=l,r[2]=t):t=r[2];let y=t,v=!!y?.customCopilotID,_=(0,x.useRef)(null);r[3]===Symbol.for("react.memo_cache_sentinel")?(a=()=>u(null),r[3]=a):a=r[3];let b=a;return r[4]!==d||r[5]!==v||r[6]!==i.href||r[7]!==i.id||r[8]!==i.text||r[9]!==h||r[10]!==o||r[11]!==c||r[12]!==s||r[13]!==f||r[14]!==g||r[15]!==l?(n=i.href&&(0,m.jsxs)("li",{className:cI.ConversationList__item,children:[(0,m.jsx)(ef.N_,{className:cI.ConversationList__link,to:i.href,"aria-current":c?"page":void 0,onClick:()=>{o(),(0,e9.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:i.id,mode:"immersive"})},children:(0,m.jsx)("span",{className:cI.ConversationList__text,children:i.text})}),(0,m.jsx)("span",{className:cI.ConversationList__context,children:(0,m.jsxs)(tB.W,{anchorRef:_,children:[(0,m.jsx)(tB.W.Anchor,{children:(0,m.jsx)(tF.K,{loading:h,icon:P.KebabHorizontalIcon,"aria-label":"Manage conversation",variant:"invisible",onClick:cT})}),(0,m.jsx)(tB.W.Overlay,{children:(0,m.jsx)(tM.l,{children:(0,m.jsx)(oC.V,{onOpenDialog:u,isShared:!!l.get(i.id)?.sharedID,showShare:!v})})})]})}),(0,m.jsx)(oC.p,{visibleDialog:d,onClose:b,threadName:i.text,threadId:i.id,selectedThreadId:s,onStartLoading:f,onFinishLoading:g,returnFocusRef:_})]},i.id),r[4]=d,r[5]=v,r[6]=i.href,r[7]=i.id,r[8]=i.text,r[9]=h,r[10]=o,r[11]=c,r[12]=s,r[13]=f,r[14]=g,r[15]=l,r[16]=n):n=r[16],n}function cT(){return(0,e9.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})}function cA(){let e,t,a=(0,p.c)(2);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(cC.A,{as:"h3",sx:{fontSize:1,mb:2},children:"No conversations yet"}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsxs)("div",{className:cI.ConversationList__empty,children:[e,(0,m.jsx)(cN.A,{sx:{color:"fg.muted"},children:"Ask Copilot anything on the right to start your first conversation."})]}),a[1]=t):t=a[1],t}try{ck.displayName||(ck.displayName="ConversationList")}catch{}try{cE.displayName||(cE.displayName="ConversationListEntry")}catch{}try{cA.displayName||(cA.displayName="EmptyState")}catch{}function cL(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,m.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.515.456a1.555 1.555 0 00-2.2 0L6.58 6.19a1.556 1.556 0 00-.396.673l-.825 2.89a.667.667 0 00.824.824l2.89-.826c.254-.072.485-.209.672-.396l5.735-5.734a1.556 1.556 0 000-2.2l-.965-.965zm-1.257.942a.222.222 0 01.314 0l.965.966a.222.222 0 010 .314L13.415 3.8l-1.28-1.28 1.123-1.122zm-2.065 2.066l1.279 1.279-3.67 3.67a.221.221 0 01-.096.056l-1.736.496.496-1.736c.01-.036.03-.07.057-.096l3.67-3.67zM1.639 4.778a2.25 2.25 0 012.25-2.25h3.154a.75.75 0 000-1.5H3.889a3.75 3.75 0 00-3.75 3.75v7.333a3.75 3.75 0 003.75 3.75h7.333a3.75 3.75 0 003.75-3.75V8.445a.75.75 0 00-1.5 0v3.666a2.25 2.25 0 01-2.25 2.25H3.889a2.25 2.25 0 01-2.25-2.25V4.778z",clipRule:"evenodd"})}),t[0]=e):e=t[0],e}try{cL.displayName||(cL.displayName="ComposeIcon")}catch{}let cD={container:"FreeChatUpgradeBanner-module__container--wbKbQ",content:"FreeChatUpgradeBanner-module__content--GSeCA"};function cR(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:cD.container,children:(0,m.jsxs)("p",{className:cD.content,children:[(0,m.jsx)(aM.A,{href:"https://github.com/github-copilot/pro",inline:!0,onClick:cP,children:"Upgrade to Pro"})," ","to access higher limits and premium models."]})}),t[0]=e):e=t[0],e}function cP(){(0,e9.BI)("dotcom_chat.activate",{target:"FREE_CHAT_UPGRADE_BANNER_LINK",mode:"immersive"})}try{cR.displayName||(cR.displayName="FreeChatUpgradeBanner")}catch{}let cO={list:"ServiceList-module__list--YDLyn"};function cB(e){let t,a,n,r,i,s,o=(0,p.c)(22),{toggleFloatingSidebar:l}=e,c=(0,$.Pk)(),{selectedThreadID:d}=c,u=(0,aw.v)()?.id,h=(0,eI.qw)(),f=(0,H.b)(),g=(0,sq.G)(),y=(0,ak.mM)();o[0]!==g||o[1]!==l?(t=async e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),l(),await g({clearTopic:!0,includeThreads:!1}),(0,e9.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},o[0]=g,o[1]=l,o[2]=t):t=o[2];let x=t;o[3]!==l?(a=e=>{e.metaKey||e.ctrlKey||l()},o[3]=l,o[4]=a):a=o[4];let v=a;o[5]!==f||o[6]!==l?(n=(e,t)=>{e.metaKey||e.ctrlKey||(l(),f.selectPlugin(t))},o[5]=f,o[6]=l,o[7]=n):n=o[7];let _=n,b=d||u||y?void 0:"page";o[8]!==x||o[9]!==b?(r=(0,m.jsx)(eh,{"aria-current":b,displayName:"Home",href:ek.Jz,icon:P.HomeIcon,id:"home",onLinkClick:x}),o[8]=x,o[9]=b,o[10]=r):r=o[10];let j=(0,aE.BV)()&&(0,m.jsx)(eh,{"aria-current":y?"page":void 0,displayName:"Spaces",href:ek.VR,iconOverride:(0,m.jsx)(tR.I,{icon:"spaces"}),id:"spaces",onLinkClick:v,label:(0,m.jsx)(ej.A,{variant:"success",children:"Preview"})});if(o[11]!==c||o[12]!==_||o[13]!==h){let e;o[15]!==c||o[16]!==_?(e=e=>void 0!==e.NavigationComponent?(0,m.jsx)(e.NavigationComponent,{chatState:c,onLinkClick:_},e.id):null,o[15]=c,o[16]=_,o[17]=e):e=o[17],i=h.map(e),o[11]=c,o[12]=_,o[13]=h,o[14]=i}else i=o[14];return o[18]!==r||o[19]!==j||o[20]!==i?(s=(0,m.jsxs)("ul",{className:cO.list,children:[r,j,i]}),o[18]=r,o[19]=j,o[20]=i,o[21]=s):s=o[21],s}try{cB.displayName||(cB.displayName="ServiceList")}catch{}let cF={container:"Sidebar-module__container--s585U",header:"Sidebar-module__header--uOLk8",sidebar:"Sidebar-module__sidebar--sn0TN",conversations:"Sidebar-module__conversations--NEO0w",quicklinks:"Sidebar-module__quicklinks--wbmcD",blankslateContainer:"Sidebar-module__blankslateContainer--Gvuc8",pinned:"Sidebar-module__pinned--e3Nsi",visible:"Sidebar-module__visible--d8dRm"};function cM(e){let t,a,n,r,i,s,o,l,c,d,u,h,f,g,v,_,b,j,S,C,N,w,I=(0,p.c)(72),{isVisible:k,isPinned:E,isFloating:T,onNewThread:A,onToggle:L}=e,D=(0,$.Pk)(),{threads:R,selectedThreadID:O}=D,B=T?k:E,F=(0,H.b)(),M=(0,x.useRef)(!1),V=(0,sq.G)(),U=sU(),{closePreviewPane:W}=(0,av.xx)(),z=(0,aE.BV)(),q=eE.W.immersiveServiceNavigation||z;I[0]!==F||I[1]!==R.size?(t=()=>{0!==R.size||M.current||(M.current=!0,F.fetchThreads())},I[0]=F,I[1]=R.size,I[2]=t):t=I[2],I[3]!==F||I[4]!==D||I[5]!==R?(a=[R,F,D],I[3]=F,I[4]=D,I[5]=R,I[6]=a):a=I[6],(0,x.useEffect)(t,a),I[7]!==T||I[8]!==k||I[9]!==L?(n=()=>{T&&k&&L()},I[7]=T,I[8]=k,I[9]=L,I[10]=n):n=I[10];let G=n;I[11]!==W||I[12]!==G?(r=()=>{G(),W()},I[11]=W,I[12]=G,I[13]=r):r=I[13];let K=r,Q=(0,x.useRef)(null),J=ad(),Y=B?J:Q,X=ad();I[14]!==T||I[15]!==k||I[16]!==L||I[17]!==Y?(i=()=>{if(k&&T){let e=e=>{Y.current&&!Y.current.contains(e.target)&&L()};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e,{passive:!0}),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}},s=[k,T,L,Y],I[14]=T,I[15]=k,I[16]=L,I[17]=Y,I[18]=i,I[19]=s):(i=I[18],s=I[19]),(0,x.useEffect)(i,s);let Z=(0,x.useId)(),ee=function(){let{isLicensedLimited:e}=(0,aN.xR)(),{visible:t}=sJ();return!t&&e&&eE.W.freeToPaidHyperspaceUpgradePrompt}(),et=!eE.W.floatingSidebarFocusTrap||!(k&&T);I[20]!==Y||I[21]!==et?(o={disabled:et,containerRef:Y},I[20]=Y,I[21]=et,I[22]=o):o=I[22],(0,cS.r)(o);let ea=`${Z}-copilot-navigation`,en=k&&cF.visible,er=E&&cF.pinned;I[23]!==en||I[24]!==er?(l=(0,y.$)(cF.container,en,er),I[23]=en,I[24]=er,I[25]=l):l=I[25];let ei=`${Z}-copilot-navigation`;I[26]!==ei?(c=(0,m.jsx)("h2",{id:ei,className:"sr-only",children:"Copilot navigation"}),I[26]=ei,I[27]=c):c=I[27];let es=B?P.SidebarExpandIcon:P.SidebarCollapseIcon,eo=B?"Close conversations":"Open conversations";I[28]!==B||I[29]!==L?(d=()=>{L(),B?(0,e9.BI)("dotcom_chat.activate",{target:"SIDEBAR_EXPAND",mode:"immersive"}):(0,e9.BI)("dotcom_chat.activate",{target:"SIDEBAR_COLLAPSE",mode:"immersive"})},I[28]=B,I[29]=L,I[30]=d):d=I[30];let el=B?void 0:X;I[31]!==es||I[32]!==eo||I[33]!==d||I[34]!==el?(u=(0,m.jsx)(tF.K,{icon:es,"aria-label":eo,onClick:d,variant:"default",ref:el}),I[31]=es,I[32]=eo,I[33]=d,I[34]=el,I[35]=u):u=I[35],I[36]!==V||I[37]!==A||I[38]!==G?(h=(0,m.jsx)(tF.K,{as:ef.N_,to:ek.Jz,icon:cL,"aria-label":"New conversation",onClick:async e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),G(),await V({clearTopic:!0,includeThreads:!1}),A(),(0,e9.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},variant:"default"}),I[36]=V,I[37]=A,I[38]=G,I[39]=h):h=I[39],I[40]!==c||I[41]!==u||I[42]!==h?(f=(0,m.jsxs)("div",{className:cF.header,children:[c,u,h]}),I[40]=c,I[41]=u,I[42]=h,I[43]=f):f=I[43],I[44]===Symbol.for("react.memo_cache_sentinel")?(g=(0,m.jsx)(cV,{}),I[44]=g):g=I[44];let ec=`${Z}-quick-links`,ed=`${Z}-quick-links`;I[45]!==ed?(v=(0,m.jsx)("h3",{id:ed,className:"sr-only",children:"Quick links"}),I[45]=ed,I[46]=v):v=I[46],I[47]!==K||I[48]!==q?(_=q&&(0,m.jsx)(cB,{toggleFloatingSidebar:K}),I[47]=K,I[48]=q,I[49]=_):_=I[49],I[50]!==ec||I[51]!==v||I[52]!==_?(b=(0,m.jsxs)("nav",{"aria-labelledby":ec,className:cF.quicklinks,children:[v,_]}),I[50]=ec,I[51]=v,I[52]=_,I[53]=b):b=I[53];let eu=U?null:O;return I[54]!==K||I[55]!==D.threadsLoading.state||I[56]!==eu?(j=(0,m.jsx)(ck,{selectedItemID:eu,loadingState:D.threadsLoading.state,onConversationSelect:K}),I[54]=K,I[55]=D.threadsLoading.state,I[56]=eu,I[57]=j):j=I[57],I[58]!==b||I[59]!==j?(S=(0,m.jsx)(aR.t,{fallback:g,children:(0,m.jsxs)("div",{className:cF.conversations,children:[b,j]})}),I[58]=b,I[59]=j,I[60]=S):S=I[60],I[61]!==ee?(C=ee?(0,m.jsx)(cR,{}):null,I[61]=ee,I[62]=C):C=I[62],I[63]!==S||I[64]!==C?(N=(0,m.jsxs)("div",{className:cF.sidebar,children:[S,C]}),I[63]=S,I[64]=C,I[65]=N):N=I[65],I[66]!==Y||I[67]!==l||I[68]!==f||I[69]!==N||I[70]!==ea?(w=(0,m.jsxs)("aside",{"aria-labelledby":ea,ref:Y,className:l,children:[f,N]}),I[66]=Y,I[67]=l,I[68]=f,I[69]=N,I[70]=ea,I[71]=w):w=I[71],w}function cV(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:cF.blankslateContainer,children:(0,m.jsx)(a$,{regionName:"The conversations menu"})}),t[0]=e):e=t[0],e}try{cM.displayName||(cM.displayName="Sidebar")}catch{}try{cV.displayName||(cV.displayName="SidebarContentsFallback")}catch{}var cU=a(26807);function c$(e,t){switch(t){case"custom_copilot_reader":case"custom_copilot_writer":case"custom_copilot_admin":return"Shared"}return"org_public"===e?"Shared":"Private"}let cW={container:"SpaceNotFoundComponent-module__container--hltG9",description:"SpaceNotFoundComponent-module__description--b8Rdv",banner:"SpaceNotFoundComponent-module__banner--ntKjI",icon:"SpaceNotFoundComponent-module__icon--hM9CP"},cz=e=>{let t,a,n,r,i,s=(0,p.c)(7),{protectedOrganizations:o}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(P.AlertIcon,{className:cW.icon}),a=(0,m.jsx)("h3",{children:"Space not found"}),n=(0,m.jsx)("p",{className:cW.description,children:"This URL may be incorrect, you're signed out of your organization, or the Space may have been deleted."}),s[0]=t,s[1]=a,s[2]=n):(t=s[0],a=s[1],n=s[2]),s[3]!==o?(r=o&&(0,m.jsx)(W.x,{protectedOrgs:o,redirectURI:cH}),s[3]=o,s[4]=r):r=s[4],s[5]!==r?(i=(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:cW.container,children:[t,a,n,(0,m.jsx)("div",{className:cW.banner,children:r})]})}),s[5]=r,s[6]=i):i=s[6],i};try{cz.displayName||(cz.displayName="SpaceNotFoundComponent")}catch{}function cH(){return`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`}let cq={dialogTitle:"AllAttachmentsDialog-module__dialogTitle--A4eQa"},cG={attachmentText:"AttachmentPreview-module__attachmentText--GPjjd",attachmentPreviewImage:"AttachmentPreview-module__attachmentPreviewImage--W6lEk"};function cK(e){let t=(0,p.c)(13),{attachment:a}=e;if(!a){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("p",{className:cG.attachmentText,children:"No attachment selected."}),t[0]=e):e=t[0],e}switch(a.type){case"free_text":{let e;return t[1]!==a.text?(e=(0,m.jsx)("p",{className:cG.attachmentText,children:a.text}),t[1]=a.text,t[2]=e):e=t[2],e}case"media_content":{let e,n,r,i=`image: ${a.name}`;return t[3]!==a.url||t[4]!==i?(e=(0,m.jsx)("img",{alt:i,src:a.url}),t[3]=a.url,t[4]=i,t[5]=e):e=t[5],t[6]!==a.name||t[7]!==a.url?(n=(0,m.jsx)(eU.Q,{onClick:()=>(function(e,t,a="image"){let n=document.createElement("a");n.href=e,n.setAttribute("download",t||a),document.body.appendChild(n),n.click(),document.body.removeChild(n)})(a.url,a.name),children:"Download"}),t[6]=a.name,t[7]=a.url,t[8]=n):n=t[8],t[9]!==e||t[10]!==n?(r=(0,m.jsxs)("div",{className:cG.attachmentPreviewImage,children:[e,n]}),t[9]=e,t[10]=n,t[11]=r):r=t[11],r}default:{let e;return t[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("p",{children:"No preview available for this attachment."}),t[12]=e):e=t[12],e}}}try{cK.displayName||(cK.displayName="AttachmentPreview")}catch{}function cQ(e){let t=(0,p.c)(14),{attachment:a,className:n}=e;switch(a.type){case"github_file":{let e;return t[0]!==n?(e=(0,m.jsx)(P.FileIcon,{className:n}),t[0]=n,t[1]=e):e=t[1],e}case"free_text":{let e;return t[2]!==n?(e=(0,m.jsx)(P.PasteIcon,{className:n}),t[2]=n,t[3]=e):e=t[3],e}case"uploaded_text_file":{let e;return t[4]!==n?(e=(0,m.jsx)(P.FileIcon,{className:n}),t[4]=n,t[5]=e):e=t[5],e}case"github_issue":{let e;return t[6]!==n?(e=(0,m.jsx)(P.IssueOpenedIcon,{className:n}),t[6]=n,t[7]=e):e=t[7],e}case"github_pull_request":{let e;return t[8]!==n?(e=(0,m.jsx)(P.GitPullRequestIcon,{className:n}),t[8]=n,t[9]=e):e=t[9],e}case"media_content":{let e;return t[10]!==n?(e=(0,m.jsx)(P.ImageIcon,{className:n}),t[10]=n,t[11]=e):e=t[11],e}case"repository":{let e;return t[12]!==n?(e=(0,m.jsx)(P.RepoIcon,{className:n}),t[12]=n,t[13]=e):e=t[13],e}default:return null}}try{cQ.displayName||(cQ.displayName="AttachmentIcon")}catch{}let cJ={attachmentList:"AttachmentsList-module__attachmentList--bXIct",attachmentItem:"AttachmentsList-module__attachmentItem--nReRG",attachmentItemButton:"AttachmentsList-module__attachmentItemButton--EYA7M",attachmentItemLink:"AttachmentsList-module__attachmentItemLink--jglX0",attachmentText:"AttachmentsList-module__attachmentText--CuSQm",attachmentName:"AttachmentsList-module__attachmentName--tRjFT",attachmentContent:"AttachmentsList-module__attachmentContent--qKH5R",attachmentIcon:"AttachmentsList-module__attachmentIcon--diR8_",lineClamp:"AttachmentsList-module__lineClamp--Nrbdd"};function cY(e){let t,a,n=(0,p.c)(7),{attachments:r,onFileClick:i}=e;if(n[0]!==r||n[1]!==i){let e;n[3]!==i?(e=e=>(0,m.jsx)(cX,{attachment:e,onFileClick:i},e.id),n[3]=i,n[4]=e):e=n[4],t=r.map(e),n[0]=r,n[1]=i,n[2]=t}else t=n[2];return n[5]!==t?(a=(0,m.jsx)("ul",{className:cJ.attachmentList,children:t}),n[5]=t,n[6]=a):a=n[6],a}function cX(e){let t=(0,p.c)(74),{attachment:a,onFileClick:n}=e;switch(a.type){case"github_file":{let e,n,r,i,s,o,l;t[0]!==a?(e=(0,ak.q5)(a),t[0]=a,t[1]=e):e=t[1];let{filePath:c,fileName:d,fileUrl:u}=e;return t[2]!==a?(n=(0,m.jsx)("div",{className:cJ.attachmentIcon,children:(0,m.jsx)(cQ,{attachment:a})}),t[2]=a,t[3]=n):n=t[3],t[4]!==d?(r=(0,m.jsx)("div",{className:cJ.attachmentName,children:d}),t[4]=d,t[5]=r):r=t[5],t[6]!==c?(i=(0,m.jsx)("p",{className:cJ.attachmentContent,children:c}),t[6]=c,t[7]=i):i=t[7],t[8]!==r||t[9]!==i?(s=(0,m.jsxs)("div",{className:cJ.attachmentText,children:[r,i]}),t[8]=r,t[9]=i,t[10]=s):s=t[10],t[11]!==u||t[12]!==n||t[13]!==s?(o=(0,m.jsxs)("a",{className:cJ.attachmentItemLink,href:u,rel:"noopener noreferrer",target:"_blank",children:[n,s]}),t[11]=u,t[12]=n,t[13]=s,t[14]=o):o=t[14],t[15]!==a.id||t[16]!==o?(l=(0,m.jsx)("li",{className:cJ.attachmentItem,children:o},a.id),t[15]=a.id,t[16]=o,t[17]=l):l=t[17],l}case"free_text":case"media_content":{let e,r,i,s,o,l,c,d,u,p=a.id;return t[18]!==a||t[19]!==n?(e=()=>n(a),t[18]=a,t[19]=n,t[20]=e):e=t[20],t[21]!==a?(r=(0,m.jsx)("div",{className:cJ.attachmentIcon,children:(0,m.jsx)(cQ,{attachment:a})}),t[21]=a,t[22]=r):r=t[22],t[23]===Symbol.for("react.memo_cache_sentinel")?(i=(0,y.$)(cJ.attachmentName,cJ.lineClamp),t[23]=i):i=t[23],t[24]!==a.name?(s=(0,m.jsx)("div",{className:i,children:a.name}),t[24]=a.name,t[25]=s):s=t[25],t[26]!==a?(o="text"in a&&(0,m.jsx)("p",{className:(0,y.$)(cJ.attachmentContent,cJ.lineClamp),children:a.text}),t[26]=a,t[27]=o):o=t[27],t[28]!==s||t[29]!==o?(l=(0,m.jsxs)("div",{className:cJ.attachmentText,children:[s,o]}),t[28]=s,t[29]=o,t[30]=l):l=t[30],t[31]!==r||t[32]!==l?(c=(0,m.jsxs)("span",{className:cJ.attachmentItemLink,children:[r,l]}),t[31]=r,t[32]=l,t[33]=c):c=t[33],t[34]!==e||t[35]!==c?(d=(0,m.jsx)("button",{type:"button",onClick:e,className:cJ.attachmentItemButton,children:c}),t[34]=e,t[35]=c,t[36]=d):d=t[36],t[37]!==a.id||t[38]!==d?(u=(0,m.jsx)("li",{className:cJ.attachmentItem,children:d},p),t[37]=a.id,t[38]=d,t[39]=u):u=t[39],u}case"uploaded_text_file":{let e,n,r,i,s,o=a.id,l=a.url,c=a.name;return t[40]!==a?(e=(0,m.jsx)("div",{className:cJ.attachmentIcon,children:(0,m.jsx)(cQ,{attachment:a})}),t[40]=a,t[41]=e):e=t[41],t[42]===Symbol.for("react.memo_cache_sentinel")?(n=(0,y.$)(cJ.attachmentName,cJ.lineClamp),t[42]=n):n=t[42],t[43]!==a.name?(r=(0,m.jsx)("div",{className:cJ.attachmentText,children:(0,m.jsx)("div",{className:n,children:a.name})}),t[43]=a.name,t[44]=r):r=t[44],t[45]!==a.name||t[46]!==a.url||t[47]!==e||t[48]!==r?(i=(0,m.jsxs)("a",{className:cJ.attachmentItemLink,href:l,download:c,children:[e,r]}),t[45]=a.name,t[46]=a.url,t[47]=e,t[48]=r,t[49]=i):i=t[49],t[50]!==a.id||t[51]!==i?(s=(0,m.jsx)("li",{className:cJ.attachmentItem,children:i},o),t[50]=a.id,t[51]=i,t[52]=s):s=t[52],s}case"github_issue":case"github_pull_request":{let e,n,r,i,s,o,l,c,d,u=a.id,p=a.url;t[53]!==a?(e=(0,m.jsx)("div",{className:cJ.attachmentIcon,children:(0,m.jsx)(cQ,{attachment:a,className:"fgColor-success"})}),t[53]=a,t[54]=e):e=t[54],t[55]===Symbol.for("react.memo_cache_sentinel")?(n=(0,y.$)(cJ.attachmentName,cJ.lineClamp),t[55]=n):n=t[55];let h=`#${a.number}`;return t[56]!==h?(r=(0,m.jsx)("span",{className:"fgColor-muted text-light",children:h}),t[56]=h,t[57]=r):r=t[57],t[58]!==a.title||t[59]!==r?(i=(0,m.jsxs)("div",{className:n,children:[a.title,"\xa0",r]}),t[58]=a.title,t[59]=r,t[60]=i):i=t[60],t[61]===Symbol.for("react.memo_cache_sentinel")?(s=(0,y.$)(cJ.attachmentContent,cJ.lineClamp),t[61]=s):s=t[61],t[62]!==a.nwo?(o=(0,m.jsx)("div",{className:s,children:a.nwo}),t[62]=a.nwo,t[63]=o):o=t[63],t[64]!==i||t[65]!==o?(l=(0,m.jsxs)("div",{className:cJ.attachmentText,children:[i,o]}),t[64]=i,t[65]=o,t[66]=l):l=t[66],t[67]!==a.url||t[68]!==l||t[69]!==e?(c=(0,m.jsxs)("a",{className:cJ.attachmentItemLink,href:p,rel:"noopener noreferrer",target:"_blank",children:[e,l]}),t[67]=a.url,t[68]=l,t[69]=e,t[70]=c):c=t[70],t[71]!==a.id||t[72]!==c?(d=(0,m.jsx)("li",{className:cJ.attachmentItem,children:c},u),t[71]=a.id,t[72]=c,t[73]=d):d=t[73],d}default:return null}}try{cY.displayName||(cY.displayName="AttachmentsList")}catch{}try{cX.displayName||(cX.displayName="AttachmentItem")}catch{}function cZ(e){let t,a,n,r,i,s=(0,p.c)(17),{copilotSpace:o,onClose:l,returnFocusRef:c,initialAttachment:d}=e,u=(0,ef.Zp)(),[h,f]=(0,x.useState)(d??null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen"},s[0]=t):t=s[0],s[1]!==o||s[2]!==u||s[3]!==h?(a=!0===o.editable&&null===h?[{content:"Edit",leadingVisual:P.PencilIcon,onClick:()=>void u(`${(0,ak.GL)(o)}#attachments`)}]:void 0,s[1]=o,s[2]=u,s[3]=h,s[4]=a):a=s[4],s[5]!==l||s[6]!==h?(n=()=>(0,m.jsx)(a2.l.Header,{children:(0,m.jsxs)("div",{className:"d-flex flex-items-center",children:[h?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tF.K,{icon:P.ArrowLeftIcon,variant:"invisible",onClick:()=>f(null),"aria-label":"Back",className:"mr-1"}),(0,m.jsx)(a2.l.Title,{className:cq.dialogTitle,children:h?.name??"Attachments"})]}):(0,m.jsx)(a2.l.Title,{className:(0,y.$)(cq.dialogTitle,"pl-2"),children:"Attachments"}),(0,m.jsx)(a2.l.CloseButton,{onClose:l})]})}),s[5]=l,s[6]=h,s[7]=n):n=s[7],s[8]!==o.resources||s[9]!==h?(r=h?(0,m.jsx)(cK,{attachment:h}):(0,m.jsx)(cY,{attachments:o.resources,onFileClick:f}),s[8]=o.resources,s[9]=h,s[10]=r):r=s[10],s[11]!==l||s[12]!==c||s[13]!==a||s[14]!==n||s[15]!==r?(i=(0,m.jsx)(a2.l,{onClose:l,position:t,returnFocusRef:c,footerButtons:a,renderHeader:n,children:r}),s[11]=l,s[12]=c,s[13]=a,s[14]=n,s[15]=r,s[16]=i):i=s[16],i}try{cZ.displayName||(cZ.displayName="AllAttachmentsDialog")}catch{}let c0={instructionsText:"FullInstructionsDialog-module__instructionsText--K7H7X"},c1=e=>{let t,a=(0,p.c)(2);return a[0]!==e?(t=(0,m.jsx)(P.CheckIcon,{...e,className:"fgColor-success"}),a[0]=e,a[1]=t):t=a[1],t};function c2(e){let t,a,n,r,i,s,o,l=(0,p.c)(20),{copilotSpace:c,onClose:d,returnFocusRef:u}=e,[h,f]=(0,x.useState)(!1);l[0]!==c.generalInstructions?(t=function(){(0,oL.D)(c.generalInstructions||""),f(!0),setTimeout(()=>f(!1),2e3)},l[0]=c.generalInstructions,l[1]=t):t=l[1];let g=t,y=(0,ef.Zp)();l[2]===Symbol.for("react.memo_cache_sentinel")?(a={narrow:"fullscreen"},l[2]=a):a=l[2];let v=h?"Copied":"Copy",_=h?c1:P.CopyIcon;return l[3]!==g||l[4]!==v||l[5]!==_?(n={content:v,leadingVisual:_,onClick:g},l[3]=g,l[4]=v,l[5]=_,l[6]=n):n=l[6],l[7]!==c||l[8]!==y?(r=!0===c.editable?[{content:"Edit",leadingVisual:P.PencilIcon,onClick:()=>y(`${(0,ak.GL)(c)}#instructions`)}]:[],l[7]=c,l[8]=y,l[9]=r):r=l[9],l[10]!==n||l[11]!==r?(i=[n,...r],l[10]=n,l[11]=r,l[12]=i):i=l[12],l[13]!==c.generalInstructions?(s=()=>(0,m.jsx)("div",{className:"p-3",children:(0,m.jsx)("p",{className:c0.instructionsText,children:c.generalInstructions})}),l[13]=c.generalInstructions,l[14]=s):s=l[14],l[15]!==d||l[16]!==u||l[17]!==i||l[18]!==s?(o=(0,m.jsx)(a2.l,{title:"Instructions",onClose:d,returnFocusRef:u,position:a,footerButtons:i,renderBody:s}),l[15]=d,l[16]=u,l[17]=i,l[18]=s,l[19]=o):o=l[19],o}try{c1.displayName||(c1.displayName="SuccessCheckIcon")}catch{}try{c2.displayName||(c2.displayName="FullInstructionsDialog")}catch{}var c3=a(29255),c4=a(97665);let c5=e=>{let t,a,n,r,i,s,o,l=(0,p.c)(18),c=(0,H.b)(),{customCopilots:d}=(0,$.Pk)(),u=(0,c4.jE)();l[0]!==e||l[1]!==u?(t=async()=>(e&&await u.invalidateQueries({queryKey:(0,c3.dp)(e)}),u.invalidateQueries({queryKey:c3.O6})),l[0]=e,l[1]=u,l[2]=t):t=l[2],l[3]!==d||l[4]!==e||l[5]!==c?(a=async t=>{let a=(0,ak.JB)(d,e);if(!a)return;let n=`${(0,ak.Cb)(e)}/stars`,r=t.starred?"POST":"DELETE";if((await (0,td.lS)(n,{method:r})).ok)return a.starred=t.starred,c.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:a}),a},l[3]=d,l[4]=e,l[5]=c,l[6]=a):a=l[6],l[7]!==t||l[8]!==a?(n={onSuccess:t,mutationFn:a},l[7]=t,l[8]=a,l[9]=n):n=l[9];let m=(0,nd.n)(n);return l[10]!==m?({mutateAsync:s,isPending:r,...i}=m,l[10]=m,l[11]=r,l[12]=i,l[13]=s):(r=l[11],i=l[12],s=l[13]),l[14]!==r||l[15]!==i||l[16]!==s?(o={starCopilotSpace:s,isLoading:r,...i},l[14]=r,l[15]=i,l[16]=s,l[17]=o):o=l[17],o},c6={container:"SpaceDetailsPage-module__container--NBzl3",main:"SpaceDetailsPage-module__main--VvzPx",contain:"SpaceDetailsPage-module__contain--oqicC",mobileOnly:"SpaceDetailsPage-module__mobileOnly--kEz8Z",desktopOnly:"SpaceDetailsPage-module__desktopOnly--xwqTV",meta:"SpaceDetailsPage-module__meta--juYEp",header:"SpaceDetailsPage-module__header--eIaez",chatInput:"SpaceDetailsPage-module__chatInput--Auq6g",conversations:"SpaceDetailsPage-module__conversations--VZDbm",info:"SpaceDetailsPage-module__info--VWAb_",sideTitle:"SpaceDetailsPage-module__sideTitle--m6GP5",sideSection:"SpaceDetailsPage-module__sideSection--p8xws",sideSectionTitle:"SpaceDetailsPage-module__sideSectionTitle--ieSV8",sideSectionHeader:"SpaceDetailsPage-module__sideSectionHeader--lofn9",conversationsListTitle:"SpaceDetailsPage-module__conversationsListTitle--Qi4h1",noConversations:"SpaceDetailsPage-module__noConversations--L9F5I",conversationsPlaceholder:"SpaceDetailsPage-module__conversationsPlaceholder--YUty1",contextPlaceholder:"SpaceDetailsPage-module__contextPlaceholder--TJQfK",conversationsPlaceholderText:"SpaceDetailsPage-module__conversationsPlaceholderText--X4UwU",conversationsHeader:"SpaceDetailsPage-module__conversationsHeader--WPiMC",conversationsContainer:"SpaceDetailsPage-module__conversationsContainer--vapwm",conversationsList:"SpaceDetailsPage-module__conversationsList--q27bh",conversationItem:"SpaceDetailsPage-module__conversationItem--yTwgT",conversationItemMenuOpen:"SpaceDetailsPage-module__conversationItemMenuOpen--OkeFA",conversationItemLeftColumn:"SpaceDetailsPage-module__conversationItemLeftColumn--lf_vr",conversationName:"SpaceDetailsPage-module__conversationName--lRecN",conversationTimestamp:"SpaceDetailsPage-module__conversationTimestamp--bMWsn",instructionsText:"SpaceDetailsPage-module__instructionsText--Qa5J2",infoDescription:"SpaceDetailsPage-module__infoDescription--NU98Y",noDescription:"SpaceDetailsPage-module__noDescription--QMqlj",starButton:"SpaceDetailsPage-module__starButton--VxOa3",visibilityLabel:"SpaceDetailsPage-module__visibilityLabel--kJe6N",descriptionExpander:"SpaceDetailsPage-module__descriptionExpander--HWK9U",starFillIcon:"SpaceDetailsPage-module__starFillIcon--FEdbK",instructionsLink:"SpaceDetailsPage-module__instructionsLink--Xw19Y",attachmentsLink:"SpaceDetailsPage-module__attachmentsLink--Q28Yi",actionListOffset:"SpaceDetailsPage-module__actionListOffset--jaFU6",lineClamp:"SpaceDetailsPage-module__lineClamp--_by4z"};function c7(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(J.B,{direction:"horizontal",align:"center",className:"p-4 px-md-6",children:(0,m.jsx)(J.B.Item,{grow:!0,children:(0,m.jsx)(lM,{})})}),t[0]=e):e=t[0],e}try{c7.displayName||(c7.displayName="SpaceLoader")}catch{}Object.keys({BeakerIcon:P.BeakerIcon,BookIcon:P.BookIcon,BroadcastIcon:P.BroadcastIcon,CloudIcon:P.CloudIcon,CodeIcon:P.CodeIcon,DatabaseIcon:P.DatabaseIcon,DependabotIcon:P.DependabotIcon,HubotIcon:P.HubotIcon,OrganizationIcon:P.OrganizationIcon,PlusIcon:P.PlusIcon,ProjectRoadmapIcon:P.ProjectRoadmapIcon,TelescopeIcon:P.TelescopeIcon,TerminalIcon:P.TerminalIcon});let c8=["auburn","blue","brown","coral","cyan","gray","green","indigo","lemon","lime","olive","orange","pine","pink","plum","purple","red","teal","yellow"],c9=e=>c8.find(t=>t===e)??"blue",de={container:"SpacesAvatar-module__container--zJJUl",auburn:"SpacesAvatar-module__auburn--CIKFA",blue:"SpacesAvatar-module__blue--csQQ0",brown:"SpacesAvatar-module__brown--n04yP",coral:"SpacesAvatar-module__coral--_ML4p",cyan:"SpacesAvatar-module__cyan--o0MwN",gray:"SpacesAvatar-module__gray--vvb1W",green:"SpacesAvatar-module__green--Ro4IV",indigo:"SpacesAvatar-module__indigo--_0T4q",lemon:"SpacesAvatar-module__lemon--gsHE8",lime:"SpacesAvatar-module__lime--vRdDX",olive:"SpacesAvatar-module__olive--G1neu",orange:"SpacesAvatar-module__orange--FmpCu",pine:"SpacesAvatar-module__pine--jFhFP",pink:"SpacesAvatar-module__pink--vHHwu",plum:"SpacesAvatar-module__plum--M6SF6",purple:"SpacesAvatar-module__purple--_4Sak",red:"SpacesAvatar-module__red--IUpfe",teal:"SpacesAvatar-module__teal--q0AMo",yellow:"SpacesAvatar-module__yellow--DdvtA"},dt={auburn:de.auburn,blue:de.blue,brown:de.brown,coral:de.coral,cyan:de.cyan,gray:de.gray,green:de.green,indigo:de.indigo,lemon:de.lemon,lime:de.lime,olive:de.olive,orange:de.orange,pine:de.pine,pink:de.pink,plum:de.plum,purple:de.purple,red:de.red,teal:de.teal,yellow:de.yellow};function da(e){let t,a,n,r,i=(0,p.c)(11),{color:s,size:o}=e,l=void 0===o?16:o,{spaceColor:c}={icon:eL.Dy,spaceColor:c9(s)},d=`Spaces avatar in ${c} color`,u=`var(--base-size-${2*l})`;i[0]!==u?(t={"--custom-size":u},i[0]=u,i[1]=t):t=i[1];let h=dt[c];return i[2]!==h?(a=(0,y.$)(de.container,h),i[2]=h,i[3]=a):a=i[3],i[4]!==l?(n=(0,m.jsx)(eL.Dy,{size:l}),i[4]=l,i[5]=n):n=i[5],i[6]!==d||i[7]!==t||i[8]!==a||i[9]!==n?(r=(0,m.jsx)("div",{role:"img","aria-label":d,style:t,className:a,children:n}),i[6]=d,i[7]=t,i[8]=a,i[9]=n,i[10]=r):r=i[10],r}try{da.displayName||(da.displayName="SpacesAvatar")}catch{}let dn={container:"Tip-module__container--Ut3fK",prefix:"Tip-module__prefix--PQJdZ"};function dr(e){let t,a,n=(0,p.c)(3),{children:r}=e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsxs)("div",{className:dn.prefix,children:[(0,m.jsx)(P.LightBulbIcon,{}),"Tip"]}),n[0]=t):t=n[0],n[1]!==r?(a=(0,m.jsxs)("div",{className:dn.container,children:[t,r]}),n[1]=r,n[2]=a):a=n[2],a}try{dr.displayName||(dr.displayName="Tip")}catch{}function di({customCopilotId:e,onChatSubmit:t,selectedThreadID:a,textAreaRef:n}){let{threads:r,streamingMessage:i,ambientError:s}=(0,$.Pk)(),o=(0,H.b)(),l=(0,sq.G)(),[c,d]=(0,x.useState)(null),{isPending:u,data:p,error:h}=(0,aE.Ao)(e),[f,g]=(0,x.useState)(!1),[v,_]=(0,x.useState)(!1),b=(0,x.useMemo)(()=>{if(!p)return[];let t=new Map(Array.from(r.entries()).filter(([,t])=>t.customCopilotOwner===e.owner&&t.customCopilotID===e.id));return o.sortThreads(t).slice(0,10)},[r,e,o,p]);(0,x.useEffect)(()=>{p&&o.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:p}),o.clearCurrentReferences(["image"])},[p,o]);let j=(0,x.useRef)(!1);(0,x.useEffect)(()=>()=>{j.current||(o.clearCurrentReferences(),j.current=!1)},[o,e]);let S=(0,x.useCallback)(async e=>{t&&(j.current=!0,await t(e))},[t]);if(h instanceof aE.i9)return(0,m.jsx)(cz,{});if(h instanceof aE.OW)return(0,m.jsx)(cz,{protectedOrganizations:h.protectedOrganizations});if(u||!p)return(0,m.jsx)(c7,{});let C=(0,ak.Hh)(p),N=c$(p.visibility,p.baseRole);return(0,m.jsx)("div",{className:c6.container,children:(0,m.jsxs)("div",{className:c6.main,children:[(0,m.jsxs)("div",{className:c6.contain,children:[C&&(0,m.jsx)(ol,{}),(0,m.jsxs)("div",{className:c6.header,children:[(0,m.jsx)(da,{size:16,color:p.iconColor}),(0,m.jsxs)("h3",{className:c6.sideTitle,children:[p.name,(0,m.jsx)(ej.A,{className:c6.visibilityLabel,size:"small",variant:"secondary",children:N})]})]}),(0,m.jsxs)("div",{className:c6.chatInput,children:[s&&(0,m.jsx)(sG.P,{ambientError:s}),!C&&(0,m.jsx)(tL.V,{textAreaRef:n,onSubmit:S,isStreaming:!!i,size:"large",disabled:C,showModelPicker:!0,onNewThreadSelected:l},a)]}),(0,m.jsx)("div",{className:c6.conversations,children:b.length>0?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:c6.conversationsContainer,children:(0,m.jsxs)("nav",{"aria-labelledby":"conversations-heading",children:[(0,m.jsx)("div",{className:c6.conversationsHeader,children:(0,m.jsx)("h2",{id:"conversations-heading",className:c6.conversationsListTitle,children:"Your last conversations"})}),(0,m.jsx)("ul",{role:"menu",className:c6.conversationsList,children:b.map(e=>(0,m.jsx)(ds,{conversation:e,activeMenuConversationId:c,setActiveMenuConversationId:d},e.id))})]})}),p.ownerIsOrg&&(0,m.jsx)(dr,{children:"Your conversations stay private when you share a space."})]}):(0,m.jsx)("div",{className:c6.noConversations,children:(0,m.jsx)(dd,{referenceSizeExceeded:C})})})]}),(0,m.jsxs)("aside",{className:c6.meta,children:[(0,m.jsx)(du,{copilotSpace:p}),(0,m.jsx)(dm,{copilotSpace:p,setInstructionsDialogOpen:g,setAttachmentsDialogOpen:_}),p.generalInstructions||p.starredUsers.length>0||p.resources.length>0?(0,m.jsxs)(m.Fragment,{children:[p.generalInstructions&&(0,m.jsx)(dp,{copilotSpace:p,isDialogOpen:f,setDialogOpen:g}),p.starredUsers.length>0&&(0,m.jsx)(df,{copilotSpace:p}),p.resources.length>0&&(0,m.jsx)(dh,{copilotSpace:p,isDialogOpen:v,setDialogOpen:_})]}):(0,m.jsx)("section",{className:(0,y.$)(c6.noConversations,c6.desktopOnly),children:(0,m.jsxs)("div",{className:c6.contextPlaceholder,children:[(0,m.jsx)(P.PaperclipIcon,{size:24}),(0,m.jsx)("div",{className:c6.conversationsPlaceholderText,children:"This space doesn\u2019t have any instructions or attachments yet"})]})})]})]})})}function ds(e){let t,a,n,r,i,s,o,l,c,d,u,h,f,g,x,v,_=(0,p.c)(38),{conversation:b,activeMenuConversationId:j,setActiveMenuConversationId:S}=e,C=(0,cU.Z)(),N=(0,H.b)();_[0]!==b?(t=(0,ek.CB)(b),_[0]=b,_[1]=t):t=_[1];let w=t,I=`${ek.Jz}/c/${b.id}`;_[2]!==b||_[3]!==N?(a=function(){N.deleteThread(b)},_[2]=b,_[3]=N,_[4]=a):a=_[4];let k=a;_[5]!==C||_[6]!==I?(n=()=>{C(I)},r=e=>{"Enter"===e.key&&C(I)},_[5]=C,_[6]=I,_[7]=n,_[8]=r):(n=_[7],r=_[8]);let E=null!==j&&c6.conversationItemMenuOpen;_[9]!==E?(i=(0,y.$)(c6.conversationItem,E),_[9]=E,_[10]=i):i=_[10],_[11]!==w?(s=(0,m.jsx)("div",{className:c6.conversationName,children:w}),_[11]=w,_[12]=s):s=_[12],_[13]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsx)(P.ClockIcon,{}),_[13]=o):o=_[13],_[14]!==b.updatedAt?(l=new Date(b.updatedAt),_[14]=b.updatedAt,_[15]=l):l=_[15],_[16]!==l?(c=(0,m.jsxs)("div",{className:c6.conversationTimestamp,children:[o," ",(0,m.jsx)(rf.A,{format:"relative",prefix:"",date:l})]}),_[16]=l,_[17]=c):c=_[17],_[18]!==c||_[19]!==s?(d=(0,m.jsxs)("div",{className:c6.conversationItemLeftColumn,children:[s,c]}),_[18]=c,_[19]=s,_[20]=d):d=_[20];let T=j===b.id;return _[21]!==b.id||_[22]!==S?(u=e=>{S(e?b.id:null)},_[21]=b.id,_[22]=S,_[23]=u):u=_[23],_[24]===Symbol.for("react.memo_cache_sentinel")?(h=(0,m.jsx)(tB.W.Anchor,{children:(0,m.jsx)(tF.K,{variant:"invisible","aria-label":"Conversation options",icon:P.KebabHorizontalIcon,onClick:dc})}),_[24]=h):h=_[24],_[25]===Symbol.for("react.memo_cache_sentinel")?(f=(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.TrashIcon,{})}),_[25]=f):f=_[25],_[26]!==k?(g=(0,m.jsx)(tB.W.Overlay,{onClick:dl,align:"end",children:(0,m.jsx)(tM.l,{children:(0,m.jsxs)(tM.l.Item,{variant:"danger",onSelect:k,children:[f,"Delete"]})})}),_[26]=k,_[27]=g):g=_[27],_[28]!==T||_[29]!==u||_[30]!==g?(x=(0,m.jsxs)(tB.W,{open:T,onOpenChange:u,children:[h,g]}),_[28]=T,_[29]=u,_[30]=g,_[31]=x):x=_[31],_[32]!==d||_[33]!==x||_[34]!==n||_[35]!==r||_[36]!==i?(v=(0,m.jsxs)("li",{role:"menuitem",onClick:n,onKeyDown:r,className:i,children:[d,x]}),_[32]=d,_[33]=x,_[34]=n,_[35]=r,_[36]=i,_[37]=v):v=_[37],v}function dl(e){return e.stopPropagation()}function dc(e){e.stopPropagation()}function dd(e){let t,a,n=(0,p.c)(3),{referenceSizeExceeded:r}=e;n[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(P.CommentDiscussionIcon,{size:24}),n[0]=t):t=n[0];let i=r?"Remove some references to start your first conversation":"Start your first conversation using the input above";return n[1]!==i?(a=(0,m.jsx)("section",{className:c6.noConversations,children:(0,m.jsxs)("div",{className:c6.conversationsPlaceholder,children:[t,(0,m.jsx)("div",{className:c6.conversationsPlaceholderText,children:i})]})}),n[1]=i,n[2]=a):a=n[2],a}function du(e){let t,a,n,r,i,s,o,l,c=(0,p.c)(23),{copilotSpace:d}=e,[u,h]=(0,x.useState)(!1),f=(d.description?.length??0)>140&&!u,{starCopilotSpace:g,isLoading:v}=c5(d);c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("div",{className:(0,y.$)(c6.sideSectionHeader,c6.desktopOnly),children:(0,m.jsx)("h4",{className:c6.sideSectionTitle,children:"About"})}),c[0]=t):t=c[0],c[1]!==d.description||c[2]!==f?(a=d.description?(f?d.description.slice(0,140):d.description).replaceAll(`

`,`
`):(0,m.jsx)("span",{className:(0,y.$)(c6.noDescription,c6.desktopOnly),children:"No description"}),c[1]=d.description,c[2]=f,c[3]=a):a=c[3],c[4]!==d.description||c[5]!==f?(n=d.description&&f&&(0,m.jsx)("button",{type:"button","aria-label":"Expand description",className:c6.descriptionExpander,onClick:()=>h(!0),children:(0,m.jsx)(P.EllipsisIcon,{size:16})}),c[4]=d.description,c[5]=f,c[6]=n):n=c[6],c[7]!==a||c[8]!==n?(r=(0,m.jsxs)("p",{className:c6.infoDescription,children:[a,n]}),c[7]=a,c[8]=n,c[9]=r):r=c[9],c[10]!==d.starred||c[11]!==g?(i=()=>void g({starred:!d.starred}),c[10]=d.starred,c[11]=g,c[12]=i):i=c[12],c[13]!==d.starred?(s=d.starred?(0,m.jsx)(P.StarFillIcon,{className:c6.starFillIcon}):(0,m.jsx)(P.StarIcon,{}),c[13]=d.starred,c[14]=s):s=c[14];let _=d.starred?"Starred":"Star";return c[15]!==v||c[16]!==i||c[17]!==s||c[18]!==_?(o=(0,m.jsx)(eU.Q,{className:c6.starButton,block:!0,disabled:v,onClick:i,leadingVisual:s,variant:"default",children:_}),c[15]=v,c[16]=i,c[17]=s,c[18]=_,c[19]=o):o=c[19],c[20]!==r||c[21]!==o?(l=(0,m.jsxs)("section",{className:c6.info,children:[t,r,o]}),c[20]=r,c[21]=o,c[22]=l):l=c[22],l}function dm(e){let t,a,n,r,i,s,o=(0,p.c)(19),{copilotSpace:l,setInstructionsDialogOpen:c,setAttachmentsDialogOpen:d}=e,u=`/${l.owner}`;return o[0]!==l.ownerAvatar||o[1]!==l.ownerIsOrg?(t=(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(rh.r,{size:16,square:l.ownerIsOrg,src:l.ownerAvatar})}),o[0]=l.ownerAvatar,o[1]=l.ownerIsOrg,o[2]=t):t=o[2],o[3]!==l.owner?(a=(0,m.jsxs)("span",{className:"fgColor-muted",children:["Owned by ",(0,m.jsx)("strong",{className:"text-semibold",children:l.owner})]}),o[3]=l.owner,o[4]=a):a=o[4],o[5]!==u||o[6]!==t||o[7]!==a?(n=(0,m.jsxs)(tM.l.LinkItem,{href:u,children:[t,a]}),o[5]=u,o[6]=t,o[7]=a,o[8]=n):n=o[8],o[9]!==l.generalInstructions||o[10]!==c?(r=l.generalInstructions&&(0,m.jsxs)(tM.l.Item,{onSelect:()=>c(!0),className:c6.mobileOnly,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.NoteIcon,{})}),(0,m.jsx)("span",{className:"fgColor-muted",children:"View instructions"})]}),o[9]=l.generalInstructions,o[10]=c,o[11]=r):r=o[11],o[12]!==l.resources.length||o[13]!==d?(i=l.resources.length>0&&(0,m.jsxs)(tM.l.Item,{onSelect:()=>d(!0),className:c6.mobileOnly,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.PaperclipIcon,{})}),(0,m.jsxs)("span",{className:"fgColor-muted",children:[l.resources.length," attachment",l.resources.length>1?"s":""]})]}),o[12]=l.resources.length,o[13]=d,o[14]=i):i=o[14],o[15]!==n||o[16]!==r||o[17]!==i?(s=(0,m.jsxs)(tM.l,{variant:"full",className:c6.actionListOffset,children:[n,r,i]}),o[15]=n,o[16]=r,o[17]=i,o[18]=s):s=o[18],s}function dp(e){let t,a,n,r,i,s,o,l=(0,p.c)(19),{copilotSpace:c,isDialogOpen:d,setDialogOpen:u}=e,h=(0,x.useRef)(null),f=c.generalInstructions||"";return l[0]!==f?(t=f.replaceAll(`

`,`
`),l[0]=f,l[1]=t):t=l[1],l[2]!==t?(a=(0,m.jsx)("p",{className:c6.instructionsText,children:t}),l[2]=t,l[3]=a):a=l[3],l[4]!==u?(n=()=>u(!0),l[4]=u,l[5]=n):n=l[5],l[6]!==d||l[7]!==n?(r=(0,m.jsx)(aM.A,{className:c6.instructionsLink,as:"button",ref:h,onClick:n,"aria-haspopup":"dialog","aria-expanded":d,children:"View full instructions"}),l[6]=d,l[7]=n,l[8]=r):r=l[8],l[9]!==a||l[10]!==r?(i=(0,m.jsxs)(dy,{title:"Instructions",children:[a,r]}),l[9]=a,l[10]=r,l[11]=i):i=l[11],l[12]!==c||l[13]!==d||l[14]!==u?(s=d&&(0,m.jsx)(c2,{copilotSpace:c,onClose:()=>u(!1),returnFocusRef:h}),l[12]=c,l[13]=d,l[14]=u,l[15]=s):s=l[15],l[16]!==i||l[17]!==s?(o=(0,m.jsxs)(m.Fragment,{children:[i,s]}),l[16]=i,l[17]=s,l[18]=o):o=l[18],o}function dh(e){let t,a,n,r,i,s,o,l,c,d,u,h,f,g=(0,p.c)(35),{copilotSpace:y,isDialogOpen:v,setDialogOpen:_}=e,[b,j]=(0,x.useState)(null),S=(0,x.useRef)(null);if(g[0]!==y.resources||g[1]!==_){let e,l=y.resources.slice(0,5);a=dy,s="Attachments",o=y.resources.length,t=tM.l,n="full",r=c6.actionListOffset,g[9]!==_?(e=e=>{if("free_text"===e.type||"media_content"===e.type)return(0,m.jsxs)(tM.l.Item,{onSelect:()=>{j(e),_(!0)},children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(cQ,{attachment:e})}),(0,m.jsx)("span",{className:c6.lineClamp,children:e.name})]},e.id);if("uploaded_text_file"===e.type)return(0,m.jsxs)(tM.l.LinkItem,{href:e.url,download:e.name,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(cQ,{attachment:e})}),(0,m.jsx)("span",{className:c6.lineClamp,children:e.name})]},e.id);if("repository"===e.type)return(0,m.jsxs)(tM.l.LinkItem,{href:`/${e.nwo}`,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(cQ,{attachment:e})}),(0,m.jsx)("span",{className:c6.lineClamp,children:e.nwo})]},e.id);let t=(0,ak.$s)(e)?"fgColor-success":"",{fileName:a,fileUrl:n}="github_file"===e.type?(0,ak.q5)(e):{fileName:e.title,fileUrl:e.url};return(0,m.jsxs)(tM.l.LinkItem,{href:n,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(cQ,{attachment:e,className:t})}),(0,m.jsx)("span",{className:c6.lineClamp,children:a})]},e.id)},g[9]=_,g[10]=e):e=g[10],i=l.map(e),g[0]=y.resources,g[1]=_,g[2]=t,g[3]=a,g[4]=n,g[5]=r,g[6]=i,g[7]=s,g[8]=o}else t=g[2],a=g[3],n=g[4],r=g[5],i=g[6],s=g[7],o=g[8];return g[11]!==t||g[12]!==n||g[13]!==r||g[14]!==i?(l=(0,m.jsx)(t,{variant:n,className:r,children:i}),g[11]=t,g[12]=n,g[13]=r,g[14]=i,g[15]=l):l=g[15],g[16]!==_?(c=()=>_(!0),g[16]=_,g[17]=c):c=g[17],g[18]!==v||g[19]!==c?(d=(0,m.jsx)(aM.A,{className:c6.attachmentsLink,as:"button",ref:S,onClick:c,"aria-haspopup":"dialog","aria-expanded":v,children:"View all attachments"}),g[18]=v,g[19]=c,g[20]=d):d=g[20],g[21]!==a||g[22]!==s||g[23]!==o||g[24]!==l||g[25]!==d?(u=(0,m.jsxs)(a,{title:s,count:o,children:[l,d]}),g[21]=a,g[22]=s,g[23]=o,g[24]=l,g[25]=d,g[26]=u):u=g[26],g[27]!==y||g[28]!==b||g[29]!==v||g[30]!==_?(h=v&&(0,m.jsx)(cZ,{copilotSpace:y,initialAttachment:b,onClose:()=>{j(null),_(!1)},returnFocusRef:S}),g[27]=y,g[28]=b,g[29]=v,g[30]=_,g[31]=h):h=g[31],g[32]!==h||g[33]!==u?(f=(0,m.jsxs)(m.Fragment,{children:[u,h]}),g[32]=h,g[33]=u,g[34]=f):f=g[34],f}function df(e){let t,a,n,r=(0,p.c)(7),{copilotSpace:i}=e,s=i.starredUsersCount;return r[0]!==i.starredUsers?(t=i.starredUsers.map(dg),r[0]=i.starredUsers,r[1]=t):t=r[1],r[2]!==t?(a=(0,m.jsx)("div",{children:t}),r[2]=t,r[3]=a):a=r[3],r[4]!==i.starredUsersCount||r[5]!==a?(n=(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(dy,{title:"Starred by",count:s,children:a})}),r[4]=i.starredUsersCount,r[5]=a,r[6]=n):n=r[6],n}function dg(e){return(0,m.jsx)(rh.r,{className:"mr-2",size:32,src:e.avatarUrl,alt:e.login},e.login)}function dy(e){let t,a,n,r,i=(0,p.c)(9),{title:s,count:o,children:l}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,y.$)(c6.sideSection,c6.desktopOnly),i[0]=t):t=i[0],i[1]!==o?(a=!!o&&(0,m.jsx)(a6.A,{children:o}),i[1]=o,i[2]=a):a=i[2],i[3]!==a||i[4]!==s?(n=(0,m.jsx)("div",{className:c6.sideSectionHeader,children:(0,m.jsxs)("h4",{className:c6.sideSectionTitle,children:[s," ",a]})}),i[3]=a,i[4]=s,i[5]=n):n=i[5],i[6]!==l||i[7]!==n?(r=(0,m.jsxs)("div",{className:t,children:[n,l]}),i[6]=l,i[7]=n,i[8]=r):r=i[8],r}try{di.displayName||(di.displayName="SpaceDetailsPage")}catch{}try{ds.displayName||(ds.displayName="ConversationItem")}catch{}try{dd.displayName||(dd.displayName="NoConversationsPlaceholder")}catch{}try{du.displayName||(du.displayName="InfoSection")}catch{}try{dm.displayName||(dm.displayName="MetadataSection")}catch{}try{dp.displayName||(dp.displayName="InstructionsSection")}catch{}try{dh.displayName||(dh.displayName="AttachmentsSection")}catch{}try{df.displayName||(df.displayName="StarredSection")}catch{}try{dy.displayName||(dy.displayName="SideSection")}catch{}var dx=a(6869),dv=a(53526),d_=a(58569);function db(e){switch(e.type){case"repository":return{repository_id:e.repositoryId};case"github_file":return{repository_id:e.repositoryId,file_path:e.filePath};case"free_text":return{text:e.text,name:e.name};case"github_issue":case"github_pull_request":return{repository_id:e.repositoryId,number:e.number};case"uploaded_text_file":return{name:e.name};case"media_content":return{media_type:e.mediaType,name:e.name,url:e.url,height:e.height,width:e.width};default:throw Error("Unsupported resource")}}let dj=e=>{let t,a,n,r,i,s,o,l=(0,p.c)(16),c=(0,H.b)(),d=(0,c4.jE)();l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,Q.G7)("copilot_spaces_upsert_reload_in_background"),l[0]=t):t=l[0];let u=t;l[1]!==e||l[2]!==d?(a=async()=>{if(!u)return e&&await d.invalidateQueries({queryKey:(0,c3.dp)(e)}),d.invalidateQueries({queryKey:c3.O6});d.invalidateQueries({queryKey:c3.O6}),e&&await d.invalidateQueries({queryKey:(0,c3.dp)(e)})},l[1]=e,l[2]=d,l[3]=a):a=l[3],l[4]!==e||l[5]!==c?(n=async t=>{let a=e?(0,ak.fn)(e):"/custom_copilots",n=e?"PUT":"POST",r={custom_copilot:{owner_id:t.ownerId,owner_type:t.ownerType,name:t.name,icon_type:t.iconType,icon_color:t.iconColor,description:t.description,general_instructions:t.generalInstructions,resources_attributes:t.resources?.map(dS),visibility:t.visibility,base_role:t.baseRole}},i=await (0,td.lS)(a,{method:n,body:r}),s=await i.json();if(!i.ok)throw s.errorMessages;return c.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:s}),s},l[4]=e,l[5]=c,l[6]=n):n=l[6],l[7]!==a||l[8]!==n?(r={onSuccess:a,mutationFn:n},l[7]=a,l[8]=n,l[9]=r):r=l[9];let m=(0,nd.n)(r);return l[10]!==m?({mutateAsync:s,...i}=m,l[10]=m,l[11]=i,l[12]=s):(i=l[11],s=l[12]),l[13]!==i||l[14]!==s?(o={upsertCopilotSpace:s,...i},l[13]=i,l[14]=s,l[15]=o):o=l[15],o};function dS(e){return{id:e.databaseId,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,_destroy:e.markedForDestroy,metadata:db(e)}}var dC=a(9591);let dN=(e,t)=>{let a,n,r,i,s,o,l,c,d,u,m,h,f,g,y,x,v,_=(0,p.c)(44),b=(0,c4.jE)(),j=(0,ak.Cb)({id:t,owner:e}),S=`${j}/permissions`;_[0]!==S?(a={queryKey:["copilotSpaceCollaborators",S],queryFn:async()=>{let e=await (0,td.lS)(S),t=await e.json();if(!e.ok)throw t.errorMessages;return t}},_[0]=S,_[1]=a):a=_[1];let{data:C,isLoading:N}=(0,nu.I)(a);_[2]!==S?(n=async e=>{let t=await (0,td.lS)(S,{method:"POST",body:{permission:e}}),a=await t.json();if(!t.ok)throw a.errorMessages;return a},_[2]=S,_[3]=n):n=_[3],_[4]!==S||_[5]!==b?(r=()=>b.invalidateQueries({queryKey:["copilotSpaceCollaborators",S]}),_[4]=S,_[5]=b,_[6]=r):r=_[6],_[7]!==n||_[8]!==r?(i={mutationFn:n,onSuccess:r},_[7]=n,_[8]=r,_[9]=i):i=_[9];let w=(0,nd.n)(i);_[10]!==w?({mutateAsync:s,...o}=w,_[10]=w,_[11]=s,_[12]=o):(s=_[11],o=_[12]),_[13]!==S?(l=async e=>{let t=await (0,td.lS)(S,{method:"PUT",body:{permission:e}}),a=await t.json();if(!t.ok)throw a.errorMessages;return a},_[13]=S,_[14]=l):l=_[14],_[15]!==S||_[16]!==b?(c=()=>b.invalidateQueries({queryKey:["copilotSpaceCollaborators",S]}),_[15]=S,_[16]=b,_[17]=c):c=_[17],_[18]!==l||_[19]!==c?(d={mutationFn:l,onSuccess:c},_[18]=l,_[19]=c,_[20]=d):d=_[20];let I=(0,nd.n)(d);_[21]!==I?({mutateAsync:u,...m}=I,_[21]=I,_[22]=u,_[23]=m):(u=_[22],m=_[23]),_[24]!==S?(h=async e=>{let t=await (0,td.lS)(S,{method:"DELETE",body:{permission:e}});if(!t.ok)throw(await t.json()).errorMessages},_[24]=S,_[25]=h):h=_[25],_[26]!==S||_[27]!==b?(f=()=>b.invalidateQueries({queryKey:["copilotSpaceCollaborators",S]}),_[26]=S,_[27]=b,_[28]=f):f=_[28],_[29]!==f||_[30]!==h?(g={mutationFn:h,onSuccess:f},_[29]=f,_[30]=h,_[31]=g):g=_[31];let k=(0,nd.n)(g);return _[32]!==k?({mutateAsync:y,...x}=k,_[32]=k,_[33]=y,_[34]=x):(y=_[33],x=_[34]),_[35]!==s||_[36]!==o||_[37]!==C||_[38]!==N||_[39]!==y||_[40]!==x||_[41]!==u||_[42]!==m?(v={collaborators:C,isLoading:N,addCollaborator:s,updateCollaborator:u,removeCollaborator:y,isAddPending:o.isPending,isUpdatePending:m.isPending,isRemovePending:x.isPending,...o,...m,...x},_[35]=s,_[36]=o,_[37]=C,_[38]=N,_[39]=y,_[40]=x,_[41]=u,_[42]=m,_[43]=v):v=_[43],v},dw=e=>{let t,a,n,r,i,s,o=(0,p.c)(16),{input:l}=e;o[0]!==l?(t=["suggestedSpaceCollaborators",l],o[0]=l,o[1]=t):t=o[1],o[2]!==l.query||o[3]!==l.spaceId||o[4]!==l.spaceOwner?(a=async()=>{let e=(0,ak.Cb)({id:l.spaceId,owner:l.spaceOwner}),t=`${e}/suggested_collaborators?q=${encodeURIComponent(l.query)}`,a=await (0,td.lS)(t);if(!a.ok)throw Error("Failed to fetch suggested collaborators");return(await a.json()).suggestions.map(dI)},o[2]=l.query,o[3]=l.spaceId,o[4]=l.spaceOwner,o[5]=a):a=o[5];let c=!!l.query;o[6]!==t||o[7]!==a||o[8]!==c?(n={queryKey:t,queryFn:a,enabled:c},o[6]=t,o[7]=a,o[8]=c,o[9]=n):n=o[9];let d=(0,nu.I)(n);return o[10]!==d?({data:r,...i}=d,o[10]=d,o[11]=r,o[12]=i):(r=o[11],i=o[12]),o[13]!==r||o[14]!==i?(s={data:r,...i},o[13]=r,o[14]=i,o[15]=s):s=o[15],s};function dI(e){if("user"in e)return{...e.user,actor_type:"user"};if("team"in e)return{...e.team,actor_type:"team"};throw Error("suggestion has a value, but the types suggest this should not be possible. Did we account for all possible options properly in the typings?")}let dk={copyLinkSection:"SpaceCollaborators-module__copyLinkSection--4WK0E",spacesSuggestionsList:"SpaceCollaborators-module__spacesSuggestionsList--vfcJr"};function dE(e){let t,a,n,r,i,s,o,l,c,d,u,h,f,g,y,v=(0,p.c)(39),{copilotSpace:_,onError:b}=e,[j,S]=(0,x.useState)(""),[C,N]=(0,x.useState)(!1),w=(0,x.useRef)(null);v[0]!==j?(t=j.startsWith("@")?j.trim().slice(1):j.trim(),v[0]=j,v[1]=t):t=v[1];let I=(0,x.useDeferredValue)(t);v[2]!==_.id||v[3]!==_.owner||v[4]!==I?(a={input:{query:I,spaceOwner:_.owner,spaceId:_.id}},v[2]=_.id,v[3]=_.owner,v[4]=I,v[5]=a):a=v[5];let{data:k,isLoading:E}=dw(a),{collaborators:T,addCollaborator:A,error:L,isLoading:D}=dN(_.owner,_.id);v[6]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{let e=function(e){w.current&&!w.current.contains(e.target)&&N(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},r=[],v[6]=n,v[7]=r):(n=v[6],r=v[7]),(0,x.useEffect)(n,r),v[8]!==j||v[9]!==k||v[10]!==E?(i=()=>{N(!!(j&&!E&&k&&k.length>0))},s=[j,k,E],v[8]=j,v[9]=k,v[10]=E,v[11]=i,v[12]=s):(i=v[11],s=v[12]),(0,x.useEffect)(i,s),v[13]!==A||v[14]!==T||v[15]!==b?(o=async function(e){if(T?.some(t=>t.actor_id===e.id&&t.actor_type===e.actor_type)){S(""),N(!1);return}try{await A({actor_id:e.id,role_name:"custom_copilot_reader",actor_type:e.actor_type}),S(""),N(!1)}catch{b({base:"An error occurred while adding a collaborator."})}},v[13]=A,v[14]=T,v[15]=b,v[16]=o):o=v[16];let R=o;v[17]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)("span",{className:"text-small text-bold color-fg-muted mb-1",children:"People with access"}),v[17]=l):l=v[17],v[18]===Symbol.for("react.memo_cache_sentinel")?(c={position:"relative"},v[18]=c):c=v[18];let P=`Search people within ${_.owner}`;return v[19]===Symbol.for("react.memo_cache_sentinel")?(d=e=>S(e.target.value),v[19]=d):d=v[19],v[20]!==j||v[21]!==P?(u=(0,m.jsx)(dC.A,{block:!0,placeholder:P,value:j,onChange:d,className:"color-fg-default","aria-label":"Search for users or teams to share this space with"}),v[20]=j,v[21]=P,v[22]=u):u=v[22],v[23]!==R||v[24]!==C||v[25]!==k?(h=C&&k&&(0,m.jsx)("div",{ref:w,children:(0,m.jsx)(dR,{items:k,onSelect:R})}),v[23]=R,v[24]=C,v[25]=k,v[26]=h):h=v[26],v[27]!==u||v[28]!==h?(f=(0,m.jsxs)(J.B,{direction:"vertical",gap:"condensed",align:"start",children:[l,(0,m.jsxs)("div",{className:dk.copyLinkSection,style:c,children:[u,h]})]}),v[27]=u,v[28]=h,v[29]=f):f=v[29],v[30]!==T||v[31]!==L||v[32]!==D||v[33]!==_||v[34]!==b?(g=D?(0,m.jsx)("div",{className:"d-flex flex-justify-center p-2",children:(0,m.jsx)(a3.A,{})}):L?(0,m.jsx)(G.l,{variant:"critical",title:"There was a problem with loading this Space's collaborators."}):T&&T.length>0?(0,m.jsx)(J.B,{direction:"vertical",gap:"condensed",align:"start",children:T.map(e=>(0,m.jsx)(dT,{actor:e,copilotSpace:_,onError:b},`${e.actor_type}-${e.actor_id}`))}):(0,m.jsx)("span",{className:"text-small color-fg-muted p-2",children:"This Space isn't shared with anyone yet"}),v[30]=T,v[31]=L,v[32]=D,v[33]=_,v[34]=b,v[35]=g):g=v[35],v[36]!==f||v[37]!==g?(y=(0,m.jsxs)(m.Fragment,{children:[f,g]}),v[36]=f,v[37]=g,v[38]=y):y=v[38],y}function dT(e){let t,a,n,r,i,s,o,l,c,d=(0,p.c)(26),{actor:u,copilotSpace:h,onError:f}=e,g="user"===u.actor_type?u.display_login:u.slug,y="team"===u.actor_type;return d[0]!==u.avatar_url||d[1]!==y?(t=(0,m.jsx)(rh.r,{src:u.avatar_url,className:"mr-2",square:y,size:32}),d[0]=u.avatar_url,d[1]=y,d[2]=t):t=d[2],d[3]!==g?(a=(0,m.jsx)("b",{children:g}),d[3]=g,d[4]=a):a=d[4],d[5]!==g||d[6]!==a?(n=(0,m.jsx)("span",{className:"ml-1",children:(0,m.jsx)(d_.A,{maxWidth:"230px",title:g,inline:!0,children:a})}),d[5]=g,d[6]=a,d[7]=n):n=d[7],d[8]!==u.name?(r=(0,m.jsx)("p",{children:u.name}),d[8]=u.name,d[9]=r):r=d[9],d[10]!==u.name||d[11]!==r?(i=(0,m.jsx)("span",{className:"text-small color-fg-muted ml-1",children:(0,m.jsx)(d_.A,{maxWidth:"230px",title:u.name,inline:!0,children:r})}),d[10]=u.name,d[11]=r,d[12]=i):i=d[12],d[13]!==n||d[14]!==i?(s=(0,m.jsxs)("div",{className:"d-flex flex-column mt-1",children:[n,i]}),d[13]=n,d[14]=i,d[15]=s):s=d[15],d[16]!==t||d[17]!==s?(o=(0,m.jsxs)("div",{className:"d-flex flex-items-center mt-1",children:[t,s]}),d[16]=t,d[17]=s,d[18]=o):o=d[18],d[19]!==u||d[20]!==h||d[21]!==f?(l=(0,m.jsx)(dD,{actor:u,onError:f,copilotSpace:h}),d[19]=u,d[20]=h,d[21]=f,d[22]=l):l=d[22],d[23]!==o||d[24]!==l?(c=(0,m.jsxs)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:[o,l]}),d[23]=o,d[24]=l,d[25]=c):c=d[25],c}let dA=[{text:"Admin",value:"custom_copilot_admin"},{text:"Editor",value:"custom_copilot_writer"},{text:"Viewer",value:"custom_copilot_reader"}],dL={custom_copilot_admin:"Can view, make changes and add new people",custom_copilot_writer:"Can view and make changes",custom_copilot_reader:"Can view"};function dD({actor:e,onError:t,copilotSpace:a}){let[n,r]=(0,x.useState)(!1),i=(0,x.useRef)(null),s=dA.find(t=>t.value===e.role),{updateCollaborator:o,removeCollaborator:l,isUpdatePending:c,isRemovePending:d}=dN(a.owner,a.id);async function u(a){try{await o({actor_id:e.actor_id,role_name:a,actor_type:e.actor_type})}catch{t({base:"An error occurred while updating an actor's permission level."})}finally{r(!1)}}async function p(){try{await l({actor_id:e.actor_id,actor_type:e.actor_type})}catch{t({base:"An error occurred while removing an actor's permissions."})}finally{r(!1)}}return(0,m.jsxs)(tB.W,{onOpenChange:r,anchorRef:i,open:n,children:[(0,m.jsx)(tB.W.Button,{disabled:e.disabled,loading:c||d,variant:"invisible",className:"text-small",ref:i,onClick:()=>r(!0),"aria-label":`Change role for ${e.name}`,children:(0,m.jsx)(d_.A,{title:s?.text||"",inline:!0,children:s?.text})}),(0,m.jsx)(tB.W.Overlay,{side:"outside-bottom",align:"end",width:"medium",children:(0,m.jsxs)(tM.l,{selectionVariant:"single","aria-label":`Role options for ${e.name}`,children:[dA.map(e=>(0,m.jsxs)(tM.l.Item,{selected:e.value===s?.value,onSelect:()=>u(e.value),children:[(0,m.jsx)("span",{className:"text-medium",children:(0,m.jsx)("b",{children:e.text})}),(0,m.jsx)("span",{className:"text-small color-fg-muted",children:(0,m.jsx)("p",{className:"m-0",children:dL[e.value]})})]},e.value)),(0,m.jsx)(tM.l.Divider,{}),(0,m.jsxs)(tM.l.Item,{variant:"danger",onSelect:()=>p(),children:[(0,m.jsx)("span",{className:"text-medium",children:(0,m.jsx)("b",{children:"Remove"})}),(0,m.jsx)("span",{className:"text-small color-fg-muted",children:(0,m.jsx)("p",{className:"m-0",children:"Loses access to this content"})})]},"remove")]})})]})}function dR(e){let t,a,n=(0,p.c)(7),{items:r,onSelect:i}=e;if(n[0]!==r||n[1]!==i){let e;n[3]!==i?(e=e=>{let t=`${e.actor_type}-${e.id}`,a="user"===e.actor_type?e.login:e.slug;return(0,m.jsxs)(tM.l.Item,{onSelect:()=>i(e),role:"option",children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(rh.r,{src:e.avatarUrl,square:"team"===e.actor_type,size:20})}),(0,m.jsx)("span",{className:"text-bold",children:a}),e.name&&(0,m.jsx)(tM.l.Description,{children:e.name})]},t)},n[3]=i,n[4]=e):e=n[4],t=r.map(e),n[0]=r,n[1]=i,n[2]=t}else t=n[2];return n[5]!==t?(a=(0,m.jsx)("div",{role:"dialog","aria-label":"Suggested collaborators",className:dk.spacesSuggestionsList,children:(0,m.jsx)(tM.l,{children:t})}),n[5]=t,n[6]=a):a=n[6],a}try{dE.displayName||(dE.displayName="SpaceCollaborators")}catch{}try{dT.displayName||(dT.displayName="SpaceCollaboratorRow")}catch{}try{dD.displayName||(dD.displayName="ActorRoleSelect")}catch{}try{dR.displayName||(dR.displayName="SpacesSuggestionsList")}catch{}let dP={spaceVisibilityDialog:"SpaceSharingDialog-module__spaceVisibilityDialog--Xhqt8",errorBanner:"SpaceSharingDialog-module__errorBanner--iRqou"};function dO(e){let t,a,n,r,i,s,o,l,c,d,u,h,f=(0,p.c)(23),{closeDialog:g,customCopilotId:y}=e;f[0]===Symbol.for("react.memo_cache_sentinel")?(t={},f[0]=t):t=f[0];let[v,_]=(0,x.useState)(t),[b,j]=(0,x.useState)(!1),S=(0,x.useRef)(null),C=()=>(0,m.jsx)(dU,{copySharedLink:N,copied:b,isSpaceLoading:k,copilotSpace:E});f[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>()=>{S.current&&(clearTimeout(S.current),S.current=null)},n=[],f[1]=a,f[2]=n):(a=f[1],n=f[2]),(0,x.useEffect)(a,n),r=`${eg.fV.origin}${(0,ak.Cb)(e.customCopilotId)}`;let N=()=>{(0,oL.D)(r),j(!0),S.current&&clearTimeout(S.current),S.current=setTimeout(()=>{j(!1),S.current=null},2e3)},{isPending:w,data:I}=(0,aE.Ao)(y),k=w,E=I;return f[3]===Symbol.for("react.memo_cache_sentinel")?(i={narrow:"fullscreen"},f[3]=i):i=f[3],f[4]!==v.base||f[5]!==v.visibility?(s=v.base||v.visibility?(0,m.jsx)(G.l,{hideTitle:!0,title:"Unable to update space",description:v.visibility||v.base,"aria-label":"Critical",variant:"critical",className:dP.errorBanner}):null,f[4]=v.base,f[5]=v.visibility,f[6]=s):s=f[6],f[7]!==E?(o=E&&(0,m.jsx)(dE,{copilotSpace:E,onError:_}),f[7]=E,f[8]=o):o=f[8],f[9]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)(tM.l.Divider,{}),f[9]=l):l=f[9],f[10]===Symbol.for("react.memo_cache_sentinel")?(c=(0,m.jsx)("span",{className:"text-small text-bold color-fg-muted",children:"Settings"}),f[10]=c):c=f[10],f[11]!==E||f[12]!==k||f[13]!==e?(d=(0,m.jsxs)(J.B,{direction:"vertical",gap:"condensed",align:"start",children:[c,(0,m.jsx)(dB,{onError:_,copilotSpace:E,isSpaceLoading:k,...e})]}),f[11]=E,f[12]=k,f[13]=e,f[14]=d):d=f[14],f[15]!==d||f[16]!==o?(u=(0,m.jsxs)(J.B,{"data-testid":"custom-copilot-visibility",gap:"condensed",children:[o,l,d]}),f[15]=d,f[16]=o,f[17]=u):u=f[17],f[18]!==g||f[19]!==C||f[20]!==u||f[21]!==s?(h=(0,m.jsxs)(a2.l,{position:i,title:"Share this space",renderFooter:C,onClose:g,className:dP.spaceVisibilityDialog,width:"large","aria-label":"Share this space",children:[s,u]}),f[18]=g,f[19]=C,f[20]=u,f[21]=s,f[22]=h):h=f[22],h}function dB(e){let t,a,n,r,i,s,o,l,c,d,u,h,f=(0,p.c)(36),{copilotSpace:g,isSpaceLoading:y,onError:v}=e,{data:_,isLoading:b,error:j}=(0,aE.Tx)(g?.owner||"",g?.id??-1);if(f[0]!==g||f[1]!==y||f[2]!==b||f[3]!==v||f[4]!==_?(t=()=>{y||b||g&&_||v({visibility:"Could not load your space's visibility settings"})},a=[y,b,g,_,v],f[0]=g,f[1]=y,f[2]=b,f[3]=v,f[4]=_,f[5]=t,f[6]=a):(t=f[5],a=f[6]),(0,x.useEffect)(t,a),y){let e;return f[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:"color-fg-muted p-2",children:"Loading space information..."}),f[7]=e):e=f[7],e}if(!g){let e;return f[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:"color-fg-muted p-2",children:"Could not load data for your space."}),f[8]=e):e=f[8],e}let S=g.owner,C=_?.memberCount;return f[9]!==g.ownerAvatar?(n=(0,m.jsx)(rh.r,{src:g.ownerAvatar,className:"mr-2",square:!0,size:32}),f[9]=g.ownerAvatar,f[10]=n):n=f[10],f[11]!==g.ownerDisplayName?(r=(0,m.jsx)("b",{children:g.ownerDisplayName}),f[11]=g.ownerDisplayName,f[12]=r):r=f[12],f[13]!==g.ownerDisplayName||f[14]!==r?(i=(0,m.jsx)(d_.A,{maxWidth:"230px",title:g.ownerDisplayName,inline:!0,children:r}),f[13]=g.ownerDisplayName,f[14]=r,f[15]=i):i=f[15],f[16]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)("span",{className:"color-fg-muted ml-1",children:"(owner)"}),f[16]=s):s=f[16],f[17]!==i?(o=(0,m.jsxs)("span",{className:"ml-1",children:[i,s]}),f[17]=i,f[18]=o):o=f[18],f[19]!==j||f[20]!==b||f[21]!==C||f[22]!==S?(l=S&&(0,m.jsxs)(m.Fragment,{children:[!b&&null!==C&&(0,m.jsxs)("span",{className:"text-small color-fg-muted ml-1",children:[C," ",1===C?"person":"people"]}),(b||j||null===C)&&(0,m.jsx)("span",{className:"text-small color-fg-muted ml-1",children:"Organization"})]}),f[19]=j,f[20]=b,f[21]=C,f[22]=S,f[23]=l):l=f[23],f[24]!==o||f[25]!==l?(c=(0,m.jsxs)("div",{className:"d-flex flex-column",children:[o,l]}),f[24]=o,f[25]=l,f[26]=c):c=f[26],f[27]!==n||f[28]!==c?(d=(0,m.jsxs)("div",{className:"d-flex flex-items-center mt-1",children:[n,c]}),f[27]=n,f[28]=c,f[29]=d):d=f[29],f[30]!==g||f[31]!==v?(u=(0,m.jsx)(dV,{onError:v,copilotSpace:g}),f[30]=g,f[31]=v,f[32]=u):u=f[32],f[33]!==d||f[34]!==u?(h=(0,m.jsxs)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:[d,u]}),f[33]=d,f[34]=u,f[35]=h):h=f[35],h}let dF=[{text:"Admin",value:"custom_copilot_admin"},{text:"Editor",value:"custom_copilot_writer"},{text:"Viewer",value:"custom_copilot_reader"},{text:"No access",value:"none"}],dM={custom_copilot_admin:"Can view, make changes and add new people",custom_copilot_writer:"Can view and make changes",custom_copilot_reader:"Can view",none:"Hidden from your organization"};function dV({copilotSpace:e,onError:t}){let[a,n]=(0,x.useState)(!1),r=(0,x.useRef)(null),i=dF.find(t=>t.value===e.baseRole),{upsertCopilotSpace:s,isPending:o}=dj(e);async function l(e){if(!o)try{await s({baseRole:e})}catch{t({base:"An error occurred while updating your space's base role."})}finally{n(!1)}}return e.adminable?(0,m.jsxs)(tB.W,{onOpenChange:n,anchorRef:r,open:a,children:[(0,m.jsx)(tB.W.Button,{loading:o,variant:"invisible",className:"text-small",ref:r,onClick:()=>n(!0),children:(0,m.jsx)(d_.A,{title:i?.text||"",inline:!0,children:i?.text})}),(0,m.jsx)(tB.W.Overlay,{side:"outside-bottom",align:"end",width:"medium",children:(0,m.jsx)(tM.l,{selectionVariant:"single",children:dF.map(e=>(0,m.jsxs)(tM.l.Item,{selected:e.value===i?.value,onSelect:()=>l(e.value),children:[(0,m.jsx)("span",{className:"text-medium",children:(0,m.jsx)("b",{children:e.text})}),(0,m.jsx)("span",{className:"text-small color-fg-muted",children:(0,m.jsx)("p",{className:"m-0",children:dM[e.value]})})]},e.value))})})]}):(0,m.jsx)("div",{children:(0,m.jsx)(d_.A,{title:i?.text||"",className:"text-small text-light",children:i?.text})})}function dU(e){let t,a,n,r=(0,p.c)(7),{copySharedLink:i,copied:s,isSpaceLoading:o,copilotSpace:l}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t={borderBottomLeftRadius:"var(--borderRadius-large, 0.75rem)",borderBottomRightRadius:"var(--borderRadius-large, 0.75rem)",borderTop:"1px solid var(--borderColor-muted)",padding:"var(--base-size-12)"},r[0]=t):t=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(a={minWidth:"90px"},r[1]=a):a=r[1],r[2]!==s||r[3]!==l||r[4]!==i||r[5]!==o?(n=(0,m.jsx)(a2.l.Footer,{style:t,className:"color-fg-muted flex-items-center flex-justify-end text-small",children:(0,m.jsx)("div",{style:a,className:"d-flex flex-items-center gap-2",children:s?(0,m.jsx)(eU.Q,{className:"color-fg-success",disabled:o||!l,children:"Link copied"}):(0,m.jsx)(eU.Q,{onClick:i,leadingVisual:P.LinkIcon,disabled:o||!l,children:"Copy link"})})}),r[2]=s,r[3]=l,r[4]=i,r[5]=o,r[6]=n):n=r[6],n}try{dO.displayName||(dO.displayName="SpaceSharingDialog")}catch{}try{dB.displayName||(dB.displayName="VisibilitySettings")}catch{}try{dV.displayName||(dV.displayName="BaseRoleSelect")}catch{}try{dU.displayName||(dU.displayName="CopilotSpaceSharingDialogFooter")}catch{}let d$={spaceVisibilityDialog:"SpaceVisibilityDialog-module__spaceVisibilityDialog--tz_qs",copyLinkSection:"SpaceVisibilityDialog-module__copyLinkSection--f0xw8",copyLinkButtonContainer:"SpaceVisibilityDialog-module__copyLinkButtonContainer--jlB56",copyLinkButton:"SpaceVisibilityDialog-module__copyLinkButton--StwOK",copiedLinkButton:"SpaceVisibilityDialog-module__copiedLinkButton--nn5vt",dialogFooterText:"SpaceVisibilityDialog-module__dialogFooterText--Nnpv_",errorBanner:"SpaceVisibilityDialog-module__errorBanner--QhyJE"};function dW(e){let t,a,n,r,i,s,o,l,c,d,u,h,f,g,y,v,_,b,j,S=(0,p.c)(43),{closeDialog:C,customCopilotId:N}=e;S[0]===Symbol.for("react.memo_cache_sentinel")?(t={},S[0]=t):t=S[0];let[w,I]=(0,x.useState)(t),[k,E]=(0,x.useState)(!1),T=(0,x.useRef)(null);S[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>()=>{T.current&&(clearTimeout(T.current),T.current=null)},n=[],S[1]=a,S[2]=n):(a=S[1],n=S[2]),(0,x.useEffect)(a,n),r=`${eg.fV.origin}${(0,ak.Cb)(e.customCopilotId)}`,S[3]!==r?(i=()=>{(0,oL.D)(r),E(!0),T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{E(!1),T.current=null},2e3)},S[3]=r,S[4]=i):i=S[4];let A=i,{data:L,isLoading:D}=(0,aE.jS)(!0);S[5]!==N||S[6]!==L?(s=L?.find(e=>(0,ak.UG)(e,N)),S[5]=N,S[6]=L,S[7]=s):s=S[7];let R=s;S[8]!==w.base||S[9]!==w.visibility?(o=w.base||w.visibility?(0,m.jsx)(G.l,{hideTitle:!0,title:"Unable to update space visibility",description:w.visibility||w.base,"aria-label":"Critical",variant:"critical",className:d$.errorBanner}):null,S[8]=w.base,S[9]=w.visibility,S[10]=o):o=S[10],S[11]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)("span",{className:"text-small text-bold color-fg-muted mb-1",children:"Link"}),S[11]=l):l=S[11],S[12]!==r?(c=(0,m.jsx)(dC.A,{block:!0,value:r,readOnly:!0,className:"color-fg-muted"}),S[12]=r,S[13]=c):c=S[13],S[14]===Symbol.for("react.memo_cache_sentinel")?(d={position:"relative"},S[14]=d):d=S[14];let O=k?"hidden":"visible";S[15]!==O?(u={visibility:O},S[15]=O,S[16]=u):u=S[16];let B=k?-1:1,F=k?"true":"false",M=D||!R||R?.visibility==="private";return S[17]!==A||S[18]!==u||S[19]!==B||S[20]!==F||S[21]!==M?(h=(0,m.jsx)(eU.Q,{className:d$.copyLinkButton,leadingVisual:P.LinkIcon,variant:"default",onClick:A,style:u,tabIndex:B,"aria-hidden":F,disabled:M,children:"Copy link"}),S[17]=A,S[18]=u,S[19]=B,S[20]=F,S[21]=M,S[22]=h):h=S[22],S[23]!==k?(f=k&&(0,m.jsx)(eU.Q,{variant:"default",className:d$.copiedLinkButton,tabIndex:-1,"aria-hidden":"false",children:"Link copied"}),S[23]=k,S[24]=f):f=S[24],S[25]!==h||S[26]!==f?(g=(0,m.jsxs)("div",{style:d,className:d$.copyLinkButtonContainer,children:[h,f]}),S[25]=h,S[26]=f,S[27]=g):g=S[27],S[28]!==g||S[29]!==c?(y=(0,m.jsxs)(J.B,{direction:"vertical",gap:"condensed",align:"start",children:[l,(0,m.jsxs)("div",{className:d$.copyLinkSection,children:[c,g]})]}),S[28]=g,S[29]=c,S[30]=y):y=S[30],S[31]===Symbol.for("react.memo_cache_sentinel")?(v=(0,m.jsx)("span",{className:"text-small text-bold color-fg-muted mt-2",children:"Base role"}),S[31]=v):v=S[31],S[32]!==R||S[33]!==D||S[34]!==e?(_=(0,m.jsxs)(J.B,{direction:"vertical",gap:"condensed",align:"start",children:[v,(0,m.jsx)(dH,{onError:I,copilotSpace:R,isSpaceLoading:D,...e})]}),S[32]=R,S[33]=D,S[34]=e,S[35]=_):_=S[35],S[36]!==y||S[37]!==_?(b=(0,m.jsxs)(J.B,{"data-testid":"custom-copilot-visibility",gap:"condensed",children:[y,_]}),S[36]=y,S[37]=_,S[38]=b):b=S[38],S[39]!==C||S[40]!==b||S[41]!==o?(j=(0,m.jsxs)(a2.l,{title:"Share this space",renderFooter:dz,onClose:C,className:d$.spaceVisibilityDialog,width:"large",children:[o,b]}),S[39]=C,S[40]=b,S[41]=o,S[42]=j):j=S[42],j}function dz(){return(0,m.jsx)(dK,{})}function dH(e){let t,a,n,r,i,s,o,l,c,d,u,h,f=(0,p.c)(36),{copilotSpace:g,isSpaceLoading:y,onError:v}=e,{data:_,isLoading:b,error:j}=(0,aE.Tx)(g?.owner||"",g?.id??-1);if(f[0]!==g||f[1]!==y||f[2]!==b||f[3]!==v||f[4]!==_?(t=()=>{y||b||g&&_||v({visibility:"Could not load your space's visibility settings"})},a=[y,b,g,_,v],f[0]=g,f[1]=y,f[2]=b,f[3]=v,f[4]=_,f[5]=t,f[6]=a):(t=f[5],a=f[6]),(0,x.useEffect)(t,a),y){let e;return f[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:"color-fg-muted p-2",children:"Loading space information..."}),f[7]=e):e=f[7],e}if(!g){let e;return f[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:"color-fg-muted p-2",children:"Could not load data for your space."}),f[8]=e):e=f[8],e}let S=g.owner,C=_?.memberCount;return f[9]!==g.ownerAvatar?(n=(0,m.jsx)(rh.r,{src:g.ownerAvatar,className:"mr-2",square:!0,size:32}),f[9]=g.ownerAvatar,f[10]=n):n=f[10],f[11]!==g.ownerDisplayName?(r=(0,m.jsx)("b",{children:g.ownerDisplayName}),f[11]=g.ownerDisplayName,f[12]=r):r=f[12],f[13]!==g.ownerDisplayName||f[14]!==r?(i=(0,m.jsx)(d_.A,{maxWidth:"230px",title:g.ownerDisplayName,inline:!0,children:r}),f[13]=g.ownerDisplayName,f[14]=r,f[15]=i):i=f[15],f[16]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)("span",{className:"color-fg-muted ml-1",children:"(owner)"}),f[16]=s):s=f[16],f[17]!==i?(o=(0,m.jsxs)("span",{className:"ml-1",children:[i,s]}),f[17]=i,f[18]=o):o=f[18],f[19]!==j||f[20]!==b||f[21]!==C||f[22]!==S?(l=S&&(0,m.jsxs)(m.Fragment,{children:[!b&&null!==C&&(0,m.jsxs)("span",{className:"text-small color-fg-muted ml-1",children:[C," ",1===C?"person":"people"]}),(b||j||null===C)&&(0,m.jsx)("span",{className:"text-small color-fg-muted ml-1",children:"Organization"})]}),f[19]=j,f[20]=b,f[21]=C,f[22]=S,f[23]=l):l=f[23],f[24]!==o||f[25]!==l?(c=(0,m.jsxs)("div",{className:"d-flex flex-column",children:[o,l]}),f[24]=o,f[25]=l,f[26]=c):c=f[26],f[27]!==n||f[28]!==c?(d=(0,m.jsxs)("div",{className:"d-flex flex-items-center mt-1",children:[n,c]}),f[27]=n,f[28]=c,f[29]=d):d=f[29],f[30]!==g||f[31]!==v?(u=(0,m.jsx)(dG,{onError:v,copilotSpace:g}),f[30]=g,f[31]=v,f[32]=u):u=f[32],f[33]!==d||f[34]!==u?(h=(0,m.jsxs)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:[d,u]}),f[33]=d,f[34]=u,f[35]=h):h=f[35],h}let dq=[{text:"No access",value:"private"},{text:"Read",value:"org_public"}];function dG({copilotSpace:e,onError:t}){let[a,n]=(0,x.useState)(!1),r=(0,x.useRef)(null),i=dq.find(t=>t.value===e.visibility),{upsertCopilotSpace:s,isPending:o}=dj(e);async function l(e){if(!o)try{await s({visibility:e})}catch{t({base:"An error occurred while updating your space's visibility."})}finally{n(!1)}}return e.adminable?(0,m.jsxs)(tB.W,{onOpenChange:n,anchorRef:r,open:a,children:[(0,m.jsx)(tB.W.Button,{loading:o,variant:"invisible",className:"text-small",ref:r,onClick:()=>n(!0),children:(0,m.jsx)(d_.A,{title:i?.text||"",inline:!0,className:"mr-1",children:i?.text})}),(0,m.jsx)(tB.W.Overlay,{side:"outside-bottom",align:"end",children:(0,m.jsx)(tM.l,{selectionVariant:"single",children:dq.map(e=>(0,m.jsx)(tM.l.Item,{selected:e.value===i?.value,onSelect:()=>l(e.value),children:(0,m.jsx)("span",{className:"text-small",children:e.text})},e.value))})})]}):(0,m.jsx)("div",{children:(0,m.jsx)(d_.A,{title:i?.text||"",className:"text-small text-light",children:i?.text})})}function dK(){let e,t,a=(0,p.c)(2);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e={backgroundColor:"var(--bgColor-muted)",borderBottomLeftRadius:"var(--borderRadius-large, 0.75rem)",borderBottomRightRadius:"var(--borderRadius-large, 0.75rem)"},a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(a2.l.Footer,{style:e,className:"color-fg-muted flex-justify-center text-small p-2",children:(0,m.jsx)("span",{className:d$.dialogFooterText,children:"This space may include private content. Viewers need content access."})}),a[1]=t):t=a[1],t}try{dW.displayName||(dW.displayName="SpaceVisibilityDialog")}catch{}try{dH.displayName||(dH.displayName="VisibilitySettings")}catch{}try{dG.displayName||(dG.displayName="VisibilitySelect")}catch{}try{dK.displayName||(dK.displayName="CopilotSpaceVisibilityDialogFooter")}catch{}function dQ(e){let t,a,n,r,i,s,o,l,c,d,u,h,f,g,y=(0,p.c)(32),{onDelete:v,copilot:_}=e,[b,j]=(0,x.useState)(null),[S,C]=(0,x.useState)(!1),N=(0,x.useRef)(null),w=(0,ef.Zp)(),I=eE.W.spacesPermissionsTabEnabled,k=I?_?.ownerIsOrg&&_?.adminable:_?.ownerIsOrg;y[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{(0,nw.flushSync)(()=>j(null)),N.current?.focus()},y[0]=t):t=y[0];let E=t;y[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{(0,e9.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),E()},y[1]=a):a=y[1];let T=a;y[2]===Symbol.for("react.memo_cache_sentinel")?(n=async e=>{E(),C(!0),await e(),C(!1)},y[2]=n):n=y[2];let A=n;y[3]!==v?(r=async()=>{(0,e9.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_LIST_ACTION_DELETE",mode:"immersive"}),await A(v)},y[3]=v,y[4]=r):r=y[4];let L=r;y[5]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{(0,e9.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),j("share")},y[5]=i):i=y[5];let D=i;return y[6]!==S?(s=(0,m.jsx)(tB.W.Anchor,{children:(0,m.jsx)(tF.K,{loading:S,icon:P.KebabHorizontalIcon,"aria-label":"Manage space",variant:"invisible",onClick:dJ})}),y[6]=S,y[7]=s):s=y[7],y[8]!==_||y[9]!==w?(o=_.editable&&(0,m.jsxs)(tM.l.Item,{onSelect:()=>{(0,e9.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_EDIT",mode:"immersive"}),w((0,ak.GL)(_))},children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.PencilIcon,{})}),"Edit"]}),y[8]=_,y[9]=w,y[10]=o):o=y[10],y[11]!==k?(l=k&&(0,m.jsxs)(tM.l.Item,{onSelect:D,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.ShareIcon,{})}),"Share"]}),y[11]=k,y[12]=l):l=y[12],y[13]!==_.adminable?(c=_.adminable&&(0,m.jsxs)(tM.l.Item,{variant:"danger",onSelect:()=>{(0,e9.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),j("delete")},children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.TrashIcon,{})}),"Delete"]}),y[13]=_.adminable,y[14]=c):c=y[14],y[15]!==o||y[16]!==l||y[17]!==c?(d=(0,m.jsx)(tB.W.Overlay,{side:"outside-bottom",align:"end",children:(0,m.jsxs)(tM.l,{children:[o,l,c]})}),y[15]=o,y[16]=l,y[17]=c,y[18]=d):d=y[18],y[19]!==d||y[20]!==s?(u=(0,m.jsxs)(tB.W,{anchorRef:N,children:[s,d]}),y[19]=d,y[20]=s,y[21]=u):u=y[21],y[22]!==L||y[23]!==b?(h="delete"===b?(0,m.jsx)(dY,{onCancel:E,onConfirm:L}):null,y[22]=L,y[23]=b,y[24]=h):h=y[24],y[25]!==_||y[26]!==b?(f="share"===b?I?(0,m.jsx)(dO,{closeDialog:T,customCopilotId:_}):(0,m.jsx)(dW,{closeDialog:T,customCopilotId:_}):null,y[25]=_,y[26]=b,y[27]=f):f=y[27],y[28]!==u||y[29]!==h||y[30]!==f?(g=(0,m.jsxs)(m.Fragment,{children:[u,h,f]}),y[28]=u,y[29]=h,y[30]=f,y[31]=g):g=y[31],g}function dJ(){return(0,e9.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU",mode:"immersive"})}let dY=({onConfirm:e,onCancel:t})=>{let[a,n]=(0,x.useState)(!1),r=async()=>{n(!0),(0,e9.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CONFIRM",mode:"immersive"});try{await e()}finally{n(!1)}},i=()=>{(0,e9.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CANCEL",mode:"immersive"}),t()};return(0,m.jsx)(dv.K,{title:"Delete space",onClose:async e=>{a||("confirm"===e?await r():i())},confirmButtonContent:a?(0,m.jsx)(a3.A,{size:"small"}):"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this space? This action cannot be undone."})};try{dQ.displayName||(dQ.displayName="CopilotSpacesMenu")}catch{}try{dY.displayName||(dY.displayName="DeleteDialog")}catch{}let dX={starButton:"SpacesHeader-module__starButton--MYloD"};var dZ=a(73451),d0=a(19647);let d1={footerContainer:"SpaceDialogFooter-module__footerContainer--KnicG"};function d2(e){let t,a,n,r=(0,p.c)(10),{onSave:i,onCancel:s,isLoading:o,loadingAnnouncement:l,disabled:c}=e,d=void 0!==o&&o,u=void 0===l?"":l;r[0]!==s?(t=(0,m.jsx)(eU.Q,{variant:"default",onClick:s,children:"Cancel"}),r[0]=s,r[1]=t):t=r[1];let h=void 0!==c&&c||d;return r[2]!==d||r[3]!==u||r[4]!==i||r[5]!==h?(a=(0,m.jsx)(eU.Q,{variant:"primary",loading:d,loadingAnnouncement:u,onClick:i,disabled:h,children:"Save"}),r[2]=d,r[3]=u,r[4]=i,r[5]=h,r[6]=a):a=r[6],r[7]!==t||r[8]!==a?(n=(0,m.jsxs)("div",{className:d1.footerContainer,children:[t,a]}),r[7]=t,r[8]=a,r[9]=n):n=r[9],n}try{d2.displayName||(d2.displayName="SpaceDialogFooter")}catch{}function d3({copilotSpace:e,onClose:t,onSaved:a,returnFocusRef:n,maxDescriptionLength:r}){let{upsertCopilotSpace:i,isPending:s}=dj(e),[o,l]=(0,x.useState)(e.description??""),[c,d]=(0,x.useState)(null);async function u(){try{let e=await i({description:o});a?.(e),t()}catch(e){e instanceof Error?d(e.message):d("Failed to save description")}}function p(){l(e.description??""),t()}return(0,m.jsx)(a2.l,{title:"Description",onClose:p,returnFocusRef:n,position:{narrow:"fullscreen"},renderBody:()=>(0,m.jsxs)("div",{className:"p-3",children:[c&&(0,m.jsx)(G.l,{variant:"critical",title:c,className:"mb-2"}),(0,m.jsxs)(dZ.A,{children:[(0,m.jsx)(dZ.A.Label,{visuallyHidden:!0,children:"Description"}),(0,m.jsx)(d0.Ay,{block:!0,value:o,onChange:e=>l(e.target.value),placeholder:"Describe what this space is for",resize:"vertical",rows:5}),(0,m.jsx)(d4,{text:o,promptCharLimit:r})]})]}),renderFooter:()=>(0,m.jsx)(d2,{onCancel:p,onSave:u,isLoading:s,loadingAnnouncement:"Saving description"})})}function d4(e){let t,a,n,r,i=(0,p.c)(10),{text:s,promptCharLimit:o}=e,l=s.length>o;i[0]!==s.length?(t=s.length.toLocaleString(),i[0]=s.length,i[1]=t):t=i[1],i[2]!==o?(a=o.toLocaleString(),i[2]=o,i[3]=a):a=i[3],i[4]!==t||i[5]!==a?(n=(0,m.jsxs)(m.Fragment,{children:[t," / ",a," characters"]}),i[4]=t,i[5]=a,i[6]=n):n=i[6];let c=n;return i[7]!==c||i[8]!==l?(r=l?(0,m.jsx)(dZ.A.Validation,{variant:"error",children:c}):(0,m.jsx)(dZ.A.Caption,{children:c}),i[7]=c,i[8]=l,i[9]=r):r=i[9],r}try{d3.displayName||(d3.displayName="DescriptionDialog")}catch{}try{d4.displayName||(d4.displayName="CharacterCount")}catch{}function d5(e){let t,a,n,r,i,s,o,l,c,d,u,h,f,g,y,v,_,b,j,S,C,N,w,I,k,E,T=(0,p.c)(72),{onCreateSpace:A}=e,L=(0,$.Pk)(),D=(0,H.b)(),R=(0,ef.zy)(),O=(0,sM.G)(),{updateGlobalNavigationBreadcrumbs:B}=o$(),F=(0,cU.Z)(),[M,U]=(0,x.useState)(!1),[W,z]=(0,x.useState)(!1),[q,G]=(0,x.useState)(!1),[K,Q]=(0,x.useState)(null),J=(0,x.useRef)(null),Y=eE.W.improvedNavigation?R.pathname:eg.fV.pathname,X=O&&Y!==ek.VR,Z=eE.W.spacesV3UI,ee=eE.W.spacesPermissionsTabEnabled,{mutateAsync:et}=(0,aE.$7)(),{copilotSpacesConfig:ea}=(0,V.X)(),{maxDescriptionLength:en}=ea;e:{let e;if(!O){t=null;break e}T[0]!==O||T[1]!==L.customCopilots?(e=(0,ak.JB)(L.customCopilots,O),T[0]=O,T[1]=L.customCopilots,T[2]=e):e=T[2],t=e}let er=t,ei=ee?er?.ownerIsOrg&&er?.adminable:er?.ownerIsOrg,{starCopilotSpace:es,isLoading:eo}=c5(O);T[3]!==B?(a=()=>{B()},n=[B],T[3]=B,T[4]=a,T[5]=n):(a=T[4],n=T[5]),(0,x.useEffect)(a,n),T[6]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{(0,e9.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),z(!1)},T[6]=r):r=T[6];let el=r;T[7]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{(0,e9.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DELETE_DIALOG_CLOSE",mode:"immersive"}),U(!1)},T[7]=i):i=T[7];let ec=i;T[8]!==er||T[9]!==F?(s=()=>{(0,e9.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_EDIT",mode:"immersive"}),F((0,ak.GL)(er))},T[8]=er,T[9]=F,T[10]=s):s=T[10];let ed=s;T[11]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{(0,e9.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),z(!0)},T[11]=o):o=T[11];let eu=o;T[12]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{(0,e9.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),U(!0)},T[12]=l):l=T[12];let em=l;T[13]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{(0,e9.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DESCRIPTION",mode:"immersive"}),G(!0)},T[13]=c):c=T[13];let ep=c;T[14]!==et||T[15]!==F||T[16]!==O?(d=async()=>{if(O)try{await et(O),F(ek.VR)}catch(e){Q(e instanceof Error?e:Error(String(e))),ec()}},T[14]=et,T[15]=F,T[16]=O,T[17]=d):d=T[17];let eh=d;T[18]!==er||T[19]!==es?(u=()=>{er&&es&&((0,e9.BI)("dotcom_chat.activate",{target:er.starred?"SPACE_UNSTAR":"SPACE_STAR",mode:"immersive"}),es({starred:!er.starred}))},T[18]=er,T[19]=es,T[20]=u):u=T[20];let ey=u,ex=er?.editable,ev=er?.adminable;T[21]!==ev?(h=ev&&(0,m.jsxs)(tM.l.Item,{variant:"danger",onSelect:em,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.TrashIcon,{})}),"Delete"]}),T[21]=ev,T[22]=h):h=T[22];let e_=h;T[23]!==ex?(f=ex&&Z&&(0,m.jsxs)(tM.l.Item,{onSelect:ep,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.NoteIcon,{})}),"Edit description"]}),T[23]=ex,T[24]=f):f=T[24];let eb=f;T[25]!==e_||T[26]!==eb||T[27]!==X||T[28]!==L?(g=X&&!L.selectedThreadID&&(e_||eb)?eE.W.immersiveAppShell?(0,m.jsxs)(m.Fragment,{children:[eb,e_]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(tM.l.Group,{children:[(0,m.jsx)(tM.l.GroupHeading,{children:"Space"}),eb,e_]}),(0,m.jsx)(tM.l.Divider,{})]}):null,T[25]=e_,T[26]=eb,T[27]=X,T[28]=L,T[29]=g):g=T[29];let ej=g;T[30]!==A?(y=Z?null:(0,m.jsx)(eU.Q,{variant:"primary",onClick:A,children:"New space"}),T[30]=A,T[31]=y):y=T[31];let eS=y;T[32]!==ex||T[33]!==ed?(v=ex&&!Z&&(0,m.jsx)(eU.Q,{leadingVisual:P.PencilIcon,onClick:ed,children:"Edit"}),T[32]=ex,T[33]=ed,T[34]=v):v=T[34];let eC=v;T[35]!==ei?(_=ei&&(0,m.jsx)(eU.Q,{onClick:eu,leadingVisual:P.ShareIcon,children:"Share"}),T[35]=ei,T[36]=_):_=T[36];let eN=_;T[37]!==er||T[38]!==ey||T[39]!==eo||T[40]!==O?(b=er&&O&&Z&&(0,m.jsx)(tF.K,{ref:J,onClick:ey,disabled:eo,icon:er.starred?P.StarFillIcon:P.StarIcon,className:er.starred?dX.starButton:void 0,"aria-label":er.starred?"Unstar space":"Star space"}),T[37]=er,T[38]=ey,T[39]=eo,T[40]=O,T[41]=b):b=T[41];let ew=b,eI=!O&&eS;T[42]!==eC||T[43]!==ew||T[44]!==eN||T[45]!==eI?(j=(0,m.jsxs)(m.Fragment,{children:[eI,eC,eN,ew]}),T[42]=eC,T[43]=ew,T[44]=eN,T[45]=eI,T[46]=j):j=T[46];let eT=j;T[47]!==D?(S=e=>{D.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e})},T[47]=D,T[48]=S):S=T[48];let eA=S;return T[49]!==eT||T[50]!==ej?(C=eE.W.immersiveAppShell?(0,m.jsx)(o4,{showPreviewPaneButton:!1,conversationSpecificItems:ej,customButtons:eT}):(0,m.jsx)(oH,{showPreviewPaneButton:!1,conversationSpecificItems:ej,customButtons:eT}),T[49]=eT,T[50]=ej,T[51]=C):C=T[51],T[52]!==K?(N=K&&(0,m.jsxs)(dx.A,{variant:"danger",children:[(0,m.jsx)(P.AlertIcon,{}),"There was a problem deleting your space."]}),T[52]=K,T[53]=N):N=T[53],T[54]!==eh||T[55]!==O||T[56]!==M?(w=M&&O?(0,m.jsx)(dY,{onCancel:ec,onConfirm:eh}):null,T[54]=eh,T[55]=O,T[56]=M,T[57]=w):w=T[57],T[58]!==O||T[59]!==W?(I=W&&O?ee?(0,m.jsx)(dO,{closeDialog:el,customCopilotId:O}):(0,m.jsx)(dW,{closeDialog:el,customCopilotId:O}):null,T[58]=O,T[59]=W,T[60]=I):I=T[60],T[61]!==er||T[62]!==eA||T[63]!==en||T[64]!==q?(k=q&&er?(0,m.jsx)(d3,{copilotSpace:er,onClose:()=>G(!1),returnFocusRef:J,maxDescriptionLength:en,onSaved:eA}):null,T[61]=er,T[62]=eA,T[63]=en,T[64]=q,T[65]=k):k=T[65],T[66]!==C||T[67]!==N||T[68]!==w||T[69]!==I||T[70]!==k?(E=(0,m.jsxs)(m.Fragment,{children:[C,N,w,I,k]}),T[66]=C,T[67]=N,T[68]=w,T[69]=I,T[70]=k,T[71]=E):E=T[71],E}try{d5.displayName||(d5.displayName="SpacesHeader")}catch{}function d6(e){let t,a,n,r=(0,p.c)(7),{customCopilotId:i,selectedThreadID:s,textAreaRef:o}=e,l=(0,$.Pk)(),{messages:c}=l,d=sH((0,x.useRef)(l.currentTopic),c.length);return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(d5,{}),r[0]=t):t=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)(a$,{regionName:"This space"}),r[1]=a):a=r[1],r[2]!==i||r[3]!==d||r[4]!==s||r[5]!==o?(n=(0,m.jsxs)(m.Fragment,{children:[t,(0,m.jsx)(aR.t,{fallback:a,children:(0,m.jsx)(di,{customCopilotId:i,onChatSubmit:d,selectedThreadID:s,textAreaRef:o})})]}),r[2]=i,r[3]=d,r[4]=s,r[5]=o,r[6]=n):n=r[6],n}try{d6.displayName||(d6.displayName="SpacesConversation")}catch{}var d7=a(8601),d8=a(62834),d9=a(98637),ue=a(21113),ut=a(99987),ua=a(11251),un=a(55864),ur=a(65607),ui=a(75177),us=a(53110);function uo(e,t,a){let n=[];for(let r of t)if(r.startsWith(e)){let t=r.slice(e.length+1),i=t.indexOf("/"),s=i>0?t.slice(0,i):t,o=`${e}/${s}`;if(a&&a.some(e=>e.path===o))continue;let l={items:[],data:{contentType:o===r?"file":"directory",name:s,path:o,isClientOnly:!0}};n.push(l)}return n}let ul={checkbox:"FileTreePicker-module__checkbox--sS_UT",itemContainer:"FileTreePicker-module__itemContainer--EmnHR",Box:"FileTreePicker-module__Box--y6v5U",Box_1:"FileTreePicker-module__Box_1--jOkmh",Octicon:"FileTreePicker-module__Octicon--uVmod",Box_2:"FileTreePicker-module__Box_2--CBUAV"};function uc(e,t){let a=new Set(e);switch(t.type){case"SELECT_FILE":a.add(t.path),(0,e9.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SELECT_FILE",newFileCount:a.size});break;case"DESELECT_FILE":a.delete(t.path),(0,e9.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"DESELECT_FILE",newFileCount:a.size});break;case"SELECT_DIRECTORY":for(let e of t.paths)a.add(e);(0,e9.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SELECT_DIRECTORY",newFileCount:a.size,directoryCount:t.paths.length});break;case"DESELECT_DIRECTORY":for(let e of t.paths)a.delete(e);(0,e9.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"DESELECT_DIRECTORY",newFileCount:a.size,directoryCount:t.paths.length})}return a}function ud({isActive:e,file:t,onItemSelected:a,getItemUrl:n,selectedItemRef:r,navigate:i,onRenderRow:s,getFileTrailingVisual:o,getFileIcon:l,navigateOnClick:c,isSelected:d}){let{sendRepoClickEvent:u}=(0,d9.T)(),p=x.useRef(null),h=(0,ua.Z)({focusRowRef:p,mouseRowRef:p}),f="submodule"===t.data.contentType,g=o?.(t.data);(0,x.useEffect)(()=>{e&&p.current&&requestAnimationFrame(()=>{p.current?.scrollIntoView({block:"center"})})},[e]);let y=x.useCallback(e=>{f?(e.preventDefault(),t.data.submoduleUrl&&(window.location.href=t.data.submoduleUrl)):e.metaKey||e.ctrlKey||1===e.button?(window.open(n(t.data),"_blank"),e.preventDefault()):(a?.(t.data,t),u("FILES_TREE.ITEM",{item_path:t.data.path}),c&&i(n(t.data)),e.stopPropagation())},[t,n,f,i,c,a,u]);return s?.(),(0,m.jsxs)(un.G.Item,{ref:p,onSelect:y,current:e,id:`${t.data.path}-item`,containIntrinsicSize:e?void 0:"auto 2rem",children:[(0,m.jsx)(un.G.LeadingVisual,{children:l?l(t.data):f?(0,m.jsx)(P.FileSubmoduleIcon,{}):(0,m.jsx)(P.FileIcon,{})}),(0,m.jsxs)("div",{className:ul.itemContainer,children:[(0,m.jsx)(ur.A,{className:ul.checkbox,checked:d||!1,readOnly:!0,"aria-label":`Select ${t.data.name}`}),(0,m.jsx)("span",{ref:r,style:{color:f?"var(--fgColor-accent, var(--color-accent-fg))":void 0},children:(0,m.jsx)("span",{"data-testid":`${t.data.path}-file-item`,children:t.data.name})})]}),h&&(0,m.jsx)(ut.m,{"data-testid":`${t.data.name}-item-tooltip`,id:`${t.data.name}-item-tooltip`,contentRef:p,"aria-label":t.data.name,open:!0,direction:"ne"}),!!g?.screenReaderText&&(0,m.jsx)("span",{className:"sr-only",children:g.screenReaderText}),!!g?.trailingVisual&&(0,m.jsx)(un.G.TrailingVisual,{children:g.trailingVisual})]})}let uu=x.memo(ud),um=x.memo(ur.A);function up({clientOnlyFilePaths:e,directory:t,isActive:a,isAncestorOfActive:n,leadingPath:r,onItemSelected:i,getItemUrl:s,getFetchUrl:o,selectedItemRef:l,navigate:c,onRenderRow:d,getFileTrailingVisual:u,getFileIcon:p,navigateOnClick:h,selectedChildren:f,expandedPath:g}){let[y,v]=(0,x.useState)(n),{sendRepoClickEvent:_}=(0,d9.T)(),b=x.useRef(null),j=x.useRef(null),S=(0,ua.Z)({focusRowRef:j,mouseRowRef:b}),C=x.useMemo(()=>f?.filter(e=>e.startsWith(`${t.data.path}/`)),[f,t.data.path]),N=x.useMemo(()=>(function(e,t){if(!t||0===t.length)return"none";if(t.includes(e.data.path))return"all";let a=e.data.totalCount||0,n=t.filter(t=>t.startsWith(`${e.data.path}/`)).length;return 0===n?"none":n===a?"all":"partial"})(t,f),[t,f]),[w,I,k,E,T,A,L]=function(e,t,a){let[n,r]=x.useState(e.items),[i,s]=x.useState(e.data.totalCount||0),[o,l]=x.useState(!1),[c,d]=x.useState(!1),{safeSetTimeout:u}=(0,l3.A)();x.useEffect(()=>{r(e.items)},[e.items]),x.useEffect(()=>{void 0!==e.data.totalCount&&s(e.data.totalCount)},[e.data.totalCount]);let m=x.useCallback(()=>{d(!1)},[]),p=x.useCallback((e,t)=>{let a=e||[...n];r(a.slice(0,100)),u(()=>{r(a),void 0!==t&&s(t)},1)},[n,u]);return[x.useCallback(async n=>{let i=new Map;if(e.data.isClientOnly){if(n){let a=uo(e.data.path,n);for(let e of a)i.set(e.data.path,e);t({type:"add",folders:i,processingTime:0}),a.length>100?p(a,a.length):(r(a),s(a.length))}}else{let o=a(e.data);d(!1),l(!0);let c=Date.now(),u=await (0,td.lS)(`${o}?noancestors=1`);try{if(u.ok){let a=await u.json(),o=a.payload.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===a.payload.tree.items.length};return(i.set(e.path,t),e.hasSimplifiedPath)?function e(t,a,n){t.data.name=t.data.name.slice(t.data.name.lastIndexOf("/")+1,t.data.name.length);let r=a.name.slice(0,a.name.lastIndexOf("/")),i=r.indexOf("/")>-1,s={path:a.path.slice(0,a.path.lastIndexOf("/")),contentType:a.contentType,name:r,hasSimplifiedPath:i},o={items:[t],data:s};return(n.set(s.path,o),i)?e(o,{...s},n):o}(t,e,i):t});if(n){let t=e.data.path,r=uo(t,n,a.payload.tree.items);for(let e of(o.push(...r),r))i.set(e.data.path,e)}t({type:"add",folders:i,processingTime:Date.now()-c}),e.items=o,e.data.totalCount=a.payload.tree.totalCount,o.length>100?p(o,a.payload.tree.totalCount):(r(o),s(a.payload.tree.totalCount))}else d(!0)}catch{d(!0)}}l(!1)},[a,e,t,p]),p,n,o,c,m,i]}(t,()=>{},o),D=r?`${r}/`:"",R=L-k.length;(0,x.useEffect)(()=>{a&&b.current&&requestAnimationFrame(()=>{b.current?.scrollIntoView({block:"center"})})},[a]);let P=x.useCallback(e=>{!e||y||E||T||!(t.items.length>100)||I(),e!==y&&v(e)},[y,E,T,t.items.length,I]),O=x.useCallback(e=>{e.metaKey||e.ctrlKey||1===e.button&&h?(window.open(s(t.data),"_blank"),e.preventDefault()):(i?.(t.data,t),_("FILES_TREE.ITEM",{item_path:t.data.path}),h&&c(s(t.data)),e.stopPropagation())},[t,s,c,h,i,_]);x.useEffect(()=>{n&&!y&&P?.(!0)},[n]),x.useEffect(()=>{0===t.items.length&&y?P?.(!1):!y&&t.autoExpand&&P?.(!0)},[t.items.length]);let B=x.useCallback(e=>{l&&a&&l(e),b.current=e},[l,a]);if(1===t.items.length){let n=t.items[0];if(n&&"directory"===n.data.contentType)return(0,m.jsx)(ug,{clientOnlyFilePaths:e,directoryItems:t.items,leadingPath:D+t.data.name,inheritsActive:a,onItemSelected:i,selectedItemRef:l,getItemUrl:s,directoryNavigateOnClick:h,navigateOnClick:h,getFileTrailingVisual:u,getFileIcon:p,selectedChildren:C,expandedPath:g})}return d?.(),(0,m.jsxs)(un.G.Item,{ref:j,expanded:y,onExpandedChange:P,current:a,onSelect:O,id:`${t.data.path}-item`,containIntrinsicSize:a?void 0:"auto 2rem",children:[(0,m.jsx)(un.G.LeadingVisual,{children:(0,m.jsx)(un.G.DirectoryIcon,{})}),(0,m.jsxs)("div",{className:ul.itemContainer,children:[(0,m.jsx)(um,{className:ul.checkbox,checked:"all"===N,indeterminate:"partial"===N,readOnly:!0,"aria-label":`Select ${t.data.name}`,"data-indeterminate":"partial"===N?"true":void 0}),(0,m.jsxs)("span",{ref:B,children:[D&&(0,m.jsx)("span",{children:D}),(0,m.jsx)("span",{"data-testid":`${t.data.path}-directory-item`,children:t.data.name})]})]}),S&&(0,m.jsx)(ut.m,{"data-testid":`${t.data.name}-directory-item-tooltip`,id:`${t.data.name}-directory-item-tooltip`,contentRef:j,"aria-label":`${D}${t.data.name}`,open:!0,direction:"ne"}),(0,m.jsx)(un.G.SubTree,{state:E?"loading":T?"error":"done",children:T?(0,m.jsx)(un.G.ErrorDialog,{onRetry:w,onDismiss:A,children:"There was an error loading the folder contents."}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(ug,{clientOnlyFilePaths:e,directoryItems:k,onItemSelected:i,selectedItemRef:l,getItemUrl:s,directoryNavigateOnClick:h,navigateOnClick:h,getFileTrailingVisual:u,getFileIcon:p,selectedChildren:C,expandedPath:g}),R>0&&(0,m.jsx)(ux,{message:`${R} entries not shown`})]})})]})}let uh=x.memo(up,(e,t)=>e.isActive===t.isActive&&e.isAncestorOfActive===t.isAncestorOfActive&&e.directory===t.directory&&(e.selectedChildren===t.selectedChildren||0===e.selectedChildren.length&&0===t.selectedChildren.length)&&e.expandedPath===t.expandedPath);function uf({clientOnlyFilePaths:e,directoryItems:t,leadingPath:a,inheritsActive:n,onItemSelected:r,selectedItemRef:i,onRenderRow:s,getItemUrl:o,getFileTrailingVisual:l,getFileIcon:c,directoryNavigateOnClick:d,navigateOnClick:u,selectedChildren:p,expandedPath:h}){let f=(0,ue.Z)(),g=(0,cU.Z)(),y=x.useRef(g),v=x.useRef(r);x.useEffect(()=>{v.current=r,y.current=g},[r,g]);let _=x.useCallback((e,t)=>{v.current?.(e,t)},[]),b=x.useMemo(()=>t.map(t=>{let r=h===t.data.path,y=p?.includes(t.data.path),x=r||h.startsWith(`${t.data.path}/`),v=p?.filter(e=>e===t.data.path||e.startsWith(`${t.data.path}/`));return"directory"===t.data.contentType?(0,m.jsx)(uh,{clientOnlyFilePaths:e,isActive:n||r,isAncestorOfActive:x,onItemSelected:_,leadingPath:a,directory:t,getItemUrl:o,getFetchUrl:f.getItemUrl,selectedItemRef:x?i:void 0,navigate:g,onRenderRow:s,navigateOnClick:d,getFileTrailingVisual:l,getFileIcon:c,itemCount:t.items.length,isSelected:y,selectedChildren:v,expandedPath:h},t.data.name):(0,m.jsx)(uu,{onItemSelected:_,file:t,isActive:r,getItemUrl:o,selectedItemRef:r?i:void 0,navigate:g,navigateOnClick:u,onRenderRow:s,getFileTrailingVisual:l,getFileIcon:c,isSelected:y},t.data.name)}),[t,h,p,e,n,_,a,o,f.getItemUrl,i,g,s,d,l,c,u]);return(0,m.jsx)(m.Fragment,{children:b})}let ug=x.memo(uf);function uy(e){let{clientOnlyFilePaths:t,rootItems:a,fetchError:n,loading:r,onRenderRow:i,getItemUrl:s,getFileTrailingVisual:o,getFileIcon:l,expandedPath:c,onSelectionChange:d}=e,[u,p]=(0,x.useReducer)(uc,new Set),h=e.selectedItems||u,f=(0,x.useCallback)(e=>{let t=new Set;if(t.add(e.data.path),"directory"===e.data.contentType)for(let a of e.items)for(let e of f(a))t.add(e);return Array.from(t)},[]),g=(0,x.useCallback)((e,t)=>{let a=t?{type:"DESELECT_FILE",path:e}:{type:"SELECT_FILE",path:e};d?d(uc(h,a)):p(a)},[d,h]),y=(0,x.useCallback)((e,t)=>{let a=f(e),n=t?{type:"DESELECT_DIRECTORY",paths:a}:{type:"SELECT_DIRECTORY",paths:a};d?d(uc(h,n)):p(n)},[f,d,h]),v=(0,x.useCallback)((e,t)=>{if("directory"===e.contentType){let e=f(t).every(e=>h.has(e));y(t,e)}else g(e.path,h.has(e.path))},[f,y,g,h]),_=(0,x.useCallback)(e=>{1===e.button&&e.preventDefault()},[]);return(0,m.jsx)(ui.A,{onMouseDown:_,sx:{...e.sx},"data-testid":"repos-file-tree-container",className:ul.Box,children:r?(0,m.jsxs)("div",{className:ul.Box_1,children:[(0,m.jsx)(a3.A,{"aria-label":"Loading file tree"}),(0,m.jsx)("span",{className:"fgColor-muted",children:"Fetching files..."})]}):(0,m.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,m.jsxs)(un.G,{"aria-label":"Files",children:[n&&(0,m.jsx)(ux,{message:"Some files could not be loaded."}),(0,m.jsx)(ug,{clientOnlyFilePaths:t,directoryItems:a,onItemSelected:v,selectedChildren:h?Array.from(h):[],selectedItemRef:e.selectedItemRef,onRenderRow:i,directoryNavigateOnClick:e.directoryNavigateOnClick,navigateOnClick:e.navigateOnClick,getItemUrl:s,getFileTrailingVisual:o,getFileIcon:l,expandedPath:c})]})})})}function ux({message:e}){return(0,m.jsxs)(un.G.Item,{id:"error-tree-row",children:[(0,m.jsx)(un.G.LeadingVisual,{children:(0,m.jsx)(us.A,{icon:P.AlertFillIcon,className:ul.Octicon})}),(0,m.jsx)("div",{className:ul.Box_2,children:e||"Couldn't load."})]})}try{ud.displayName||(ud.displayName="WrappedFileTreeRow")}catch{}try{uu.displayName||(uu.displayName="FileTreeRow")}catch{}try{um.displayName||(um.displayName="MemoizedCheckbox")}catch{}try{up.displayName||(up.displayName="WrappedDirectoryTreeRow")}catch{}try{uh.displayName||(uh.displayName="DirectoryTreeRow")}catch{}try{uf.displayName||(uf.displayName="WrappedDirectoryContents")}catch{}try{ug.displayName||(ug.displayName="DirectoryContents")}catch{}try{uy.displayName||(uy.displayName="FileTreePicker")}catch{}try{ux.displayName||(ux.displayName="ErrorTreeRow")}catch{}var uv=a(69359),u_=a(88795),ub=a(85579),uj=a(141),uS=a(69098),uC=a(89276),uN=a(27406),uw=a(81367),uI=a(96235),uk=a(3971),uE=a(91385),uT=a(70170),uA=a(54763);let uL={TextInput:"FilesSearchBox-module__TextInput--G0iN6",Box:"FilesSearchBox-module__Box--NOLNq"},uD=x.forwardRef(({ariaActiveDescendant:e,ariaControls:t,ariaExpanded:a,ariaHasPopup:n,className:r,onBlur:i,onFocus:s,onKeyDown:o,onPreload:l,onSearch:c,query:d,searchPlaceholder:u,loading:p,sx:h},f)=>{let{sendRepoClickEvent:g}=(0,d9.T)(),[v,_]=x.useState(d),b=x.useRef((0,uT.s)(e=>c(e),250));x.useEffect(()=>{_(d)},[d]);let j=d?(0,m.jsx)(dC.A.Action,{onClick:()=>{g("FILE_TREE.CANCEL_SEARCH"),c("")},icon:P.XCircleFillIcon,"aria-label":"Clear",className:"fgColor-muted"}):void 0;return(0,m.jsx)(dC.A,{autoFocus:uR(),className:(0,y.$)(r,uL.TextInput),ref:f,value:v,onKeyDown:o,onChange:e=>{_(e.target.value),l(),b.current(e.target.value)},sx:h,"aria-label":u||"Go to file","aria-activedescendant":e,role:n?"combobox":void 0,"aria-controls":t,"aria-expanded":a,"aria-haspopup":n?"dialog":void 0,autoCorrect:"off",spellCheck:"false",placeholder:u||"Go to file",loading:""!==d&&p,leadingVisual:P.SearchIcon,trailingAction:j,trailingVisual:j?void 0:()=>(0,m.jsx)(uA.E,{children:(0,m.jsx)("div",{className:uL.Box,children:(0,m.jsx)("kbd",{children:"t"})})}),onFocus:e=>{l(),e.target.select(),s?.(e)},onBlur:i,onClick:()=>g("FILE_TREE.SEARCH_BOX")})});function uR(){return"1"===new URLSearchParams(eg.fV.search).get("search")}uD.displayName="FilesSearchBox";let uP={Box:"FileResultsList-module__Box--W1Jqy",ActionList:"FileResultsList-module__ActionList--jyBtr",FilesSearchBox:"FileResultsList-module__FilesSearchBox--mUJl5",HighlightMatch:"FileResultsList-module__HighlightMatch--RNVsR",Octicon:"FileResultsList-module__Octicon--jn8tc"},uO={excludeDirectories:!1,excludeSeeAllResults:!1};function uB({actionListSx:e,additionalResults:t,className:a,commitOid:n,config:r=uO,findFileWorkerPath:i,getItemUrl:s,onRenderRow:o,onItemSelected:l,searchBoxRef:c,sx:d}){let{excludeDirectories:u,excludeSeeAllResults:p}=r,{query:h,setQuery:f}=(0,ub.JS)(),g=(0,u_.t)(),y=x.useRef(null),v=c??y,[_,b]=x.useState(h.length>0),[j,S]=x.useState(!!h),{list:C,directories:N,loading:w,error:I}=(0,d8.o)(n,_,!!u),{path:k}=(0,uj.eu)(),{getUrl:E}=(0,ue.Z)(),{queryText:T,queryLine:A}=function(e){let t=(e=e.replaceAll(" ","")).indexOf(":");return t>=0?{queryText:e.substring(0,t),queryLine:parseInt(e.substring(t+1),10)}:{queryText:e,queryLine:void 0}}(h),{matches:L,clearMatches:D}=function(e,t,a,n){let[r,i]=x.useState(),s=x.useRef(""),o=x.useRef(),{sendStats:l}=(0,d9.T)(),c=x.useRef(!1),d=x.useCallback(()=>{let e=new uC.z(a,uN.j);e.onmessage=({data:e})=>{c.current=!1,i(e.list),s.current=e.query,e.startTime&&l("repository.find-file",{"find-file-base-count":e.baseCount,"find-file-results-count":e.list.length,"find-file-duration-ms":performance.now()-e.startTime})},o.current=e},[l,a]);return x.useEffect(()=>{if(n)return d(),function(){o.current?.terminate()}},[d,n]),x.useEffect(()=>{if(e.length&&t){c.current&&(o.current?.terminate(),d());let a=s.current&&t.startsWith(s.current);c.current=!0,o.current?.postMessage({baseList:a&&r||e,query:t,startTime:performance.now()})}},[e,t,d]),{matches:r,clearMatches:()=>i(void 0)}}((0,x.useMemo)(()=>[...C,...t??[]].sort(),[t,C]),T,i,_),{sendRepoClickEvent:R}=(0,d9.T)(),P=(0,cU.Z)(),[O,B]=x.useState(0),[F,M]=x.useState(()=>uR()),V=x.useRef(null),U=x.useRef(null),$="file-results-list",{sendRepoKeyDownEvent:W}=(0,d9.T)(),{screenSize:z}=(0,am.lm)(),H=r.enableOverlay??z>=am.Gy.large,q=x.useCallback(e=>{R("FILE_TREE.SEARCH_RESULT_CLICK"),l?.(e),S(!1)},[R,l]),G=(e,t,a)=>s?s(e,t,a):E({path:e,action:t?"tree":"blob",hash:a}),{containerRef:K}=(0,aB.G)({bindKeys:aO.z0.ArrowVertical|aO.z0.HomeAndEnd,focusInStrategy:"previous"},[w,I]);x.useEffect(()=>{h||S(!1)},[h]),x.useEffect(()=>{document.activeElement!==v.current&&H&&S(!1)},[k,v,H]);let Q=L?.slice(0,20)||[],J=L&&L.length>Q.length,Y=!r.disableNavigation,X=U.current?.getBoundingClientRect().width,Z=(0,m.jsx)(ui.A,{sx:{maxHeight:H?"180px":"100% !important",width:H?X:"100%"},className:uP.Box,children:I?(0,m.jsx)(dx.A,{variant:"danger",className:"m-3",children:"Failed to search"}):(0,m.jsxs)(tM.l,{ref:K,sx:{p:H?2:3,pr:3*!!H,pt:H?3:"2px !important",...e},role:"listbox",className:uP.ActionList,children:[!w&&Q.map((e,t)=>{let a=N.includes(e),n=G(e,a,A?`L${A}`:"");return(0,m.jsx)(uU,{active:!1,index:t,focused:F&&O===t,match:e,onRender:o,query:T,onClick:q,isDirectory:a,to:n,useOverlay:H,listRef:K,noAnchor:r.disableNavigation},e)}),0===Q.length&&(0,m.jsx)("div",{role:"status",className:"text-center fgColor-muted",children:"No matches found"})]})});return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(ui.A,{className:a,ref:U,sx:d,children:(0,m.jsx)(uD,{ariaActiveDescendant:(!H&&h||H&&j)&&F&&O>-1?J&&O===Q.length?"see-all-results-link":`file-result-${O}`:void 0,ariaExpanded:H?j:void 0,ariaHasPopup:H,ariaControls:H?$:void 0,ref:v,loading:w,query:h,onKeyDown:e=>{let{key:t,shiftKey:a,metaKey:n,altKey:r,ctrlKey:i}=e;if(!a&&!n&&!r){if("Escape"===t)h?(W("FILE_TREE.CANCEL_SEARCH"),f(""),D()):document.activeElement&&document.activeElement.blur();else if(!h)return;else if("Enter"===t){if(!p&&J&&O===Q.length)Y&&P((0,uI.Y8Y)({owner:g.ownerLogin,repo:g.name,searchTerm:`path:${T}`})),l?.();else if(Q[O]){let e=Q[O];Y&&P(G(Q[O],!1,A?`L${A}`:"")),S(!1),l?.(e)}}else if("ArrowDown"===t||i&&"n"===t){if(!p&&J&&O>=Q.length-1){if(B(Q.length),V.current&&K.current){let e=(0,uw.U)(K.current);(0,aO.Rt)(V.current,e,{behavior:"instant"})}}else B(Math.min(O+1,Q.length-1));e.preventDefault();return}else if("ArrowUp"===t||i&&"p"===t){B(Math.max(O-1,0)),e.preventDefault();return}}},onPreload:()=>b(!0),onSearch:e=>{f(e),e?S(!0):(D(),S(!1)),B(0)},onBlur:e=>{K.current?.contains(e.relatedTarget)||(S(!1),M(!1))},onFocus:()=>{h&&S(!0),M(!0)},searchPlaceholder:r.searchPlaceholder,className:uP.FilesSearchBox})}),H&&Q.length>0&&(0,m.jsx)(uk.T,{anchorRef:U,open:H&&j,renderAnchor:null,onClose:()=>{S(!1)},focusZoneSettings:{disabled:!0},focusTrapSettings:{disabled:!0},align:"end",overlayProps:{id:$,role:"dialog"},children:Z}),!H&&h&&Z]})}let uF=({active:e,focused:t,index:a,match:n,query:r,to:i,isDirectory:s,onClick:o,onRender:l,useOverlay:c,listRef:d,noAnchor:u})=>{let p=(0,uE.Xq)(r,n);l?.();let h=x.useRef(null);x.useEffect(()=>{if(t&&h.current&&d?.current){let e=(0,uw.U)(d.current);(0,aO.Rt)(h.current,e,{behavior:"instant"})}},[t,d]);let f={};t&&(f={outline:"none",border:"2 solid",boxShadow:"0 0 0 2px #0969da"});let g={id:`file-result-${a}`,active:e,onSelect:(0,x.useCallback)(()=>{o?.(n)},[n,o]),sx:{fontWeight:"normal",":hover":{textDecoration:"none"},mx:"2px",width:"calc(100% - 4px)",...f},role:"option","data-focus-visible-added":t||void 0,tabIndex:c?-1:0},y=(0,m.jsx)("div",{className:"d-flex",children:(0,m.jsx)("div",{className:"d-flex flex-1 flex-column overflow-hidden",children:(0,m.jsx)(u$,{text:n,positionsList:p,LeadingIcon:s?uM:uV,className:uP.HighlightMatch})})});return u?(0,m.jsx)(tM.l.Item,{...g,children:y},n):(0,m.jsx)(tM.l.LinkItem,{...g,ref:h,as:em.N,to:i,children:y},n)},uM=()=>(0,m.jsx)(us.A,{"aria-label":"Directory",icon:P.FileDirectoryFillIcon,size:"small",className:uP.Octicon}),uV=()=>(0,m.jsx)(us.A,{"aria-label":"File",icon:P.FileIcon,className:"fgColor-muted mr-2",size:"small"}),uU=x.memo(uF);function u$({className:e,text:t,positionsList:a,sx:n,LeadingIcon:r}){let i=[],s=0;for(let e of a){if(Number(e)!==e||e<s||e>t.length)continue;let a=t.slice(s,e);a&&i.push(uW(a)),s=e+1,i.push((0,m.jsx)("mark",{className:"text-bold bgColor-transparent fgColor-default",children:t[e]},e))}return i.push(uW(t.slice(s))),(0,m.jsx)(ui.A,{className:e,sx:n,children:(0,m.jsxs)(m.Fragment,{children:[r&&(0,m.jsx)(r,{}),i]})})}function uW(e){return e.replaceAll("/","/\u200B")}try{uB.displayName||(uB.displayName="FileResultsList")}catch{}try{uF.displayName||(uF.displayName="FileResultRow")}catch{}try{uM.displayName||(uM.displayName="DirectoryIcon")}catch{}try{uV.displayName||(uV.displayName="FileResultIcon")}catch{}try{uU.displayName||(uU.displayName="MemoizedFileResultRow")}catch{}try{u$.displayName||(u$.displayName="HighlightMatch")}catch{}let uz={dialogHeader:"MultiFilePicker-module__dialogHeader--z4rKg",Box:"MultiFilePicker-module__Box--bwEHF",Dialog:"MultiFilePicker-module__Dialog--tzxbE"};function uH({currentRepo:e,setLocalFormData:t,fetchError:a,onFileCountChange:n,processingTime:r,expandedPath:i}){let[s,o]=(0,x.useState)(()=>new Set),[l,c]=(0,x.useState)(()=>new Set),{list:d,directories:u,loading:p}=(0,d8.o)(e.commitOID,!0),[h,f]=(0,x.useState)([]);(0,x.useEffect)(()=>{f(function e(t,a){let n=t[a];return n?n.items.map(a=>({data:a,items:"directory"===a.contentType?e(t,a.path):[]})).sort((e,t)=>"directory"===e.data.contentType&&"directory"!==t.data.contentType?-1:"directory"!==e.data.contentType&&"directory"===t.data.contentType?1:e.data.name.localeCompare(t.data.name)):[]}(function(e){let{paths:t,directories:a}=e,n={},r=new Set(a);for(let e of(n[""]={items:[],totalCount:0},[...a].sort())){let t=e.substring(0,e.lastIndexOf("/"))||"",a={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"directory"};n[t]||(n[t]={items:[],totalCount:0}),n[t].items.push(a),n[e]||(n[e]={items:[],totalCount:0})}for(let e of t.filter(e=>!r.has(e)).sort()){let t=e.substring(0,e.lastIndexOf("/"))||"",a={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"file"};n[t]||(n[t]={items:[],totalCount:0}),n[t].items.push(a)}for(let e in n){let t=n[e];t&&t.items.sort((e,t)=>"directory"===e.contentType&&"directory"!==t.contentType?-1:"directory"!==e.contentType&&"directory"===t.contentType?1:e.name.localeCompare(t.name))}let i=e=>{let t=n[e];return t?t.items.reduce((e,t)=>"directory"===t.contentType?e+1+i(t.path):e+1,0):0};for(let e in n){let t=n[e];t&&(t.totalCount=i(e))}return n}({paths:d,directories:u}),"")),c(new Set(u))},[d,u,f,e.commitOID]),(0,x.useEffect)(()=>{let a=Array.from(s).filter(e=>!l.has(e));n?.(a.length),t(a.map(t=>({id:`${e.id}-${t}`,repositoryId:e.id,nwo:`${e.ownerLogin}/${e.name}`,filePath:t,type:"github_file"})))},[s,l,e,t,n]);let g=(0,x.useCallback)(t=>`/${e.name}/${e.ownerLogin}/tree/${e.refInfo.name}/${t.path}`,[e]);return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{className:uz.Box,children:(0,m.jsx)(uy,{rootItems:h,expandedPath:i,selectedItemRef:()=>{},setRootItems:f,navigateOnClick:!1,directoryNavigateOnClick:!1,selectedItems:s,onSelectionChange:o,processingTime:r,loading:p||!1,fetchError:!!a,getItemUrl:g,sortDirectoryItems:e=>e.sort((e,t)=>e.data.name.localeCompare(t.data.name))})})})}function uq({onClose:e}){return(0,m.jsx)(tF.K,{icon:P.XIcon,"aria-label":"Close",onClick:e,variant:"invisible"})}function uG({formData:e,onCancel:t,onSaveFiles:a,onSaveRepository:n,findFileWorkerPath:r,attachmentButtonRef:i,owner:s,resourceCounts:o,recentlyUsedRepo:l}){let[c,d]=(0,x.useState)({}),[u,p]=(0,x.useState)(null),[h,f]=(0,x.useState)(l?.recentlyUsedRepo||null),[g,y]=(0,x.useState)(!0),[v,_]=(0,x.useState)(e),[b]=(0,x.useState)(0),[j,S]=(0,x.useState)(!1),[C,N]=(0,x.useState)(null),[w,I]=(0,x.useState)(""),[k,E]=(0,x.useState)(0),T=(0,x.useRef)(!1),A=eE.W.spacesRepoContext,L=async e=>{let t;if(T.current=!0,c[e]){f(t=c[e]),l?.setRecentlyUsedRepo(t);return}try{let a=await (0,td.lS)(`/github-copilot/chat/repositories/${e}`,{method:"GET"});if(!a.ok)return void p(`Failed to fetch repository details: ${a.status}`);t=await a.json(),d(a=>({...a,[e]:t})),f(t),l?.setRecentlyUsedRepo(t),y(!1)}catch(e){p(e instanceof Error?e.message:"An unknown error occurred")}T.current=!1},D=()=>{l?.setRecentlyUsedRepo(null),f(null),_([]),y(!0)},R=!1,O=void 0!==o;R=O?o.currentResourceCount+k>o.maxResourceCount:k>50;let B=async()=>{if(S(!0),A&&0===k&&h)try{n({type:"repository",id:`${h.id}`,repositoryId:h.id,nwo:`${h.ownerLogin}/${h.name}`,markedForDestroy:!1});return}catch{N("Could not save repository. Please try again.")}finally{S(!1)}if(R)return void S(!1);try{await a(v)}catch(t){let e="An unknown error occurred";if(t&&"object"==typeof t&&"base"in t&&"string"==typeof t.base)if(t.base.startsWith("unsupported_file_type")&&"files"in t){let a=t.files;if(1===a.length)e=`This file can't be submitted: ${a[0]}. Only supported file types are allowed.`;else{let[t,n]=[a.slice(0,3),a.slice(3)];e="One or more files can't be submitted: "+t.map(e=>(function(e,t=30){let a=e.length<=t?e:`...${e.slice(e.length-t,e.length)}`;return`<b>${a}</b>`})(e)).join(", "),n.length>0?e+=`, and ${n.length} more.`:e+=".",e+=" Only supported file types are allowed."}}else e=t.base;e.startsWith("The size of the space exceeds the current limit")&&(e="The size of the space exceeds the current limit"),N(e)}finally{S(!1)}};(0,x.useEffect)(()=>{N(null)},[v]);let F=R&&(O?`${o.currentResourceCount+k} / ${o.maxResourceCount} possible sources selected, add fewer files.`:"Up to 50 files can be added at a time.");return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(uv.X1,{selectionVariant:"instant",open:!h&&g,onOpenChange:e=>{T.current||(y(e),t())},selectedRepoIds:new Set,onSelectRepo:async e=>{e&&(_([]),await L(e))},cancelReturnFocusRef:i,submitReturnFocusRef:i,error:u??void 0,ownerDisplayLogin:s,includeForks:!0}),h&&(0,m.jsx)(a2.l,{onClose:t,title:`Add files from ${h.ownerLogin}/${h.name}`,width:"large",position:{narrow:"fullscreen"},renderHeader:({onClose:e})=>(0,m.jsxs)(a2.l.Header,{children:[(0,m.jsxs)("div",{className:uz.dialogHeader,children:[(0,m.jsx)(tF.K,{icon:P.ArrowLeftIcon,"aria-label":"Back",onClick:D,variant:"invisible"})," ",(0,m.jsx)(a2.l.Title,{children:"Select folders and files"}),(0,m.jsx)(uq,{onClose:()=>e("close-button")})]}),(0,m.jsx)(a2.l.Subtitle,{className:"mt-0",children:(0,m.jsx)(u_.d,{repository:h,children:(0,m.jsx)(ub.Ck,{children:(0,m.jsx)(uj.qV,{refInfo:{name:h.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:h.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,m.jsx)(uS.$,{allShortcutsEnabled:!1,children:(0,m.jsx)(uB,{commitOid:h.commitOID,findFileWorkerPath:r,onItemSelected:e=>{e&&I(e)},config:{enableOverlay:!0,disableNavigation:!0,searchPlaceholder:"Search for files or folders",actionText:"Search for files or folders"}})})})})})})]}),renderFooter:()=>(0,m.jsxs)(a2.l.Footer,{children:[(0,m.jsx)("div",{className:"d-flex flex-items-center",children:F&&(0,m.jsx)(dZ.A.Validation,{variant:"error",children:F})}),(0,m.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,m.jsx)(eU.Q,{onClick:t,children:"Cancel"}),(0,m.jsxs)(eU.Q,{...(0,aG.G)("save-resource-button"),variant:"primary",onClick:B,count:j?void 0:k||void 0,loading:j,children:["Add ",(0,m.jsx)("span",{children:A&&0===k?"whole repository":""})]})]})]}),renderBody:()=>(0,m.jsxs)("div",{className:"d-flex flex-column",children:[u&&(0,m.jsx)("span",{children:u}),C&&(0,m.jsx)("div",{className:"position-sticky top-0 bgColor-default flash-banner",children:(0,m.jsx)(dx.A,{full:!0,variant:"danger",children:(0,m.jsx)(sl.JR,{as:"span",html:C})})}),(0,m.jsx)(u_.d,{repository:h,children:(0,m.jsx)(ub.Ck,{children:(0,m.jsx)(uj.qV,{refInfo:{name:h.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:h.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,m.jsx)("div",{className:"p-2",children:(0,m.jsx)(uH,{expandedPath:w,currentRepo:h,localFormData:v,setLocalFormData:_,onFileCountChange:E,fetchError:u,processingTime:b})})})})})]}),className:uz.Dialog})]})}try{uH.displayName||(uH.displayName="FilePickerForm")}catch{}try{uq.displayName||(uq.displayName="CloseButton")}catch{}try{uG.displayName||(uG.displayName="MultiFilePicker")}catch{}var uK=a(57596),uQ=a(7324);function uJ(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}function uY(e,t,a){return uX(e,t),uJ(a,"get"),a.get?a.get.call(e):a.value}function uX(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}let UploadableFileExtensions=class UploadableFileExtensions{static get text(){return null!=uY(this,UploadableFileExtensions,uZ)||!function(e,t,a,n){uX(e,t),uJ(a,"set");if(a.set)a.set.call(e,n);else{if(!a.writable)throw TypeError("attempted to set read only private field");a.value=n}}(this,UploadableFileExtensions,uZ,new Set([...o_.E.getTextFileExtensions().split(","),".babelrc",".conf",".eslintrc",".lock",".log",".npmrc",".prettierrc",".sum",".yarnrc"].map(e=>e.toLowerCase()))),uY(this,UploadableFileExtensions,uZ)}static images(e){return new Set(ox.s.getFileExtensions(e).map(e=>e.toLowerCase()))}};var uZ={writable:!0,value:void 0};let u0=()=>{let e,t,a,n,r=(0,p.c)(7);r[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:u2},r[0]=e):e=r[0];let i=(0,nd.n)(e);return r[1]!==i?({mutateAsync:t,...a}=i,r[1]=i,r[2]=t,r[3]=a):(t=r[2],a=r[3]),r[4]!==t||r[5]!==a?(n={getCopilotSpaceResourceSizes:t,...a},r[4]=t,r[5]=a,r[6]=n):n=r[6],n};function u1(e){return{id:e.id,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,metadata:db(e)}}async function u2(e){let t={resources:e.resources?.map(u1)},a=await (0,td.lS)("/copilot/spaces/resource_sizes",{method:"POST",body:t}),n=await a.json();if(!a.ok)throw n.errorMessages;return n}function u3({onResourcesAdded:e,onError:t,onUploadingChange:a}){let{availableModels:n}=(0,$.Pk)(),{hydrateResourcesWithSizePercentages:r}=function(){let e,t,a=(0,p.c)(4),{getCopilotSpaceResourceSizes:n}=u0();a[0]!==n?(e=async e=>{if(0===e.length)return;let t=await n({resources:e});for(let a of e)a.sizePercentage=t[a.id]??0},a[0]=n,a[1]=e):e=a[1];let r=e;return a[2]!==r?(t={hydrateResourcesWithSizePercentages:r},a[2]=r,a[3]=t):t=a[3],t}();return{processFiles:(0,x.useCallback)(async(i,{source:s})=>{if(i&&0!==i.length){(function(e,{source:t}){for(let a of((0,e9.BI)("copilot-spaces.selected_local_files",{fileCount:e.length,source:t}),Array.from(e))){let e=u4(a.name);(0,e9.BI)("copilot-spaces.selected_local_file",{fileExtension:e,contentType:a.type,fileSize:a.size,source:t})}})(i,{source:s}),a?.(!0);try{let{imageFiles:a,nonImageFiles:s}=function(e,t){let a=UploadableFileExtensions.images(t);return Array.from(e).reduce((e,t)=>(!function(e,t){if(e.type.startsWith("image/"))return!0;let a=u4(e.name);return t.has(a)}(t,a)?e.nonImageFiles.push(t):e.imageFiles.push(t),e),{imageFiles:[],nonImageFiles:[]})}(i,n),[o,l]=await Promise.all([u8(s),u6(a,n)]),c=[...o.resources,...l.resources];await r(c),c.length>0&&e(c);let d=[...o.errorMessages,...l.errorMessages];d.length>0&&t?.(d)}catch{t?.(["Something went wrong while trying to add the files. Please try again."])}finally{a?.(!1)}}},[n,e,t,r,a])}}function u4(e){let t=e.split(".");return t.length>1?`.${t.pop()?.toLowerCase()??""}`:""}function u5(e){let t=[],a=[];for(let n of e)"fulfilled"===n.status?"resource"in n.value?t.push(n.value.resource):a.push(n.value.error):a.push("An unexpected error occurred while processing a file.");return{errorMessages:a,resources:t}}async function u6(e,t){if(0===e.length)return{errorMessages:[],resources:[]};if(!eE.W.spacesImagesEnabled)return{errorMessages:["Images are not yet supported"],resources:[]};let a=e.map(e=>u7(e,ox.s.getMimeTypes(t)));return u5(await Promise.allSettled(a))}async function u7(e,t){try{if(e.size>ox.s.getAttachmentSizeLimit())return{error:ma(e.name)};if(!t.includes(e.type))return{error:mt(e.name)};let{id:a,attachment:n}=ox.s.makeImageReference(e,""),r=await n.prefetch();return{resource:{id:a,type:"media_content",mediaType:e.type,name:e.name||"Image",url:r.href||"",copilotChatAttachmentId:r.id||0,height:n.height||0,width:n.width||0,markedForDestroy:!1}}}catch(t){var a,n;return a=t,n=e,a instanceof Error&&"FileSizeError"===a.name?{error:ma(n.name)}:{error:me(n.name)}}}async function u8(e){if(0===e.length)return{errorMessages:[],resources:[]};if(!eE.W.customCopilotsFileUploads)return{errorMessages:["Text file uploads are not yet supported."],resources:[]};let t=e.map(e=>u9(e));return u5(await Promise.allSettled(t))}async function u9(e){try{var t;if(!e.type.startsWith("text/")){let t=u4(e.name);if(!UploadableFileExtensions.text.has(t))return{error:mt(e.name)}}e=(t=e).type.startsWith("text/")?t:new File([t],t.name,{type:"text/plain"});let a=crypto.randomUUID(),n=await new uQ.N(a,e).prefetch();return{resource:{id:a,type:"uploaded_text_file",name:e.name,copilotChatAttachmentId:n.id,url:n.href,markedForDestroy:!1}}}catch(r){var a=r,n=e;if(!(a instanceof uK.ZK))return{error:me(n.name)};let t=a.errors?.[0];return"string"==typeof t?{error:t}:{error:t?.message||me(n.name)}}}function me(e){return`An error occurred uploading "${e}".`}function mt(e){return`File "${e}" is not a supported file type.`}function ma(e){let t=function(e){if(e<0)throw Error("File size cannot be negative");if(!Number.isInteger(e))throw Error("File size must be a whole number of bytes");let t=["B","KB","MB","GB","TB","PB"],a=e,n=0;for(;a>=1024&&n<t.length-1;)a/=1024,n++;let r=Math.round(100*a)/100;return`${r}${t[n]}`}(ox.s.getAttachmentSizeLimit());return`File "${e}" is too large. The maximum size for this file type is ${t}.`}let mn=(0,x.forwardRef)((e,t)=>{let a,n,r,i,s,o,l,c,d,u,h=(0,p.c)(18),{onResourcesAdded:f,onError:g,onUploadingChange:y}=e;h[0]!==g||h[1]!==f||h[2]!==y?(a={onResourcesAdded:f,onError:g,onUploadingChange:y},h[0]=g,h[1]=f,h[2]=y,h[3]=a):a=h[3];let{processFiles:v}=u3(a),{availableModels:_}=(0,$.Pk)();h[4]===Symbol.for("react.memo_cache_sentinel")?(r=Array.from(UploadableFileExtensions.text),h[4]=r):r=h[4];let b=r;h[5]!==_?(i=Array.from(UploadableFileExtensions.images(_)),h[5]=_,h[6]=i):i=h[6];let j=i;h[7]!==j?(s=[...b,...j],h[7]=j,h[8]=s):s=h[8];let S=s;h[9]!==S?(o=["text/*",...S],h[9]=S,h[10]=o):o=h[10],n=o.join(","),h[11]!==v?(l=e=>{e.target.files&&(v(e.target.files,{source:"file-upload"}),e.target.value="")},h[11]=v,h[12]=l):l=h[12];let C=l,N=(0,x.useRef)(null);return h[13]===Symbol.for("react.memo_cache_sentinel")?(c=()=>({addResources:()=>N.current?.click()}),h[13]=c):c=h[13],(0,x.useImperativeHandle)(t,c),h[14]===Symbol.for("react.memo_cache_sentinel")?(d={display:"none"},h[14]=d):d=h[14],h[15]!==n||h[16]!==C?(u=(0,m.jsx)("input",{"data-testid":"file-upload-input",ref:N,type:"file",accept:n,multiple:!0,style:d,onChange:C}),h[15]=n,h[16]=C,h[17]=u):u=h[17],u});mn.displayName="FileUploadInput";var mr=a(44263);function mi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let UrlDetails=class UrlDetails{constructor(e,t="",a="",n="",r=0,i="",s="unknown"){mi(this,"url",void 0),mi(this,"owner",void 0),mi(this,"repo",void 0),mi(this,"number",void 0),mi(this,"type",void 0),mi(this,"id",void 0),mi(this,"file_path",void 0),mi(this,"errorMessage",void 0),this.id=e,this.url=t,this.owner=a,this.repo=n,this.number=r,this.type=s,this.file_path=i}};let ms=()=>{let e,t,a,n,r=(0,p.c)(7);r[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:ml},r[0]=e):e=r[0];let i=(0,nd.n)(e);return r[1]!==i?({mutateAsync:a,...t}=i,r[1]=i,r[2]=t,r[3]=a):(t=r[2],a=r[3]),r[4]!==t||r[5]!==a?(n={validateUrlResources:a,...t},r[4]=t,r[5]=a,r[6]=n):n=r[6],n};function mo(e){return{id:e.id,resource_type:e.type,metadata:function(e){switch(e.type){case"github_issue":case"github_pull_request":return{owner:e.owner,repo:e.repo,number:e.number};case"github_file":return{owner:e.owner,repo:e.repo,file_path:e.file_path};default:throw Error("Unsupported resource")}}(e)}}async function ml(e){let{input:t,spaceOwner:a}=e,n={resources_attributes:t.map(mo),space_owner:a},r=await (0,td.lS)("/copilot/spaces/validate_url_resources",{method:"POST",body:n}),i=await r.json();if(!r.ok)throw i;return i}function mc(e){let t,a,n,r,i,s,o,l,c,d,u,h,f,g,y,v,_,b=(0,p.c)(61),{onClose:j,onSave:S,resourcesToSave:C,owner:N,resourceCounts:w}=e,[I,k]=(0,x.useState)(!1),[E,T]=(0,x.useState)(mm),[A,L]=(0,x.useState)(!1),[D,R]=(0,x.useState)(!1),O=eE.W.copilotSpacesFileUrls,{validateUrlResources:B}=ms();if(b[0]!==I||b[1]!==j||b[2]!==S||b[3]!==N||b[4]!==C||b[5]!==E||b[6]!==B){t=t=>{t?.preventDefault(),t?.stopPropagation(),I||(k(!0),e().finally(()=>{k(!1)}))};let e=async()=>{L(!1),R(!1);let e=(()=>{let e=new Set(C?.filter(mu).map(md)??[]),t=new Set;return E.filter(a=>{let n=`${a.owner}/${a.repo}/${a.number}/${a.type}`;return!(t.has(n)||e.has(n))&&""!==a.url.trim()&&(t.add(n),!0)})})(),t=e.filter(e=>"unknown"===e.type||N&&e.owner!==N);if(t.length>0){T(E.map(e=>N&&e.owner&&e.owner!==N?{...e,errorMessage:`This doesn't belong to the ${N} organization.`}:t.some(t=>t.id===e.id)?{...e,errorMessage:"Invalid URL"}:e)),L(!0);return}if(0===e.length)return void j();try{let t=await B({input:e,spaceOwner:N});S(t),j()}catch(e){if(Array.isArray(e)){for(let t of e){let e=E.find(e=>e.id===t.id);e&&(e.errorMessage="Resource not found")}L(!0)}}};b[0]=I,b[1]=j,b[2]=S,b[3]=N,b[4]=C,b[5]=E,b[6]=B,b[7]=t}else t=b[7];let F=!!w&&w.currentResourceCount+E.length+1>w.maxResourceCount;b[8]!==E||b[9]!==F?(a=()=>{if(F)return void R(!0);T([...E,new UrlDetails(crypto.randomUUID())])},b[8]=E,b[9]=F,b[10]=a):a=b[10];let M=a,V=D&&w?`You can select a maximum of ${w.maxResourceCount} sources.`:null;b[11]!==D||b[12]!==w?(n=e=>{D&&w&&(w.currentResourceCount+e.length>w.maxResourceCount||R(!1))},b[11]=D,b[12]=w,b[13]=n):n=b[13];let U=n;b[14]!==U||b[15]!==E?(r=e=>{let t=[...E];t.splice(e,1),T(t),U(t)},b[14]=U,b[15]=E,b[16]=r):r=b[16];let $=r;if(b[17]!==U||b[18]!==E){i=(t,a)=>{let n=[...E],r=e(a,n[t]||new UrlDetails(crypto.randomUUID()));n[t]=r,T(n),U(n)};let e=(e,t)=>{let a=e.match(/\/([^/]+)\/([^/]+)\/issues\/(\d+)/),n=e.match(/\/([^/]+)\/([^/]+)\/pull\/(\d+)/),r=e.match(/\/([^/]+)\/([^/]+)\/blob\/[^/]+\/(.+)$/);return t.url=e,a?(t.owner=a[1]??"",t.repo=a[2]??"",t.number=parseInt(a[3]??"0",10),t.type="github_issue"):n?(t.owner=n[1]??"",t.repo=n[2]??"",t.number=parseInt(n[3]??"0",10),t.type="github_pull_request"):r&&O&&(t.owner=r[1]??"",t.repo=r[2]??"",t.file_path=r[3]??"",t.type="github_file"),t};b[17]=U,b[18]=E,b[19]=i}else i=b[19];if(b[20]===Symbol.for("react.memo_cache_sentinel")?(s={narrow:"fullscreen"},b[20]=s):s=b[20],b[21]!==t||b[22]!==I||b[23]!==j||b[24]!==V?(o=()=>(0,m.jsxs)(a2.l.Footer,{children:[(0,m.jsx)("div",{className:"d-flex flex-items-center",children:V&&(0,m.jsx)(dZ.A.Validation,{variant:"error",children:V})}),(0,m.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,m.jsx)(eU.Q,{onClick:j,children:"Cancel"}),(0,m.jsx)(eU.Q,{variant:"primary",onClick:t,loadingAnnouncement:"Saving resource",loading:I,children:"Add"})]})]}),b[21]=t,b[22]=I,b[23]=j,b[24]=V,b[25]=o):o=b[25],b[26]!==A?(l=A&&(0,m.jsx)(G.l,{title:"Failed to save URL(s)",variant:"critical",className:"mb-2"}),b[26]=A,b[27]=l):l=b[27],b[28]!==N?(c=N&&(0,m.jsx)(sl.JR,{html:`from the <b>${N}</b> organization`}),b[28]=N,b[29]=c):c=b[29],b[30]!==c?(d=(0,m.jsxs)("p",{children:["Paste the URLs of the GitHub content"," ",c," you want to add. You can include issues and pull requests."]}),b[30]=c,b[31]=d):d=b[31],b[32]!==t?(u={"github:submit-form":()=>t()},b[32]=t,b[33]=u):u=b[33],b[34]!==A||b[35]!==i||b[36]!==$||b[37]!==E){let e;b[39]!==A||b[40]!==i||b[41]!==$||b[42]!==E.length?(e=(e,t)=>(0,m.jsxs)("div",{style:{width:"100%"},children:[(0,m.jsx)(mp,{index:t,removeUrlTextInputRow:$,inputCount:E.length,updateUrls:i,setIsUpdating:k,urlValue:e.url}),A&&void 0!==e.errorMessage&&(0,m.jsx)(dZ.A.Validation,{className:"mt-1",variant:"error",children:e.errorMessage})]},e.id),b[39]=A,b[40]=i,b[41]=$,b[42]=E.length,b[43]=e):e=b[43],h=E.map(e),b[34]=A,b[35]=i,b[36]=$,b[37]=E,b[38]=h}else h=b[38];return b[44]!==h?(f=(0,m.jsx)(J.B,{direction:"vertical",align:"center",children:h}),b[44]=h,b[45]=f):f=b[45],b[46]!==t||b[47]!==f?(g=(0,m.jsx)("form",{onSubmit:t,children:f}),b[46]=t,b[47]=f,b[48]=g):g=b[48],b[49]!==g||b[50]!==u?(y=(0,m.jsx)(a1.tL,{commands:u,children:g}),b[49]=g,b[50]=u,b[51]=y):y=b[51],b[52]!==M?(v=(0,m.jsx)(eU.Q,{leadingVisual:P.PlusIcon,className:"mt-3",onClick:M,children:"Add another"}),b[52]=M,b[53]=v):v=b[53],b[54]!==j||b[55]!==y||b[56]!==v||b[57]!==o||b[58]!==l||b[59]!==d?(_=(0,m.jsxs)(a2.l,{position:s,width:"large",title:"Add via GitHub URL",onClose:j,renderFooter:o,children:[l,d,y,v]}),b[54]=j,b[55]=y,b[56]=v,b[57]=o,b[58]=l,b[59]=d,b[60]=_):_=b[60],_}function md(e){return`${e.nwo}/${e.number}/${e.type}`}function mu(e){return"github_issue"===e.type||"github_pull_request"===e.type}function mm(){return[new UrlDetails(crypto.randomUUID())]}function mp(e){let t,a,n,r,i,s,o,l=(0,p.c)(18),{index:c,removeUrlTextInputRow:d,inputCount:u,updateUrls:h,setIsUpdating:f,urlValue:g}=e,[y,v]=(0,x.useState)(g),[_,b]=(0,x.useState)(!1);l[0]!==g?(t=()=>{v(g)},a=[g],l[0]=g,l[1]=t,l[2]=a):(t=l[1],a=l[2]),(0,x.useEffect)(t,a);let j=e=>{let t=e.target.value;v(t),_||(b(!0),f(!0)),S(t)};l[3]!==c||l[4]!==f||l[5]!==h?(n=e=>{h(c,e),b(!1),f(!1)},l[3]=c,l[4]=f,l[5]=h,l[6]=n):n=l[6];let S=(0,mr.d)(n,400);return l[7]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(dZ.A.Label,{visuallyHidden:!0,children:"URL"}),l[7]=r):r=l[7],l[8]!==j||l[9]!==y?(i=(0,m.jsx)(dC.A,{placeholder:"https://github.com/mona/playground/issues/123",value:y,onChange:j,className:"width-full"}),l[8]=j,l[9]=y,l[10]=i):i=l[10],l[11]!==c||l[12]!==u||l[13]!==d?(s=u>1&&(0,m.jsx)(tF.K,{icon:P.TrashIcon,variant:"invisible","aria-label":"Remove url",className:"ml-2",onClick:()=>d(c)}),l[11]=c,l[12]=u,l[13]=d,l[14]=s):s=l[14],l[15]!==i||l[16]!==s?(o=(0,m.jsxs)(dZ.A,{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[r,i,s]}),l[15]=i,l[16]=s,l[17]=o):o=l[17],o}try{mc.displayName||(mc.displayName="GitHubUrlDialog")}catch{}try{(o=AddUrlTextInputRow).displayName||(o.displayName="AddUrlTextInputRow")}catch{}try{mp.displayName||(mp.displayName="UrlTextInputRow")}catch{}let mh={dialogBody:"TextFileDialog-module__dialogBody--vEXW_",grow:"TextFileDialog-module__grow--WN1h9",form:"TextFileDialog-module__form--i5zZL",footerContainer:"TextFileDialog-module__footerContainer--Mz0uf"};function mf({sizePercentage:e,onClose:t,onSave:a,resource:n}){let{copilotSpacesConfig:{maxContentSize:r}}=(0,V.X)(),[i,s]=(0,x.useState)(n?.name||""),[o,l]=(0,x.useState)(n?.text||""),[c,d]=(0,x.useState)(!1),[u,p]=(0,x.useState)(""),[h,f]=(0,x.useState)(!1),g=n?.text??"",[y,v]=(0,x.useState)({}),{getCopilotSpaceResourceSizes:_}=u0(),b=async e=>{e?.preventDefault(),e?.stopPropagation();let r=!i.trim(),s=!o.trim();if(r||s)return void v(e=>({...e,"resources.name":r?"Name is required":"","resources.text":s?"Content is required":""}));d(!0),p("");try{let e={id:n?.id||Date.now().toString(),databaseId:n?.databaseId,type:"free_text",name:i,text:o,markedForDestroy:!1},r=await _({resources:[e]});a({...e,sizePercentage:r[e.id]}),t()}catch{p("An unexpected error occurred while validating the text file")}finally{d(!1)}};return(0,m.jsx)(a2.l,{position:{narrow:"fullscreen"},title:"Add text content",onClose:t,width:"xlarge",height:"large",renderBody:()=>(0,m.jsxs)("div",{className:mh.dialogBody,children:[u&&(0,m.jsx)(G.l,{variant:"critical",className:"mb-2",title:u}),(0,m.jsx)(a1.tL,{className:mh.grow,commands:{"github:submit-form":()=>void b()},children:(0,m.jsxs)("form",{onSubmit:b,className:mh.form,children:[(0,m.jsxs)(dZ.A,{required:!0,children:[(0,m.jsx)(dZ.A.Label,{children:"Name"}),(0,m.jsx)(dC.A,{block:!0,placeholder:"Give the file a title",value:i,onChange:e=>{s(e.target.value),v(e=>({...e,"resources.name":""}))},maxLength:1e3,validationStatus:y["resources.name"]?"error":void 0,...(0,aG.G)("text-file-name-input")}),y["resources.name"]&&(0,m.jsx)(dZ.A.Validation,{variant:"error",children:y["resources.name"]})]}),(0,m.jsxs)(dZ.A,{required:!0,className:mh.grow,children:[(0,m.jsx)(dZ.A.Label,{children:"Content"}),(0,m.jsx)(d0.Ay,{block:!0,name:"content",value:o,placeholder:"Enter content here",resize:"none",className:mh.grow,onChange:e=>{l(e.target.value),v(e=>({...e,"resources.text":""}))},...(0,aG.G)("text-file-content-input")}),y["resources.text"]?(0,m.jsx)(dZ.A.Validation,{variant:"error",children:y["resources.text"]}):void 0!==e&&(0,m.jsx)(mg,{text:o,percentage:e,resourceContent:g,setOverSpaceLimit:f,maxContentSize:r})]})]})})]}),renderFooter:()=>(0,m.jsxs)("div",{className:mh.footerContainer,children:[(0,m.jsx)(eU.Q,{onClick:t,children:"Cancel"}),(0,m.jsx)(eU.Q,{variant:"primary",onClickCapture:h?void 0:b,loadingAnnouncement:"Validating resource",inactive:h,loading:c,...(0,aG.G)("save-text-file-button"),children:"Add"})]})})}function mg(e){let t,a,n,r=(0,p.c)(8),{text:i,percentage:s,resourceContent:o,setOverSpaceLimit:l,maxContentSize:c}=e,d=s/100*c+(i.length>o.length?Math.abs(i.length-o.length):-Math.abs(i.length-o.length)),u=Math.floor(d/c*100),h=d>c;if(r[0]!==l||r[1]!==h?(t=()=>{l(h)},a=[h,l],r[0]=l,r[1]=h,r[2]=t,r[3]=a):(t=r[2],a=r[3]),(0,x.useEffect)(t,a),h){let e,t=`Total percent used: ${u}%`;return r[4]!==t?(e=(0,m.jsx)(dZ.A.Validation,{variant:"error",children:t}),r[4]=t,r[5]=e):e=r[5],e}let f=`Total percent used: ${u}%`;return r[6]!==f?(n=(0,m.jsx)(dZ.A.Caption,{children:f}),r[6]=f,r[7]=n):n=r[7],n}try{mf.displayName||(mf.displayName="TextFileDialog")}catch{}try{mg.displayName||(mg.displayName="CharacterCount")}catch{}let my=e=>{let t,a,n,r,i,s,o,l,c,d,u,h,f,g,y,v,_,b,j,S,C=(0,p.c)(48),{children:N,findFileWorkerPath:w,onResourcesAdded:I,onError:k,owner:E,sizePercentage:T,resourcesToSave:A,resourceCounts:L,onUploadingChange:D,recentlyUsedRepo:R}=e,[O,B]=(0,x.useState)(!1),[F,M]=(0,x.useState)(!1),[V,U]=(0,x.useState)(!1),$=(0,x.useRef)(null),{getCopilotSpaceResourceSizes:W}=u0();C[0]!==I?(t=e=>{I([e]),M(!1)},C[0]=I,C[1]=t):t=C[1];let z=t;C[2]!==I||C[3]!==W?(a=async e=>{if(0===e.length)return void M(!1);let t=await W({resources:e});I(e.map(e=>{let a=t[e.id];return{...e,fileExists:!0,markedForDestroy:!1,sizePercentage:a}})),M(!1)},C[2]=I,C[3]=W,C[4]=a):a=C[4];let H=a,q=(0,x.useRef)(null),G=eE.W.customCopilotsFileUploads,K=eE.W.spacesImagesEnabled,Q=eE.W.copilotSpacesFileUrls;return C[5]!==k||C[6]!==I||C[7]!==D?(n=(G||K)&&(0,m.jsx)(mn,{ref:$,onResourcesAdded:I,onError:k,onUploadingChange:D}),C[5]=k,C[6]=I,C[7]=D,C[8]=n):n=C[8],C[9]!==N?(r=(0,m.jsx)(tB.W.Anchor,{children:N}),C[9]=N,C[10]=r):r=C[10],C[11]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)(tM.l.GroupHeading,{children:"Repository"}),C[11]=i):i=C[11],C[12]===Symbol.for("react.memo_cache_sentinel")?(s=()=>M(!0),C[12]=s):s=C[12],C[13]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsxs)(tM.l.Item,{onSelect:s,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.FileCodeIcon,{...(0,aG.G)("add-github-files-menu-item-icon")})}),"Attach files and folders"]}),C[13]=o):o=C[13],C[14]===Symbol.for("react.memo_cache_sentinel")?(l=()=>U(!0),C[14]=l):l=C[14],C[15]===Symbol.for("react.memo_cache_sentinel")?(c=(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.LinkIcon,{})}),C[15]=c):c=C[15],C[16]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsxs)(tM.l.Group,{children:[i,o,(0,m.jsxs)(tM.l.Item,{onSelect:l,children:[c,Q?"Link files, pull requests, and issues":"Link pull requests and issues"]})]}),u=(0,m.jsx)(tM.l.Divider,{}),C[16]=d,C[17]=u):(d=C[16],u=C[17]),C[18]===Symbol.for("react.memo_cache_sentinel")?(h=(0,m.jsx)(tM.l.GroupHeading,{children:"Local"}),f=(G||K)&&(0,m.jsxs)(tM.l.Item,{onSelect:()=>{(0,e9.BI)("copilot-spaces.click",{target:"LOCAL_FILE_UPLOAD"}),$.current?.addResources()},children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.UploadIcon,{})}),"Upload a file"]}),C[18]=h,C[19]=f):(h=C[18],f=C[19]),C[20]===Symbol.for("react.memo_cache_sentinel")?(g=()=>B(!0),C[20]=g):g=C[20],C[21]===Symbol.for("react.memo_cache_sentinel")?(y=(0,m.jsx)(tB.W.Overlay,{align:"end",width:"small",children:(0,m.jsxs)(tM.l,{children:[d,u,(0,m.jsxs)(tM.l.Group,{children:[h,f,(0,m.jsxs)(tM.l.Item,{onSelect:g,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.PasteIcon,{...(0,aG.G)("add-text-file-menu-item-icon")})}),"Add text content"]})]})]})}),C[21]=y):y=C[21],C[22]!==r?(v=(0,m.jsxs)(tB.W,{anchorRef:q,children:[r,y]}),C[22]=r,C[23]=v):v=C[23],C[24]!==I||C[25]!==O||C[26]!==T?(_=O&&(0,m.jsx)(mf,{sizePercentage:T,onClose:()=>B(!1),onSave:e=>I([e])}),C[24]=I,C[25]=O,C[26]=T,C[27]=_):_=C[27],C[28]!==w||C[29]!==E||C[30]!==R||C[31]!==L||C[32]!==H||C[33]!==z||C[34]!==F?(b=F&&(0,m.jsx)(uG,{formData:[],onCancel:()=>M(!1),onSaveFiles:H,onSaveRepository:z,findFileWorkerPath:w,attachmentButtonRef:q,owner:E,resourceCounts:L,recentlyUsedRepo:R}),C[28]=w,C[29]=E,C[30]=R,C[31]=L,C[32]=H,C[33]=z,C[34]=F,C[35]=b):b=C[35],C[36]!==I||C[37]!==E||C[38]!==L||C[39]!==A||C[40]!==V?(j=V&&(0,m.jsx)(mc,{onClose:()=>U(!1),onSave:e=>I(e),resourcesToSave:A,resourceCounts:L,owner:E}),C[36]=I,C[37]=E,C[38]=L,C[39]=A,C[40]=V,C[41]=j):j=C[41],C[42]!==v||C[43]!==_||C[44]!==b||C[45]!==j||C[46]!==n?(S=(0,m.jsxs)(m.Fragment,{children:[n,v,_,b,j]}),C[42]=v,C[43]=_,C[44]=b,C[45]=j,C[46]=n,C[47]=S):S=C[47],S};try{my.displayName||(my.displayName="AddAttachmentMenu")}catch{}var mx=a(90021);let mv={capitalize:"ColorPicker-module__capitalize--Frq3z"},m_=c8.map(e=>({leadingVisual:()=>(0,m.jsx)("span",{className:dt[e],style:{display:"inline-block",width:12,height:12,backgroundColor:"var(--avatar-foregroundColor)",borderRadius:"50%"}}),key:e,text:e,color:e}));function mb(e){let t,a,n,r,i,s,o,l,c,d,u=(0,p.c)(21),{value:h,onChange:f}=e,[g,y]=(0,x.useState)(!1),[v,_]=(0,x.useState)("");u[0]!==v||u[1]!==h?(a=m_.filter(e=>e.text===h||e.text?.toLowerCase().startsWith(v.toLowerCase())),u[0]=v,u[1]=h,u[2]=a):a=u[2],t=a,u[3]!==h?(r=m_.find(e=>e.text===h),u[3]=h,u[4]=r):r=u[4],n=r;let b=(0,x.useId)();return u[5]!==b?(i=(0,m.jsx)(dZ.A.Label,{visuallyHidden:!0,htmlFor:b,children:"Color"}),u[5]=b,u[6]=i):i=u[6],u[7]!==b?(s=e=>{let{children:t,...a}=e;return(0,m.jsxs)(eU.Q,{...a,id:b,size:"small",trailingAction:P.TriangleDownIcon,"aria-haspopup":"dialog",className:mv.capitalize,children:[(0,m.jsx)("span",{className:"fgColor-muted mr-1",children:"Color:"}),t]})},u[7]=b,u[8]=s):s=u[8],u[9]===Symbol.for("react.memo_cache_sentinel")?(o={width:"small",maxHeight:"medium"},u[9]=o):o=u[9],u[10]!==f?(l=e=>{e&&f(e.text)},u[10]=f,u[11]=l):l=u[11],u[12]!==t||u[13]!==g||u[14]!==n||u[15]!==s||u[16]!==l?(c=(0,m.jsx)(mx.X,{renderAnchor:s,className:mv.capitalize,overlayProps:o,title:"Select a color",placeholder:"Select a color",open:g,onOpenChange:y,items:t,selected:n,placeholderText:"Filter colors",onSelectedChange:l,onFilterChange:_}),u[12]=t,u[13]=g,u[14]=n,u[15]=s,u[16]=l,u[17]=c):c=u[17],u[18]!==i||u[19]!==c?(d=(0,m.jsxs)(dZ.A,{children:[i,c]}),u[18]=i,u[19]=c,u[20]=d):d=u[20],d}try{mb.displayName||(mb.displayName="ColorPicker")}catch{}function mj(e){let t,a,n,r,i,s,o,l,c=(0,p.c)(20),{fileAcceptanceFn:d,onFilesDrop:u,onRejectedFiles:h,isUploading:f}=e,g=void 0!==f&&f;c[0]!==h?(t=e=>{0!==e.length&&h?.(e)},c[0]=h,c[1]=t):t=c[1];let y=t;c[2]!==g||c[3]!==u?(a=(e,t)=>{g||u(e,t)},c[2]=g,c[3]=u,c[4]=a):a=c[4];let x=a;c[5]!==d||c[6]!==x||c[7]!==y?(n={fileAcceptanceFn:d,onFilesDrop:x,onRejectedFiles:y,targetElement:eg.XC},c[5]=d,c[6]=x,c[7]=y,c[8]=n):n=c[8];let{isDragging:v}=(0,oy.J)(n),_=null;c[9]===Symbol.for("react.memo_cache_sentinel")?(r={},c[9]=r):r=c[9];let b=r;if(g){let e;c[10]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(a3.A,{size:"large"}),(0,m.jsx)("div",{children:"Uploading files..."})]}),c[10]=e):e=c[10],_=e}else if(v){let e,t;c[11]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(P.UploadIcon,{size:64}),(0,m.jsx)("div",{children:"Drop files to upload"})]}),c[11]=e):e=c[11],_=e,c[12]===Symbol.for("react.memo_cache_sentinel")?(t={border:"var(--base-size-4) dashed",borderColor:"border.default"},c[12]=t):t=c[12],b=t}return _?(c[13]===Symbol.for("react.memo_cache_sentinel")?(i={narrow:"fullscreen",regular:"fullscreen",wide:"fullscreen"},c[13]=i):i=c[13],c[14]===Symbol.for("react.memo_cache_sentinel")?(s={alignItems:"center",display:"flex",flexDirection:"column",gap:3,justifyContent:"center"},c[14]=s):s=c[14],c[15]!==_?(o=(0,m.jsx)(a2.l.Body,{sx:s,children:_}),c[15]=_,c[16]=o):o=c[16],c[17]!==b||c[18]!==o?(l=(0,m.jsx)(a2.l,{position:i,onClose:mC,renderHeader:mS,sx:b,children:o}),c[17]=b,c[18]=o,c[19]=l):l=c[19],l):null}function mS(){return null}function mC(){}try{mj.displayName||(mj.displayName="FullScreenDragOverlay")}catch{}try{mj.displayName||(mj.displayName="FullScreenDragOverlay")}catch{}try{mj.displayName||(mj.displayName="FullScreenDragOverlay")}catch{}var mN=a(6020),mw=a(15101),mI=a(56221);let mk={warningIcon:"ReferencesTable-module__warningIcon--aAwMb",referenceTitle:"ReferencesTable-module__referenceTitle--RAQOR",referenceSubtitle:"ReferencesTable-module__referenceSubtitle--tHoXM",referenceTitleLink:"ReferencesTable-module__referenceTitleLink--p7dJl"};function mE(e){let t,a,n,r,i,s,o,l,c,d,u=(0,p.c)(22),{resources:h,onDeleteResource:f,onUpdateResource:g,sizePercentage:v}=e;if(u[0]!==h)a=Object.values(h.reduce((e,t)=>{let a=mD(t);return{...e,[a]:t}},{})),u[0]=h,u[1]=a;else a=u[1];t=a;let[_,b]=(0,x.useState)(!1),[j,S]=(0,x.useState)(null),C=(0,x.useRef)(null);u[2]!==_?(n={id:"id",header:"Name",rowHeader:!0,renderCell:e=>{switch(e.type){case"github_file":{let{filePath:t,fileName:a,fileUrl:n}=(0,ak.q5)(e);return(0,m.jsxs)(J.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)(cQ,{attachment:e,className:"fgColor-muted"}),(0,m.jsxs)(J.B,{gap:"none",children:[(0,m.jsx)("div",{children:e.fileExists?(0,m.jsx)(d_.A,{title:a,className:mk.referenceTitle,children:(0,m.jsx)(aM.A,{rel:"noopener",target:"_blank",href:n,className:mk.referenceTitleLink,children:a})}):(0,m.jsx)(d_.A,{title:a,className:mk.referenceTitle,children:a})}),(0,m.jsx)("div",{children:(0,m.jsx)(d_.A,{title:t,className:(0,y.$)(mk.referenceSubtitle,"fgColor-muted"),children:t})})]})]})}case"free_text":return(0,m.jsxs)(J.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)(cQ,{attachment:e,className:"fgColor-muted"}),(0,m.jsx)("div",{children:(0,m.jsx)(d_.A,{title:e.name,maxWidth:300,className:mk.referenceTitle,children:e.name})})]});case"repository":return(0,m.jsxs)(J.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)(cQ,{attachment:e,className:"fgColor-muted"}),(0,m.jsx)("div",{children:(0,m.jsx)(d_.A,{title:e.nwo,maxWidth:300,className:mk.referenceTitle,children:e.nwo})})]});case"uploaded_text_file":return(0,m.jsxs)(J.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)(cQ,{attachment:e,className:"fgColor-muted"}),(0,m.jsx)("div",{children:(0,m.jsx)(d_.A,{title:e.name,maxWidth:300,className:mk.referenceTitle,children:(0,m.jsx)(aM.A,{className:mk.referenceTitleLink,href:e.url,...eE.W.spacesV3UI?{download:e.name}:{rel:"noopener noreferrer",target:"_blank"},children:e.name})})})]});case"github_pull_request":case"github_issue":return(0,m.jsxs)(J.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)("span",{children:(0,m.jsx)(cQ,{attachment:e,className:"fgColor-success"})}),(0,m.jsxs)(J.B,{gap:"none",children:[(0,m.jsx)("div",{children:(0,m.jsx)(d_.A,{title:e.title||"",className:mk.referenceTitle,children:(0,m.jsxs)(aM.A,{rel:"noopener",target:"_blank",href:e.url,className:mk.referenceTitleLink,children:[e.title," ",(0,m.jsx)("span",{className:"fgColor-muted text-light",children:`#${e.number}`})]})})}),(0,m.jsx)("div",{children:(0,m.jsx)(d_.A,{title:e.nwo||"",className:(0,y.$)(mk.referenceSubtitle,"fgColor-muted"),children:e.nwo})})]})]});case"media_content":return(0,m.jsxs)(J.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)("span",{className:"fgColor-muted",children:(0,m.jsx)(cQ,{attachment:e,className:"fgColor-muted"})}),(0,m.jsx)(aM.A,{as:"button",className:mk.referenceTitleLink,ref:C,onClick:t=>{t.preventDefault(),S(e),b(!0)},"aria-haspopup":"dialog","aria-expanded":_,children:(0,m.jsx)(d_.A,{title:e.name,maxWidth:300,className:(0,y.$)(mk.referenceTitle),children:e.name})})]});default:return null}}},u[2]=_,u[3]=n):n=u[3],u[4]===Symbol.for("react.memo_cache_sentinel")?(r={id:"size",header:"Size",align:"end",maxWidth:"auto",width:"growCollapse",renderCell:mA},u[4]=r):r=u[4],u[5]!==f||u[6]!==g||u[7]!==v?(i={id:"actions",header:mT,maxWidth:"auto",align:"end",renderCell:e=>{let t="github_file"===e.type&&!e.fileExists;return(0,m.jsxs)(m.Fragment,{children:[t&&(0,m.jsx)(tF.K,{className:mk.warningIcon,icon:P.AlertIcon,variant:"invisible",size:"small","aria-label":"This file no longer exists"}),(0,m.jsx)(mL,{row:e,onEdit:g,onDelete:f,sizePercentage:v})]})}},u[5]=f,u[6]=g,u[7]=v,u[8]=i):i=u[8],u[9]!==n||u[10]!==i?(s=[n,r,i],u[9]=n,u[10]=i,u[11]=s):s=u[11];let N=s;u[12]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{S(null),b(!1)},u[12]=o):o=u[12];let w=o;return u[13]!==N||u[14]!==t?(l=(0,m.jsx)(mw.X.Container,{children:(0,m.jsx)(mI.b,{"aria-labelledby":"references-title",cellPadding:"normal",data:t,columns:N})}),u[13]=N,u[14]=t,u[15]=l):l=u[15],u[16]!==j||u[17]!==_?(c=_&&j&&"media_content"===j.type&&(0,m.jsx)(a2.l,{onClose:w,position:{narrow:"fullscreen"},returnFocusRef:C,title:j.name,children:(0,m.jsx)(cK,{attachment:j})}),u[16]=j,u[17]=_,u[18]=c):c=u[18],u[19]!==c||u[20]!==l?(d=(0,m.jsxs)(m.Fragment,{children:[l,c]}),u[19]=c,u[20]=l,u[21]=d):d=u[21],d}function mT(){return(0,m.jsx)(mN.s,{children:"Actions"})}function mA(e){return"repository"!==e.type?(0,m.jsx)("span",{className:"fgColor-muted",children:e.sizePercentage&&e.sizePercentage<1?"<1%":`${Math.round(e.sizePercentage||0)}%`}):(0,m.jsx)(tF.K,{variant:"invisible","aria-label":"Copilot works best when working with fewer files. You can edit to chose individual files.",className:mk.warningIcon,icon:P.AlertIcon})}let mL=e=>{let t,a,n,r,i,s,o,l,c,d,u,h,f,g=(0,p.c)(36),{row:y,onDelete:v,onEdit:_,sizePercentage:b}=e,[j,S]=(0,x.useState)(null),C="";switch(y.type){case"github_pull_request":case"github_issue":C=y.title;break;case"github_file":C=y.filePath;break;case"repository":C=y.nwo;break;case"free_text":case"uploaded_text_file":case"media_content":C=y.name}let N=`Attachment actions: ${C}`;g[0]!==N?(t=(0,m.jsx)(tB.W.Anchor,{children:(0,m.jsx)(tF.K,{"aria-label":N,title:"Attachment actions",icon:P.KebabHorizontalIcon,variant:"invisible"})}),g[0]=N,g[1]=t):t=g[1],g[2]!==y?(a="free_text"===y.type&&(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(tM.l.Item,{"aria-label":`Edit attachment: ${y.id}`,onSelect:()=>S(y),children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.PencilIcon,{})}),"Edit"]})}),g[2]=y,g[3]=a):a=g[3];let w=`Delete attachment: ${y.id}`;return g[4]!==v||g[5]!==y?(n=()=>v(y),g[4]=v,g[5]=y,g[6]=n):n=g[6],g[7]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.TrashIcon,{})}),g[7]=r):r=g[7],g[8]!==w||g[9]!==n?(i=(0,m.jsxs)(tM.l.Item,{"aria-label":w,variant:"danger",onSelect:n,children:[r,"Delete"]}),g[8]=w,g[9]=n,g[10]=i):i=g[10],g[11]!==a||g[12]!==i?(s=(0,m.jsx)(tB.W.Overlay,{align:"end",children:(0,m.jsxs)(tM.l,{children:[a,i]})}),g[11]=a,g[12]=i,g[13]=s):s=g[13],g[14]!==t||g[15]!==s?(o=(0,m.jsx)("div",{className:"d-md-none",children:(0,m.jsxs)(tB.W,{children:[t,s]})}),g[14]=t,g[15]=s,g[16]=o):o=g[16],g[17]!==y?(l="free_text"===y.type&&(0,m.jsx)(tF.K,{onClick:()=>S(y),variant:"invisible","aria-label":"Edit",icon:P.PencilIcon}),g[17]=y,g[18]=l):l=g[18],g[19]!==y.type?(c="repository"===y.type&&(0,m.jsx)(tF.K,{variant:"invisible","aria-label":"Choose specific files",onClick:mR,icon:P.PencilIcon}),g[19]=y.type,g[20]=c):c=g[20],g[21]!==v||g[22]!==y?(d=(0,m.jsx)(tF.K,{onClick:()=>v(y),variant:"invisible","aria-label":"Delete",icon:P.TrashIcon}),g[21]=v,g[22]=y,g[23]=d):d=g[23],g[24]!==l||g[25]!==c||g[26]!==d?(u=(0,m.jsxs)("div",{className:"d-none d-md-block",children:[l,c,d]}),g[24]=l,g[25]=c,g[26]=d,g[27]=u):u=g[27],g[28]!==j||g[29]!==_||g[30]!==b?(h=j&&(0,m.jsx)(mf,{sizePercentage:b,resource:j,onSave:_,onClose:()=>S(null)}),g[28]=j,g[29]=_,g[30]=b,g[31]=h):h=g[31],g[32]!==u||g[33]!==h||g[34]!==o?(f=(0,m.jsxs)(m.Fragment,{children:[o,u,h]}),g[32]=u,g[33]=h,g[34]=o,g[35]=f):f=g[35],f},mD=e=>{switch(e.type){case"github_file":return`${e.repositoryId}@${e.filePath}`;case"github_issue":case"github_pull_request":return e.url;default:return e.id}};try{mE.displayName||(mE.displayName="ReferencesTable")}catch{}try{mL.displayName||(mL.displayName="RowActions")}catch{}function mR(){return alert("This feature is not implemented yet.")}let mP={page:"SpacesForm-module__page--xJLgE",header:"SpacesForm-module__header--sFJmP",headerTitleContainer:"SpacesForm-module__headerTitleContainer--QmU9Z",headerTitleDivider:"SpacesForm-module__headerTitleDivider--I6mxX",headerTitle:"SpacesForm-module__headerTitle--DT30e",referencesSizeProgressBar:"SpacesForm-module__referencesSizeProgressBar--nkA5V",referencesSizeText:"SpacesForm-module__referencesSizeText--lCv_W",contextHeader:"SpacesForm-module__contextHeader--fy6kM",attachmentsHeading:"SpacesForm-module__attachmentsHeading--jKNBX",form:"SpacesForm-module__form--WHZ7T",optionalLabel:"SpacesForm-module__optionalLabel--N9XDo",iconPreviewContainer:"SpacesForm-module__iconPreviewContainer--_iifR",iconPreviewTitle:"SpacesForm-module__iconPreviewTitle--X8BEQ",iconPreviewDescription:"SpacesForm-module__iconPreviewDescription--Oo7eF",iconAvatarContainer:"SpacesForm-module__iconAvatarContainer--lyzCt",textAreaWrapper:"SpacesForm-module__textAreaWrapper--zDXUW"};function mO({onSelect:e,showCaption:t=!0,required:a=!1}){let[n,r]=(0,x.useState)([]),[i,s]=(0,x.useState)(!1),[o,l]=(0,x.useState)(void 0),c=(0,x.useCallback)(t=>{l(t),e(t)},[e]),d=(0,x.useCallback)(()=>{r([]),s(!0)},[]);return(0,x.useEffect)(()=>{(async()=>{try{let e=await (0,td.lS)("/github-copilot/chat/custom_copilots_owners"),t=await e.json(),a=t?.owners;if(!e.ok||!a)return void d();r(a),a[0]&&c(a[0])}catch{d()}})()},[d,c]),(0,m.jsxs)(dZ.A,{children:[(0,m.jsx)(dZ.A.Label,{required:a,children:"Owner"}),(0,m.jsxs)(tB.W,{children:[(()=>{let e=o?.name||"Choose an owner",t=o?(0,m.jsx)(rh.r,{src:o.avatarUrl},o.avatarUrl):void 0;return(0,m.jsx)(tB.W.Button,{"data-testid":"owner-dropdown-anchor",alignContent:"start","aria-label":e,leadingVisual:t,children:e})})(),(0,m.jsx)(tB.W.Overlay,{responsiveVariant:"fullscreen",width:"large",maxHeight:"large",sx:{overflow:"auto"},children:(0,m.jsx)(tM.l,{children:(0,m.jsx)(tM.l.Group,{sx:{maxHeight:350,overflow:"auto"},children:(0,m.jsxs)(tM.l,{selectionVariant:"single",children:[n&&n.map(e=>{let{name:t,avatarUrl:a,displayName:n}=e;return(0,m.jsxs)(tM.l.Item,{selected:t===o?.name,onSelect:()=>c(e),children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(rh.r,{src:a})}),t,(0,m.jsx)(tM.l.Description,{children:n})]},t)}),!n.length&&!i&&(0,m.jsx)(tM.l.Item,{disabled:!0,children:"Fetching owners\u2026"},"fetching-owners"),i&&(0,m.jsx)(tM.l.Item,{disabled:!0,sx:{color:"danger.fg"},children:"An error occurred while loading owners. Please reopen the dialog to try again."},"error-fetching-owners")]})})})})]}),t&&(0,m.jsx)(dZ.A.Caption,{children:"Where we will store your space. Once created the space is not transferable."})]})}try{mO.displayName||(mO.displayName="SpacesOwnerDropdown")}catch{}function mB(e,t){let a=new Map(e.map(e=>[e.id,e]));for(let n of t){if("repository"===n.type){let t=e.find(e=>"repository"===e.type&&e.repositoryId===n.repositoryId);if(t){a.set(t.id,{...t,markedForDestroy:!1});continue}}a.set(n.id,n)}for(let e of t)if("repository"===e.type)for(let[t,n]of a.entries())"github_file"===n.type&&n.repositoryId===e.repositoryId&&a.set(t,{...n,markedForDestroy:!0});else if("github_file"===e.type)for(let[t,n]of a.entries())"repository"===n.type&&n.repositoryId===e.repositoryId&&a.set(t,{...n,markedForDestroy:!0});return Array.from(a.values())}let mF="auburn";function mM({copilotSpace:e,onCancel:t}){let a,n,[r,i]=(0,x.useState)(!1),[s,o]=(0,x.useState)(null),l=(0,dv.S)(),{processFiles:c}=u3({onResourcesAdded:e=>{k(t=>[...t,...e])},onError:q,onUploadingChange:i}),d=async()=>{W?await l({title:"Unsaved changes",content:"You have unsaved changes. Are you sure you want to leave?",cancelButtonContent:"Keep editing",confirmButtonContent:"Discard changes",confirmButtonType:"danger"})&&t():t()};(0,la.N)(()=>{let e=document.querySelector("header.AppHeader");e&&(e.style.display="none");let t=document.querySelector(".with-global-sidebar .application-main");return t&&(t.style.marginLeft="0"),()=>{e&&(e.style.display=""),t&&(t.style.marginLeft="")}},[]);let u=(0,cU.Z)(),{upsertCopilotSpace:h,isPending:f}=dj(e),[g,y]=(0,x.useState)(e?.iconColor??mF),{copilotSpacesConfig:{maxGeneralInstructionsLength:v,maxDescriptionLength:_}}=(0,V.X)(),[b,j]=(0,x.useState)(e?.name??""),[S,C]=(0,x.useState)(e?.description??""),[N,w]=(0,x.useState)(e?.generalInstructions??""),[I,k]=(0,x.useState)(e?.resources??[]),[E,T]=(0,x.useState)(null),A=E?.type==="Organization"||e?.ownerIsOrg?E?.name||e?.owner:void 0,[L,D]=(0,x.useState)({}),R=I.filter(e=>!e.markedForDestroy),O=(0,x.useRef)(null),B=!!e,F=(0,x.useMemo)(()=>R.reduce((e,t)=>e+(t.sizePercentage||0),0),[R]),M=(0,x.useId)(),U=F>100,$=(0,x.useMemo)(()=>({name:e?.name.trim()||"",description:(e?.description||"").trim(),generalInstructions:(e?.generalInstructions||"").trim(),owner:e?.owner||"",iconColor:e?.iconColor||mF,resources:e?.resources||[]}),[e]),W=(0,x.useMemo)(()=>b.trim()!==$.name||S.trim()!==$.description||N.trim()!==$.generalInstructions||g!==$.iconColor||I.some(e=>{if(e.markedForDestroy||!e.databaseId)return!0;if("free_text"===e.type){let t=$.resources.find(t=>t.databaseId===e.databaseId);return!t||e.text.trim()!==t.text.trim()||e.name.trim()!==t.name.trim()}}),[$,b,S,N,g,I]),z=(0,p.c)(3);z[0]!==W?(a=()=>{let e=e=>{W&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},n=[W],z[0]=W,z[1]=a,z[2]=n):(a=z[1],n=z[2]),(0,x.useEffect)(a,n);let H=async()=>{if(!f)try{let e=await h({name:b,description:S,generalInstructions:N,ownerId:E?.id,ownerType:E?.type,resources:I,iconColor:g,iconType:"SpacesIcon"});D({});let t=(0,ak.Cb)(e);return u(t)}catch(e){D(e??{})}};function q(e){D(t=>{let a={...t};for(let e of Object.keys(a))e.startsWith("resources.upload.")&&delete a[e];for(let[t,n]of e.entries())a[`resources.upload.${t+1}`]=n;return a})}let K=Object.entries(L).filter(([e])=>e.startsWith("resources.upload.")).map(([,e])=>e),Q=(0,x.useCallback)(e=>{let t={...L};for(let a of e)t[a]&&delete t[a];D(t)},[L]),Y=(0,x.useCallback)(e=>T(e),[]),X=(0,x.useCallback)((e,t)=>{c(e,{source:"drag-and-drop"}),t||q([])},[c]),Z=eE.W.spacesImagesEnabled,ee=eE.W.customCopilotsFileUploads;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:mP.header,children:[(0,m.jsxs)("div",{className:mP.headerTitleContainer,children:[(0,m.jsx)(tF.K,{icon:P.XIcon,"aria-label":"Close",variant:"invisible",onClick:d,disabled:r}),(0,m.jsx)("div",{className:mP.headerTitleDivider,"aria-hidden":"true"}),(0,m.jsx)("h1",{className:mP.headerTitle,id:"page-title",children:B?"Edit space":"New space"})]}),(0,m.jsxs)(J.B,{align:"center",direction:"horizontal",gap:"condensed",children:[W&&e&&(0,m.jsxs)("div",{className:"fgColor-attention text-small mr-2",children:[(0,m.jsx)(P.DotFillIcon,{size:14}),(0,m.jsx)("span",{children:" Unsaved changes"})]}),(0,m.jsx)(eU.Q,{onClick:d,disabled:r,children:"Cancel"}),(0,m.jsx)(eU.Q,{type:"submit",variant:"primary",form:M,loading:f,disabled:r,children:"Save"})]})]}),(0,m.jsx)("div",{className:mP.page,children:(0,m.jsxs)("form",{id:M,className:mP.form,onSubmit:e=>{e?.preventDefault(),H()},children:[L.base&&(0,m.jsx)(G.l,{title:"Failed to save this space",description:L.base,variant:"critical",className:"mb-2"}),(0,m.jsxs)(dZ.A,{children:[(0,m.jsx)(dZ.A.Label,{children:"Name"}),(0,m.jsx)(dC.A,{autoFocus:!0,block:!0,name:"name",value:b,onChange:e=>{j(e.target.value),Q(["name","slug"])}}),L.name?(0,m.jsx)(dZ.A.Validation,{variant:"error",children:(0,m.jsxs)("span",{children:["Name ",L.name]})}):L.slug?(0,m.jsx)(dZ.A.Validation,{variant:"error",children:(0,m.jsx)("span",{children:ak.j0})}):null,(0,m.jsx)(dZ.A.Caption,{children:"Memorable name that helps you find your space."})]}),(0,m.jsxs)("div",{className:mP.iconPreviewContainer,children:[(0,m.jsx)("div",{className:mP.iconAvatarContainer,children:(0,m.jsx)(da,{size:24,color:g})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{className:mP.iconPreviewTitle,children:"Icon"}),(0,m.jsx)("div",{className:mP.iconPreviewDescription,children:"Pick a color to make your space more recognizable."}),(0,m.jsx)(mb,{value:g,onChange:y})]})]}),!B&&(0,m.jsx)(mO,{onSelect:Y}),(0,m.jsxs)(dZ.A,{children:[(0,m.jsxs)(dZ.A.Label,{required:!1,requiredIndicator:!0,children:["Description ",(0,m.jsx)("span",{className:mP.optionalLabel,children:"(optional)"})]}),(0,m.jsx)(d0.Ay,{block:!0,name:"description",value:S,rows:3,resize:"vertical",className:mP.textAreaWrapper,onChange:e=>{C(e.target.value),Q(["description"])}}),L.description?(0,m.jsx)(dZ.A.Validation,{variant:"error",children:(0,m.jsxs)("span",{children:["Description ",L.description]})}):(0,m.jsx)(mV,{text:S,promptCharLimit:_}),(0,m.jsx)(dZ.A.Caption,{children:"Displays beneath the title on your spaces overview page without impacting responses."})]}),(0,m.jsxs)(dZ.A,{id:"instructions",children:[(0,m.jsxs)(dZ.A.Label,{required:!1,requiredIndicator:!0,children:["Instructions ",(0,m.jsx)("span",{className:mP.optionalLabel,children:"(optional)"})]}),(0,m.jsx)(d0.Ay,{block:!0,name:"instructions",value:N,resize:"vertical",className:mP.textAreaWrapper,onChange:e=>{w(e.target.value),Q(["general_instructions"])}}),L.general_instructions?(0,m.jsx)(dZ.A.Validation,{variant:"error",children:(0,m.jsxs)("span",{children:["Instructions ",L.general_instructions]})}):(0,m.jsx)(mV,{text:N,promptCharLimit:v}),(0,m.jsx)(dZ.A.Caption,{children:"Changes how Copilot responds on specific questions or tasks."})]}),(0,m.jsxs)("div",{id:"attachments",children:[(0,m.jsxs)("div",{className:mP.contextHeader,children:[(0,m.jsxs)("div",{className:mP.attachmentsHeading,children:["Attachments ",(0,m.jsx)("span",{className:mP.optionalLabel,children:"(optional)"})]}),(0,m.jsxs)(J.B,{direction:"horizontal",align:"center",gap:"none",children:[F>0&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d7.z,{inline:!0,barSize:"small",progress:F,className:mP.referencesSizeProgressBar,"aria-hidden":"true"}),(0,m.jsx)("span",{className:"sr-only",children:`${Math.max(0,Math.round(100-F))}% remaining attachment capacity`}),(0,m.jsxs)("span",{className:mP.referencesSizeText,children:[F<1?"<1":Math.round(F),"%"]})]}),(0,m.jsx)(my,{sizePercentage:F,findFileWorkerPath:"",owner:A,onResourcesAdded:e=>{k(t=>mB(t,e))},resourcesToSave:I,onError:q,recentlyUsedRepo:{recentlyUsedRepo:s,setRecentlyUsedRepo:o},onUploadingChange:e=>{e&&q([]),i(e)},children:(0,m.jsx)(eU.Q,{size:"small",leadingVisual:P.PlusIcon,ref:O,"aria-label":"Add attachment",title:"Add attachment",disabled:r,children:"Add"})})]})]}),U&&(0,m.jsx)(ol,{}),L["resources.repository"]&&(0,m.jsx)(oc,{}),K.length>0&&(0,m.jsx)(od,{errorMessages:K,onDismiss:()=>q([]),className:"mb-3"}),0===R.length?(0,m.jsx)("div",{children:(0,m.jsxs)(aV.E,{border:!0,spacious:!0,children:[(0,m.jsx)(aV.E.Visual,{children:(0,m.jsx)(P.PaperclipIcon,{size:24})}),(0,m.jsx)(aV.E.Description,{children:"Add text, code files, or GitHub data to set a permanent context"})]})}):(0,m.jsx)(mE,{sizePercentage:F,resources:R,onDeleteResource:function(e){e.databaseId?k(t=>t.map(t=>e.databaseId===t.databaseId?{...t,markedForDestroy:!0}:t)):k(t=>t.filter(t=>t.id!==e.id))},onUpdateResource:function(e){k(I.map(t=>t.id===e.id?e:t))}})]})]})}),(ee||Z)&&(0,m.jsx)(mj,{onFilesDrop:X,isUploading:r})]})}function mV(e){let t,a,n,r,i=(0,p.c)(10),{text:s,promptCharLimit:o}=e,l=s.length>o;i[0]!==s.length?(t=s.length.toLocaleString(),i[0]=s.length,i[1]=t):t=i[1],i[2]!==o?(a=o.toLocaleString(),i[2]=o,i[3]=a):a=i[3],i[4]!==t||i[5]!==a?(n=(0,m.jsxs)(m.Fragment,{children:[t," / ",a," characters"]}),i[4]=t,i[5]=a,i[6]=n):n=i[6];let c=n;return i[7]!==c||i[8]!==l?(r=(0,m.jsx)(m.Fragment,{children:l?(0,m.jsx)(dZ.A.Validation,{variant:"error",children:c}):(0,m.jsx)(dZ.A.Caption,{children:c})}),i[7]=c,i[8]=l,i[9]=r):r=i[9],r}try{mM.displayName||(mM.displayName="SpacesForm")}catch{}try{mV.displayName||(mV.displayName="CharacterCount")}catch{}function mU(){let e,t,a,n,r=(0,p.c)(14),i=(0,cU.Z)(),s=(0,ak.iI)(),{isPending:o,data:l,error:c}=(0,aE.Ao)(s);r[0]!==l||r[1]!==i?(e=function(){i((0,ak.Cb)(l))},r[0]=l,r[1]=i,r[2]=e):e=r[2];let d=e;if(r[3]!==l||r[4]!==i?(t=()=>{l&&!l.editable&&i((0,ak.Cb)(l))},a=[l,i],r[3]=l,r[4]=i,r[5]=t,r[6]=a):(t=r[5],a=r[6]),(0,x.useEffect)(t,a),c instanceof aE.i9){let e;return r[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(cz,{}),r[7]=e):e=r[7],e}if(c instanceof aE.OW){let e;return r[8]!==c.protectedOrganizations?(e=(0,m.jsx)(cz,{protectedOrganizations:c.protectedOrganizations}),r[8]=c.protectedOrganizations,r[9]=e):e=r[9],e}if(o){let e;return r[10]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(c7,{}),r[10]=e):e=r[10],e}return r[11]!==l||r[12]!==d?(n=l?.editable?(0,m.jsx)(mM,{copilotSpace:l,onCancel:d}):(0,m.jsx)(m.Fragment,{}),r[11]=l,r[12]=d,r[13]=n):n=r[13],n}try{mU.displayName||(mU.displayName="SpacesEditPage")}catch{}var m$=a(5420);let mW={metadata:"SpacesCard-module__metadata--sQAQe",metadataItem:"SpacesCard-module__metadataItem--wvRpg"};function mz(e){let t,a,n,r,i,s,o,l,c,d,u,h,f=(0,p.c)(37),{copilotSpace:g,onDelete:y,onClick:x}=e,v=g.ownerIsOrg?P.OrganizationIcon:P.PersonIcon,_="org_public"===g.visibility?P.PeopleIcon:P.LockIcon;f[0]!==g.baseRole||f[1]!==g.visibility?(t=c$(g.visibility,g.baseRole),f[0]=g.baseRole,f[1]=g.visibility,f[2]=t):t=f[2];let b=t,j=!eE.W.spacesPermissionsTabEnabled||g.adminable||g.editable,S=g.owner?`${g.owner}/${g.id}`:g.id;f[3]!==g?(a=(0,ak.Cb)(g),f[3]=g,f[4]=a):a=f[4];let C=g.iconColor;return f[5]!==C?(n=(0,m.jsx)(tq.Icon,{icon:eL.Dy,color:C}),f[5]=C,f[6]=n):n=f[6],f[7]!==g.name?(r=(0,m.jsx)(tq.Heading,{children:g.name}),f[7]=g.name,f[8]=r):r=f[8],f[9]!==g.description?(i=(0,m.jsx)(tq.Description,{children:g.description}),f[9]=g.description,f[10]=i):i=f[10],f[11]!==g||f[12]!==y||f[13]!==j?(s=j&&(0,m.jsx)(tq.Menu,{children:(0,m.jsx)(dQ,{copilot:g,onDelete:y})}),f[11]=g,f[12]=y,f[13]=j,f[14]=s):s=f[14],f[15]!==v?(o=(0,m.jsx)(v,{}),f[15]=v,f[16]=o):o=f[16],f[17]!==g.owner||f[18]!==o?(l=(0,m.jsxs)("div",{className:mW.metadataItem,children:[o,g.owner]}),f[17]=g.owner,f[18]=o,f[19]=l):l=f[19],f[20]!==_?(c=(0,m.jsx)(_,{}),f[20]=_,f[21]=c):c=f[21],f[22]!==c||f[23]!==b?(d=(0,m.jsxs)("div",{className:mW.metadataItem,children:[c,b]}),f[22]=c,f[23]=b,f[24]=d):d=f[24],f[25]!==l||f[26]!==d?(u=(0,m.jsx)(tq.Metadata,{children:(0,m.jsxs)("div",{className:mW.metadata,children:[l,d]})}),f[25]=l,f[26]=d,f[27]=u):u=f[27],f[28]!==x||f[29]!==u||f[30]!==S||f[31]!==a||f[32]!==n||f[33]!==r||f[34]!==i||f[35]!==s?(h=(0,m.jsxs)(tq,{href:a,onClick:x,children:[n,r,i,s,u]},S),f[28]=x,f[29]=u,f[30]=S,f[31]=a,f[32]=n,f[33]=r,f[34]=i,f[35]=s,f[36]=h):h=f[36],h}try{(l=function(e){let t,a,n,r,i=(0,p.c)(5),{onClick:s}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(tq.Icon,{icon:P.PlusIcon}),a=(0,m.jsx)(tq.Heading,{children:"Create a new space"}),n=(0,m.jsx)(tq.Description,{children:"Add attachments, repositories, and more."}),i[0]=t,i[1]=a,i[2]=n):(t=i[0],a=i[1],n=i[2]),i[3]!==s?(r=(0,m.jsxs)(tq,{onClick:s,children:[t,a,n]}),i[3]=s,i[4]=r):r=i[4],r}).displayName||(l.displayName="NewSpacesCard")}catch{}try{mz.displayName||(mz.displayName="SpacesCard")}catch{}let mH={banner:"SpacesListPage-module__banner--OV17m",underlineNav:"SpacesListPage-module__underlineNav--vpeNw",listContainer:"SpacesListPage-module__listContainer--il2mD"},mq=["personal","org","starred"];function mG(e){let t,a,n,r,i,s,o,l,c,d,u,h,f,g,y,v,_,b,j,S,C,N,w,I,k,E=(0,p.c)(91),{copilotSpaces:T}=e,A=(0,$.Pk)(),L=(0,ef.Zp)(),{ssoOrganizations:D}=A,{copilotSpacesConfig:R}=(0,V.X)(),{userHasOrgs:O}=R,[B]=(0,cU.o)();if(E[0]!==B||E[1]!==O){let e=B.get("tab");"org"!==(t=mq.includes(e)?e:"personal")||O||(t="personal"),E[0]=B,E[1]=O,E[2]=t}else t=E[2];E[3]!==D?(a=D.map(mZ),E[3]=D,E[4]=a):a=E[4];let F=a,[M,U]=(0,x.useState)(null),z=void 0===T;E[5]!==T?(n=T?.filter(mX).length??0,E[5]=T,E[6]=n):n=E[6];let H=n;E[7]!==T?(r=T?.filter(mY).length??0,E[7]=T,E[8]=r):r=E[8];let q=r;E[9]!==T?(i=T?.filter(mJ).length??0,E[9]=T,E[10]=i):i=E[10];let G=i;E[11]!==L?(s=()=>{L(ek.QT)},E[11]=L,E[12]=s):s=E[12];let K=s,{mutateAsync:Q}=(0,aE.$7)();E[13]!==Q?(o=e=>async()=>{try{await Q(e),U(null)}catch(e){U(e instanceof Error?e:Error(String(e)))}},E[13]=Q,E[14]=o):o=E[14];let J=o;if(E[15]!==t||E[16]!==F||E[17]!==T||E[18]!==M||E[19]!==J||E[20]!==K||E[21]!==z||E[22]!==q||E[23]!==H||E[24]!==D.length||E[25]!==G||E[26]!==O){let e,a,n,r,i,s,o,p=T?.filter(e=>"personal"===t?!e.ownerIsOrg:"org"===t?e.ownerIsOrg:"starred"!==t||e.starred),x=T?.length===0&&!z,C=T&&T.length>0&&p?.length===0&&!z;E[40]!==t?(e=()=>"personal"===t?"personal":"org"===t?"organization":"starred"===t?"starred":"",E[40]=t,E[41]=e):e=E[41];let N=e;u=aR.t,E[42]===Symbol.for("react.memo_cache_sentinel")?(v=(0,m.jsx)(a$,{regionName:"Spaces"}),E[42]=v):v=E[42],E[43]!==K?(_=(0,m.jsx)(d5,{onCreateSpace:K}),E[43]=K,E[44]=_):_=E[44],E[45]!==M?(b=M&&(0,m.jsxs)(dx.A,{variant:"danger",children:[(0,m.jsx)(P.AlertIcon,{}),"There was a problem deleting your space."]}),E[45]=M,E[46]=b):b=E[46],d=tT.Container,E[47]!==F||E[48]!==D.length?(a=D.length>0&&(0,m.jsx)("div",{className:mH.banner,children:(0,m.jsx)(W.x,{protectedOrgs:F,redirectURI:mK,useFullWidthStyle:!0})}),E[47]=F,E[48]=D.length,E[49]=a):a=E[49],E[50]!==a?(g=(0,m.jsx)(tT.Banner,{children:a}),E[50]=a,E[51]=g):g=E[51],E[52]===Symbol.for("react.memo_cache_sentinel")?(y=(0,m.jsxs)(tT.Header,{children:[(0,m.jsx)(tT.Icon,{icon:(0,m.jsx)(eL.Dy,{size:32})}),(0,m.jsx)(tT.Title,{children:"Set context once. Chat again and again"}),(0,m.jsx)(tT.Description,{children:"Create and share a custom Copilot experience using a collection of GitHub repositories, files, and other content."})]}),E[52]=y):y=E[52],h=mH.listContainer,E[53]===Symbol.for("react.memo_cache_sentinel")?(n={search:"?tab=personal"},E[53]=n):n=E[53];let w="personal"===t?"page":void 0;E[54]!==H||E[55]!==w?(r=(0,m.jsx)(m$.O.Item,{as:em.N,to:n,"aria-current":w,icon:P.SmileyIcon,counter:H,children:"Yours"}),E[54]=H,E[55]=w,E[56]=r):r=E[56],E[57]!==t||E[58]!==q||E[59]!==O?(i=O&&(0,m.jsx)(m$.O.Item,{as:em.N,to:{search:"?tab=org"},"aria-current":"org"===t?"page":void 0,icon:P.OrganizationIcon,counter:q,children:"Organizations"}),E[57]=t,E[58]=q,E[59]=O,E[60]=i):i=E[60],E[61]===Symbol.for("react.memo_cache_sentinel")?(s={search:"?tab=starred"},E[61]=s):s=E[61];let I="starred"===t?"page":void 0;E[62]!==G||E[63]!==I?(o=(0,m.jsx)(m$.O.Item,{as:em.N,to:s,"aria-current":I,icon:P.StarIcon,counter:G,children:"Starred"}),E[62]=G,E[63]=I,E[64]=o):o=E[64],E[65]!==r||E[66]!==i||E[67]!==o?(f=(0,m.jsx)("div",{className:mH.underlineNav,children:(0,m.jsxs)(m$.O,{"aria-label":"Spaces",children:[r,i,o]})}),E[65]=r,E[66]=i,E[67]=o,E[68]=f):f=E[68],c=tT.Section,l=tT.Section.Grid,j=z,S=x?(0,m.jsxs)(tT.Section.Grid.Empty,{children:[(0,m.jsx)("p",{children:"Spaces you create will appear here."}),(0,m.jsx)(eU.Q,{onClick:K,children:"New space"})]}):C?(0,m.jsxs)(tT.Section.Grid.Empty,{children:["starred"===N()?(0,m.jsx)(P.StarIcon,{size:24}):(0,m.jsx)(P.SearchIcon,{size:24}),(0,m.jsxs)("p",{children:["No ",N()," spaces found."]})]}):p?.map?.(e=>(0,m.jsx)(mz,{copilotSpace:e,onDelete:J(e),onClick:mQ},e.owner?`${e.owner}/${e.id}`:e.id)),E[15]=t,E[16]=F,E[17]=T,E[18]=M,E[19]=J,E[20]=K,E[21]=z,E[22]=q,E[23]=H,E[24]=D.length,E[25]=G,E[26]=O,E[27]=l,E[28]=c,E[29]=d,E[30]=u,E[31]=h,E[32]=f,E[33]=g,E[34]=y,E[35]=v,E[36]=_,E[37]=b,E[38]=j,E[39]=S}else l=E[27],c=E[28],d=E[29],u=E[30],h=E[31],f=E[32],g=E[33],y=E[34],v=E[35],_=E[36],b=E[37],j=E[38],S=E[39];return E[69]!==l||E[70]!==j||E[71]!==S?(C=(0,m.jsx)(l,{loading:j,children:S}),E[69]=l,E[70]=j,E[71]=S,E[72]=C):C=E[72],E[73]!==c||E[74]!==C?(N=(0,m.jsx)(c,{children:C}),E[73]=c,E[74]=C,E[75]=N):N=E[75],E[76]!==h||E[77]!==f||E[78]!==N?(w=(0,m.jsxs)("div",{className:h,children:[f,N]}),E[76]=h,E[77]=f,E[78]=N,E[79]=w):w=E[79],E[80]!==d||E[81]!==g||E[82]!==y||E[83]!==w?(I=(0,m.jsxs)(d,{children:[g,y,w]}),E[80]=d,E[81]=g,E[82]=y,E[83]=w,E[84]=I):I=E[84],E[85]!==u||E[86]!==v||E[87]!==_||E[88]!==b||E[89]!==I?(k=(0,m.jsxs)(u,{fallback:v,children:[_,b,I]}),E[85]=u,E[86]=v,E[87]=_,E[88]=b,E[89]=I,E[90]=k):k=E[90],k}function mK(){return`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`}function mQ(){(0,e9.BI)("dotcom_chat.activate",{target:"SIDEBAR_CUSTOM_COPILOT_SELECTED",mode:"immersive"})}function mJ(e){return e.starred}function mY(e){return e.ownerIsOrg}function mX(e){return!e.ownerIsOrg}function mZ(e){return e.login}try{mG.displayName||(mG.displayName="SpacesListPage")}catch{}function m0(){let e,t,a=(0,p.c)(4),n=(0,cU.Z)();a[0]!==n?(e=function(){n(ek.VR)},a[0]=n,a[1]=e):e=a[1];let r=e;return a[2]!==r?(t=(0,m.jsx)(mM,{onCancel:r}),a[2]=r,a[3]=t):t=a[3],t}try{m0.displayName||(m0.displayName="SpacesNewPage")}catch{}let m1={container:"InlineEdit-module__container--LSCGU",displayButton:"InlineEdit-module__displayButton--aJore",text:"InlineEdit-module__text--daHG8",editIcon:"InlineEdit-module__editIcon--p137S",input:"InlineEdit-module__input--iA2Yi",confirmButton:"InlineEdit-module__confirmButton--FBHwk"};function m2(e){let t,a,n,r,i,s,o,l,c,d,u,h,f,g=(0,p.c)(43),{defaultValue:v,onConfirm:_,confirmButtonLabel:b,className:j,size:S}=e,C=void 0===b?"Save":b,[N,w]=(0,x.useState)(!1),[I,k]=(0,x.useState)(v),E=(0,x.useRef)(null);g[0]!==v?(t=()=>{k(v)},a=[v],g[0]=v,g[1]=t,g[2]=a):(t=g[1],a=g[2]),(0,x.useEffect)(t,a),g[3]!==N?(n=()=>{if(N&&E.current){E.current.focus();let e=E.current.value.length;E.current.setSelectionRange(e,e)}},r=[N],g[3]=N,g[4]=n,g[5]=r):(n=g[4],r=g[5]),(0,x.useEffect)(n,r),g[6]!==v?(i=()=>{k(v),w(!0)},g[6]=v,g[7]=i):i=g[7];let T=i;g[8]!==v||g[9]!==_||g[10]!==I?(s=()=>{let e=I.trim();e&&e!==v&&_(e),w(!1)},g[8]=v,g[9]=_,g[10]=I,g[11]=s):s=g[11];let A=s;g[12]!==v?(o=()=>{w(!1),k(v)},g[12]=v,g[13]=o):o=g[13];let L=o;g[14]!==L||g[15]!==A?(l=e=>{"Enter"===e.key?(e.preventDefault(),A()):"Escape"===e.key&&(e.preventDefault(),L())},g[14]=L,g[15]=A,g[16]=l):l=g[16];let D=l,R=`${void 0===S?14:S}px`;g[17]!==R?(c={fontSize:R,lineHeight:1.5},g[17]=R,g[18]=c):c=g[18];let O=c;if(N){let e,t,a,n,r;return g[19]!==j?(e=(0,y.$)(m1.container,j),g[19]=j,g[20]=e):e=g[20],g[21]===Symbol.for("react.memo_cache_sentinel")?(t=e=>k(e.target.value),g[21]=t):t=g[21],g[22]!==D||g[23]!==O||g[24]!==I?(a=(0,m.jsx)("input",{ref:E,type:"text",value:I,onChange:t,onKeyDown:D,className:m1.input,style:O}),g[22]=D,g[23]=O,g[24]=I,g[25]=a):a=g[25],g[26]!==C||g[27]!==A?(n=(0,m.jsx)(tF.K,{size:"medium",icon:P.CheckIcon,"aria-label":C,onClick:A,className:m1.confirmButton}),g[26]=C,g[27]=A,g[28]=n):n=g[28],g[29]!==e||g[30]!==a||g[31]!==n?(r=(0,m.jsxs)("div",{className:e,children:[a,n]}),g[29]=e,g[30]=a,g[31]=n,g[32]=r):r=g[32],r}return g[33]!==j?(d=(0,y.$)(m1.container,m1.displayButton,j),g[33]=j,g[34]=d):d=g[34],g[35]!==v?(u=(0,m.jsx)("span",{className:m1.text,children:v}),g[35]=v,g[36]=u):u=g[36],g[37]===Symbol.for("react.memo_cache_sentinel")?(h=(0,m.jsx)(P.PencilIcon,{className:m1.editIcon,size:16}),g[37]=h):h=g[37],g[38]!==T||g[39]!==O||g[40]!==d||g[41]!==u?(f=(0,m.jsxs)("button",{className:d,onClick:T,style:O,children:[u,h]}),g[38]=T,g[39]=O,g[40]=d,g[41]=u,g[42]=f):f=g[42],f}try{m2.displayName||(m2.displayName="InlineEdit")}catch{}let m3=e=>{let t,a,n,r,i,s,o,l=(0,p.c)(15),c=(0,c4.jE)(),[d,u]=(0,x.useState)(!1);l[0]!==e?(t={mutationFn:async t=>{if(!e)return;u(!0);let a=(0,ak.fn)(e),n={custom_copilot:{resources_attributes:t.map(m4)}},r=await (0,td.lS)(a,{method:"PUT",body:n}),i=await r.json();if(!r.ok&&404!==r.status)throw Error("Unable to delete resources.");return i}},l[0]=e,l[1]=t):t=l[1];let m=(0,nd.n)(t);return l[2]!==m?({mutateAsync:a,isPending:n,...r}=m,l[2]=m,l[3]=a,l[4]=n,l[5]=r):(a=l[3],n=l[4],r=l[5]),l[6]!==e||l[7]!==n||l[8]!==c||l[9]!==d?(i=()=>{e&&d&&!n&&(u(!1),c.invalidateQueries({queryKey:(0,c3.dp)(e)}))},s=[d,n,e,c],l[6]=e,l[7]=n,l[8]=c,l[9]=d,l[10]=i,l[11]=s):(i=l[10],s=l[11]),(0,x.useEffect)(i,s),l[12]!==a||l[13]!==r?(o={deleteCopilotSpaceResources:a,...r},l[12]=a,l[13]=r,l[14]=o):o=l[14],o};function m4(e){return{id:e.databaseId,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,_destroy:!0,metadata:db(e)}}let m5={instructionsContainer:"InstructionsDialog-module__instructionsContainer--Pif1O",grow:"InstructionsDialog-module__grow--NEqmK"};function m6({copilotSpace:e,onClose:t,onSaved:a,returnFocusRef:n}){let{upsertCopilotSpace:r,isPending:i}=dj(e),[s,o]=(0,x.useState)(e.generalInstructions??""),[l,c]=(0,x.useState)(null);async function d(){try{let e=await r({generalInstructions:s});a?.(e),t()}catch(e){e instanceof Error?c(e.message):c("Failed to save instructions")}}function u(){o(e.generalInstructions??""),t()}return(0,m.jsx)(a2.l,{width:"xlarge",height:"large",title:"Instructions",onClose:u,returnFocusRef:n,position:{narrow:"fullscreen"},renderBody:()=>(0,m.jsxs)("div",{className:m5.instructionsContainer,children:[l&&(0,m.jsx)(G.l,{variant:"critical",title:l,className:"mb-2"}),(0,m.jsxs)(dZ.A,{className:m5.grow,disabled:!e.editable,children:[(0,m.jsx)(dZ.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,m.jsx)(d0.Ay,{block:!0,value:s,onChange:e=>o(e.target.value),placeholder:"Set up instructions for Copilot in this space",resize:"none",className:m5.grow}),(0,m.jsx)(m7,{text:s,promptCharLimit:4e3})]})]}),renderFooter:()=>e.editable&&(0,m.jsx)(d2,{onCancel:u,onSave:d,isLoading:i,loadingAnnouncement:"Saving instructions"})})}function m7(e){let t,a,n,r,i=(0,p.c)(10),{text:s,promptCharLimit:o}=e,l=s.length>o;i[0]!==s.length?(t=s.length.toLocaleString(),i[0]=s.length,i[1]=t):t=i[1],i[2]!==o?(a=o.toLocaleString(),i[2]=o,i[3]=a):a=i[3],i[4]!==t||i[5]!==a?(n=(0,m.jsxs)(m.Fragment,{children:[t," / ",a," characters"]}),i[4]=t,i[5]=a,i[6]=n):n=i[6];let c=n;return i[7]!==c||i[8]!==l?(r=l?(0,m.jsx)(dZ.A.Validation,{variant:"error",children:c}):(0,m.jsx)(dZ.A.Caption,{children:c}),i[7]=c,i[8]=l,i[9]=r):r=i[9],r}try{m6.displayName||(m6.displayName="InstructionsDialog")}catch{}try{m7.displayName||(m7.displayName="CharacterCount")}catch{}let m8={header:"SpacesConversation-module__header--yYw2C",main:"SpacesConversation-module__main--rHPYg",spaceTitle:"SpacesConversation-module__spaceTitle--rnry2",spaceDescription:"SpacesConversation-module__spaceDescription--yTlFM",chatInput:"SpacesConversation-module__chatInput--juHnz",instructions:"SpacesConversation-module__instructions--YEbs0",instructionsHeader:"SpacesConversation-module__instructionsHeader--JURtJ",instructionsIcon:"SpacesConversation-module__instructionsIcon--M9GHq",instructionsTitle:"SpacesConversation-module__instructionsTitle--C3f26",instructionsContent:"SpacesConversation-module__instructionsContent--pQ5qq",instructionsEmptyState:"SpacesConversation-module__instructionsEmptyState--BMxEo",content:"SpacesConversation-module__content--PbVzu",tabContainer:"SpacesConversation-module__tabContainer--dIRV0",underlineNav:"SpacesConversation-module__underlineNav--mhAGr",attachButton:"SpacesConversation-module__attachButton--mbw_3",tabEmptyContainer:"SpacesConversation-module__tabEmptyContainer--CfL1a",tabEmptyTitle:"SpacesConversation-module__tabEmptyTitle--cG4jw",tabEmptyText:"SpacesConversation-module__tabEmptyText--ITZUD",tabContent:"SpacesConversation-module__tabContent--xIi_S",conversationsList:"SpacesConversation-module__conversationsList--Ht70O",conversationItem:"SpacesConversation-module__conversationItem--NUP87",conversationItemMenuOpen:"SpacesConversation-module__conversationItemMenuOpen--lR7DS",conversationItemLeftColumn:"SpacesConversation-module__conversationItemLeftColumn--hsYf2",conversationName:"SpacesConversation-module__conversationName--i4vaf",conversationTimestamp:"SpacesConversation-module__conversationTimestamp--bNAHX",text:"SpacesConversation-module__text--hcIuX",referencesSizeProgressBar:"SpacesConversation-module__referencesSizeProgressBar--AFM2H",referencesSizeText:"SpacesConversation-module__referencesSizeText--nQQDT"};function m9({customCopilotId:e,selectedThreadID:t,textAreaRef:a}){let{currentTopic:n,messages:r,streamingMessage:i,ambientError:s,threads:o}=(0,$.Pk)(),l=(0,H.b)(),[c,d]=(0,ef.ok)(),u=(0,sq.G)(),p=c.get("tab")||"attachments",[h,f]=(0,x.useState)(!1),[g,y]=(0,x.useState)(null),v=(0,x.useRef)(null),[_,b]=(0,x.useState)(null),[j,S]=(0,x.useState)([]),[C,N]=(0,x.useState)(null),[w,I]=(0,x.useState)(null),[k,E]=(0,x.useState)(!1),[T,A]=(0,x.useState)([]),[L,R]=(0,x.useState)(null),O=sH((0,x.useRef)(n),r.length),{isPending:B,data:F,error:M}=(0,aE.Ao)(e),{upsertCopilotSpace:U,error:W}=dj(_||void 0),{deleteCopilotSpaceResources:z,error:q}=m3(_||void 0),{processFiles:K}=u3({onResourcesAdded:e=>void eo(e),onError:A,onUploadingChange:E}),{copilotSpacesConfig:{maxResourceCount:Q}}=(0,V.X)(),Y=W||M||w||q,X=(0,x.useRef)(!1),Z=j.filter(e=>!e.markedForDestroy).length,ee=(0,x.useMemo)(()=>{if(!_)return[];let t=new Map(Array.from(o.entries()).filter(([,t])=>t.customCopilotOwner===e.owner&&t.customCopilotID===e.id));return l.sortThreads(t).slice(0,10)},[o,e,l,_]),et=(0,x.useMemo)(()=>_?_.resources.reduce((e,t)=>e+(t.sizePercentage||0),0):0,[_]);(0,x.useEffect)(()=>{F&&(b(F),S(e=>F.resources?.filter(t=>!e.find(e=>e.id===t.id&&e.markedForDestroy))||[]),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:F})),l.clearCurrentReferences(["image"])},[F,l]),(0,x.useEffect)(()=>()=>{X.current||(l.clearCurrentReferences(),X.current=!1)},[l,e]);let ea=(0,x.useCallback)(async e=>{X.current=!0,await O(e)},[O]),en=(0,x.useCallback)(e=>{d({tab:e},{replace:!0})},[d]),er=(0,x.useCallback)(e=>{l.deleteThread(e)},[l]);async function ei(e){if(S(t=>{let a=[...t];return e.databaseId?a.map(t=>e.databaseId===t.databaseId?{...t,markedForDestroy:!0}:t):a.filter(t=>t.id!==e.id)}),_)try{await z([e]),I(null)}catch{S(t=>(t.push(e),t))}}async function es(e){let t=[];if(S(a=>t=a.map(t=>t.id===e.id?e:t)),_)try{await U({..._,resources:t}),I(null)}catch{S(_.resources)}}let eo=(0,x.useCallback)(async e=>{let t=[];S(a=>t=mB(a,e));try{await U({..._,resources:t}),I(null)}catch{_&&S(_.resources)}},[_,U]),el=(0,x.useCallback)(()=>{I(`You can select a maximum of ${Q} sources`)},[Q]),ec=(0,x.useCallback)((e,t)=>{K(e,{source:"drag-and-drop"}),t||A([])},[K]),ed=(0,x.useCallback)(async e=>{if(_){N(e);try{let t=await U({name:e});b(t),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:t}),N(null),I(null)}catch{b(_),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:_}),N(null)}}},[_,U,l]);if(M instanceof aE.i9)return(0,m.jsx)(cz,{});if(B||!_)return(0,m.jsx)(lM,{});let eu=_.ownerIsOrg?_.owner:void 0,em=C??_.name,ep=(0,ak.Hh)(F);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d5,{}),(0,m.jsx)(aR.t,{fallback:(0,m.jsx)(a$,{regionName:"This space"}),children:(0,m.jsxs)(D.Container,{width:"small",children:[(0,m.jsxs)("div",{className:m8.header,children:[(0,m.jsx)("div",{className:m8.main,children:(0,m.jsx)("h1",{className:m8.spaceTitle,children:_.editable?(0,m.jsx)(m2,{defaultValue:em,onConfirm:ed,size:24}):(0,m.jsx)("span",{className:m8.text,children:em})})}),_.description&&(0,m.jsx)("p",{className:m8.spaceDescription,children:_.description})]}),(0,m.jsxs)("div",{className:m8.chatInput,children:[s&&(0,m.jsx)(sG.P,{ambientError:s}),ep&&(0,m.jsx)(ol,{}),!ep&&(0,m.jsx)(tL.V,{textAreaRef:a,onSubmit:ea,isStreaming:!!i,size:"large",showModelPicker:!0,onNewThreadSelected:u},t)]}),(0,m.jsxs)("button",{ref:v,className:m8.instructions,onClick:()=>f(!0),"aria-haspopup":"dialog","aria-expanded":h,children:[(0,m.jsxs)("div",{className:m8.instructionsHeader,children:[(0,m.jsx)(P.SlidersIcon,{size:16,className:m8.instructionsIcon}),(0,m.jsx)("h2",{className:m8.instructionsTitle,children:"Instructions"})]}),_.generalInstructions?(0,m.jsx)("p",{className:m8.instructionsContent,children:_.generalInstructions}):(0,m.jsx)("p",{className:m8.instructionsEmptyState,children:"Set up instructions for Copilot in this space"})]}),Y&&(0,m.jsx)(G.l,{title:w?"Maximum source count reached":"Failed to save space",variant:"critical",description:"string"==typeof Y?Y:"object"==typeof Y&&null!==Y&&"base"in Y?String(Y.base):Y instanceof Error?Y.message:"An error occurred"}),T.length>0&&(0,m.jsx)(od,{errorMessages:T,onDismiss:()=>A([])}),(0,m.jsxs)("div",{className:m8.content,children:[(0,m.jsxs)("div",{className:m8.tabContainer,children:[(0,m.jsx)("div",{className:m8.underlineNav,children:(0,m.jsxs)(m$.O,{"aria-label":"Space content",children:[(0,m.jsx)(m$.O.Item,{"aria-current":"attachments"===p?"page":void 0,onClick:()=>en("attachments"),counter:Z,children:"Sources"}),(0,m.jsx)(m$.O.Item,{"aria-current":"conversations"===p?"page":void 0,onClick:()=>en("conversations"),counter:ee.length,children:"Conversations"})]})}),(0,m.jsxs)(J.B,{direction:"horizontal",align:"center",gap:"none",children:[et>80&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d7.z,{inline:!0,barSize:"small",progress:et,className:m8.referencesSizeProgressBar,"aria-hidden":"true"}),(0,m.jsx)("span",{className:"sr-only",children:`${Math.max(0,Math.round(100-et))}% remaining attachment capacity`}),(0,m.jsxs)("span",{className:m8.referencesSizeText,children:[et<1?"<1":Math.round(et),"%"]})]}),_.editable&&(0,m.jsx)("div",{className:m8.attachButton,children:Z>=Q?(0,m.jsx)(eU.Q,{leadingVisual:P.PlusIcon,onClick:el,children:"Add sources"}):(0,m.jsx)(my,{sizePercentage:et,findFileWorkerPath:"",owner:eu,onResourcesAdded:eo,resourcesToSave:j,resourceCounts:{currentResourceCount:Z,maxResourceCount:Q},onError:A,recentlyUsedRepo:{recentlyUsedRepo:L,setRecentlyUsedRepo:R},onUploadingChange:e=>{e&&A([]),E(e)},children:(0,m.jsx)(eU.Q,{leadingVisual:P.PlusIcon,children:"Add sources"})})})]})]}),(0,m.jsx)("div",{className:m8.tabContent,children:(()=>{if("attachments"===p){let e=j.filter(e=>!e.markedForDestroy);return e.length>0?(0,m.jsx)(mE,{resources:e,sizePercentage:et,onDeleteResource:ei,onUpdateResource:es}):(0,m.jsxs)("div",{className:m8.tabEmptyContainer,children:[(0,m.jsx)("h2",{className:m8.tabEmptyTitle,children:"Welcome"}),(0,m.jsx)("p",{className:m8.tabEmptyText,children:_?.editable?"Add sources to your space once and access them in every chat. Start adding your first source.":"This space doesn't have any sources yet. Someone with edit access can add them."})]})}if("conversations"===p)return ee.length>0?(0,m.jsx)("ul",{role:"menu",className:m8.conversationsList,children:ee.map(e=>(0,m.jsx)(pe,{conversation:e,activeMenuConversationId:g,setActiveMenuConversationId:y,onDelete:er},e.id))}):(0,m.jsxs)("div",{className:m8.tabEmptyContainer,children:[(0,m.jsx)("h2",{className:m8.tabEmptyTitle,children:"No conversations yet"}),(0,m.jsx)("p",{className:m8.tabEmptyText,children:"Start a new conversation in this space by typing in the input box at the top."})]})})()}),h&&(0,m.jsx)(m6,{copilotSpace:_,onClose:()=>f(!1),returnFocusRef:v,onSaved:e=>{b(e),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e})}})]})]})}),(eE.W.customCopilotsFileUploads||eE.W.spacesImagesEnabled)&&(0,m.jsx)(mj,{onFilesDrop:ec,isUploading:k})]})}function pe(e){let t,a,n,r,i,s,o,l,c,d,u,h,f,g,x,v,_=(0,p.c)(38),{conversation:b,activeMenuConversationId:j,setActiveMenuConversationId:S,onDelete:C}=e,N=(0,cU.Z)();_[0]!==b?(t=(0,ek.CB)(b),_[0]=b,_[1]=t):t=_[1];let w=t,I=`${ek.Jz}/c/${b.id}`;_[2]!==N||_[3]!==I?(a=()=>N(I),n=e=>{"Enter"===e.key&&N(I)},_[2]=N,_[3]=I,_[4]=a,_[5]=n):(a=_[4],n=_[5]);let k=null!==j&&m8.conversationItemMenuOpen;_[6]!==k?(r=(0,y.$)(m8.conversationItem,k),_[6]=k,_[7]=r):r=_[7],_[8]!==w?(i=(0,m.jsx)("div",{className:m8.conversationName,children:w}),_[8]=w,_[9]=i):i=_[9],_[10]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(P.ClockIcon,{}),_[10]=s):s=_[10],_[11]!==b.updatedAt?(o=new Date(b.updatedAt),_[11]=b.updatedAt,_[12]=o):o=_[12],_[13]!==o?(l=(0,m.jsxs)("div",{className:m8.conversationTimestamp,children:[s," ",(0,m.jsx)(rf.A,{format:"relative",prefix:"",date:o})]}),_[13]=o,_[14]=l):l=_[14],_[15]!==i||_[16]!==l?(c=(0,m.jsxs)("div",{className:m8.conversationItemLeftColumn,children:[i,l]}),_[15]=i,_[16]=l,_[17]=c):c=_[17];let E=j===b.id;return _[18]!==b.id||_[19]!==S?(d=e=>{S(e?b.id:null)},_[18]=b.id,_[19]=S,_[20]=d):d=_[20],_[21]===Symbol.for("react.memo_cache_sentinel")?(u=(0,m.jsx)(tB.W.Anchor,{children:(0,m.jsx)(tF.K,{variant:"invisible","aria-label":"Conversation options",icon:P.KebabHorizontalIcon,onClick:pa})}),_[21]=u):u=_[21],_[22]!==b||_[23]!==C?(h=()=>C(b),_[22]=b,_[23]=C,_[24]=h):h=_[24],_[25]===Symbol.for("react.memo_cache_sentinel")?(f=(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(P.TrashIcon,{})}),_[25]=f):f=_[25],_[26]!==h?(g=(0,m.jsx)(tB.W.Overlay,{onClick:pt,align:"end",children:(0,m.jsx)(tM.l,{children:(0,m.jsxs)(tM.l.Item,{variant:"danger",onSelect:h,children:[f,"Delete"]})})}),_[26]=h,_[27]=g):g=_[27],_[28]!==E||_[29]!==d||_[30]!==g?(x=(0,m.jsxs)(tB.W,{open:E,onOpenChange:d,children:[u,g]}),_[28]=E,_[29]=d,_[30]=g,_[31]=x):x=_[31],_[32]!==c||_[33]!==x||_[34]!==a||_[35]!==n||_[36]!==r?(v=(0,m.jsxs)("li",{role:"menuitem",onClick:a,onKeyDown:n,className:r,children:[c,x]}),_[32]=c,_[33]=x,_[34]=a,_[35]=n,_[36]=r,_[37]=v):v=_[37],v}function pt(e){return e.stopPropagation()}function pa(e){e.stopPropagation()}try{m9.displayName||(m9.displayName="SpacesConversation")}catch{}try{pe.displayName||(pe.displayName="ConversationItem")}catch{}let pn={createSpaceDialog:"CreateSpaceDialog-module__createSpaceDialog--fkFm5",textAreaWrapper:"CreateSpaceDialog-module__textAreaWrapper--OZTen"};function pr({closeDialog:e}){let t=(0,cU.Z)(),a=(0,x.useRef)(null),{name:n,setName:r,defaultName:i}=(0,aE.AV)(),[s,o]=(0,x.useState)(""),[l,c]=(0,x.useState)(null),[d,u]=(0,x.useState)({}),{upsertCopilotSpace:p,isPending:h}=dj(),{copilotSpacesConfig:{maxDescriptionLength:f}}=(0,V.X)(),g=(0,x.useCallback)(e=>{let t={...d};for(let a of e)t[a]&&delete t[a];u(t)},[d]),y=(0,x.useCallback)(e=>c(e),[]);(0,x.useEffect)(()=>{a.current&&n===i&&a.current.select()},[n,i]);let v=async()=>{if(!h)try{let e=await p({name:n,description:s,ownerId:l?.id,ownerType:l?.type});u({});let a=(0,ak.Cb)(e);return t(a)}catch(e){u(e??{})}},_=()=>{e()};return(0,m.jsx)(a2.l,{position:{narrow:"fullscreen"},title:"New Space",onClose:e,width:"large","aria-label":"New Space",className:pn.createSpaceDialog,renderFooter:()=>(0,m.jsx)(d2,{onCancel:_,onSave:v,isLoading:h,disabled:!l}),children:(0,m.jsx)(J.B,{children:(0,m.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),e.stopPropagation(),await v()},children:[(0,m.jsxs)(dZ.A,{children:[(0,m.jsx)(dZ.A.Label,{required:!0,children:"Name"}),(0,m.jsx)(dC.A,{ref:a,autoFocus:!0,block:!0,"data-testid":"copilot-space-name-input",name:"copilot-space-name",value:n,onChange:e=>{r(e.target.value),g(["name","slug"])}}),d.name?(0,m.jsx)(dZ.A.Validation,{variant:"error",children:(0,m.jsxs)("span",{children:["Name ",d.name]})}):d.slug?(0,m.jsx)(dZ.A.Validation,{variant:"error",children:(0,m.jsx)("span",{children:ak.j0})}):null]}),(0,m.jsx)(mO,{onSelect:y,required:!0,showCaption:!1}),(0,m.jsxs)(dZ.A,{children:[(0,m.jsx)(dZ.A.Label,{required:!1,children:"Description"}),(0,m.jsx)(d0.Ay,{block:!0,name:"description",value:s,rows:3,resize:"vertical",className:pn.textAreaWrapper,onChange:e=>{o(e.target.value),g(["description"])}}),d.description?(0,m.jsx)(dZ.A.Validation,{variant:"error",children:(0,m.jsxs)("span",{children:["Description ",d.description]})}):(0,m.jsx)(pi,{text:s,promptCharLimit:f})]})]})})})}function pi(e){let t,a,n,r,i=(0,p.c)(10),{text:s,promptCharLimit:o}=e,l=s.length>o;i[0]!==s.length?(t=s.length.toLocaleString(),i[0]=s.length,i[1]=t):t=i[1],i[2]!==o?(a=o.toLocaleString(),i[2]=o,i[3]=a):a=i[3],i[4]!==t||i[5]!==a?(n=(0,m.jsxs)(m.Fragment,{children:[t," / ",a," characters"]}),i[4]=t,i[5]=a,i[6]=n):n=i[6];let c=n;return i[7]!==c||i[8]!==l?(r=(0,m.jsx)(m.Fragment,{children:l?(0,m.jsx)(dZ.A.Validation,{variant:"error",children:c}):(0,m.jsx)(dZ.A.Caption,{children:c})}),i[7]=c,i[8]=l,i[9]=r):r=i[9],r}try{pr.displayName||(pr.displayName="CreateSpaceDialog")}catch{}try{pi.displayName||(pi.displayName="CharacterCount")}catch{}function ps(e){let t,a,n,r,i,s=(0,p.c)(9),{primary:o}=e,[l,c]=(0,x.useState)(!1);s[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{(0,e9.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_CLOSE",mode:"immersive"}),c(!1)},s[0]=t):t=s[0];let d=t;s[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{(0,e9.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_OPEN",mode:"immersive"}),c(!0)},s[1]=a):a=s[1];let u=a;s[2]!==l?(n=l?(0,m.jsx)(pr,{closeDialog:d}):null,s[2]=l,s[3]=n):n=s[3];let h=void 0!==o&&o?"primary":"default";return s[4]!==h?(r=(0,m.jsx)(eU.Q,{variant:h,onClick:u,children:"Create space"}),s[4]=h,s[5]=r):r=s[5],s[6]!==n||s[7]!==r?(i=(0,m.jsxs)(m.Fragment,{children:[n,r]}),s[6]=n,s[7]=r,s[8]=i):i=s[8],i}try{ps.displayName||(ps.displayName="CreateSpaceButton")}catch{}let po={banner:"SpacesView-module__banner--fwXon",button:"SpacesView-module__button--TkcJp",counter:"SpacesView-module__counter--vNRTG",disabledButton:"SpacesView-module__disabledButton--c3cFi",description:"SpacesView-module__description--jvOb1",filterButtons:"SpacesView-module__filterButtons--wdtfW",metadata:"SpacesView-module__metadata--juj8j",metadataItem:"SpacesView-module__metadataItem--zJqzM"};function pl(e){let t,a,n,r,i,s,o,l,c,d,u,h=(0,p.c)(33),{copilotSpace:f,onDelete:g,onClick:y}=e,x=f.ownerIsOrg?P.OrganizationIcon:P.PersonIcon;h[0]!==f.baseRole||h[1]!==f.visibility?(t=c$(f.visibility,f.baseRole),h[0]=f.baseRole,h[1]=f.visibility,h[2]=t):t=h[2];let v=t,_="Shared"===v?P.PeopleIcon:P.LockIcon,b=!eE.W.spacesPermissionsTabEnabled||f.adminable||f.editable;return h[3]!==f?(a=(0,ak.Cb)(f),h[3]=f,h[4]=a):a=h[4],h[5]!==f.name?(n=(0,m.jsx)(R.qJ.Item.Title,{children:f.name}),h[5]=f.name,h[6]=n):n=h[6],h[7]!==f.description?(r=(0,m.jsx)(R.qJ.Item.Description,{children:(0,m.jsx)("div",{className:po.description,children:f.description})}),h[7]=f.description,h[8]=r):r=h[8],h[9]!==x?(i=(0,m.jsx)(x,{size:16}),h[9]=x,h[10]=i):i=h[10],h[11]!==f.owner||h[12]!==i?(s=(0,m.jsxs)("span",{className:po.metadataItem,children:[i,f.owner]}),h[11]=f.owner,h[12]=i,h[13]=s):s=h[13],h[14]!==_?(o=(0,m.jsx)(_,{size:16}),h[14]=_,h[15]=o):o=h[15],h[16]!==o||h[17]!==v?(l=(0,m.jsxs)("span",{className:po.metadataItem,children:[o,v]}),h[16]=o,h[17]=v,h[18]=l):l=h[18],h[19]!==s||h[20]!==l?(c=(0,m.jsx)(R.qJ.Item.Metadata,{children:(0,m.jsxs)("div",{className:po.metadata,children:[s,l]})}),h[19]=s,h[20]=l,h[21]=c):c=h[21],h[22]!==f||h[23]!==g||h[24]!==b?(d=b&&(0,m.jsx)(R.qJ.Item.Actions,{children:(0,m.jsx)(dQ,{copilot:f,onDelete:g})}),h[22]=f,h[23]=g,h[24]=b,h[25]=d):d=h[25],h[26]!==y||h[27]!==d||h[28]!==a||h[29]!==n||h[30]!==r||h[31]!==c?(u=(0,m.jsxs)(R.qJ.Item,{href:a,onClick:y,children:[n,r,c,d]}),h[26]=y,h[27]=d,h[28]=a,h[29]=n,h[30]=r,h[31]=c,h[32]=u):u=h[32],u}function pc(e){let t,a,n,r,i,s,o,l,c,d,u,h=(0,p.c)(50),{spaces:f,starredSpaces:g,isLoading:y,onDelete:v,onSpaceClick:_}=e,[b,j]=(0,x.useState)("personal"),S=g&&g.length>0,{copilotSpacesConfig:C}=(0,V.X)(),{userHasOrgs:N}=C;if(h[0]!==S?(t=()=>{S&&j("starred")},a=[S],h[0]=S,h[1]=t,h[2]=a):(t=h[1],a=h[2]),(0,x.useEffect)(t,a),h[3]!==b||h[4]!==S||h[5]!==y||h[6]!==v||h[7]!==_||h[8]!==f||h[9]!==N){let e,t,a,d,u,p,g=f?.filter(e=>"starred"===b?e.starred:"personal"===b?!e.ownerIsOrg:"org"!==b||e.ownerIsOrg),x=f?.length===0&&!y,C=f&&f.length>0&&g?.length===0&&!y;h[17]!==f?(e=f?.filter(pm).length??0,h[17]=f,h[18]=e):e=h[18];let w=e;h[19]!==f?(t=f?.filter(pu).length??0,h[19]=f,h[20]=t):t=h[20];let I=t;h[21]!==f?(a=f?.filter(pd).length??0,h[21]=f,h[22]=a):a=h[22];let k=a;r=R.qJ,h[23]!==b||h[24]!==S||h[25]!==k?(d=S&&(0,m.jsxs)("button",{onClick:()=>j("starred"),role:"tab","aria-selected":"starred"===b,"aria-controls":"spaces-list",id:"starred-tab",className:po.button,children:["Starred ",(0,m.jsx)("span",{className:po.counter,children:k})]}),h[23]=b,h[24]=S,h[25]=k,h[26]=d):d=h[26],h[27]!==b||h[28]!==S||h[29]!==w||h[30]!==N?(u=N||S?(0,m.jsxs)("button",{onClick:()=>j("personal"),role:"tab","aria-selected":"personal"===b,"aria-controls":"spaces-list",id:"personal-tab",className:po.button,children:["Yours ",(0,m.jsx)("span",{className:po.counter,children:w})]}):(0,m.jsxs)("span",{id:"disabled-personal-tab",role:"tab",className:po.disabledButton,children:["Yours ",(0,m.jsx)("span",{className:po.counter,children:w})]}),h[27]=b,h[28]=S,h[29]=w,h[30]=N,h[31]=u):u=h[31],h[32]!==b||h[33]!==I||h[34]!==N?(p=N&&(0,m.jsxs)("button",{onClick:()=>j("org"),role:"tab","aria-selected":"org"===b,"aria-controls":"spaces-list",id:"org-tab",className:po.button,children:["Organizations ",(0,m.jsx)("span",{className:po.counter,children:I})]}),h[32]=b,h[33]=I,h[34]=N,h[35]=p):p=h[35],h[36]!==d||h[37]!==u||h[38]!==p?(c=(0,m.jsx)(R.qJ.Header,{children:(0,m.jsxs)("div",{role:"tablist","aria-label":"Filter spaces",className:po.filterButtons,children:[d,u,p]})}),h[36]=d,h[37]=u,h[38]=p,h[39]=c):c=h[39],n=R.qJ.List,i=y,s="spaces-list",o=`${b}-tab`,l=x?(0,m.jsxs)(R.qJ.EmptyState,{children:[(0,m.jsx)("p",{children:"Set up once. Chat again and again."}),(0,m.jsx)(ps,{})]}):C?(0,m.jsxs)(R.qJ.EmptyState,{children:[(0,m.jsx)("p",{children:"Organize discussions with your team."}),(0,m.jsx)(ps,{})]}):g?.map(e=>(0,m.jsx)(pl,{copilotSpace:e,onDelete:()=>v(e),onClick:_},e.owner?`${e.owner}/${e.id}`:e.id)),h[3]=b,h[4]=S,h[5]=y,h[6]=v,h[7]=_,h[8]=f,h[9]=N,h[10]=n,h[11]=r,h[12]=i,h[13]=s,h[14]=o,h[15]=l,h[16]=c}else n=h[10],r=h[11],i=h[12],s=h[13],o=h[14],l=h[15],c=h[16];return h[40]!==n||h[41]!==i||h[42]!==s||h[43]!==o||h[44]!==l?(d=(0,m.jsx)(n,{loading:i,id:s,"aria-labelledby":o,children:l}),h[40]=n,h[41]=i,h[42]=s,h[43]=o,h[44]=l,h[45]=d):d=h[45],h[46]!==r||h[47]!==c||h[48]!==d?(u=(0,m.jsxs)(r,{children:[c,d]}),h[46]=r,h[47]=c,h[48]=d,h[49]=u):u=h[49],u}function pd(e){return e.starred}function pu(e){return e.ownerIsOrg}function pm(e){return!e.ownerIsOrg}function pp(e){let t,a,n,r,i,s,o,l,c,d,u,h,f,g,y=(0,p.c)(31),{copilotSpaces:v}=e,_=(0,$.Pk)(),b=(0,ef.Zp)(),{ssoOrganizations:j}=_;y[0]!==j?(t=j.map(py),y[0]=j,y[1]=t):t=y[1];let S=t,[C,N]=(0,x.useState)(null),w=void 0===v;y[2]!==v?(a=v?.filter(pg),y[2]=v,y[3]=a):a=y[3];let I=a;y[4]!==b?(n=()=>{b(ek.QT)},y[4]=b,y[5]=n):n=y[5];let k=n,{mutateAsync:E}=(0,aE.$7)();y[6]!==E?(r=async e=>{try{await E(e),N(null)}catch(e){N(e instanceof Error?e:Error(String(e)))}},y[6]=E,y[7]=r):r=y[7];let T=r;return y[8]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)(a$,{regionName:"Spaces"}),y[8]=i):i=y[8],y[9]!==k?(s=(0,m.jsx)(d5,{onCreateSpace:k}),y[9]=k,y[10]=s):s=y[10],y[11]!==C?(o=C&&(0,m.jsxs)(dx.A,{variant:"danger",children:[(0,m.jsx)(P.AlertIcon,{}),"There was a problem deleting your space."]}),y[11]=C,y[12]=o):o=y[12],y[13]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)(D.Title,{children:"Spaces"}),c=(0,m.jsx)(D.Description,{children:"A persistent space that remembers your code, files, and preferences across conversations."}),y[13]=l,y[14]=c):(l=y[13],c=y[14]),y[15]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsxs)(D.Header,{children:[l,c,(0,m.jsx)(D.Actions,{children:(0,m.jsx)(ps,{primary:!0})})]}),y[15]=d):d=y[15],y[16]!==S||y[17]!==j.length?(u=j.length>0&&(0,m.jsx)("div",{className:po.banner,children:(0,m.jsx)(W.x,{protectedOrgs:S,redirectURI:ph})}),y[16]=S,y[17]=j.length,y[18]=u):u=y[18],y[19]!==v||y[20]!==T||y[21]!==w||y[22]!==I?(h=(0,m.jsx)(D.Section,{children:(0,m.jsx)(pc,{spaces:v,starredSpaces:I,isLoading:w,onDelete:T,onSpaceClick:pf})}),y[19]=v,y[20]=T,y[21]=w,y[22]=I,y[23]=h):h=y[23],y[24]!==u||y[25]!==h?(f=(0,m.jsxs)(D.Container,{width:"small",children:[d,u,h]}),y[24]=u,y[25]=h,y[26]=f):f=y[26],y[27]!==f||y[28]!==s||y[29]!==o?(g=(0,m.jsxs)(aR.t,{fallback:i,children:[s,o,f]}),y[27]=f,y[28]=s,y[29]=o,y[30]=g):g=y[30],g}function ph(){return`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`}function pf(){(0,e9.BI)("dotcom_chat.activate",{target:"SPACES_VIEW_SPACE_SELECTED",mode:"immersive"})}function pg(e){return e.starred}function py(e){return e.login}try{pl.displayName||(pl.displayName="SpacesListItem")}catch{}try{pc.displayName||(pc.displayName="SpacesList")}catch{}try{pp.displayName||(pp.displayName="SpacesView")}catch{}function px(){let e,t,a,n,r,i,s,o,l,c,d,u,h,f,g,v=(0,p.c)(45),_=(0,$.Pk)(),{customCopilots:b}=_,{reloadQuota:j}=(0,aN.xR)(),S=ad(),C=(0,av.tZ)(),N=(0,aw.v)(),w=(0,ef.zy)(),I=(0,aE.BV)(),k=(0,ak.y_)(),E=I&&k;v[0]!==I||v[1]!==w?(e=I&&(0,ak.zY)(w),v[0]=I,v[1]=w,v[2]=e):e=v[2];let T=e;v[3]!==I||v[4]!==w?(t=I&&(0,ak.E1)(w),v[3]=I,v[4]=w,v[5]=t):t=v[5];let A=t,L=(0,ak.iI)(),D=eE.W.spacesV3UI;(0,aE.e9)(I),v[6]!==j||v[7]!==S?(a=()=>{window.setTimeout(()=>{S.current?.focus()},1),j("new_thread_focus")},v[6]=j,v[7]=S,v[8]=a):a=v[8];let R=a,P=(0,x.useRef)(null);v[9]===Symbol.for("react.memo_cache_sentinel")?(n=()=>!!P.current&&P.current.clientWidth<=1024,v[9]=n):n=v[9];let[O,B]=(0,x.useState)(n);v[10]===Symbol.for("react.memo_cache_sentinel")?(r=()=>P.current?P.current.clientWidth>1024&&(aI.J.getImmersiveSidebarCollapsedState()??!0):aI.J.getImmersiveSidebarCollapsedState()??!0,v[10]=r):r=v[10];let[F,M]=(0,x.useState)(r),[V,U]=(0,x.useState)(!1);v[11]!==O||v[12]!==F||v[13]!==V?(i=()=>{if(O)U(!V);else{let e=!F;M(e),aI.J.setImmersiveSidebarCollapsedState(e)}},v[11]=O,v[12]=F,v[13]=V,v[14]=i):i=v[14];let W=i;v[15]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{if(!P.current)return;let e=()=>{let e=P.current?.clientWidth;void 0!==e&&(e<=1024?B(!0):(B(!1),U(!1)))},t=new ResizeObserver(()=>{e()});return t.observe(P.current),e(),()=>{t.disconnect()}},v[15]=s):s=v[15],v[16]!==V?(o=[V],v[16]=V,v[17]=o):o=v[17],(0,x.useEffect)(s,o);let z=!O&&F,H=!!O&&V,q=(0,x.useRef)(null);v[18]===Symbol.for("react.memo_cache_sentinel")?(l=()=>!!q.current&&q.current.clientWidth<=1280,v[18]=l):l=v[18];let[G,K]=(0,x.useState)(l);v[19]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{if(!q.current)return;let e=()=>{let e=q.current?.clientWidth;void 0!==e&&e>0&&K(e<=1280)},t=new ResizeObserver(e);return t.observe(q.current),e(),()=>t.disconnect()},c=[],v[19]=c,v[20]=d):(c=v[19],d=v[20]),(0,x.useEffect)(d,c),aL();let Q=!N&&G&&ot.fullscreenPreviewPane,J=N?.fullscreenPreviewArea&&ot.fullscreenPluginPane;return v[21]!==Q||v[22]!==J?(u=(0,y.$)(ot.container,Q,J),v[21]=Q,v[22]=J,v[23]=u):u=v[23],v[24]===Symbol.for("react.memo_cache_sentinel")?(h=(0,m.jsx)("span",{"data-favicon-override":"/favicons/favicon-copilot.svg"}),v[24]=h):h=v[24],v[25]!==N||v[26]!==L||v[27]!==b||v[28]!==z||v[29]!==H||v[30]!==R||v[31]!==W||v[32]!==T||v[33]!==A||v[34]!==G||v[35]!==O||v[36]!==E||v[37]!==w||v[38]!==C||v[39]!==_.selectedThreadID||v[40]!==S?(f=N?.PageComponent&&N?.matchPage?.(w.pathname)?(0,m.jsx)("div",{className:ot.main,children:(0,m.jsx)(cb,{plugin:N})}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:ot.left,ref:P,hidden:G&&C,children:[T||A?null:(0,m.jsx)(cM,{isVisible:H,isPinned:z,isFloating:O,onNewThread:R,onToggle:W}),(0,m.jsx)("div",{className:ot.main,children:E?D?(0,m.jsx)(pp,{copilotSpaces:b}):(0,m.jsx)(mG,{copilotSpaces:b}):D&&L&&(T||A)?(0,m.jsx)(m9,{customCopilotId:L,selectedThreadID:_.selectedThreadID,textAreaRef:S}):T?(0,m.jsx)(m0,{}):A?(0,m.jsx)(mU,{}):N?.ViewComponent&&N?.matchView?.(w.pathname)?(0,m.jsx)(cj,{plugin:N}):L?D?(0,m.jsx)(m9,{customCopilotId:L,selectedThreadID:_.selectedThreadID,textAreaRef:S}):(0,m.jsx)(d6,{customCopilotId:L,selectedThreadID:_.selectedThreadID,textAreaRef:S}):(0,m.jsx)(c_,{isMobile:G,textAreaRef:S},_.selectedThreadID)})]}),(0,m.jsx)("div",{className:(0,y.$)(ot.previewPane,C&&ot.active),children:(0,m.jsx)("div",{className:(0,y.$)(ot.viewer),children:(0,m.jsx)(sF,{returnFocusRef:S})})})]}),v[25]=N,v[26]=L,v[27]=b,v[28]=z,v[29]=H,v[30]=R,v[31]=W,v[32]=T,v[33]=A,v[34]=G,v[35]=O,v[36]=E,v[37]=w,v[38]=C,v[39]=_.selectedThreadID,v[40]=S,v[41]=f):f=v[41],v[42]!==u||v[43]!==f?(g=(0,m.jsxs)("div",{className:u,"data-testid":"chat-layout","data-hpc":!0,ref:q,children:[h,f]}),v[42]=u,v[43]=f,v[44]=g):g=v[44],g}try{px.displayName||(px.displayName="Layout")}catch{}let pv={container:"LayoutV2-module__container--u8OYT",left:"LayoutV2-module__left--_7QRj",main:"LayoutV2-module__main--YG0Do",previewPane:"LayoutV2-module__previewPane--hqRiN",active:"LayoutV2-module__active--VfdNL",viewer:"LayoutV2-module__viewer--Z6so3",fullscreenPreviewPane:"LayoutV2-module__fullscreenPreviewPane--On6q_",fullscreenPluginPane:"LayoutV2-module__fullscreenPluginPane--_nKWb"};var p_=a(69179),pb=a(67957);function pj(e){let t,a,n,r,i=(0,p.c)(18),{isVisible:s,isExpanded:o,isFloating:l,sidebarRef:c,onToggle:d}=e,{closePreviewPane:u}=(0,av.xx)(),h=l?s:o;i[0]!==h||i[1]!==d?(t=()=>{d(),(0,e9.BI)("dotcom_chat.activate",{target:h?"SIDEBAR_COLLAPSE":"SIDEBAR_EXPAND",mode:"immersive"})},i[0]=h,i[1]=d,i[2]=t):t=i[2];let f=t;i[3]!==u?(a=()=>{u()},i[3]=u,i[4]=a):a=i[4];let g=a;return i[5]!==g||i[6]!==o||i[7]!==l||i[8]!==s||i[9]!==d?(n=(0,m.jsx)(p_.z,{onSidebarClick:g,onToggleSidebar:d,sidebarExpanded:o,sidebarFloating:l,sidebarVisible:s}),i[5]=g,i[6]=o,i[7]=l,i[8]=s,i[9]=d,i[10]=n):n=i[10],i[11]!==f||i[12]!==o||i[13]!==l||i[14]!==s||i[15]!==c||i[16]!==n?(r=(0,m.jsx)(pb.B,{isExpanded:o,isVisible:s,isFloating:l,onToggle:f,sidebarRef:c,children:n}),i[11]=f,i[12]=o,i[13]=l,i[14]=s,i[15]=c,i[16]=n,i[17]=r):r=i[17],r}try{pj.displayName||(pj.displayName="Sidebar")}catch{}function pS(){let e,t,a,n,r,i,s,o,l=(0,p.c)(33),c=(0,$.Pk)(),{customCopilots:d}=c,u=ad(),h=(0,av.tZ)(),f=(0,aw.v)(),g=(0,ef.zy)(),v=(0,aE.BV)(),_=(0,ak.y_)(),b=v&&_;l[0]!==v||l[1]!==g?(e=v&&(0,ak.zY)(g),l[0]=v,l[1]=g,l[2]=e):e=l[2];let j=e;l[3]!==v||l[4]!==g?(t=v&&(0,ak.E1)(g),l[3]=v,l[4]=g,l[5]=t):t=l[5];let S=t,C=(0,ak.iI)(),N=eE.W.spacesV3UI;(0,aE.e9)(v);let{isFloating:w,isExpanded:I,isVisible:k,sidebarRef:E,containerRef:T,toggleSidebar:A}=function(){let e,t,a,n,r,i,s,o=(0,p.c)(17),[l,c]=(0,x.useState)(window.innerWidth<=768);o[0]===Symbol.for("react.memo_cache_sentinel")?(e=aI.J.getImmersiveSidebarCollapsedState()??!0,o[0]=e):e=o[0];let[d,u]=(0,x.useState)(e),[m,h]=(0,x.useState)(!1),f=(0,x.useRef)(null),g=(0,x.useRef)(null);o[1]!==d||o[2]!==l||o[3]!==m?(t=()=>{if(l)h(!m);else{let e=!d;u(e),aI.J.setImmersiveSidebarCollapsedState(e)}},o[1]=d,o[2]=l,o[3]=m,o[4]=t):t=o[4];let y=t;return o[5]!==l?(a=()=>{if(!g.current)return;let e=()=>{let e=g.current?.clientWidth;if(void 0===e)return;let t=e<=768;c(t),t&&!l&&h(!1)},t=new ResizeObserver(e);return t.observe(g.current),e(),()=>{t.disconnect()}},n=[l],o[5]=l,o[6]=a,o[7]=n):(a=o[6],n=o[7]),(0,x.useEffect)(a,n),o[8]!==l||o[9]!==m?(r=()=>{if(l&&m&&f.current){let e=e=>{f.current&&!f.current.contains(e.target)&&h(!1)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e,{passive:!0}),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}},i=[l,m],o[8]=l,o[9]=m,o[10]=r,o[11]=i):(r=o[10],i=o[11]),(0,x.useEffect)(r,i),o[12]!==d||o[13]!==l||o[14]!==m||o[15]!==y?(s={isFloating:l,isExpanded:d,isVisible:m,sidebarRef:f,containerRef:g,toggleSidebar:y},o[12]=d,o[13]=l,o[14]=m,o[15]=y,o[16]=s):s=o[16],s}(),L=(0,x.useRef)(null),[D,R]=(0,x.useState)(pC);l[6]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{if(!L.current)return;let e=()=>{let e=L.current?.clientWidth;void 0!==e&&e>0&&R(e<=1152)},t=new ResizeObserver(e);return t.observe(L.current),e(),()=>t.disconnect()},n=[],l[6]=a,l[7]=n):(a=l[6],n=l[7]),(0,x.useEffect)(a,n),aL();let P=!f&&D&&pv.fullscreenPreviewPane,O=f?.fullscreenPreviewArea&&pv.fullscreenPluginPane;return l[8]!==P||l[9]!==O?(r=(0,y.$)(pv.container,P,O),l[8]=P,l[9]=O,l[10]=r):r=l[10],l[11]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)("span",{"data-favicon-override":"/favicons/favicon-copilot.svg"}),l[11]=i):i=l[11],l[12]!==f||l[13]!==T||l[14]!==C||l[15]!==d||l[16]!==j||l[17]!==S||l[18]!==I||l[19]!==w||l[20]!==D||l[21]!==b||l[22]!==k||l[23]!==g||l[24]!==h||l[25]!==E||l[26]!==c.selectedThreadID||l[27]!==u||l[28]!==A?(s=f?.PageComponent&&f?.matchPage?.(g.pathname)?(0,m.jsx)("div",{className:pv.main,children:(0,m.jsx)(cb,{plugin:f})}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:pv.left,ref:T,hidden:D&&h,children:[j||S?null:(0,m.jsx)(pj,{isVisible:k,isExpanded:I,isFloating:w,sidebarRef:E,onToggle:A}),(0,m.jsx)("div",{className:pv.main,children:b?N?(0,m.jsx)(pp,{copilotSpaces:d}):(0,m.jsx)(mG,{copilotSpaces:d}):N&&C&&(j||S)?(0,m.jsx)(m9,{customCopilotId:C,selectedThreadID:c.selectedThreadID,textAreaRef:u}):j?(0,m.jsx)(m0,{}):S?(0,m.jsx)(mU,{}):f?.ViewComponent&&f?.matchView?.(g.pathname)?(0,m.jsx)(cj,{plugin:f}):C?N?(0,m.jsx)(m9,{customCopilotId:C,selectedThreadID:c.selectedThreadID,textAreaRef:u}):(0,m.jsx)(d6,{customCopilotId:C,selectedThreadID:c.selectedThreadID,textAreaRef:u}):(0,m.jsx)(c_,{isMobile:D,textAreaRef:u},c.selectedThreadID)})]}),(0,m.jsx)("div",{className:(0,y.$)(pv.previewPane,h&&pv.active),children:(0,m.jsx)("div",{className:(0,y.$)(pv.viewer),children:(0,m.jsx)(sF,{returnFocusRef:u})})})]}),l[12]=f,l[13]=T,l[14]=C,l[15]=d,l[16]=j,l[17]=S,l[18]=I,l[19]=w,l[20]=D,l[21]=b,l[22]=k,l[23]=g,l[24]=h,l[25]=E,l[26]=c.selectedThreadID,l[27]=u,l[28]=A,l[29]=s):s=l[29],l[30]!==r||l[31]!==s?(o=(0,m.jsxs)("div",{className:r,"data-testid":"chat-layout","data-hpc":!0,ref:L,children:[i,s]}),l[30]=r,l[31]=s,l[32]=o):o=l[32],o}function pC(){return window.innerWidth<=1152}try{pS.displayName||(pS.displayName="Layout")}catch{}function pN(e){let t=(0,ef.zy)(),a=eg.fV.pathname;return(!a||eE.W.improvedNavigation)&&(a=t.pathname),(0,x.useMemo)(()=>{let t=e.find(e=>e.routes?.some(e=>e.test(a)));return t?t.id:null},[a,e])}var pw=a(98013);let pI=(0,au.E7)();function pk(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(ax.RelayEnvironmentProvider,{environment:pI,children:(0,m.jsx)(pE,{})}),t[0]=e):e=t[0],e}function pE(){let e=(0,p.c)(2),t=(0,V.X)();if(t?.copilotChatSettingEnabled){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(pT,{children:(0,m.jsx)(pL,{})}),e[0]=t):t=e[0],t}{let t;return e[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(aS,{}),e[1]=t):t=e[1],t}}function pT(e){let t,a,n,r,i,s,o=(0,p.c)(42),{children:l}=e,c=(0,V.X)(),d=sz(),u=c.requestedTopic;if((0,ek.P)(u)){let e,a;o[0]!==u?(e=(0,ek.UU)(u),o[0]=u,o[1]=e):e=o[1],o[2]!==e?(a={refs:[e],topic:void 0},o[2]=e,o[3]=a):a=o[3],t=a}else if(c.reference){let e,a;o[4]!==c.reference?(e=[c.reference],o[4]=c.reference,o[5]=e):e=o[5],o[6]!==u||o[7]!==e?(a={refs:e,topic:u},o[6]=u,o[7]=e,o[8]=a):a=o[8],t=a}else{let e,a;o[9]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[9]=e):e=o[9],o[10]!==u?(a={refs:e,topic:u},o[10]=u,o[11]=a):a=o[11],t=a}let{refs:h,topic:f}=t;if(o[12]!==c.agentsEnabled||o[13]!==c.apiURL||o[14]!==c.graphqlApiUrl||o[15]!==c.loopsClientUrl||o[16]!==c.previewUrl||o[17]!==c.realIp||o[18]!==c.sparkEnabled||o[19]!==c.ssoOrganizations){if(n=[],eE.W.loopsPlugin){let e;o[21]!==c.apiURL||o[22]!==c.graphqlApiUrl||o[23]!==c.loopsClientUrl||o[24]!==c.previewUrl||o[25]!==c.realIp||o[26]!==c.ssoOrganizations?(e=new LoopsPlugin(c.apiURL,c.graphqlApiUrl,c.loopsClientUrl,c.ssoOrganizations.map(pA),c.previewUrl,c.realIp),o[21]=c.apiURL,o[22]=c.graphqlApiUrl,o[23]=c.loopsClientUrl,o[24]=c.previewUrl,o[25]=c.realIp,o[26]=c.ssoOrganizations,o[27]=e):e=o[27],n.push(e)}if(c.sparkEnabled){let e;o[28]===Symbol.for("react.memo_cache_sentinel")?(e=new SparkPlugin,o[28]=e):e=o[28],n.push(e)}if(c.agentsEnabled){let e;o[29]===Symbol.for("react.memo_cache_sentinel")?(e=new AgentsPlugin,o[29]=e):e=o[29],n.push(e)}o[12]=c.agentsEnabled,o[13]=c.apiURL,o[14]=c.graphqlApiUrl,o[15]=c.loopsClientUrl,o[16]=c.previewUrl,o[17]=c.realIp,o[18]=c.sparkEnabled,o[19]=c.ssoOrganizations,o[20]=n}else n=o[20];let g=pN(a=n);return o[30]!==l?(r=(0,m.jsx)(av.BH,{children:l}),o[30]=l,o[31]=r):r=o[31],o[32]!==c||o[33]!==g||o[34]!==h||o[35]!==r||o[36]!==d||o[37]!==f?(i=(0,m.jsx)($.Mj,{workerPath:c.searchWorkerFilePath,threadId:d,pluginId:g,refs:h,mode:"immersive",topic:f,ssoOrganizations:c.ssoOrganizations,copilotUpsellBannerDismissed:c.copilotUpsellBannerDismissed,copilotChatPayload:c,children:r}),o[32]=c,o[33]=g,o[34]=h,o[35]=r,o[36]=d,o[37]=f,o[38]=i):i=o[38],o[39]!==a||o[40]!==i?(s=(0,m.jsx)(as,{children:(0,m.jsx)(am.LB,{children:(0,m.jsx)(eI.Hb,{plugins:a,children:i})})}),o[39]=a,o[40]=i,o[41]=s):s=o[41],s}function pA(e){return e.id}function pL(){let e,t,a=(0,p.c)(2);!function(){let e,t,a=(0,p.c)(7),n=sz(),r=(0,x.useRef)(!0),i=(0,x.useRef)(null),s=(0,H.b)(),{threads:o,selectedThreadID:l}=(0,$.Pk)(),c=sU(),{selectedThreadID:d,sharedThreadChannel:u}=(0,$.Pk)(),m=(0,H.b)();(0,pw.x)(u,()=>{m.fetchSharedThreadMessages(d)}),a[0]!==c||a[1]!==s||a[2]!==l||a[3]!==n||a[4]!==o?(e=()=>{if(r.current){r.current=!1,i.current=n,c?s.fetchSharedThreadMessages(l):s.fetchMessages(l);return}if(i.current!==n){if(i.current=n,n===l)return;let e=n&&o?.get(n);s.selectThread(e||null,{includeThreads:!1,clearTopic:!0})}},t=[s,n,o,l,c],a[0]=c,a[1]=s,a[2]=l,a[3]=n,a[4]=o,a[5]=e,a[6]=t):(e=a[5],t=a[6]),(0,x.useEffect)(e,t)}(),function(){let e,t,a=(0,p.c)(8),{selectedThreadID:n}=(0,$.Pk)(),r=(0,aw.v)(),i=(0,ly.M)((0,ef.Zp)());a[0]!==i||a[1]!==r?.skipSyncRouteToThread||a[2]!==n?(e=()=>{if(!n||r?.skipSyncRouteToThread)return;let e=`${ek.Jz}/c/${n}`,t=`${ek.Jz}/share/${n}`,a=window.location.pathname;a.startsWith(e)||a.startsWith(t)||i.current(e)},a[0]=i,a[1]=r?.skipSyncRouteToThread,a[2]=n,a[3]=e):e=a[3];let s=r?.skipSyncRouteToThread;a[4]!==i||a[5]!==n||a[6]!==s?(t=[i,s,n],a[4]=i,a[5]=n,a[6]=s,a[7]=t):t=a[7],(0,x.useEffect)(e,t)}();let n=(0,p.c)(3),r=(0,H.b)();if(n[0]!==r?(e=()=>{let e=()=>{window.location.href.includes("/r/")?(r.showTopicPicker(!1),r.selectThread(null)):window.location.href.includes("/c/")||(r.showTopicPicker(!0),r.selectThread(null))};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},t=[r],n[0]=r,n[1]=e,n[2]=t):(e=n[1],t=n[2]),(0,x.useEffect)(e,t),!function(){let e,t,a=(0,p.c)(6),n=pN((0,eI.qw)()),r=sz(),{activePlugin:i}=(0,$.bP)("activePlugin"),s=(0,H.b)();a[0]!==i||a[1]!==s||a[2]!==n||a[3]!==r?(e=()=>{r||(i??null)!==n&&s.selectPlugin(n)},t=[i,s,n,r],a[0]=i,a[1]=s,a[2]=n,a[3]=r,a[4]=e,a[5]=t):(e=a[4],t=a[5]),(0,x.useEffect)(e,t)}(),eE.W.immersiveAppShell){let e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(pS,{}),a[0]=e):e=a[0],e}{let e;return a[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(px,{}),a[1]=e):e=a[1],e}}try{pk.displayName||(pk.displayName="CopilotImmersive")}catch{}try{pE.displayName||(pE.displayName="CopilotImmersiveNoRelay")}catch{}try{pT.displayName||(pT.displayName="CopilotImmersiveProviders")}catch{}try{pL.displayName||(pL.displayName="Immersive")}catch{}(0,u.o)("copilot-immersive-v1",()=>({App:h,routes:[(0,d.a)({path:"/copilot",Component:pk,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/c/:threadID",Component:pk,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/d/:docsetName",Component:pk}),(0,d.a)({path:"/copilot/r/:owner/:repository",Component:pk}),(0,d.a)({path:"/copilot/share/:threadID",Component:pk}),(0,d.a)({path:"/copilot/loop/share",Component:pk,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/loops",Component:pk,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/l/:loopID",Component:pk,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/workbench",Component:pk,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/spark",Component:pk,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/spaces",Component:pk}),(0,d.a)({path:"/copilot/spaces/:spaceID",Component:pk}),(0,d.a)({path:"/copilot/spaces/:owner/:spaceNumber",Component:pk}),(0,d.a)({path:"/copilot/spaces/:owner/:spaceNumber/edit",Component:pk}),(0,d.a)({path:"/copilot/spaces/:spaceID/edit",Component:pk}),(0,d.a)({path:"/copilot/spaces/new",Component:pk}),(0,d.a)({path:"/copilot/agents",Component:pk})]}))},99156:(e,t,a)=>{a.d(t,{Io:()=>n});let n=[{id:"dummy-1",dummy:!0,title:"Edit writing",description:"Update writing to make it more engaging",updatedAt:0x19814ddb7a4,nodes:[{id:"1a",title:"Your writing",description:"The writing you want to edit",type:"text",metadata:{inputType:"text"},content:`There is huge potential in building complex, repeatable pipelines that take advantage of LLM capabilities. A way for anyone to create and share tools. A few examples:

- Scientists sharing workflows for turning conference notes into a queryable artifact
- Scientists creating a pipeline for polishing a draft to adhere to proposal writing requirements
- Developers building a \u{201C}check for security flaws\u{201D} pipeline, accessible via API / vscode extension
- Library maintainers creating a \u{201C}make a new codebase with Next.js" or \u{201C}add Tailwind to your codebase\u{201D} pipeline
- Artists building a pipeline to generate images of a certain style. Or process a sketch into a branded image.
- Generating a customized analysis of all of a lawyer\u{2019}s cases
- Summarize medical research on a topic, using only the most trustable sources

I wager there\u{2019}s a huge market in building and discovering pipelines, and a good implementation will look a bit like ChatGPT with people of many stripes building and using them.

GitHub is the right place for this kind of ecosystem for a few reasons:

- It ties into the spirit of Open Source
- It already has a huge audience to help with the cold start problem
- It mirror\u{2019}s GitHub\u{2019}s mission to make \u{201C}code\u{201D} accessible to a larger audience and the platform valuable to more than just developers. The future will look like people of any occupation \u{201C}writing code\u{201D} (really, just building things with logic)`},{id:"2a",title:"Edit guide",description:"The guide on how to edit writing",type:"text",metadata:{inputType:"text"},content:`# Academish Voice

pvh / Aug 2022

Our publications follow what we call \u{201C}*academish*\u{201D} voice. We follow a largely academic style in our writing but avoid certain academic tendencies.

## Academic Style

- **Make no claims without support.** If you have made an unsupported claim consider its centrality to your argument. If \u{201C}many developers agree\u{201D}, we should be able to link to a source or describe how we know that. If you can\u{2019}t defend it, you should get rid of it.
- **Avoid absolutist language.** It\u{2019}s not \u{201C}the main problem\u{201D}, it\u{2019}s \u{201C}a problem\u{201D}. (Unless, of course, you can defend the claim.)
- **Be precise and specific with your descriptions.** Instead of saying something \u{201C}feels great\u{201D}, describe how it feels. Don\u{2019}t say something \u{201C}is a problem\u{201D} unless you describe what the problem is or to whom. If you\u{2019}re tempted to say something vague because you\u{2019}re not sure, either do enough research until you\u{2019}re sure, or don\u{2019}t say it.
- **Avoid hyperbole.** Use adjectives to add precision, not to persuade. Claiming \u{201C}immense benefits\u{201D} is only appropriate if you have developed a commercially viable fusion power plant. Delete words that are only for emphasis, and keep only those that add substance (e.g. quantify).
- **Structure your writing for incremental reading.** Don\u{2019}t bury the lede. A reader should be able to understand the goals and conclusions of an essay by reading the first couple of paragraphs. Individual sections should briefly reiterate any important material and/or link back to where it is introduced. This may feel repetitive at times but aids readers who take several sessions to read a piece or who jump straight to the sections that interest them.
- **Give credit to others.** Cite earlier work. Link to sources for terms and ideas. Give thanks to contributors, reviewers, and advisors.
- **Be humble and transparent about shortcomings and problems.** We want readers to build on our work, not buy our product.

## Ink & Switch Style

- **Assume the reader is an interested generalist.** Explain jargon. Academic writing is dense with domain terminology because it assumes readers are \u{201C}up to date on the field.\u{201D}  Ink & Switch Essays make use of marginalia in what we call \u{201C}asides\u{201D} to define uncommon terminology. Concretely, you don\u{2019}t need to gloss \u{201C}HTML\u{201D}, but you should probably gloss \u{201C}CRDT\u{201D}.
- **Carefully consider section headings.** Headings should legibly communicate the shape of the essay and serve as a roadmap for a reader to skip to the part of an essay that\u{2019}s most interesting to them. Similarly, avoid including unrelated material in a section with a particular title. If a user already knows \u{201C}How CRDTs Work\u{201D} then they shouldn\u{2019}t miss (much) important information about the project by skipping reading that section.
- **Embrace interactive demonstrations, animations, illustration, and videos.** Sometimes an illustration or demo can offer more clarity on a topic than text alone. As long as the content is self-contained and doesn\u{2019}t rely on external sources, it should be legible for many years to come and viewable offline.
- **It\u{2019}s okay to share hunches and beliefs as long as they\u{2019}re appropriately labeled.** Don\u{2019}t be shy about drawing conclusions, just be clear about the degree of confidence you have and where it comes from.
- **Ensure content looks good in PDF / printed form.** Obviously you lose the elements above, but the PDF version of a paper shouldn\u{2019}t have giant \u{25B6}\u{FE0F} icons obscuring an image. Interactive figures should display a meaningful static view.
- **Use \u{201C}asides\u{201D} for supportive content and marginalia.** Asides can expand on references to other work, link out to related projects, or just share interesting context or historical tidbits.
- **Deploy persuasive or emotional writing appropriately.** You can be enthusiastic in describing your goals but be modest in how you describe your solutions.
- **Keep it classy.** We don\u{2019}t dismiss other people\u{2019}s work or insult their products. Everything around you was made by someone working really hard on it. If we have found a better way, we should show gratitude to those who helped us realize the path forward and humility about our contributions.
- **Sweat the details.** Make sure your colors are carefully chosen. Images should be clear and at the right bit rate. Choose your words carefully. Interactions should be delightful.

The result of these elements should be an essay that is confident, accurate, and readable to almost anyone with a background in technology. Our essays are often long (probably too long) but should consistently reward patient reading and serve as a reference to their readers for many years to come.

---

## About this page

This document aims to articulate the stylistic elements and voice of Ink & Switch Essays.

### **September 1, 2022**

@Martin Kleppmann added some details on academic style.

### **August 17, 2022**

@Todd Matthews made some formatting edits for continuity and scanability.

### **August 16, 2022**

@Peter van Hardenberg created this document. Began with @Adam Wiggins\u{2019} "Essay Playbook" and added notes about Academish Voice, which aim to capture the stylistic elements he looks for when I reading essay drafts. Many of these elements came from @Martin Kleppmann  and @Adam Wiggins reviews of my past writing, so credit to them. This is probably quite useful for everyone working on an essay right now, but is probably not comprehensive. If I've missed anything or anything here is controversial or unclear please feel free to inquire.`},{id:"3a",title:"Edited writing",description:"Writing with suggested changes",type:"prompt",content:"You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}."}]},{id:"dummy-2",dummy:!0,title:"Document this function",description:"Document this function so it's easy to understand",updatedAt:0x19814ddb7a4,nodes:[{id:"1b",title:"Function to document",description:"The function to document",content:`export function createNodePrompt(node: Node, nodeMap: Record<string, Node>): string {
  let content = node.content;
  const regex = /{{([\\w-]+)}}/g;
  let match;

  while ((match = regex.exec(content)) !== null) {
    const id = match[1];
    const referencedNode = nodeMap[id];
    if (referencedNode) {
      const replacementContent = createNodePrompt(referencedNode, nodeMap);
      content = content.replace(match[0], replacementContent);
    }
  }

  return content;
}`,type:"code"},{id:"2b",title:"Documentation guide",description:"The documentation for the function",content:`Minimum Viable Documentation
A small set of fresh and accurate docs is better than a large assembly of \u{201C}documentation\u{201D} in various states of disrepair.

Write short and useful documents. Cut out everything unnecessary, including out-of-date, incorrect, or redundant information. Also make a habit of continually massaging and improving every doc to suit your changing needs. Docs work best when they are alive but frequently trimmed, like a bonsai tree.

See also these Agile Documentation best practices.

Update Docs with Code
Change your documentation in the same CL as the code change. This keeps your docs fresh, and is also a good place to explain to your reviewer what you\u{2019}re doing.

A good reviewer can at least insist that docstrings, header files, README.md files, and any other docs get updated alongside the CL.

Delete Dead Documentation
Dead docs are bad. They misinform, they slow down, they incite despair in engineers and laziness in team leads. They set a precedent for leaving behind messes in a code base. If your home is clean, most guests will be clean without being asked.

Just like any big cleaning project, it\u{2019}s easy to be overwhelmed. If your docs are in bad shape:

Take it slow, doc health is a gradual accumulation.
First delete what you\u{2019}re certain is wrong, ignore what\u{2019}s unclear.
Get your whole team involved. Devote time to quickly scan every doc and make a simple decision: Keep or delete?
Default to delete or leave behind if migrating. Stragglers can always be recovered.
Iterate.
Prefer the Good Over the Perfect
Documentation is an art. There is no perfect document, there are only proven methods and prudent guidelines. See Better is better than best.

Documentation is the Story of Your Code
Writing excellent code doesn\u{2019}t end when your code compiles or even if your test coverage reaches 100%. It\u{2019}s easy to write something a computer understands, it\u{2019}s much harder to write something both a human and a computer understand. Your mission as a Code Health-conscious engineer is to write for humans first, computers second. Documentation is an important part of this skill.

There\u{2019}s a spectrum of engineering documentation that ranges from terse comments to detailed prose:

Meaningful names: Good naming allows the code to convey information that would otherwise be relegated to comments or documentation. This includes nameable entities at all levels, from local variables to classes, files, and directories.

Inline comments: The primary purpose of inline comments is to provide information that the code itself cannot contain, such as why the code is there.

Method and class comments:

Method API documentation: The header / Javadoc / docstring comments that say what methods do and how to use them. This documentation is the contract of how your code must behave. The intended audience is future programmers who will use and modify your code.

It is often reasonable to say that any behavior documented here should have a test verifying it. This documentation details what arguments the method takes, what it returns, any \u{201C}gotchas\u{201D} or restrictions, and what exceptions it can throw or errors it can return. It does not usually explain why code behaves a particular way unless that\u{2019}s relevant to a developer\u{2019}s understanding of how to use the method. \u{201C}Why\u{201D} explanations are for inline comments. Think in practical terms when writing method documentation: \u{201C}This is a hammer. You use it to pound nails.\u{201D}

Class / Module API documentation: The header / Javadoc / docstring comments for a class or a whole file. This documentation gives a brief overview of what the class / file does and often gives a few short examples of how you might use the class / file.

Examples are particularly relevant when there\u{2019}s several distinct ways to use the class (some advanced, some simple). Always list the simplest use case first.

README.md: A good README.md orients the new user to the directory and points to more detailed explanation and user guides:

What is this directory intended to hold?
Which files should the developer look at first? Are some files an API?
Who maintains this directory and where I can learn more?
See the README.md guidelines.

docs: The contents of a good docs directory explain how to:

Get started using the relevant API, library, or tool.
Run its tests.
Debug its output.
Release the binary.
Design docs, PRDs: A good design doc or PRD discusses the proposed implementation at length for the purpose of collecting feedback on that design. However, once the code is implemented, design docs should serve as archives of these decisions, not as half-correct docs (they are often misused).

Other external docs: Some teams maintain documentation in other locations, separate from the code, such as Google Sites, Drive, or wiki. If you do maintain documentation in other locations, you should clearly point to those locations from your project directory (for example, by adding an obvious link to the location from your project\u{2019}s README.md).

Duplication is Evil
Do not write your own guide to a common Google technology or process. Link to it instead. If the guide doesn\u{2019}t exist or it\u{2019}s badly out of date, submit your updates to the appropriate directory or create a package-level README.md. Take ownership and don\u{2019}t be shy: Other teams will usually welcome your contributions.`,type:"text",metadata:{inputType:"text"}},{id:"3b",title:"My personal skillset",description:"",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",metadata:{inputType:"text"}},{id:"4b",title:"Documented code",description:"The code with documentation",content:`You're documenting your code for your team.

Update this code: {{1b}}

Using this guide: {{2b}}]

And incorporate {{3b}}`,type:"prompt"},{id:"5b",title:"Function tests",description:"Generate a test for the code",content:"You're generating a Jest test for {{4b}}. Our testing guidelines: {{6b}}",type:"prompt"},{id:"6b",title:"Testing guidelines",description:"The guidelines for testing",content:`The Test Anatomy

\u{26AA} \u{FE0F} 1.1 Include 3 parts in each test name
\u{2705} Do: A test report should tell whether the current application revision satisfies the requirements for the people who are not necessarily familiar with the code: the tester, the DevOps engineer who is deploying and the future you two years from now. This can be achieved best if the tests speak at the requirements level and include 3 parts:

(1) What is being tested? For example, the ProductsService.addNewProduct method

(2) Under what circumstances and scenario? For example, no price is passed to the method

(3) What is the expected result? For example, the new product is not approved


\u{274C} Otherwise: A deployment just failed, a test named \u{201C}Add product\u{201D} failed. Does this tell you what exactly is malfunctioning?


\u{1F447} Note: Each bullet has code examples and sometime also an image illustration. Click to expand



\u{26AA} \u{FE0F} 1.2 Structure tests by the AAA pattern
\u{2705} Do: Structure your tests with 3 well-separated sections Arrange, Act & Assert (AAA). Following this structure guarantees that the reader spends no brain-CPU on understanding the test plan:

1st A - Arrange: All the setup code to bring the system to the scenario the test aims to simulate. This might include instantiating the unit under test constructor, adding DB records, mocking/stubbing on objects, and any other preparation code

2nd A - Act: Execute the unit under test. Usually 1 line of code

3rd A - Assert: Ensure that the received value satisfies the expectation. Usually 1 line of code


\u{274C} Otherwise: Not only do you spend hours understanding the main code but what should have been the simplest part of the day (testing) stretches your brain


\u{26AA} \u{FE0F}1.3 Describe expectations in a product language: use BDD-style assertions
\u{2705} Do: Coding your tests in a declarative-style allows the reader to get the grab instantly without spending even a single brain-CPU cycle. When you write imperative code that is packed with conditional logic, the reader is forced to exert more brain-CPU cycles. In that case, code the expectation in a human-like language, declarative BDD style using expect or should and not using custom code. If Chai & Jest doesn't include the desired assertion and it\u{2019}s highly repeatable, consider extending Jest matcher (Jest) or writing a custom Chai plugin

\u{274C} Otherwise: The team will write less tests and decorate the annoying ones with .skip()


\u{26AA}  1.4 Stick to black-box testing: Test only public methods
\u{2705} Do: Testing the internals brings huge overhead for almost nothing. If your code/API delivers the right results, should you really invest your next 3 hours in testing HOW it worked internally and then maintain these fragile tests? Whenever a public behavior is checked, the private implementation is also implicitly tested and your tests will break only if there is a certain problem (e.g. wrong output). This approach is also referred to as behavioral testing. On the other side, should you test the internals (white box approach) \u{2014} your focus shifts from planning the component outcome to nitty-gritty details and your test might break because of minor code refactors although the results are fine - this dramatically increases the maintenance burden

\u{274C} Otherwise: Your tests behave like the boy who cried wolf: shouting false-positive cries (e.g., A test fails because a private variable name was changed). Unsurprisingly, people will soon start to ignore the CI notifications until someday, a real bug gets ignored\u{2026}


\u{26AA}  1.5 Choose the right test doubles: Avoid mocks in favor of stubs and spies
\u{2705} Do: Test doubles are a necessary evil because they are coupled to the application internals, yet some provide immense value (Read here a reminder about test doubles: mocks vs stubs vs spies).

Before using test doubles, ask a very simple question: Do I use it to test functionality that appears, or could appear, in the requirements document? If not, it\u{2019}s a white-box testing smell.

For example, if you want to test that your app behaves reasonably when the payment service is down, you might stub the payment service and trigger some \u{2018}No Response\u{2019} return to ensure that the unit under test returns the right value. This checks our application behavior/response/outcome under certain scenarios. You might also use a spy to assert that an email was sent when that service is down \u{2014} this is again a behavioral check which is likely to appear in a requirements doc (\u{201C}Send an email if payment couldn\u{2019}t be saved\u{201D}). On the flip side, if you mock the Payment service and ensure that it was called with the right JavaScript types \u{2014} then your test is focused on internal things that have nothing to do with the application functionality and are likely to change frequently

\u{274C} Otherwise: Any refactoring of code mandates searching for all the mocks in the code and updating accordingly. Tests become a burden rather than a helpful friend



\u{26AA} 1.6 Don\u{2019}t \u{201C}foo\u{201D}, use realistic input data
\u{2705} Do: Often production bugs are revealed under some very specific and surprising input \u{2014} the more realistic the test input is, the greater the chances are to catch bugs early. Use dedicated libraries like Chance or Faker to generate pseudo-real data that resembles the variety and form of production data. For example, such libraries can generate realistic phone numbers, usernames, credit cards, company names, and even \u{2018}lorem ipsum\u{2019} text. You may also create some tests (on top of unit tests, not as a replacement) that randomize fakers' data to stretch your unit under test or even import real data from your production environment. Want to take it to the next level? See the next bullet (property-based testing).

\u{274C} Otherwise: All your development testing will falsely show green when you use synthetic inputs like \u{201C}Foo\u{201D}, but then production might turn red when a hacker passes-in a nasty string like \u{201C}@3e2ddsf . ##\u{2019} 1 fdsfds . fds432 AAAA\u{201D}

`,type:"text",metadata:{inputType:"text"}},{id:"7b",title:"Test results",description:"Run the test for the code",content:"You're running tests for {{5b}}. Respond with the results of the tests.",type:"prompt"},{id:"8",title:"Documented and tested code",description:"The code with documentation and test",content:`Here's the documented code: {{4b}}.

Here's the {{5b}} and the {{7b}}.

Respond with "\u{2705} OK" if the tests all pass, and show a code block with the documented code and tests.`,type:"prompt"}]},{id:"dummy-3",dummy:!0,title:"Generate a course teaching me how this code works",description:"Generate a course teaching me how this code works",updatedAt:0x19814ddb7a4,nodes:[{id:"1c",title:"Code to explain",description:"The code to explain",content:`import {ticks, tickIncrement} from "d3-array";
import continuous, {copy} from "./continuous.js";
import {initRange} from "./init.js";
import tickFormat from "./tickFormat.js";

export function linearish(scale) {
  var domain = scale.domain;

  scale.ticks = function(count) {
    var d = domain();
    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);
  };

  scale.tickFormat = function(count, specifier) {
    var d = domain();
    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);
  };

  scale.nice = function(count) {
    if (count == null) count = 10;

    var d = domain();
    var i0 = 0;
    var i1 = d.length - 1;
    var start = d[i0];
    var stop = d[i1];
    var prestep;
    var step;
    var maxIter = 10;

    if (stop < start) {
      step = start, start = stop, stop = step;
      step = i0, i0 = i1, i1 = step;
    }

    while (maxIter-- > 0) {
      step = tickIncrement(start, stop, count);
      if (step === prestep) {
        d[i0] = start
        d[i1] = stop
        return domain(d);
      } else if (step > 0) {
        start = Math.floor(start / step) * step;
        stop = Math.ceil(stop / step) * step;
      } else if (step < 0) {
        start = Math.ceil(start * step) / step;
        stop = Math.floor(stop * step) / step;
      } else {
        break;
      }
      prestep = step;
    }

    return scale;
  };

  return scale;
}

export default function linear() {
  var scale = continuous();

  scale.copy = function() {
    return copy(scale, linear());
  };

  initRange.apply(scale, arguments);

  return linearish(scale);
}`,type:"code"},{id:"2c",title:"My skillset",description:"My skillset",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",metadata:{inputType:"text"}},{id:"3c",title:"Course outline",description:"The outline of the course",content:"You're generating a course teaching me how to understand {{1c}}. I have the following skillset: {{2c}}. Keep it short and concise, with 2-3 sections.",type:"prompt"},{id:"4c",title:"Course content",description:"The content of the course",content:`Generate a short walkthrough that teaches me how to understand {{1c}}. I have the following skillset: {{2c}}.

Flesh out the {{3c}}. Respond with a short walkthrough, using code blocks for code samples.`,type:"prompt"}]},{id:"dummy-4",dummy:!0,title:"Generate app name",description:"Generate and validate potential names for your app",updatedAt:0x19814ddb7a4,nodes:[{id:"1d",title:"App description",description:"Describe your app's purpose and target audience",type:"text",metadata:{inputType:"text"},content:"An email app that uses AI to help you write emails faster."},{id:"2d",title:"Generate names",description:"Generate potential names based on description",type:"prompt",content:`You're a creative app naming expert. Generate 10 potential names for an app based on this description: {{1d}}

Rules for the names:
- Keep them short and memorable
- Make sure they're easy to spell
- Consider domain name availability
- Avoid trademarked terms

Format: a JSON array with one name per line`},{id:"3d",title:"Check domain availability",description:"Check if domains are available for the generated names",type:"code",content:`// This code checks domain availability using DNS lookup
  const nameList = {{2d}}

  const results = [];

  for (const name of nameList) {
    const cleanName = name.toLowerCase().replace(/[^a-z0-9]/g, '');
    const domain = cleanName + '.com';

    try {
      // Try to resolve the domain - if it fails, domain might be available
      const response = await fetch(\`https://dns.google/resolve?name=\${domain}\`);
      const data = await response.json();

      results.push({
        name: name,
        domain: domain,
        available: data.Status === 3 || !data.Answer // NXDOMAIN status or no answer means likely available
      });
    } catch (error) {
      results.push({
        name: name,
        domain: domain,
        error: 'Failed to check availability'
      });
    }
  }

  return results;
`}]},{id:"dummy-5",dummy:!0,title:"Wikipedia",description:"Generate a wiki article on a topic or question",updatedAt:0x19814ddb7a4,nodes:[{id:"1e",title:"Topic or question",description:"The topic or question to generate a wiki article on",type:"text",metadata:{inputType:"text"},content:"When do babies start to crawl?"},{id:"2e",title:"Split into topics",description:"Split the topic or question into topics",type:"text",metadata:{inputType:"text"},content:`You're creating a write-up on a concept. You need to split it into 5-6 sections that cover interesting aspects of the concept. Respond with a JSON array with one string per topic.

For example:
Concept: Dogs as pets
Topics:
["Dog breeds", "Dog training", "Dog costs", "Dog health", "Dog accessories"]


Concept: {{1e}}
Topics:`},{id:"3e",title:"Generate article",description:"Generate a wiki article on the concept",type:"prompt",content:"You're a wiki article generator. Generate a wiki article on the concept: {{1e}}. Split it into sections: {{2e}} with a title, a bolded key statement, and a list or 2 paragraphs."},{id:"4e",title:"Image",description:"An image for the article",type:"prompt",content:"Generate an ascii art image for the article: {{3e}}"}]},{id:"dummy-6",dummy:!0,title:"Compare two prompts",description:"Compare the performance of two prompts",updatedAt:0x19814ddb7a4,nodes:[{id:"1f",title:"Prompt 1",description:"The first prompt to compare",type:"prompt",content:"Make me a haiku about the color blue"},{id:"2f",title:"Prompt 2",description:"The second prompt to compare",type:"prompt",content:"You are a haiku generator. Make a haiku about the color blue. Your job depends on it."},{id:"3f",title:"Important metrics",description:"The important metrics to compare the prompts on",type:"text",metadata:{inputType:"text"},content:"Relevance, creativity, accuracy, completeness, and style"},{id:"4f",title:"Compare",description:"Compare the performance of the two prompts",type:"prompt",content:"For each of the {{3f}}, compare the two prompts: {{1f}} and {{2f}}. Respond with a JSON array with one object per metric, with the metric name and a winner key that says which prompt is better (just say 1 or 2)."}]}]},57915:(e,t,a)=>{a.d(t,{h:()=>c});var n=a(21728),r=a(97665),i=a(94747),s=a(5204),o=a(20126),l=a(58709);function c(){let e,t,a,c=(0,n.c)(7),d=(0,r.jE)(),u=(0,s.EY)();return c[0]!==u?(e=async e=>await u.deleteLoop(e),c[0]=u,c[1]=e):e=c[1],c[2]!==d?(t=(e,t)=>{e.success&&(d.removeQueries({queryKey:[l.M1,t]}),d.invalidateQueries({queryKey:[o.n]}))},c[2]=d,c[3]=t):t=c[3],c[4]!==e||c[5]!==t?(a={mutationFn:e,onSuccess:t},c[4]=e,c[5]=t,c[6]=a):a=c[6],(0,i.n)(a)}},84965:(e,t,a)=>{a.d(t,{P:()=>d});var n=a(21728),r=a(97665),i=a(94747),s=a(44263),o=a(5204),l=a(58709),c=a(19606);function d(){let e,t,a,d=(0,n.c)(8),u=(0,r.jE)(),m=(0,o.EY)();d[0]!==m?(e={mutationFn:async e=>{let{loopID:t,updateFn:a}=e;return await m.updateLoop(t,a)}},d[0]=m,d[1]=e):e=d[1];let p=(0,i.n)(e),h=(0,s.d)(p.mutate,500);d[2]!==h||d[3]!==u?(t=async(e,t)=>{let{loopID:a,updateFn:n}=e;await u.cancelQueries({queryKey:(0,l._I)(a,c.k)});let r=n(u.getQueryData((0,l._I)(a,c.k))??null);return u.setQueryData((0,l._I)(a,c.k),r),r.version&&u.setQueryData((0,l._I)(a,r.version),r),h({loopID:a,updateFn:n}),t?.onSuccess?.(),r},d[2]=h,d[3]=u,d[4]=t):t=d[4];let f=t;return d[5]!==f||d[6]!==p?(a={...p,mutate:f},d[5]=f,d[6]=p,d[7]=a):a=d[7],a}},20126:(e,t,a)=>{a.d(t,{C:()=>o,n:()=>s});var n=a(21728),r=a(97286),i=a(5204);let s="all-loops";function o(){let e,t,a=(0,n.c)(3),o=(0,i.EY)();return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=[s],a[0]=e):e=a[0],a[1]!==o?(t={queryKey:e,queryFn:async()=>{let e=await o.getAllLoops();if(!e.success)throw Error(e.error);return e.data},refetchOnMount:!0},a[1]=o,a[2]=t):t=a[2],(0,r.I)(t)}},70309:(e,t,a)=>{a.d(t,{Qk:()=>f,vx:()=>d,wu:()=>c});var n=a(21728),r=a(97286),i=a(5204),s=a(58709),o=a(10409),l=a(19606);function c(e,t,a){return["execution",e,t,a]}function d(){let e,t,a=(0,n.c)(6),{data:r}=(0,s._N)(l.k,h),{data:i}=(0,s._N)(l.k,p),{data:o}=(0,s._N)(l.k,u),d=r??"",m=i||l.k;return a[0]!==o?(e=o??[],a[0]=o,a[1]=e):e=a[1],a[2]!==d||a[3]!==m||a[4]!==e?(t=c(d,m,e),a[2]=d,a[3]=m,a[4]=e,a[5]=t):t=a[5],t}function u(e){return e?.nodes.map(m).sort()}function m(e){return e.id}function p(e){return e?.version}function h(e){return e?.id}function f(e){let t,a,d,u,m,p=(0,n.c)(18),{data:h}=(0,s._N)(l.k,v),{data:f}=(0,s._N)(l.k,x),{data:y}=(0,s._N)(l.k,g),_=(0,i.EY)(),b=h??"",j=f||l.k;p[0]!==y?(t=y??[],p[0]=y,p[1]=t):t=p[1],p[2]!==b||p[3]!==j||p[4]!==t?(a=c(b,j,t),p[2]=b,p[3]=j,p[4]=t,p[5]=a):a=p[5],p[6]!==y||p[7]!==h||p[8]!==f||p[9]!==_?(d=async()=>{if(!h||!y)return null;let e=await _.getExecution(h,f||l.k,l.q);if(!e.success)return null;let t=e.data,a=Object.keys(t.nodes).sort().every(e=>y.includes(e)),n=_.isExecutionRunning(t.id)===(0,o.y)(t);return a&&n?t:null},p[6]=y,p[7]=h,p[8]=f,p[9]=_,p[10]=d):d=p[10];let S=!!h&&!!y;return p[11]!==e?(u=e&&{select:e},p[11]=e,p[12]=u):u=p[12],p[13]!==a||p[14]!==d||p[15]!==S||p[16]!==u?(m={queryKey:a,queryFn:d,enabled:S,...u,staleTime:3e5},p[13]=a,p[14]=d,p[15]=S,p[16]=u,p[17]=m):m=p[17],(0,r.I)(m)}function g(e){return e?.nodes.map(y).sort()}function y(e){return e.id}function x(e){return e?.version}function v(e){return e?.id}},58709:(e,t,a)=>{a.d(t,{M1:()=>d,_I:()=>u,_N:()=>m});var n=a(21728),r=a(97665),i=a(97286),s=a(85788),o=a(5204),l=a(99156),c=a(19606);let d="loop";function u(e,t){return[d,e,t]}function m(e,t){let a,d,m,p,h=(0,n.c)(15),f=void 0===e?c.k:e,{loopID:g}=(0,s.g)(),y=(0,o.EY)(),x=(0,r.jE)(),v=g??"";h[0]!==v||h[1]!==f?(a=u(v,f),h[0]=v,h[1]=f,h[2]=a):a=h[2],h[3]!==g||h[4]!==x||h[5]!==y||h[6]!==f?(d=async()=>{if(!g)return null;let e=l.Io.find(e=>e.id===g)??null;if(e)return e;let t=await y.getLoop(g,f);return t.success?(t.data.version&&x.setQueryData(u(g,t.data.version),t.data),t.data):null},h[3]=g,h[4]=x,h[5]=y,h[6]=f,h[7]=d):d=h[7];let _=!!g;return h[8]!==t?(m=t&&{select:t},h[8]=t,h[9]=m):m=h[9],h[10]!==a||h[11]!==d||h[12]!==_||h[13]!==m?(p={queryKey:a,queryFn:d,enabled:_,...m,staleTime:3e5},h[10]=a,h[11]=d,h[12]=_,h[13]=m,h[14]=p):p=h[14],(0,i.I)(p)}},15943:(e,t,a)=>{a.d(t,{M:()=>o});var n=a(21728),r=a(97665),i=a(47311),s=a(58709);function o(){let e,t,a=(0,n.c)(5),o=(0,r.jE)(),l=(0,i.H_)();a[0]!==l||a[1]!==o?(e=e=>l?o.getQueryData([s.M1,l,void 0===e?"draft":e]):null,a[0]=l,a[1]=o,a[2]=e):e=a[2];let c=e;return a[3]!==c?(t={getLoop:c},a[3]=c,a[4]=t):t=a[4],t}},97385:(e,t,a)=>{a.d(t,{I:()=>i});var n=a(21728),r=a(58709);function i(e,t){let a=(0,n.c)(2),{data:i}=(0,r._N)(void 0===t?"draft":t,e);if(void 0===i){let t;return a[0]!==e?(t=e(void 0),a[0]=e,a[1]=t):t=a[1],t}return i}},74837:(e,t,a)=>{function n(e,t){return e?{...e,nodes:[...e.nodes||[],t],updatedAt:Date.now()}:e}function r(e,t,a){if(!e)return e;let r=e.nodes.findIndex(e=>e.id===t);if(-1===r)return n(e,{id:t,type:"text",title:"",description:"",content:"",...a});{let t=e.nodes[r];return{...e,nodes:[...e.nodes.slice(0,r),{...t,...a},...e.nodes.slice(r+1)],updatedAt:Date.now()}}}a.d(t,{k:()=>l});var i=a(40178),s=a(84965),o=a(15943);function l(){let{getLoop:e}=(0,o.M)(),{mutate:t,isPending:a}=(0,s.P)(),l=(0,i.F5)(),c=(e,a)=>{e&&t({loopID:e.id,updateFn:()=>e},{onSuccess:a})};return{addNode:t=>{let a=e();if(a)c(n(a,t),()=>l({type:"FOCUS_NODE",nodeId:t.id}))},removeNode:t=>{let a=e();if(a)c(a?{...a,nodes:a.nodes.filter(e=>e.id!==t),updatedAt:Date.now()}:a,()=>l({type:"FOCUS_NODE",nodeId:null}))},updateNode:(t,a)=>{let n=e();n&&c(r(n,t,a))},updateNodeContent:(t,a)=>{let n=e();n&&c(n?r(n,t,{content:a}):n)},updateLoop:e=>{c(e)},isPending:a}}},18017:(e,t,a)=>{a.d(t,{ag:()=>s,kn:()=>o,yc:()=>c});var n=a(21728),r=a(28654),i=a(58709);function s(){let e,t=(0,n.c)(3),{data:a}=(0,i._N)();e:{let n;if(!a){let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],t[0]=a):a=t[0],e=a;break e}t[1]!==a?(n=(0,r.v)(a),t[1]=a,t[2]=n):n=t[2],e=n}return e}function o(e){let t,a=(0,n.c)(5),r=s();if(a[0]!==e||a[1]!==r){let n;a[3]!==e?(n=t=>t.involvedNodes.includes(e),a[3]=e,a[4]=n):n=a[4],t=r.filter(n).map(l),a[0]=e,a[1]=r,a[2]=t}else t=a[2];return t}function l(e){return e.error}function c(e){let t,a=(0,n.c)(5),r=s();if(a[0]!==e||a[1]!==r){let n;a[3]!==e?(n=t=>!e||t.involvedNodes.includes(e),a[3]=e,a[4]=n):n=a[4],t=r.some(n),a[0]=e,a[1]=r,a[2]=t}else t=a[2];return t}},38043:(e,t,a)=>{a.d(t,{J:()=>LoopsService});var n=a(79048),r=a(71128),i=a(66346),s=a(23630);let o=(e,t)=>{let a={...e},n=a.content;return"string"==typeof n&&(a.content=function(e,t,a=!1){let n=(0,s.ZP)();return e.replace(n,(e,n,r,s)=>{let o=t[n];if(void 0===o)return(0,i.vV)(`Node with ID "${n}" not found in node map`),e;let l=o;if(r)if(o&&"object"==typeof o&&!Array.isArray(o)){let e=function(e,t){if(!t||!e)return null;let a=t.split("."),n=e;for(let e of a){if(null==n||"object"!=typeof n||null===n)return null;n=n[e]}return n}(o,r);if(null!==e)l=e;else throw Error(`Path "${r}" on node with ID "${n}" does not have a value`)}else throw Error(`Cannot access path "${r}" on non-object node with ID "${n}"`);return String(("string"!=typeof l||a?JSON.stringify(l):l)??e)})}(n,t,r.C.requiresCodeEvaluation(e.type))),a};function l(e,t,a){if(!t.has(e))throw TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}function c(e,t){var a=l(e,t,"get");return a.get?a.get.call(e):a.value}function d(e,t,a){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,a)}function u(e,t,a){var n=l(e,t,"set");if(n.set)n.set.call(e,a);else{if(!n.writable)throw TypeError("attempted to set read only private field");n.value=a}return a}var m=new WeakMap,p=new WeakMap,h=new WeakMap;let NodeRunner=class NodeRunner{async run(e,t){let a={graphQLClient:c(this,p),chatClient:c(this,h),signal:e,onPartialResult:t};return r.C.executeNode(c(this,m),a)}constructor(e,t,a){d(this,m,{writable:!0,value:void 0}),d(this,p,{writable:!0,value:void 0}),d(this,h,{writable:!0,value:void 0}),u(this,m,e),u(this,p,t),u(this,h,a)}};var f=a(19606);function g(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function y(e,t,a){if(!t.has(e))throw TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}function x(e,t){var a=y(e,t,"get");return a.get?a.get.call(e):a.value}function v(e,t,a){g(e,t),t.set(e,a)}function _(e,t,a){var n=y(e,t,"set");if(n.set)n.set.call(e,a);else{if(!n.writable)throw TypeError("attempted to set read only private field");n.value=a}return a}function b(e,t,a){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return a}function j(e,t){g(e,t),t.add(e)}var S=new WeakMap,C=new WeakMap,N=new WeakMap,w=new WeakMap,I=new WeakMap,k=new WeakMap,E=new WeakMap,T=new WeakSet,A=new WeakSet,L=new WeakSet;let LoopRunner=class LoopRunner{async run(e,t){let a=(0,n.FT)(x(this,N));if(0===a.length)throw Error("No output node");await Promise.all(a.map(a=>b(this,A,R).call(this,a,e,t)))}stop(e){x(this,E).abort(),e(x(this,w))}constructor(e,t,a,r){j(this,T),j(this,A),j(this,L),v(this,S,{writable:!0,value:void 0}),v(this,C,{writable:!0,value:void 0}),v(this,N,{writable:!0,value:void 0}),v(this,w,{writable:!0,value:void 0}),v(this,I,{writable:!0,value:void 0}),v(this,k,{writable:!0,value:void 0}),v(this,E,{writable:!0,value:void 0}),_(this,S,a),_(this,C,r),_(this,N,e),_(this,w,t),_(this,I,(0,n.f0)(e)),_(this,k,new Map),_(this,E,new AbortController)}};function D(){return x(this,E).signal.aborted}async function R(e,t,a){let n=x(this,k).get(e.id);if(n)return n;let r=b(this,L,P).call(this,e,t,a);return x(this,k).set(e.id,r),r}async function P(e,t,a){if(b(this,T,D).call(this))return null;let n=await a(x(this,N).id,x(this,N).version||f.k,x(this,w));if(!n.success)throw Error("Unable to load execution");let r=n.data.nodes[e.id]?.value;if(r)return r;let i=[...new Set(x(this,I).edges.filter(t=>t.to===e.id).map(e=>e.from))].map(e=>x(this,N).nodes.find(t=>t.id===e)).filter(e=>!!e),s=await Promise.all(i.map(async e=>[e.id,await b(this,A,R).call(this,e,t,a)]));if(s.some(([e,t])=>null===t)||b(this,T,D).call(this))return null;let l=Object.fromEntries(s);try{let a=o(e,l),n=new NodeRunner(a,x(this,S),x(this,C));t({type:"SET_RUNNING",nodeID:e.id});let r=await n.run(x(this,E).signal,a=>{b(this,T,D).call(this)||t({type:"UPDATE_NODE_VALUE_PARTIAL",nodeID:e.id,value:a})});return b(this,T,D).call(this)||t({type:"UPDATE_NODE_VALUE",nodeID:e.id,value:r}),r}catch(a){var c;return b(this,T,D).call(this)||t({type:"UPDATE_NODE_ERROR",nodeID:e.id,error:(c=a)instanceof Error?c.message:"string"==typeof c?c:"object"==typeof c?JSON.stringify(c):""}),null}}var O=a(28654),B=a(11354),F=a(7144);function M(e,t,a){if(!t.has(e))throw TypeError("attempted to "+a+" private field on non-instance");return t.get(e)}function V(e,t){var a=M(e,t,"get");return a.get?a.get.call(e):a.value}function U(e,t,a){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object");t.set(e,a)}function $(e,t,a){var n=M(e,t,"set");if(n.set)n.set.call(e,a);else{if(!n.writable)throw TypeError("attempted to set read only private field");n.value=a}return a}var W=new WeakMap,z=new WeakMap,H=new WeakMap,q=new WeakMap,G=new WeakMap;let LoopsService=class LoopsService{async getGraphQLResponse(e){return V(this,H).getGraphQLResponse(e)}async getLoop(e,t=f.k){return V(this,z).getLoop(e,t)}async getAllLoops(e=f.q){let t=await V(this,z).getAllLoops(e);if(!t.success)return(0,F.YD)("Error retrieving loops");let a=t.data;return(0,F.$j)(a.sort((e,t)=>t.updatedAt-e.updatedAt))}async createLoop(e){return V(this,z).createLoop(e)}async updateLoop(e,t){return V(this,z).updateLoop(e,t)}async deleteLoop(e){return(0,B._T)(e),V(this,z).deleteLoop(e)}async saveLoop(e){return V(this,z).saveLoop(e)}async revertLoop(e){return V(this,z).revertLoop(e)}async getExecution(e,t,a){return V(this,z).getExecution(e,t,a)}async createExecution(e,t,a){return V(this,z).createExecution(e,t,a)}async updateExecution(e,t,a,n){return V(this,z).updateExecution(e,t,a,n)}isExecutionRunning(e){return!!V(this,G).get(e)}async runPipeline(e,t,a,n){if((0,O.v)(e).length>0)return;let r=new LoopRunner(e,t,V(this,H),V(this,q));V(this,G).set(t,r);try{return await r.run(a,n)}finally{V(this,G).delete(t)}}stopPipeline(e,t){let a=V(this,G).get(e);a&&(a.stop(t),V(this,G).delete(e))}constructor(e,t,a,n){U(this,W,{writable:!0,value:void 0}),U(this,z,{writable:!0,value:void 0}),U(this,H,{writable:!0,value:void 0}),U(this,q,{writable:!0,value:void 0}),U(this,G,{writable:!0,value:new Map}),$(this,W,e),$(this,z,t),$(this,H,a),$(this,q,n)}}},71128:(e,t,a)=>{a.d(t,{C:()=>d});var n=a(38621);function r(e){return e.content}var i=a(23630),s=a(84993),o=a(4947),l=a(750);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let PromptNodeHandler=class PromptNodeHandler{async execute(e,t){let a=await (0,i.Vq)(e),n="";for await(let r of t.chatClient.getChatCompletion(a,e.metadata?.model,t.signal))n+=r,t.onPartialResult?.(n);return n}constructor(){c(this,"type","prompt"),c(this,"metadata",{contentFields:["content"],icon:()=>n.CopilotIcon,description:()=>"Use AI to process a node",label:()=>"Prompt",color:"purple",type:"prompt",outputLabel:"Markdown",isExecutable:!0})}};let GitHubGraphQLNodeHandler=class GitHubGraphQLNodeHandler{async execute(e,t){let a=await t.graphQLClient.getGraphQLResponse(e.content,t.signal);return a?.data??null}constructor(){c(this,"type","github-graphql"),c(this,"metadata",{type:"github-graphql",contentFields:["content"],icon:()=>n.MarkGithubIcon,description:()=>"Retrieve data from GitHub",label:()=>"GitHub GraphQL",color:"gray",featureFlag:"copilot_pipes_github_graphql_nodes",outputLabel:"JSON",isExecutable:!0})}};let CodeNodeHandler=class CodeNodeHandler{async execute(e,t){return r(e)}constructor(){c(this,"type","code"),c(this,"metadata",{type:"code",color:"pink",contentFields:["content"],icon:()=>n.CodeIcon,description:()=>"Use classic code to process a node",label:()=>"Code",featureFlag:"copilot_pipes_react_nodes",outputLabel:"Code output",isExecutable:!0,requiresCodeEvaluation:!0})}};let VisualizeNodeHandler=class VisualizeNodeHandler{async execute(e,t){return r(e)}constructor(){c(this,"type","visualize"),c(this,"metadata",{type:"visualize",contentFields:["content"],icon:()=>n.GitBranchIcon,description:()=>"Use HTML and CSS to view output",label:()=>"Visualize",color:"olive",featureFlag:"copilot_pipes_react_nodes"})}};let TextNodeHandler=class TextNodeHandler{async execute(e,t){if("date"===e.metadata.inputType&&(0,l.nS)(e.content)){let t=(0,l.Qf)(e.content);if(t)return(0,l.O2)(t)}return r(e)}constructor(){c(this,"type","text"),c(this,"metadata",{type:"text",contentFields:["content"],icon:e=>e&&(0,s.ir)(e)?(0,o.J)(e,"icon"):n.TypographyIcon,description:e=>e&&(0,s.ir)(e)?(0,o.J)(e,"description"):"Input for nodes",label:e=>e&&(0,s.ir)(e)?(0,o.J)(e,"name"):"Input",color:"blue"})}};let LoopNodeHandler=class LoopNodeHandler{async execute(e,t){return r(e)}constructor(){c(this,"type","loop"),c(this,"metadata",{type:"loop",contentFields:["content"],icon:()=>n.GitPullRequestIcon,description:()=>"Use an existing pipeline as a node",label:()=>"Pipeline",color:"coral",featureFlag:"copilot_pipes_pipeline_nodes",outputLabel:"Pipeline output",isExecutable:!0})}};let NodeHandlerRegistry=class NodeHandlerRegistry{registerHandler(e){this.handlers.set(e.type,e)}async executeNode(e,t){let a=this.handlers.get(e.type);if(!a)throw Error(`No handler registered for node type: ${e.type}`);return a.execute(e,t)}getMetadata(e){let t=this.handlers.get(e);return t?.metadata}getAllMetadata(){return Array.from(this.handlers.values()).map(e=>e.metadata)}getAllNodeTypes(){return Array.from(this.handlers.keys())}isExecutable(e){let t=this.getMetadata(e);return t?.isExecutable??!1}requiresCodeEvaluation(e){let t=this.getMetadata(e);return t?.requiresCodeEvaluation??!1}constructor(){!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"handlers",new Map),this.registerHandler(new PromptNodeHandler),this.registerHandler(new GitHubGraphQLNodeHandler),this.registerHandler(new CodeNodeHandler),this.registerHandler(new VisualizeNodeHandler),this.registerHandler(new TextNodeHandler),this.registerHandler(new LoopNodeHandler)}};let d=new NodeHandlerRegistry},7144:(e,t,a)=>{function n(e){return{success:!0,data:e}}function r(e){var t,a;return{success:!1,error:(t=e)?"string"==typeof t?t:"object"!=typeof t?(void 0)??i:"message"in t&&"string"==typeof t.message?t.message:"error"in t&&"string"===t.error?t.error:a??i:a??i}}a.d(t,{$j:()=>n,YD:()=>r});let i="Unknown error"},28654:(e,t,a)=>{a.d(t,{v:()=>i});var n=a(72260);a(4947);var r=a(79048);function i(e){let t=function(e){let t=[];for(let a of("string"!=typeof e.title&&t.push({error:"Pipeline is missing a title",errorType:n.T.MissingProperty,involvedNodes:[]}),Array.isArray(e.nodes)&&0!==e.nodes.length||t.push({error:"Pipeline has no nodes",errorType:n.T.MissingProperty,involvedNodes:[]}),e.nodes))t=t.concat(function(e){let t=[];return("string"!=typeof e.title||0===e.title.length)&&t.push({error:"Node is missing a title",errorType:n.T.MissingProperty,involvedNodes:[e.id]}),"text"===e.type&&(t=t.concat(function(e){let t=[],a=e.metadata;if("object"!=typeof a||!a)return t.push({error:"metadata is required for text nodes",errorType:n.T.MissingProperty,involvedNodes:[e.id]}),t;switch(a.inputType){case"boolean":["true","false"].includes(e.content)||t.push({error:'A boolean input must have a value of either "true" or "false"',errorType:n.T.InvalidBooleanValue,involvedNodes:[e.id]});break;case"range":"number"!=typeof a.min&&t.push({error:"A range input must have a min",errorType:n.T.InvalidRangeValue,involvedNodes:[e.id]}),"number"!=typeof a.max&&t.push({error:"A range input must have a max",errorType:n.T.InvalidRangeValue,involvedNodes:[e.id]});break;case"select":Array.isArray(a.options)&&0!==a.options.length?a.options.includes(e.content)||t.push({error:"A select node must have content equal to one of its options",errorType:n.T.InvalidSelectValue,involvedNodes:[e.id]}):t.push({error:"A select input must have options",errorType:n.T.InvalidSelectValue,involvedNodes:[e.id]});break;case"text":e.content||t.push({error:"Input needs a value",errorType:n.T.EmptyInputValue,involvedNodes:[e.id]})}return t}(e))),t}(a));return t}(e),a=(0,r.f0)(e);for(let r of a.edges){let a=e.nodes.find(e=>e.id===r.from),i=e.nodes.find(e=>e.id===r.to);a&&i||t.push({error:`Node ${r.to} references a nonexistent node {{${r.from}}}`,errorType:n.T.NonexistentNode,involvedNodes:[r.to]})}let i=function(e){let t=new Set,a=new Set,n=[],r=i=>{if(a.has(i)){let e=n.indexOf(i);return n.slice(e)}if(t.has(i))return null;for(let s of(t.add(i),a.add(i),n.push(i),e.edges))if(s.from===i){let e=r(s.to);if(e)return e}return a.delete(i),n.pop(),null};for(let a of e.nodes.values())if(!t.has(a.id)){let e=r(a.id);if(e)return e}return null}(a);if(i&&i.length>0){let e=[...i,i[0]];t.push({error:`Pipeline contains a cycle: ${e.join(" \u2192 ")}`,errorType:n.T.CycleDetected,involvedNodes:i})}let s=function(e){let t=[...e.nodes.values()];if(0===t.length)return[];let a=[],n=new Set,r=(t,a)=>{for(let i of(n.add(t),a.add(t),e.edges))i.from!==t||n.has(i.to)||r(i.to,a),i.to!==t||n.has(i.from)||r(i.from,a)};for(let e of t)if(!n.has(e.id)){let t=new Set;r(e.id,t),a.push(t)}if(a.length<=1)return[];let i=a.reduce((e,t)=>t.size>e.size?t:e,new Set),s=[];for(let e of t)i.has(e.id)||s.push(e.id);return s}(a);return s.length>0&&t.push({error:`Pipeline contains unreachable nodes: ${s.join(", ")}`,errorType:n.T.DisconnectedNode,involvedNodes:s}),t}a(71128)},47311:(e,t,a)=>{a.d(t,{EV:()=>c,H_:()=>b,Hi:()=>_,IO:()=>h,TR:()=>d,TV:()=>g,Z5:()=>x,gg:()=>v,jw:()=>f,oB:()=>m,sP:()=>u,xY:()=>p});var n=a(97385),r=a(18017),i=a(70309),s=a(79048),o=a(10409),l=a(58709);let c=(e,t)=>t?.nodes.find(t=>t.id===e);function d(e){return(0,n.I)(t=>c(e,t)?.content??"")}function u(e){return(0,n.I)(t=>c(e,t)?.type??"text")}function m(e){return(0,n.I)(t=>c(e,t))}function p(e){let{data:t}=(0,i.Qk)(t=>t?.nodes[e]?.value??null);return t??null}function h(e){let{data:t}=(0,i.Qk)(t=>t?.nodes[e]?.error);return t}function f(e){let{data:t}=(0,i.Qk)(t=>(0,o.f)(t?.nodes[e]));return t??!1}function g(){let{data:e}=(0,i.Qk)(o.y);return e??!1}function y(e,t,a){if(!e||!t)return"IDLE";let n=t.nodes[e],r=(0,o.f)(n),i=!!n?.value,s=!!n?.error,l=a.some(t=>t.involvedNodes.includes(e));return s||l?"ERROR":r?"PROCESSING":i?"COMPLETED":"IDLE"}function x(e){let t=(0,r.ag)(),{data:a}=(0,i.Qk)(a=>y(e,a,t));return a?.toUpperCase()??"IDLE"}function v(){let e=(0,r.ag)(),{data:t}=(0,l._N)(),{data:a}=(0,i.Qk)(a=>{if(!a||!t)return"IDLE";let n=(0,s.FT)(t);if(0===n.length)return"IDLE";let r=n.map(t=>y(t.id,a,e));return r.some(e=>"ERROR"===e)?"ERROR":r.some(e=>"PROCESSING"===e)?"PROCESSING":r.every(e=>"COMPLETED"===e)?"COMPLETED":"IDLE"});return a?.toUpperCase()??"IDLE"}function _(e,t){let a=(0,r.ag)(),{data:n}=(0,i.Qk)(n=>{if(!e||!t||!n)return"IDLE";let r=n.nodes[e],i=n.nodes[t],s=(0,o.f)(i),l=!!r?.value,c=(0,o.f)(r),d=!!r?.error,u=a.some(t=>t.involvedNodes.includes(e));return d||u?"ERROR":s?"PROCESSING":l&&!c?"COMPLETED":"IDLE"});return n?.toUpperCase()??"IDLE"}function b(){return(0,n.I)(e=>e?.id)}},72260:(e,t,a)=>{a.d(t,{T:()=>n});let n={MissingProperty:"MissingProperty",CycleDetected:"CycleDetected",NonexistentNode:"NonexistentNode",DisconnectedNode:"DisconnectedNode",InvalidBooleanValue:"InvalidBooleanValue",InvalidRangeValue:"InvalidRangeValue",InvalidSelectValue:"InvalidSelectValue",InvalidFileType:"InvalidFileType",EmptyInputValue:"EmptyInputValue"}},4947:(e,t,a)=>{a.d(t,{J:()=>i,j:()=>r});var n=a(38621);let r={range:{name:"Range",description:"A numeric value within a specified range",icon:n.NumberIcon},text:{name:"Text",description:"Free form text input",icon:n.TypographyIcon},boolean:{name:"Boolean",description:"True or false value",icon:n.CheckIcon},select:{name:"Select",description:"Choose from a list of predefined options",icon:n.ListUnorderedIcon},date:{name:"Date",description:"Date or macro",icon:n.CalendarIcon}};function i(e,t){return(r[e.metadata.inputType]??r.text)[t]}},29637:(e,t,a)=>{a.d(t,{I:()=>s,O:()=>i});var n=a(79048),r=a(97586);function i(e){for(let a of e.references??[]){var t;if(a.type===r.km&&(t=a)&&"object"==typeof t&&"title"in t&&"nodes"in t){let t={description:a.description,id:a.id,title:a.title,nodes:a.nodes,updatedAt:new Date(e.createdAt).getTime()},r=(0,n.cZ)(t,[]);return{messageId:e.id,pipeline:r}}}}function s(e,t=!1){for(let a of[...e].reverse()){if("assistant"!==a.role&&!t)continue;let e=i(a);if(e)return e}}},48148:(e,t,a)=>{function n(e,t){let a=function(e){let t=0;for(let a=0;a<e.length;a++)t=(31*t+e.charCodeAt(a))%0x3b9aca07;return t}(e)%t.length;return t[a]}a.d(t,{S:()=>n,u:()=>r});let r=["auburn","blue","brown","coral","cyan","gray","green","indigo","lemon","lime","olive","orange","pine","pink","plum","purple","red","teal","yellow"]},66346:(e,t,a)=>{function n(...e){}function r(...e){}a.d(t,{FF:()=>n,vV:()=>r})},97586:(e,t,a)=>{a.d(t,{Os:()=>o,QK:()=>l,S$:()=>r,bW:()=>d,km:()=>s,lN:()=>u,lh:()=>i,qe:()=>c});var n=a(22069);let r="loops",i="loops",s="loop",o="Loops",l=`${n.Jz}/loops`,c=/\/copilot\/loops/,d=/\/copilot\/l\/([a-zA-Z0-9-]+)/,u=/\/copilot\/loop\/share/},750:(e,t,a)=>{function n(e){return/^@today([+-]\d+[dwmy])?$/.test(e)}function r(e){if(e.startsWith("@"))return!1;let t=new Date(e);return!isNaN(t.getTime())&&(!e.match(/^\d{4}-\d{2}-\d{2}$/)||o(t)===e)}function i(e){return n(e)||r(e)}function s(e){return e.startsWith("@")&&!n(e)?null:n(e)?function(e){if(!n(e))return{date:null,error:`Invalid macro format: ${e}`};let t=new Date;if("@today"===e)return{date:t};let a=e.match(/^@today([+-])(\d+)([dwmy])$/);if(!a)return{date:null,error:`Invalid macro format: ${e}`};let[,r,i,s]=a;if(!r||!i||!s)return{date:null,error:`Invalid macro format: ${e}`};let o=parseInt(i,10),l="+"===r,c=new Date(t);switch(s){case"d":c.setDate(c.getDate()+(l?o:-o));break;case"w":c.setDate(c.getDate()+(l?7*o:-(7*o)));break;case"m":c.setMonth(c.getMonth()+(l?o:-o));break;case"y":c.setFullYear(c.getFullYear()+(l?o:-o));break;default:return{date:null,error:`Invalid unit: ${s}`}}return{date:c}}(e).date:r(e)?new Date(e):null}function o(e){let t=e.toISOString();return t.split("T")[0]??t.substring(0,10)}a.d(t,{O2:()=>o,Qf:()=>s,Yj:()=>i,nS:()=>n})},10409:(e,t,a)=>{function n(e){return!!e?.startedAt&&!e?.completedAt}function r(e){return!!e&&Object.values(e.nodes).some(n)}a.d(t,{f:()=>n,y:()=>r})},11354:(e,t,a)=>{a.d(t,{_T:()=>c,aq:()=>l,qU:()=>o});var n=a(85351),r=a(66346);let i=(0,n.A)("localStorage"),s="copilot-loops-thread-";function o(e){try{let t=`${s}${e}`;return i.getItem(t)}catch(e){return(0,r.FF)("Failed to read loop thread ID from localStorage:",e),null}}function l(e,t){if(null!==t)try{let a=`${s}${e}`;i.setItem(a,t)}catch(e){(0,r.FF)("Failed to store loop thread ID in localStorage:",e)}}function c(e){try{let t=`${s}${e}`;i.removeItem(t)}catch(e){(0,r.FF)("Failed to remove loop thread ID from localStorage:",e)}}},79048:(e,t,a)=>{a.d(t,{FT:()=>h,Gx:()=>u,Hx:()=>g,NZ:()=>f,cZ:()=>m,f0:()=>l});var n=a(84993),r=a(66346),i=a(23630),s=a(4947),o=a(71128);function l(e){let t={nodes:new Map,edges:[],layers:[]};if(!e.nodes)return t;for(let a of e.nodes){if(!a?.id)continue;let e=d(a.id);t.nodes.set(e,a)}for(let a of e.nodes)for(let e of c(a)){let n=d(e);a?.id&&n&&t.edges.push({from:n,to:a.id})}let a=function(e){let t={},a=new Set,n=(i,s=0)=>{try{if(a.has(i))throw Error(`Potential cycle detected at node ${i}`);if(a.add(i),s>100)return(0,r.FF)(`Maximum recursion depth reached for node ${i}`),0;if(void 0!==t[i])return t[i];let o=e.nodes.get(i);if(!o)return t[i]=0,0;let l=c(o);if(l&&0!==l.size){let e=[...l].map(e=>{let t=d(e);return n(t,s+1)});t[i]=Math.max(...e)+1}else{let a=e.edges.filter(e=>e.from===i).map(e=>e.to);0===a.length?t[i]=-1:t[i]=1}return t[i]}finally{a.delete(i)}};for(let[a]of e.nodes)if(!t[a])try{n(a)}catch(e){(0,r.vV)(`Error computing layer for node ${a}:`,e),t[a]=0}let i=Math.max(...Object.values(t))+1;for(let e of Object.keys(t))-1===t[e]&&(t[e]=i);let s=[];for(let[a,n]of Object.entries(t)){let t=e.nodes.get(a);t&&(s[n]||(s[n]=[]),s[n].push(t))}return s.filter(Boolean)}(t);return t.layers=a,t}function c(e){let t=(0,i.ZP)();return new Set((e.content.match(t)||[]).map(e=>e.replace(/[{}]/g,"")))}function d(e){return e.match(/^[^|.]+/)?.[0]??e}let u=(e,t)=>{if(!e||"object"!=typeof e||!e.title&&!e.description&&!e.content)return null;let a={...e,title:e.title||"",description:e.description||"",type:o.C.getMetadata(e.type)?e.type:"text",content:e.content||"",id:(e.id||"").trim()};if("text"===a.type&&(a.metadata=function(e){if((0,n.ir)(e))return s.j[e.metadata.inputType]?e.metadata:{inputType:"text"}}(e)||{inputType:"text"}),"string"!=typeof a.content&&(a.content=""),(0,n.jq)(a)){let e=t.find(e=>e.id===a.loopId);if(e){let t=a.loopInputValues?.reduce((e,t)=>(e[t.inputId]=t,e),{})||{};a.loopInputValues=e.nodes?.filter(e=>(0,n.ir)(e)).map(e=>{let a=t[e.id];if(!a)throw Error(`Input not found for node ${e.id}`);return{inputId:e.id,nodeId:a.nodeId,doMapInput:!!a.doMapInput}})}}return a},m=(e,t)=>{let a=function(e){return{...e,nodes:e.nodes.map(p)}}(e);return{...a,nodes:(a.nodes||[]).map(e=>u(e,t)).filter(e=>null!==e)}};function p(e){return"prompt"===e.type&&"model"in e&&"string"==typeof e.model?{...e,metadata:{model:e.model}}:"text"===e.type&&"inputType"in e?{...e,metadata:function(e){if("type"in e&&"string"==typeof e.type){let t="file"===e.type?"text":e.type;return{...e,inputType:t}}return e}(e.inputType)}:e}function h(e){let t=l(e);return e.nodes.filter(e=>y(e,t))}function f(e){let t={nodes:new Map,edges:[...e.edges],layers:[...e.layers]};for(let[a,n]of e.nodes)t.nodes.set(a,n);let a=[...e.nodes].filter(([,t])=>y(t,e));if(a.length>0){let e="virtual-output";for(let[,n]of(t.nodes.set(e,{type:"output",id:e}),a))t.edges.push({from:n.id,to:e})}return t}function g(e){return"virtual-output"===e}function y(e,t){return!t.edges.some(t=>t.from===e.id)&&t.edges.some(t=>t.to===e.id)}},84993:(e,t,a)=>{function n(e){return"github-graphql"===e.type}function r(e){return"loop"===e.type}function i(e){return"text"===e.type}a.d(t,{Tm:()=>n,ir:()=>i,jq:()=>r})},87804:(e,t,a)=>{a.d(t,{j:()=>i});var n=a(38043),r=a(97586);function i(e){return e.id===r.S$&&"service"in e&&e.service instanceof n.J}},23630:(e,t,a)=>{a.d(t,{DO:()=>s,Vq:()=>i,ZP:()=>n});let n=()=>/{{([\w-]+)(?:\.([.\w-]+))?(?:\|([\w-]+))?}}/g,r=`Respond with only the content \u{2014} no introductions, explanations, or extra text.
Only use code blocks when they add semantic value (e.g., mermaid diagrams, specific programming languages), not for general markdown formatting, unless the user explicitly asks for it.`;async function i(e){return[{role:"system",content:r},{role:"user",content:e.content}]}function s(e){return null==e?"":"string"==typeof e?e:e&&"object"==typeof e?JSON.stringify(e,null,2):Array.isArray(e)?e.map(s).join(`
`):String(e)}},19606:(e,t,a)=>{a.d(t,{k:()=>n,q:()=>r});let n="draft",r="latest"},61407:(e,t,a)=>{a.d(t,{t:()=>r});var n=a(79607);let r=({items:e,filter:t,key:a,secondaryKey:r})=>{let i=e.map(e=>[(0,n.dt)(t,a(e)),e]);return r&&(i=i.map(([e,a])=>[Math.max(e,(0,n.dt)(t,r(a))),a])),i.filter(([e])=>e>n.IP).sort(([e,t],[n,r])=>n===e?a(t).localeCompare(a(r)):n-e).map(([,e])=>e)}},79607:(e,t,a)=>{a.d(t,{Dx:()=>s,IP:()=>i,M4:()=>r,dt:()=>o});var n=a(91385);let r=1/0,i=-1/0,s=1,o=(e,t,a=s)=>{let o=e.trim().toLowerCase(),l=t.trim().toLowerCase();if(o===l)return r;if(0===l.length||0===o.length)return i;let c=(0,n.fN)(o,l);return c===1/0&&o!==l?i:l.startsWith(o)||l.endsWith(o)?c+a:c}},74547:(e,t,a)=>{a.d(t,{FC:()=>l,I0:()=>s,dV:()=>o,h$:()=>d,jK:()=>c});let n=null,r=!1;function i(e){let t=function(){let e=document.querySelector("context-region");return e&&e.isConnected&&e.pushCrumb&&"function"==typeof e.pushCrumb?e:null}();if(t)return void e(t);n=e,function(){if(r)return;r=!0;let e=document.querySelector("context-region-controller");e&&e.addEventListener("context-region-connected",()=>{n&&(n(e.contextRegion),n=null)},{once:!0})}()}function s(e){i(t=>t.pushCrumb(e))}function o(){i(e=>e.popCrumb())}function l(e){i(t=>t.replaceCrumbs(e))}function c(e){i(t=>t.renameCurrentCrumb(e))}function d(e){i(t=>t.replaceCurrentCrumb(e))}},23986:(e,t,a)=>{a.d(t,{L:()=>i,M:()=>r});var n=a(96540);let r=(0,n.createContext)(null);function i(){let e=(0,n.useContext)(r);if(!e)throw Error("useLayoutContext must be used within a Layout component");return e}},11251:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(96540);function r({focusRowRef:e,mouseRowRef:t}){let[a,r]=n.useState(!1);return n.useEffect(()=>{if(e.current&&t.current){let a=()=>{let t=e.current?.querySelector(".PRIVATE_TreeView-item-content-text");t?.scrollWidth!==t?.offsetWidth&&r(!0)};e.current.onfocus=()=>{a()},e.current.onblur=()=>{r(!1)},t.current.onmouseenter=()=>{a()},t.current.onmouseleave=()=>{r(!1)}}},[e,t]),a}},18337:(e,t,a)=>{a.d(t,{j:()=>s,p:()=>i});var n=a(74848),r=a(21728);function i(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("svg",{"aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M7.25 1.7793C9.371 1.77943 11.1858 3.00816 12.0166 4.80762C14.2732 5.06028 15.9999 6.94976 16 9.2793C16 9.32465 15.9976 9.37003 15.9961 9.41504H15.9971C15.9971 9.82924 15.6613 10.165 15.2471 10.165C14.8356 10.1648 14.5011 9.83347 14.4971 9.42285H14.4961C14.4983 9.37538 14.5 9.32737 14.5 9.2793C14.4999 7.60324 13.176 6.27947 11.5 6.2793C11.1806 6.2793 10.8958 6.07714 10.791 5.77539C10.284 4.31438 8.90436 3.27944 7.25 3.2793C5.1596 3.2793 3.50012 4.93893 3.5 7.0293C3.5 7.11497 3.50931 7.23128 3.52051 7.33887C3.52582 7.38984 3.53023 7.43466 3.53418 7.46582L3.53906 7.50098L3.54004 7.50977L3.54102 7.51074C3.59503 7.88942 3.35481 8.24868 2.98438 8.34375C2.1243 8.5636 1.5001 9.32996 1.5 10.2793C1.5 11.4033 2.37598 12.2793 3.5 12.2793H3.5332V12.2783C3.53974 12.2783 3.54624 12.2791 3.55273 12.2793H3.55371C3.95838 12.2902 4.28314 12.621 4.2832 13.0283C4.2832 13.4356 3.95841 13.7655 3.55371 13.7764V13.7793H3.5C1.54755 13.7793 0 12.2317 0 10.2793C8.74811e-05 8.86873 0.808798 7.66476 2.00098 7.1084C2.00028 7.08195 2 7.05535 2 7.0293C2.00012 4.1105 4.33118 1.7793 7.25 1.7793ZM6.49707 7.98242C6.78987 7.68961 7.2647 7.68979 7.55762 7.98242L9.80762 10.2324C9.94825 10.373 10.0273 10.5638 10.0273 10.7627C10.0273 10.9616 9.94827 11.1523 9.80762 11.293L7.55762 13.543C7.26472 13.8358 6.78992 13.8358 6.49707 13.543C6.20444 13.2501 6.20435 12.7753 6.49707 12.4824L8.2168 10.7627L6.49707 9.04297C6.20447 8.75008 6.20433 8.27522 6.49707 7.98242ZM14.5273 12.2627C14.9415 12.2627 15.2773 12.5985 15.2773 13.0127C15.2773 13.4269 14.9415 13.7627 14.5273 13.7627H11.5273C11.1133 13.7625 10.7773 13.4268 10.7773 13.0127C10.7774 12.5987 11.1133 12.2629 11.5273 12.2627H14.5273Z",fill:"currentColor"})}),t[0]=e):e=t[0],e}function s(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M14.4482 3.33337C18.7 3.33337 22.3305 5.81163 23.9131 9.41736C23.9174 9.4271 23.9218 9.43678 23.9258 9.44666L23.9287 9.45447C28.4413 9.79159 31.9629 13.4237 31.998 17.9789H31.9922C31.9894 18.5288 31.5438 18.974 30.9932 18.974C30.441 18.9739 29.9933 18.5261 29.9932 17.974H29.9971C29.9577 14.3305 27.0059 11.4291 23.2412 11.4291C22.8325 11.429 22.4654 11.1795 22.3135 10.8002L22.0752 10.2064C20.8076 7.33395 17.8991 5.33337 14.4482 5.33337C9.80134 5.33339 6.13785 8.95653 6.1377 13.476C6.1377 13.855 6.16656 14.2794 6.20605 14.4838C6.30638 15.004 5.98334 15.5117 5.46973 15.642C3.44486 16.1554 2 17.9258 2 20.0795C2.00003 22.6354 4.04211 24.6663 6.68945 24.6664H8.125C8.67643 24.6673 9.12289 25.1148 9.12305 25.6664C9.12305 26.2181 8.67653 26.6645 8.125 26.6654V26.6664H6.68945C2.97192 26.6663 3.31456e-05 23.774 0 20.0795C0 17.2864 1.70256 14.9426 4.14941 13.972C4.14121 13.7976 4.1377 13.6268 4.1377 13.476C4.13785 7.81789 8.73115 3.33339 14.4482 3.33337ZM13.9863 17.6185C14.3768 17.2282 15.0099 17.2284 15.4004 17.6185L19.0674 21.2855C19.2549 21.473 19.3603 21.7274 19.3604 21.9926C19.3604 22.2577 19.2548 22.5121 19.0674 22.6996L15.4004 26.3666C15.0099 26.7569 14.3768 26.757 13.9863 26.3666C13.5959 25.9761 13.596 25.3431 13.9863 24.9525L16.9463 21.9926L13.9863 19.0336C13.5958 18.643 13.5958 18.0091 13.9863 17.6185ZM28.6934 24.6595C29.2456 24.6595 29.6934 25.1073 29.6934 25.6595C29.6932 26.2117 29.2456 26.6595 28.6934 26.6595H22.0264C21.4744 26.6593 21.0265 26.2116 21.0264 25.6595C21.0264 25.1074 21.4743 24.6598 22.0264 24.6595H28.6934Z",fill:"currentColor"})}),t[0]=e):e=t[0],e}try{i.displayName||(i.displayName="AgentsIcon16")}catch{}try{s.displayName||(s.displayName="AgentsIcon32")}catch{}},74433:(e,t,a)=>{a.d(t,{C:()=>l});var n=a(74848),r=a(21728),i=a(38911),s=a(60039),o=a(96540);function l(e){let t,a,l,c=(0,r.c)(4),{onBannerDismiss:d,enabled:u}=e,[m,p]=(0,o.useState)(!1);return!(void 0===u||u)||m?null:(c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-bold",children:"Copilot coding agent now uses fewer premium requests!"})," From now on, each session uses just one premium request."]}),a=(0,n.jsx)(i.l.PrimaryAction,{as:"a",href:"https://docs.github.com/copilot/concepts/copilot-billing/understanding-and-managing-requests-in-copilot",children:"Learn more"}),c[0]=t,c[1]=a):(t=c[0],a=c[1]),c[2]!==d?(l=(0,n.jsx)(i.l,{variant:"upsell",title:"Copilot premium requests announcement",hideTitle:!0,description:t,primaryAction:a,onDismiss:async()=>{p(!0),d&&d(),await (0,s.DI)("/settings/dismiss-notice/copilot_coding_agent_premium_requests_banner",{method:"POST"})}}),c[2]=d,c[3]=l):l=c[3],l)}try{l.displayName||(l.displayName="PremiumRequestsBanner")}catch{}},76325:(e,t,a)=>{a.r(t),a.d(t,{default:()=>J});var n=a(74848),r=a(24774),i=a(96540),s=a(6585),o=a(5853),l=a(9299),c=a(45230),d=a(54528),u=a(15874);let m=(0,a(57909).zw)()?[]:[{key:"Alt-g",run:()=>!0,preventDefault:!0}],p=[(0,c.b6)(),(0,u.WD)(),(0,r.$K)({formatNumber:e=>e.toString().padStart(3," ")}),(0,u.SG)(),(0,r.vX)({position:"absolute"}),(0,d.$P)({top:!0}),r.Lz.editorAttributes.of({class:"js-codemirror-editor","data-testid":"codemirror-editor"}),r.w4.of([...m,...c.pw,...d.Eo,...c.cL])];var h=a(43720);let f={"&":{background:"var(--codeMirror-bgColor, var(--color-codemirror-bg))",color:"var(--codeMirror-fgColor, var(--color-codemirror-text))",cursor:"text"},".cm-gutters":{background:"var(--codeMirror-gutters-bgColor, var(--color-codemirror-gutters-bg))",borderRightWidth:0},".cm-lineNumbers .cm-gutterElement":{color:"var(--codeMirror-lineNumber-fgColor, var(--color-codemirror-linenumber-text))",fontFamily:"var(--fontStack-monospace)",fontSize:"var(--codeMirror-gutter-fontSize, var(--codeMirror-content-fontSize, 12px))",lineHeight:"20px",padding:"0 16px 0 16px"},".cm-content":{caretColor:"var(--codeMirror-cursor-fgColor, var(--color-codemirror-cursor))",fontFamily:"var(--fontStack-monospace)",fontSize:"var(--codeMirror-content-fontSize, 12px)",background:"var(--codeMirror-lines-bgColor, var(--color-codemirror-lines-bg))",lineHeight:"20px",paddingTop:"8px"},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"var(--codeMirror-selection-bgColor, var(--color-codemirror-selection-bg, #d7d4f0))"},"&.cm-focused":{outline:"none"},"&.hide-help-until-focus":{"&.cm-focused .cm-panels-bottom":{display:"block"},"& .cm-panels-bottom":{display:"none"}},"&.hide-help":{"& .cm-panels-top":{display:"none",position:"absolute"}},".cm-content ::-moz-selection":{backgroundColor:"var(--codeMirror-selection-bgColor, var(--color-codemirror-selection-bg, #d7d4f0))"},".cm-activeLine":{backgroundColor:"var(--codeMirror-activeline-bgColor, var(--color-codemirror-activeline-bg))"},".cm-line":{paddingLeft:"16px"},".cm-help-panel":{background:"var(--bgColor-muted, var(--color-canvas-subtle))",padding:"7px 10px",margin:0,fontSize:"13px",lineHeight:"16px",color:"var(--fgColor-muted, var(--color-fg-muted))",cursor:"default"},".cm-panels-bottom":{borderTop:"var(--borderWidth-thin, 1px) solid var(--borderColor-default, var(--color-border-default))",background:"none"},".js-upload-markdown-image & .cm-panels-bottom":{bottom:"30px !important"},".cm-panel.cm-search":{background:"var(--bgColor-muted, var(--color-canvas-subtle))",padding:"8px",fontSize:"16px"},".cm-panel.cm-search > button":{borderRadius:"6px",padding:"4px 8px",background:"var(--codeMirror-bgColor, var(--color-codemirror-bg))",color:"var(--button-default-fgColor-rest, var(--color-btn-text))",border:"1px solid var(--button-default-borderColor-rest, var(--color-btn-border))",textTransform:"capitalize"},".cm-panel.cm-search > label":{color:"var(--fgColor-default, var(--color-fg-default))",textTransform:"capitalize",fontSize:"12px"},".cm-panel.cm-search > input":{borderRadius:"6px",padding:"4px 8px",background:"var(--bgColor-default, var(--color-canvas-default))",color:"var(--fgColor-default, var(--color-fg-default))",border:"1px solid var(--borderColor-default, var(--color-border-default))",fontSize:"12px"},'.cm-panel.cm-search > button[name="close"]':{padding:"4px"},".cm-panels-top":{borderBottom:"var(--borderWidth-thin, 1px) solid var(--color-border-default)",background:"none"},".cm-panel.cm-search input, .cm-panel.cm-search button, .cm-panel.cm-search label":{marginRight:"8px",marginBottom:"4px",marginTop:"4px",marginLeft:0},".cm-lintRange":{cursor:"help",backgroundImage:"none !important"},".cm-placeholder":{height:"1em",color:"var(--fgColor-muted)"},"&.custom-tooltips .cm-tooltip":{border:"none !important",backgroundColor:"transparent !important"},"&.custom-tooltips .cm-diagnostic":{padding:0,marginLeft:"0 !important",borderLeft:"none !important",whiteSpace:"unset"}},g=[{tag:[h._A.keyword],color:"var(--codeMirror-syntax-fgColor-keyword, var(--color-codemirror-syntax-keyword))"},{tag:[h._A.comment],color:"var(--codeMirror-syntax-fgColor-comment, var(--color-codemirror-syntax-comment))"},{tag:[h._A.bracket],color:"var(--codeMirror-matchingBracket-fgColor, var(--color-codemirror-matchingbracket-text))"},{tag:[h._A.string,h._A.url,h._A.regexp],color:"var(--codeMirror-syntax-fgColor-string, var(--color-codemirror-syntax-string))"},{tag:[h._A.constant(h._A.name),h._A.propertyName,h._A.attributeName],color:"var(--codeMirror-syntax-fgColor-constant, var(--color-codemirror-syntax-constant))"},{tag:[h._A.atom,h._A.number,h._A.bool],color:"var(--codeMirror-syntax-fgColor-constant, var(--color-codemirror-syntax-constant))"},{tag:[h._A.function(h._A.variableName)],color:"var(--codeMirror-syntax-fgColor-entity, var(--color-codemirror-syntax-entity))"},{tag:h._A.definition(h._A.variableName),color:"var(--codeMirror-syntax-fgColor-variable, var(--color-codemirror-syntax-variable))"},{tag:h._A.meta,color:"inherit"},{tag:h._A.heading,fontWeight:"bold",color:"inherit !important"},{tag:h._A.monospace,color:"var(--codeMirror-syntax-fgColor-comment, var(--color-codemirror-syntax-comment))"}],y=[{tag:h._A.link,textDecoration:"underline"},{tag:h._A.emphasis,fontStyle:"italic"},{tag:h._A.strong,fontWeight:"bold"},{tag:h._A.strikethrough,textDecoration:"line-through"}],x=[...g,...y],v=[...g,...y];function _(e=[]){let t=[...null!==document.querySelector('[data-color-mode="dark"]')?v:x,...e];return[r.Lz.theme(f),(0,u.y9)(u.cr.define(t),{fallback:!0})]}let b=e=>{let t=[s.$t.tabSize.of(e.indentUnit)];return e.indentWithTabs?t.push(u.Xt.of("	")):t.push(u.Xt.of(" ".repeat(e.indentUnit))),e.lineWrapping&&t.push(r.Lz.lineWrapping),t};var j=a(13281);let S=(e,t)=>{let{state:a,placeholder:n,replacementText:r}=e.detail;"uploading"===a?(0,j.w0)(t)?(0,j.tJ)(t,n):(0,j.TC)(t,r):("uploaded"===a||"failed"===a)&&(0,j.TB)(t,n,r)},C=(e,t)=>{let{left:a,top:n}=e.detail,r=t.posAtCoords({x:a,y:n});r&&t.dispatch({selection:{anchor:r,head:r}})},N=new WeakMap;function w(e,t){if((0,j.w0)(e)){let a=(0,j.Lo)(e.state);(0,j.tJ)(e,`${t}${a}${t}`)}else{let a=(0,j.BE)(e);(0,j.TC)(e,t.repeat(2)),(0,j.f9)(e,a.anchor+t.length)}return!0}function I(e,t){let a=(0,j.BE)(e),n=e.state.doc.lineAt(a.from),r=(0,j.Lo)(e.state),i=RegExp(`^${"ol"===t?"\\d+\\.":t}\\s`);if(r){let a=(r.endsWith(`
`)?r.slice(0,-2):r).split(`
`).map((t,a)=>{let r=n.number+a;return{text:e.state.doc.line(r).text,lineNumber:r}}),s=a.every(e=>i.test(e.text));for(let n=0;n<a.length;n++){let r=a[n];if(s){let t=r.text.match(i);t&&(0,j.YH)(e,r?.lineNumber,t[0])}else{let a=`${"ol"===t?`${n+1}.`:t} `;(0,j.Md)(e,r?.lineNumber,a)}}}else{let r=n.text.match(i);if(r)(0,j.YH)(e,n.number,r[0]);else{let r=`${"ol"===t?"1.":t} `;(0,j.Md)(e,n.number,r),n.text||(0,j.f9)(e,a.anchor+r.length)}}return!0}let k=[{key:"Mod-i",run:e=>w(e,"_"),preventDefault:!0},{key:"Mod-b",run:e=>w(e,"**"),preventDefault:!0},{key:"Mod-e",run:e=>w(e,"`"),preventDefault:!0},{key:"Mod-k",run:e=>{let t=(0,j.Lo)(e.state);if(t){let a=`[${t}](url)`;(0,j.tJ)(e,a);let n=(0,j.I6)(e,a).value.from;(0,j.td)(e,n+t.length+3,n+t.length+6)}else{let t=(0,j.BE)(e);(0,j.TC)(e,"[](url)"),(0,j.f9)(e,t.anchor+1)}return!0},preventDefault:!0},{key:"Shift-Mod-.",run:e=>I(e,">"),preventDefault:!0},{key:"Shift-Mod-7",run:e=>I(e,"ol"),preventDefault:!0},{key:"Shift-Mod-8",run:e=>I(e,"-"),preventDefault:!0},{key:"Mod-v",run:e=>(N.set(e,!1),!1)},{key:"Shift-Mod-v",run:e=>(N.set(e,!0),!1)}];function E(e){let t=r.NZ.line({attributes:{dir:"auto"}}),a=new s.vB;for(let{from:n,to:r}of e.visibleRanges)for(let i=n;i<=r;){let n=e.state.doc.lineAt(i);a.add(n.from,n.from,t),i=n.to+1}return a.finish()}let T=r.Z9.fromClass(class{update(e){(e.docChanged||e.viewportChanged)&&(this.decorations=E(e.view))}constructor(e){!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"decorations",void 0),this.decorations=E(e)}},{decorations:e=>e.decorations}),A=[r.Lz.domEventHandlers({keydown(e){(e.metaKey||e.ctrlKey)&&"k"===e.key&&e.stopPropagation()},paste(e,t){N.get(t)||function(e,t){let a=(0,j.Lo)(e.state),n=t.clipboardData;if(a&&n){let r=n.getData("text/plain");if(!/^https?:\/\//i.test(r))return;r&&(t.preventDefault(),(0,j.tJ)(e,`[${a}](${r})`))}}(t,e),N.set(t,!1)}}),r.w4.of(k),T];var L=a(47404),D=a(5225),R=a(35984),P=a(26559);let O=(0,D.A)(async function(){let e=new Request("/autocomplete/emojis_for_editor",{method:"GET",credentials:"same-origin",headers:{Accept:"application/json",...(0,P.kt)()}}),t=await fetch(e);if(200!==t.status)throw Error(`emoji request failed with a ${t.status}`);let a=await t.json();return Object.keys(a).map(e=>{let t=a[e];return{name:e,src:t[0],emoji:t[1]}})}),B=s.Pe.define({map:({from:e,to:t,severity:a},n)=>({from:n.mapPos(e),to:n.mapPos(t),severity:a})}),F=s.sU.define({create:()=>r.NZ.none,update(e,t){for(let a of(e=e.map(t.changes),t.effects))a.is(B)&&("error"===a.value.severity?e=e.update({add:[M.range(a.value.from,a.value.to)]}):"warning"===a.value.severity?e=e.update({add:[V.range(a.value.from,a.value.to)]}):"info"===a.value.severity&&(e=e.update({add:[U.range(a.value.from,a.value.to)]})));return e},provide:e=>r.Lz.decorations.from(e)}),M=r.NZ.mark({class:"CodeMirror-lint-mark-error"}),V=r.NZ.mark({class:"CodeMirror-lint-mark-warning"}),U=r.NZ.mark({class:"CodeMirror-lint-mark-info"}),$=(e,t)=>{let{from:a,to:n,severity:r}=e.detail,i=(0,j.TU)(t,{line:a.lineNumber,ch:a.character}),s=(0,j.TU)(t,{line:n.lineNumber,ch:n.character});t.dispatch({effects:[B.of({from:i,to:s,severity:r})]})},W={ruby:[{tag:h._A.variableName,color:"var(--codeMirror-syntax-fgColor-variable, var(--color-codemirror-syntax-variable))"}],html:[{tag:h._A.meta,color:"var(--color-prettylights-syntax-constant)"},{tag:h._A.name,color:"var(--color-prettylights-syntax-entity-tag)"}],javascript:[{tag:h._A.name,color:"var(--color-prettylights-syntax-variable)"}],typescript:[{tag:h._A.name,color:"var(--color-prettylights-syntax-variable)"},{tag:h._A.typeName,color:"var(--color-prettylights-syntax-keyword)"}],java:[{tag:h._A.typeName,color:"var(--color-prettylights-syntax-entity)"}],"c++":[{tag:h._A.meta,color:"var(--color-prettylights-syntax-constant)"},{tag:h._A.typeName,color:"var(--color-prettylights-syntax-keyword)"}],php:[{tag:h._A.processingInstruction,color:"var(--color-prettylights-syntax-constant)"},{tag:h._A.name,color:"var(--color-prettylights-syntax-entity)"}]},z=Object.keys(W);var H=a(44246);let q={key:"Tab",run:({state:e,dispatch:t})=>e.selection.ranges.some(e=>!e.empty)?(0,c.UY)({state:e,dispatch:t}):(t(e.update(e.replaceSelection(e.facet(u.Xt)),{scrollIntoView:!0,userEvent:"input"})),!0),shift:c.Mg},G=[],K=[],Q=(0,i.forwardRef)((e,t)=>{let{value:a="",extensions:c=G,keyBindings:d=K,height:u="85vh",width:m="100%",focusNextRenderRef:h,containerClassName:f,...g}=e,y=(0,i.useRef)(null),x=function({extensions:e=[],fileName:t="",onChange:a,spacing:n,isHpc:c,isReadOnly:d,enableFileUpload:u,parentRef:m,placeholder:h="Enter file contents here",ariaLabelledBy:f,value:g,width:y="",height:x="",minHeight:v="",hideHelpUntilFocus:j,hideHelp:N,onCreateEditor:w,onDestroyEditor:I}){let k=(0,i.useRef)(void 0),E=(0,i.useMemo)(()=>new s.xx,[]),T=(0,i.useMemo)(()=>new s.xx,[]),D=(0,i.useMemo)(()=>new s.xx,[]),P=(0,i.useCallback)(e=>{e.docChanged&&a(e.state.doc.toString()||"")},[a]),B=(0,i.useMemo)(()=>r.Lz.updateListener.of(P),[P]),M=(0,i.useMemo)(()=>r.Lz.theme({"&":{height:x,minHeight:v,width:y}}),[x,v,y]),V=(0,i.useMemo)(()=>{let t=[...p,B,M,(0,r.qf)(h),...b(n),[r.Lz.domEventHandlers({"secret-detected:lint":$}),F],E.of([]),T.of([]),D.of([_()]),[r.Z9.fromClass(class{constructor(e){e.scrollDOM.tabIndex=0,e.scrollDOM.setAttribute("role","region"),e.scrollDOM.setAttribute("aria-labelledby",f)}})],r.Lz.contentAttributes.of({"aria-labelledby":`${f} focus-trap-help-panel`}),r.Lz.editorAttributes.of({class:j?"hide-help-until-focus":""}),r.Lz.editorAttributes.of({class:N?"hide-help":""})];return(u&&(t.push((0,r.A)()),t.push([r.Lz.domEventHandlers({"upload:editor:change":S,"upload:editor:cursor":C})])),c&&t.push(r.Lz.editorAttributes.of({"data-hpc":"true"})),d)?t.push(s.$t.readOnly.of(!0)):t.push([function(e,t,a){let n=new s.xx;return[n.of(a?t:[]),r.w4.of([{key:e,run:function(e){let a=n.get(e.state)===t;return e.dispatch({effects:n.reconfigure(a?[]:t)}),!0}}])]}("Shift-Ctrl-m",r.w4.of([q]),!0),(0,H.G)(function(){let e=document.createElement("div"),t=e=>{let t=document.createElement("kbd");return t.textContent=e,t};return e.append("Use ",t("Control + Shift + m")," to toggle the ",t("tab")," key moving focus. Alternatively, use ",t("esc")," then ",t("tab")," to move to the next interactive element on the page."),e.className="cm-help-panel",e.id="focus-trap-help-panel",e}(),N?"top":"bottom")]),t.push(...e),t},[B,M,h,n,E,T,D,f,j,N,u,c,d,e]);return(0,i.useEffect)(()=>{let e=m.current;if(!e)return;let t=s.$t.create({doc:g,extensions:V}),a=new r.Lz({state:t,parent:e});return w?.(a),k.current=a,()=>{a.destroy(),I?.(a)}},[]),(0,i.useEffect)(()=>{k.current&&(k.current.dispatch({effects:T.reconfigure([])}),k.current.dispatch({effects:s.Pe.reconfigure.of(V)}))},[T,V]),(0,i.useEffect)(()=>{if(k.current&&void 0!==g){let e=k.current.state.doc.toString()||"",t=g||"";t!==e&&k.current.dispatch({changes:{from:0,to:e.length,insert:t}})}},[g]),(0,i.useEffect)(()=>{let e=async()=>{let e=t.split(".").pop()||"",a=e?o.e.find(a=>a.extensions.includes(e)||a.filename&&a.filename.test(t)):void 0;if(a&&k.current){var n;let e=(n=a.name,z.includes(n.toLowerCase())?W[n.toLowerCase()]:null);e&&k.current.dispatch({effects:D.reconfigure(_(e))}),"Markdown"===a.name?(k.current.dispatch({effects:E.reconfigure((0,l.markdown)({base:l.markdownLanguage}))}),k.current.dispatch({effects:s.Pe.reconfigure.of([...A,...V])}),k.current.dispatch({effects:T.reconfigure([R.E,(0,L.yU)({override:[async e=>(function(e,t=[]){let a=e.matchBefore(/:\w+/);if(!a||a&&a.from===a.to&&!e.explicit)return null;let n=t.filter(e=>-1!==e.name.indexOf(a.text.replace(":",""))).map(e=>({label:e.name,apply:e.emoji||`:${e.name}:`,type:e.src}));return{from:a.from,to:a.to,options:n,filter:!1}})(e,await O())],icons:!1,addToOptions:[{render:e=>{let t=document.createElement("img");return t.className="emoji emoji-result mr-2",t.height=20,t.width=20,t.alt=`:${e.label}:`,t.src=e.type,t.setAttribute("async",""),t},position:0}]}),s.Nb.highest(r.w4.of([{key:"Tab",run:L.$w}]))])})):(k.current.dispatch({effects:T.reconfigure([])}),k.current.dispatch({effects:E.reconfigure(await a.load())}))}};k.current&&e()},[t,E,T,V,D]),k}({parentRef:y,value:a,height:u,width:m,extensions:(0,i.useMemo)(()=>[...c,r.w4.of(d)],[c,d]),...g});return(0,i.useImperativeHandle)(t,()=>({editor:y.current,view:x.current}),[y,x]),h?.current&&x&&(window.requestAnimationFrame(()=>{x.current&&!x.current.hasFocus&&x.current.focus()}),h.current=!1),(0,n.jsx)("div",{className:f,ref:y})});Q.displayName="CodeMirror";let J=Q},33484:(e,t,a)=>{a.d(t,{l:()=>u});var n=a(74848),r=a(21728),i=a(13455),s=a(60039),o=a(96540),l=a(31971),c=a(69458);let d=[{name:"Hate it",value:1,icon:i.YS,color:"veryDissatisfied"},{name:"Not great",value:2,icon:i.Mm,color:"dissatisfied"},{name:"It\u2019s ok",value:3,icon:i.Cf,color:"satisfied"},{name:"Love it",value:4,icon:i.mN,color:"verySatisfied"}],u=(0,o.forwardRef)(function(e,t){let a,u,m,p,h=(0,r.c)(7),{mode:f,returnFocusRef:g}=e,y=(0,o.useRef)(null),x=(0,o.useRef)(null),v=(0,o.useRef)(void 0);h[0]===Symbol.for("react.memo_cache_sentinel")?(a=()=>({openDialog:e=>{v.current=e,l.W.copilotChatInterviewSurvey?y.current?.openDialog():x.current?.openDialog(e)}}),h[0]=a):a=h[0],(0,o.useImperativeHandle)(t,a),h[1]!==f?(u=async(e,t)=>{let a=[];if(null==e&&a.push("Please select a rating."),t.length>2e3&&a.push("Please keep your feedback within 2000 characters or less."),a.length>0)return a;let n={rating:e,content:t,hostname:window.location.hostname,path:window.location.pathname,mode:f};try{(await (0,s.lS)("/github-copilot/feedback",{method:"POST",body:n})).ok||a.push("An error occurred while submitting your feedback.")}catch{a.push("An error occurred while submitting your feedback.")}return a},h[1]=f,h[2]=u):u=h[2];let _=u;return h[3]===Symbol.for("react.memo_cache_sentinel")?(m=(0,n.jsx)(c.E,{ref:y,onClose:e=>{"no-thanks"===e&&x.current?.openDialog(v.current)}}),h[3]=m):m=h[3],h[4]!==_||h[5]!==g?(p=(0,n.jsxs)(n.Fragment,{children:[m,(0,n.jsx)(i.NE,{ref:x,options:d,onSubmit:_,returnFocusRef:g})]}),h[4]=_,h[5]=g,h[6]=p):p=h[6],p});u.displayName="ConversationFeedbackDialog"},75320:(e,t,a)=>{a.d(t,{Y:()=>I});var n,r=a(74848),i=a(21728),s=a(70170),o=a(38007),l=a(98386),c=a(42080),d=a(17515),u=a(60039),m=a(16255),p=a(73451),h=a(19647),f=a(55847),g=a(9852),y=a(96540),x=a(40961),v=a(34901),_=a(47397);let b={footerContainer:"PersonalInstructionsDialog-module__footerContainer--YsPvr"};var j=a(38621),S=a(15385);let C={Role:{tooltip:"Role, domain, style, and focus areas",body:`Your role:
- {role_type} expert in {domain}
- Focus on {key_skill_area}
`},Communication:{tooltip:"Language, tone and format",body:`Communication:
- Write in {tone/language}
- Reference {source_type} documentation
- Structure responses as {format}
`},"Code preferences":{tooltip:"Code style, patterns, and conventions",body:`Code guidelines:
- Use {language} conventions
- Follow {pattern/code_guidelines}
- Optimize for {goal}
`}},N=(0,y.forwardRef)(function(e,t){let a,n,s,o,l,c,d,u,m=(0,i.c)(19),{onSelect:p}=e,[h,f]=(0,y.useState)(!1);m[0]!==h?(a=()=>f(!h),m[0]=h,m[1]=a):a=m[1];let g=a;m[2]===Symbol.for("react.memo_cache_sentinel")?(n={marginBottom:"1px"},m[2]=n):n=m[2],m[3]!==p||m[4]!==h?(s=h&&Object.entries(C)?.map(e=>{let[t,a]=e;return(0,r.jsxs)(S.l.Item,{"aria-label":`${a.tooltip}`,className:"mx-0 border fgColor-muted d-inline-block width-auto",onSelect:()=>p(t,a.body),children:[(0,r.jsx)(j.PlusIcon,{}),t]},t)}),m[3]=p,m[4]=h,m[5]=s):s=m[5],m[6]!==s?(o=(0,r.jsx)(S.l,{className:"d-inline-flex flex-wrap gap-2 rounded-2",children:s}),m[6]=s,m[7]=o):o=m[7];let x=h?"Hide templates":"Show templates";return m[8]===Symbol.for("react.memo_cache_sentinel")?(l={border:"1px solid transparent"},m[8]=l):l=m[8],m[9]!==h?(c=h?(0,r.jsx)(j.XIcon,{}):(0,r.jsx)(j.LightBulbIcon,{}),m[9]=h,m[10]=c):c=m[10],m[11]!==x||m[12]!==c||m[13]!==g?(d=(0,r.jsx)(S.l,{className:"d-flex flex-column flex-justify-end",children:(0,r.jsx)(S.l.Item,{"aria-label":x,"data-testid":"toggle-templates",className:"fgColor-muted d-inline-block width-auto flex-justify-end mx-0",style:l,onSelect:g,children:c})}),m[11]=x,m[12]=c,m[13]=g,m[14]=d):d=m[14],m[15]!==t||m[16]!==o||m[17]!==d?(u=(0,r.jsxs)("div",{ref:t,className:"d-inline-flex flex-justify-between position-absolute bgColor-default right-0 left-0 bottom-0 ml-2 mr-3",style:n,children:[o,d]}),m[15]=t,m[16]=o,m[17]=d,m[18]=u):u=m[18],u});try{N.displayName||(N.displayName="PersonalInstructionsTemplates")}catch{}try{(n=PersonalInstructionsTemplatesWithRef).displayName||(n.displayName="PersonalInstructionsTemplatesWithRef")}catch{}let w=(e,t)=>{let a,n,r=(0,i.c)(4),o=void 0===t?500:t,[l,c]=(0,y.useState)(48);return r[0]!==e||r[1]!==o?(a=()=>{let t=(0,s.s)(()=>{e?.current&&c(e.current.clientHeight??48)},o),a=new ResizeObserver(t);return e?.current&&a.observe(e.current),()=>{t.cancel(),a?.disconnect?.()}},n=[e,o],r[0]=e,r[1]=o,r[2]=a,r[3]=n):(a=r[2],n=r[3]),(0,y.useEffect)(a,n),l},I=({onDismiss:e,returnFocusRef:t})=>{let a=(0,v.Pk)(),n=(0,_.b)(),[i,s]=(0,y.useState)(a.personalInstructions??""),[j,S]=(0,y.useState)(void 0),[C,I]=(0,y.useState)(!1),E=(0,y.useRef)(null),T=(0,y.useRef)(null),[A,L]=(0,y.useState)(""),D=w(T);(0,d.N)(()=>{E?.current&&(E.current.scrollTop=E.current.scrollHeight)},[i]);let R=(0,y.useCallback)(async()=>{if(!C){I(!0),A&&(0,o.BI)("copilot_personal_instruction_template_usage",{content:A});try{let t=await (0,u.lS)("/copilot/personal_instructions",{method:"POST",body:{prompt:i}});if(t.ok)(0,o.BI)("dotcom_chat.activate",{target:"PERSONAL_INSTRUCTIONS_SAVE",mode:"immersive"}),n.dispatch({type:"SET_PERSONAL_INSTRUCTIONS",personalInstructions:i}),(0,x.flushSync)(()=>e());else{let e=await t.json();S(String(e.errorMessage))}}catch{S("An error occurred while saving your personal instructions.")}finally{I(!1)}}},[C,i,n,e,A]),P=(e,t)=>{t&&(s(i?`${i}
${t}`:t),L(e),E?.current?.focus())},O=()=>{R()},B=(0,y.useCallback)(()=>{(0,o.BI)("dotcom_chat.dismiss",{target:"PERSONAL_INSTRUCTIONS_DISMISS",mode:"immersive"}),(0,x.flushSync)(()=>e())},[e]);return(0,r.jsx)(m.Z,{children:(0,r.jsx)(g.l,{onClose:B,title:"Personal instructions",subtitle:"Set up Copilot to align with your workflows and preferences. These instructions will only impact your personal conversation.",width:"large",returnFocusRef:t,renderBody:()=>(0,r.jsx)(g.l.Body,{children:(0,r.jsx)("form",{onSubmit:R,children:(0,r.jsxs)(p.A,{children:[(0,r.jsx)(p.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,r.jsx)("div",{className:"width-full position-relative",children:(0,r.jsxs)(c.tL,{commands:{"github:submit-form":O},children:[(0,r.jsx)(h.Ay,{ref:E,className:"width-full",style:{paddingBottom:`${D}px`},"aria-label":"Prompt",rows:7,name:"prompt",placeholder:"Your instructions",value:i,validationStatus:j||i.length>4e3?"error":void 0,...(0,l.G)("prompt-input"),onChange:e=>{s(e.target.value),S(void 0)}}),(0,r.jsx)(N,{ref:T,onSelect:P})]})}),(0,r.jsx)(k,{text:i,promptCharLimit:4e3}),j&&(0,r.jsx)(p.A.Validation,{variant:"error",children:(0,r.jsx)("span",{...(0,l.G)("error-message"),children:j})})]})})}),renderFooter:()=>(0,r.jsxs)("div",{className:b.footerContainer,children:[(0,r.jsx)(f.Q,{variant:"default",onClick:B,children:"Cancel"}),(0,r.jsx)(f.Q,{loading:C,loadingAnnouncement:"Saving personal instructions",variant:"primary",onClick:R,children:"Save"})]})})})};function k(e){let t,a,n,s,o=(0,i.c)(10),{text:c,promptCharLimit:d}=e;o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.G)("current-character-count"),o[0]=t):t=o[0],o[1]!==c.length?(a=(0,r.jsx)("span",{className:"text-tabular-nums",...t,children:c.length}),o[1]=c.length,o[2]=a):a=o[2],o[3]!==d||o[4]!==a?(n=(0,r.jsxs)(r.Fragment,{children:[a," ","/ ",d," characters"]}),o[3]=d,o[4]=a,o[5]=n):n=o[5];let u=n;return o[6]!==u||o[7]!==d||o[8]!==c.length?(s=(0,r.jsx)(r.Fragment,{children:c.length>d?(0,r.jsx)(p.A.Validation,{variant:"error",children:u}):(0,r.jsx)(p.A.Caption,{children:u})}),o[6]=u,o[7]=d,o[8]=c.length,o[9]=s):s=o[9],s}try{I.displayName||(I.displayName="PersonalInstructionsDialog")}catch{}try{k.displayName||(k.displayName="CharacterCount")}catch{}},45518:(e,t,a)=>{a.d(t,{X:()=>v});var n=a(74848),r=a(21728),i=a(38621),s=a(73451),o=a(19647),l=a(9591),c=a(46309),d=a(81679),u=a(87330),m=a(55847),p=a(16255),h=a(9852),f=a(96540),g=a(74244),y=a(47397);let x={Dialog:"PromptDialog-module__Dialog--s8Arq",systemInstructionsTextarea:"PromptDialog-module__systemInstructionsTextarea--ImhCS",temperatureFormControl:"PromptDialog-module__temperatureFormControl--WQLdS",toolsSectionHeader:"PromptDialog-module__toolsSectionHeader--RRrpT",deleteToolButton:"PromptDialog-module__deleteToolButton--weBVY"},v=e=>{let t,a,v,b,j,S,C,N,w,I,k,E,T,A,L,D,R,P,O,B,F,M,V,U=(0,r.c)(53),{onDismiss:$,promptDialogRef:W}=e,z=(0,y.b)(),H=g.J.settings,[q,G]=(0,f.useState)(H?.instructionPrompt||void 0);U[0]===Symbol.for("react.memo_cache_sentinel")?(t=H?.skillOverrides??[],U[0]=t):t=U[0];let[K,Q]=(0,f.useState)(t),[J,Y]=(0,f.useState)(H?.temperature||.7),X=(0,f.useRef)(void 0);U[1]!==z||U[2]!==$||U[3]!==q||U[4]!==J||U[5]!==K?(a=()=>{let e=K.filter(_);z.setCopilotSettings({instructionPrompt:q||"",skillOverrides:e,temperature:J}),$()},U[1]=z,U[2]=$,U[3]=q,U[4]=J,U[5]=K,U[6]=a):a=U[6];let Z=a;U[7]!==z?(v=async()=>{if(X.current)return void G(X.current);let e=await z.getSystemPrompt();X.current=e,G(e)},U[7]=z,U[8]=v):v=U[8];let ee=v;U[9]!==ee||U[10]!==q?(b=()=>{(async()=>{void 0===q&&await ee()})()},U[9]=ee,U[10]=q,U[11]=b):b=U[11],U[12]!==ee||U[13]!==z||U[14]!==q?(j=[ee,z,q],U[12]=ee,U[13]=z,U[14]=q,U[15]=j):j=U[15],(0,f.useEffect)(b,j),U[16]!==ee?(S=()=>{ee(),Q([]),Y(.7)},U[16]=ee,U[17]=S):S=U[17];let et=S;return U[18]===Symbol.for("react.memo_cache_sentinel")?(C=(0,n.jsx)(s.A.Label,{children:"System Instructions"}),U[18]=C):C=U[18],U[19]===Symbol.for("react.memo_cache_sentinel")?(N=(0,n.jsx)(s.A.Caption,{children:(0,n.jsx)("span",{children:"Make adjustments to the system instructions or add new instructions."})}),U[19]=N):N=U[19],U[20]===Symbol.for("react.memo_cache_sentinel")?(w=e=>G(e.target.value),U[20]=w):w=U[20],U[21]!==q?(I=(0,n.jsxs)(s.A,{children:[C,N,(0,n.jsx)(o.Ay,{block:!0,"aria-label":"Prompt",name:"Prompt",value:q,onChange:w,className:x.systemInstructionsTextarea})]}),U[21]=q,U[22]=I):I=U[22],U[23]===Symbol.for("react.memo_cache_sentinel")?(k=(0,n.jsx)(s.A.Label,{children:"Temperature"}),E=(0,n.jsx)(s.A.Caption,{children:"Controls the randomness of the model's responses. Lower temperatures are more deterministic, while higher temperatures are more random."}),U[23]=k,U[24]=E):(k=U[23],E=U[24]),U[25]===Symbol.for("react.memo_cache_sentinel")?(T=e=>Y(Number(e.target.value)),U[25]=T):T=U[25],U[26]!==J?(A=(0,n.jsxs)(s.A,{className:x.temperatureFormControl,children:[k,E,(0,n.jsx)(l.A,{type:"number",min:"0",max:"1",step:"0.01",block:!0,value:J,onChange:T})]}),U[26]=J,U[27]=A):A=U[27],U[28]===Symbol.for("react.memo_cache_sentinel")?(L=(0,n.jsx)("div",{className:x.toolsSectionHeader,children:"Tools"}),U[28]=L):L=U[28],U[29]!==K?(D=K.map((e,t)=>(0,n.jsxs)(f.Fragment,{children:[(0,n.jsxs)(c.B,{direction:"horizontal",className:"py-2",children:[(0,n.jsxs)(s.A,{children:[(0,n.jsx)(s.A.Label,{children:"Name"}),(0,n.jsx)(s.A.Caption,{children:(0,n.jsx)("span",{children:"Slug of tool you want to adjust"})}),(0,n.jsx)(l.A,{defaultValue:e.slug,onChange:e=>{K.map((a,n)=>{n===t&&(a.slug=e.target.value)})}})]}),(0,n.jsxs)(s.A,{children:[(0,n.jsx)(s.A.Label,{children:"Description"}),(0,n.jsx)(s.A.Caption,{children:(0,n.jsx)("span",{children:"Make changes to the tool description"})}),(0,n.jsx)(l.A,{defaultValue:e.description,onChange:a=>{K.map((n,r)=>{r===t&&(e.description=a.target.value)})}})]}),(0,n.jsxs)(s.A,{children:[(0,n.jsx)(s.A.Label,{id:"toggle",children:"Enabled?"}),(0,n.jsx)(d.A,{size:"small","aria-labelledby":"toggle",defaultChecked:e.enabled,onChange:e=>{K.map((a,n)=>{n===t&&(a.enabled=e)})}})]}),(0,n.jsx)(u.K,{icon:i.TrashIcon,"aria-label":"Delete tool",variant:"invisible",onClick:()=>{let e=[...K];1===K.length?Q([]):(e.splice(t,1),Q(e))},className:x.deleteToolButton})]}),t===K.length-1&&(0,n.jsx)(m.Q,{leadingVisual:(0,n.jsx)(i.PlusIcon,{}),onClick:()=>Q([...K,{slug:"",description:"",enabled:!0}]),variant:"invisible",size:"small",children:"Add another tool"})]},`tool-${e.slug}-${Math.random()}`)),U[29]=K,U[30]=D):D=U[30],U[31]!==K?(R=0===K.length&&(0,n.jsx)(m.Q,{leadingVisual:(0,n.jsx)(i.PlusIcon,{}),onClick:()=>Q([...K,{slug:"",description:"",enabled:!0}]),variant:"invisible",size:"small",children:"Add a tool"}),U[31]=K,U[32]=R):R=U[32],U[33]!==I||U[34]!==A||U[35]!==D||U[36]!==R?(P=(0,n.jsxs)(h.l.Body,{children:[I,A,L,D,R]}),U[33]=I,U[34]=A,U[35]=D,U[36]=R,U[37]=P):P=U[37],U[38]!==$?(O={type:"button",onClick:$,content:"Cancel"},U[38]=$,U[39]=O):O=U[39],U[40]!==et?(B={type:"button",onClick:et,content:"Reset"},U[40]=et,U[41]=B):B=U[41],U[42]!==Z?(F={type:"button",onClick:Z,content:"Save",buttonType:"primary"},U[42]=Z,U[43]=F):F=U[43],U[44]!==O||U[45]!==B||U[46]!==F?(M=(0,n.jsx)(h.l.Footer,{children:(0,n.jsx)(h.l.Buttons,{buttons:[O,B,F]})}),U[44]=O,U[45]=B,U[46]=F,U[47]=M):M=U[47],U[48]!==$||U[49]!==W||U[50]!==P||U[51]!==M?(V=(0,n.jsx)(p.Z,{children:(0,n.jsxs)(h.l,{ref:W,onClose:$,title:"Prompt Settings",width:"xlarge",className:x.Dialog,children:[P,M]})}),U[48]=$,U[49]=W,U[50]=P,U[51]=M,U[52]=V):V=U[52],V};try{v.displayName||(v.displayName="PromptDialog")}catch{}function _(e){return e.slug&&e.description}},66837:(e,t,a)=>{a.d(t,{p:()=>b,V:()=>_});var n=a(74848),r=a(21728),i=a(34901),s=a(47397),o=a(22069),l=a(38007),c=a(64262),d=a(38621),u=a(15385),m=a(53526),p=a(73451),h=a(9591),f=a(9852),g=a(96540),y=a(3246);let x={hideOnDesktop:"ConversationActions-module__hideOnDesktop--XXDmE"};var v=a(58691);function _(e){let t,a,s,m,p,h,f,g,y=(0,r.c)(21),{onOpenDialog:v,showShare:_,hideShareOnDesktop:b,isShared:j}=e,S=void 0===_||_,C=void 0!==b&&b,N=void 0!==j&&j,{canShareThread:w}=(0,c.X)(),{isWaitingOnCopilot:I,messages:k}=(0,i.Pk)(),E=(0,o.Q7)(k).length>0||I;return y[0]!==v?(t=()=>{(0,l.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_RENAME",mode:"immersive"}),v("rename")},y[0]=v,y[1]=t):t=y[1],y[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)(u.l.LeadingVisual,{children:(0,n.jsx)(d.PencilIcon,{})}),y[2]=a):a=y[2],y[3]!==t?(s=(0,n.jsxs)(u.l.Item,{onSelect:t,children:[a,"Rename"]}),y[3]=t,y[4]=s):s=y[4],y[5]!==w||y[6]!==C||y[7]!==N||y[8]!==v||y[9]!==E||y[10]!==S?(m=S&&w&&(0,n.jsxs)(u.l.Item,{className:C?x.hideOnDesktop:void 0,disabled:E,onSelect:()=>{(0,l.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_SHARE",mode:"immersive"}),v("share")},children:[(0,n.jsx)(u.l.LeadingVisual,{children:N?(0,n.jsx)(d.UnlockIcon,{}):(0,n.jsx)(d.LockIcon,{})}),"Share"]}),y[5]=w,y[6]=C,y[7]=N,y[8]=v,y[9]=E,y[10]=S,y[11]=m):m=y[11],y[12]!==v?(p=()=>{(0,l.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_DELETE",mode:"immersive"}),v("delete")},y[12]=v,y[13]=p):p=y[13],y[14]===Symbol.for("react.memo_cache_sentinel")?(h=(0,n.jsx)(u.l.LeadingVisual,{children:(0,n.jsx)(d.TrashIcon,{})}),y[14]=h):h=y[14],y[15]!==p?(f=(0,n.jsxs)(u.l.Item,{variant:"danger",onSelect:p,children:[h,"Delete"]}),y[15]=p,y[16]=f):f=y[16],y[17]!==f||y[18]!==s||y[19]!==m?(g=(0,n.jsxs)(n.Fragment,{children:[s,m,f]}),y[17]=f,y[18]=s,y[19]=m,y[20]=g):g=y[20],g}function b(e){let t,a,o,c,d,u=(0,r.c)(29),{visibleDialog:m,onClose:p,threadName:h,threadId:f,selectedThreadId:g,onStartLoading:x,onFinishLoading:_,returnFocusRef:b}=e,{threads:C}=(0,i.Pk)(),N=(0,s.b)(),w=(0,y.G)();u[0]!==p?(t=()=>{(0,l.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"}),p()},u[0]=p,u[1]=t):t=u[1];let I=t;u[2]!==N||u[3]!==w||u[4]!==p||u[5]!==_||u[6]!==x||u[7]!==g||u[8]!==f||u[9]!==C?(a=async()=>{(0,l.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_DELETE",mode:"immersive"}),x();let e=C.get(f);e&&(f===g&&await w({clearTopic:!0,includeThreads:!1}),await N.deleteThread(e)),_(),p()},u[2]=N,u[3]=w,u[4]=p,u[5]=_,u[6]=x,u[7]=g,u[8]=f,u[9]=C,u[10]=a):a=u[10];let k=a;u[11]!==N||u[12]!==p||u[13]!==_||u[14]!==x||u[15]!==f||u[16]!==C?(o=async e=>{(0,l.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_RENAME",mode:"immersive"}),x();let t=C.get(f);t&&await N.renameThread(t,e),_(),p()},u[11]=N,u[12]=p,u[13]=_,u[14]=x,u[15]=f,u[16]=C,u[17]=o):o=u[17];let E=o;return u[18]!==I||u[19]!==k||u[20]!==p||u[21]!==b||u[22]!==E||u[23]!==f||u[24]!==h||u[25]!==m?(c="delete"===m?(0,n.jsx)(j,{onCancel:p,onConfirm:k,returnFocusRef:b}):"rename"===m?(0,n.jsx)(S,{onCancel:p,currentName:h,onSubmit:E,returnFocusRef:b}):"share"===m?(0,n.jsx)(v.S,{closeDialog:I,threadId:f,returnFocusRef:b}):null,u[18]=I,u[19]=k,u[20]=p,u[21]=b,u[22]=E,u[23]=f,u[24]=h,u[25]=m,u[26]=c):c=u[26],u[27]!==c?(d=(0,n.jsx)(n.Fragment,{children:c}),u[27]=c,u[28]=d):d=u[28],d}let j=e=>{let t,a=(0,r.c)(4),{onConfirm:i,onCancel:s,returnFocusRef:o}=e;return a[0]!==s||a[1]!==i||a[2]!==o?(t=(0,n.jsx)(m.K,{title:"Delete conversation",onClose:e=>{if("confirm"===e){(0,l.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CONFIRM",mode:"immersive"});let e=o.current?.closest("nav,aside,section");i(),window.setTimeout(()=>{e instanceof HTMLElement&&e.focus()},0)}else(0,l.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CANCEL",mode:"immersive"}),s(),window.setTimeout(()=>o.current?.focus(),0)},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this conversation? This action cannot be undone."}),a[0]=s,a[1]=i,a[2]=o,a[3]=t):t=a[3],t},S=e=>{let t,a,i,s,o,c,d,u,m,y,x,v,_=(0,r.c)(34),{currentName:b,onCancel:j,onSubmit:S,returnFocusRef:N}=e,[w,I]=(0,g.useState)(void 0),k=(0,g.useRef)(null),E=(0,g.useId)(),T=(0,g.useId)();_[0]!==S?(t=e=>{e.preventDefault();let t=k.current?.value?.trim()??"";t?t.length>100?(I("max_length"),k.current?.focus()):(I(void 0),S(t)):(I("required"),k.current?.focus())},_[0]=S,_[1]=t):t=_[1];let A=t;_[2]!==j?(a=()=>{(0,l.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CANCEL",mode:"immersive"}),j()},_[2]=j,_[3]=a):a=_[3];let L=a;_[4]!==T?(i=(0,n.jsx)("span",{id:T,children:"Rename conversation"}),_[4]=T,_[5]=i):i=_[5],_[6]!==L?(s={content:"Cancel",onClick:L},_[6]=L,_[7]=s):s=_[7],_[8]!==E?(o={content:"Update",buttonType:"primary",type:"submit",form:E,onClick:C},_[8]=E,_[9]=o):o=_[9],_[10]!==s||_[11]!==o?(c=[s,o],_[10]=s,_[11]=o,_[12]=c):c=_[12],_[13]===Symbol.for("react.memo_cache_sentinel")?(d=(0,n.jsx)(p.A.Label,{visuallyHidden:!0,children:"Rename conversation"}),_[13]=d):d=_[13];let D=w?"error-message":void 0,R=w?"true":void 0;return _[14]!==b||_[15]!==T||_[16]!==D||_[17]!==R?(u=(0,n.jsx)(h.A,{"aria-labelledby":T,"aria-describedby":D,"aria-invalid":R,ref:k,defaultValue:b,block:!0}),_[14]=b,_[15]=T,_[16]=D,_[17]=R,_[18]=u):u=_[18],_[19]!==w?(m=w&&(0,n.jsx)(p.A.Validation,{id:"error-message",variant:"error",children:"required"===w?"Enter a name":"Name cannot exceed 100 characters"}),_[19]=w,_[20]=m):m=_[20],_[21]!==u||_[22]!==m?(y=(0,n.jsxs)(p.A,{required:!0,children:[d,u,m]}),_[21]=u,_[22]=m,_[23]=y):y=_[23],_[24]!==E||_[25]!==A||_[26]!==y?(x=(0,n.jsx)("form",{id:E,onSubmit:A,children:y}),_[24]=E,_[25]=A,_[26]=y,_[27]=x):x=_[27],_[28]!==L||_[29]!==N||_[30]!==x||_[31]!==i||_[32]!==c?(v=(0,n.jsx)(f.l,{title:i,onClose:L,width:"small",footerButtons:c,initialFocusRef:k,returnFocusRef:N,children:x}),_[28]=L,_[29]=N,_[30]=x,_[31]=i,_[32]=c,_[33]=v):v=_[33],v};try{_.displayName||(_.displayName="ConversationActions")}catch{}try{b.displayName||(b.displayName="ConversationActionDialogs")}catch{}try{j.displayName||(j.displayName="DeleteDialog")}catch{}try{S.displayName||(S.displayName="RenameDialog")}catch{}function C(){return(0,l.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CONFIRM",mode:"immersive"})}},58691:(e,t,a)=>{a.d(t,{S:()=>j});var n=a(74848),r=a(21728),i=a(34901),s=a(47397),o=a(48071),l=a(31971),c=a(640),d=a(38007),u=a(96679),m=a(38621),p=a(55847),h=a(63867),f=a(52464),g=a(46309),y=a(73451),x=a(9591),v=a(9852),_=a(96540);let b={container:"ConversationSharingDialog-module__container--H5hqT",innerContainer:"ConversationSharingDialog-module__innerContainer--V9On6",sharedLinkContainer:"ConversationSharingDialog-module__sharedLinkContainer--aVTdw",textInputContainer:"ConversationSharingDialog-module__textInputContainer--ZxFdI",textInput:"ConversationSharingDialog-module__textInput--A9a7q",success:"ConversationSharingDialog-module__success--y0cZq",spinner:"ConversationSharingDialog-module__spinner--dOElP",successIcon:"ConversationSharingDialog-module__successIcon--VU4pj",mutedText:"ConversationSharingDialog-module__mutedText--s9hgO",warningText:"ConversationSharingDialog-module__warningText--ls_e9",snapshotText:"ConversationSharingDialog-module__snapshotText--KHVR0",buttonStack:"ConversationSharingDialog-module__buttonStack--VRr9b",lockIcon:"ConversationSharingDialog-module__lockIcon--xEX8E",cancelButton:"ConversationSharingDialog-module__cancelButton--C0li6",quickFadeUp:"ConversationSharingDialog-module__quickFadeUp--tDjns"},j=e=>{let t,a,j,S,C,N,w,I,k,E,T,A,L,D,R,P,O,B,F,M,V,U,$,W,z,H,q,G,K,Q=(0,r.c)(93),{closeDialog:J,threadId:Y,returnFocusRef:X}=e,Z=(0,i.Pk)(),ee=(0,s.b)(),[et,ea]=(0,_.useState)(!1),[en,er]=(0,_.useState)(!1),[ei,es]=(0,_.useState)(!1),[eo,el]=(0,_.useState)(!1),{selectedThreadID:ec,ssoOrganizations:ed,apiUrl:eu,threads:em}=Z;Q[0]!==ec||Q[1]!==Y||Q[2]!==em?(t=em.get(Y||ec),Q[0]=ec,Q[1]=Y,Q[2]=em,Q[3]=t):t=Q[3];let ep=t;Q[4]!==ep?.sharedID?(a=()=>ep?.sharedID||"",Q[4]=ep?.sharedID,Q[5]=a):a=Q[5];let[eh,ef]=(0,_.useState)(a);Q[6]!==ep?(j=()=>ep?.sharedMessageID?ep.sharedMessageID:"",Q[6]=ep,Q[7]=j):j=Q[7];let[eg,ey]=(0,_.useState)(j),ex=u.fV.origin,ev=`${ex}/copilot/share/${eh}`;Q[8]!==et?(S=()=>{if(et){let e=setTimeout(()=>ea(!1),1500);return()=>clearTimeout(e)}},C=[et],Q[8]=et,Q[9]=S,Q[10]=C):(S=Q[9],C=Q[10]),(0,_.useEffect)(S,C),Q[11]!==ei?(N=()=>{if(ei){let e=setTimeout(()=>es(!1),1500);return()=>clearTimeout(e)}},w=[ei],Q[11]=ei,Q[12]=N,Q[13]=w):(N=Q[12],w=Q[13]),(0,_.useEffect)(N,w),Q[14]!==ev?(I=async()=>{try{await (0,c.D)(ev),ea(!0),(0,d.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})}catch{}},Q[14]=ev,Q[15]=I):I=Q[15];let e_=I;Q[16]!==ep?.sharedID||Q[17]!==ec||Q[18]!==Y?(k=()=>{(Y||ec)&&ef(ep?.sharedID||"")},Q[16]=ep?.sharedID,Q[17]=ec,Q[18]=Y,Q[19]=k):k=Q[19];let eb=ep?.sharedID;Q[20]!==ec||Q[21]!==eb||Q[22]!==Y?(E=[eb,ec,Y],Q[20]=ec,Q[21]=eb,Q[22]=Y,Q[23]=E):E=Q[23],(0,_.useEffect)(k,E),Q[24]!==eu||Q[25]!==ee||Q[26]!==ec||Q[27]!==ed||Q[28]!==Y?(T=async()=>{er(!0);let e=Y||ec,t=new o.k(eu,ed),a=await t.shareThread(e,l.W.copilotShareActiveSubthread&&e===ec?ee.FindLastMessageID():"");if(a.ok){er(!1);let{sharedAt:t,sharedID:n,sharedMessageID:r}=a.payload;ef(n),es(!0),ey(r),ee.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:n,sharedAt:t,sharedMessageID:r}}),(0,d.BI)("dotcom_chat.activate",{target:"COPILOT_CREATE_SHARED_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:n})}else er(!1)},Q[24]=eu,Q[25]=ee,Q[26]=ec,Q[27]=ed,Q[28]=Y,Q[29]=T):T=Q[29];let ej=T;Q[30]!==eu||Q[31]!==ee||Q[32]!==ec||Q[33]!==eh||Q[34]!==eo||Q[35]!==ed||Q[36]!==Y?(A=async()=>{if(!eo)return void el(!0);el(!1),er(!0);let e=Y||ec,t=new o.k(eu,ed),a=await t.unshareThread(e);if(a.ok){er(!1),ey("");let{sharedID:t,sharedAt:n,sharedMessageID:r}=a.payload;ee.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:n,sharedMessageID:r}}),(0,d.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:eh})}else er(!1)},Q[30]=eu,Q[31]=ee,Q[32]=ec,Q[33]=eh,Q[34]=eo,Q[35]=ed,Q[36]=Y,Q[37]=A):A=Q[37];let eS=A;Q[38]!==ej||Q[39]!==en||Q[40]!==eh?(L=()=>{if(!eh)return(0,n.jsx)(p.Q,{variant:"primary",disabled:en,onClick:ej,children:"Share"})},Q[38]=ej,Q[39]=en,Q[40]=eh,Q[41]=L):L=Q[41];let eC=L;Q[42]!==e_||Q[43]!==eh?(D=()=>{if(eh)return(0,n.jsx)(p.Q,{variant:"primary",autoFocus:!0,onClick:e_,children:"Copy link"})},Q[42]=e_,Q[43]=eh,Q[44]=D):D=Q[44];let eN=D;Q[45]!==eS||Q[46]!==en||Q[47]!==eh?(R=()=>{if(eh)return(0,n.jsx)(p.Q,{variant:"danger",disabled:en,onClick:eS,children:"Unshare"})},Q[45]=eS,Q[46]=en,Q[47]=eh,Q[48]=R):R=Q[48];let ew=R;Q[49]!==eh||Q[50]!==eo?(P=()=>{if(eh&&eo)return(0,n.jsx)(p.Q,{variant:"default",onClick:()=>el(!1),className:b.cancelButton,children:"Cancel"})},Q[49]=eh,Q[50]=eo,Q[51]=P):P=Q[51];let eI=P;Q[52]!==et||Q[53]!==en||Q[54]!==eh||Q[55]!==eo||Q[56]!==ei?(O=()=>en?(0,n.jsxs)("div",{className:b.quickFadeUp,children:[(0,n.jsx)(h.A,{size:"small",className:b.spinner}),eh?"Unsharing conversation...":"Sharing conversation..."]}):eo?(0,n.jsx)("div",{className:b.quickFadeUp,children:(0,n.jsx)(f.A,{size:"medium",className:b.warningText,children:"Confirm unsharing this conversation?"})}):et?(0,n.jsxs)("div",{className:b.quickFadeUp,children:[(0,n.jsx)(m.CheckIcon,{className:b.successIcon}),(0,n.jsx)(f.A,{size:"medium",className:b.success,children:"Copied to clipboard"})]}):ei?(0,n.jsxs)("div",{className:b.quickFadeUp,children:[(0,n.jsx)(m.CheckIcon,{className:b.successIcon}),(0,n.jsx)(f.A,{size:"medium",className:b.success,children:"Conversation shared"})]}):eh?(0,n.jsxs)("div",{children:[(0,n.jsx)(m.UnlockIcon,{className:b.lockIcon}),(0,n.jsx)(f.A,{size:"medium",className:b.mutedText,children:"Visible to anyone with the link"})]}):(0,n.jsx)("div",{}),Q[52]=et,Q[53]=en,Q[54]=eh,Q[55]=eo,Q[56]=ei,Q[57]=O):O=Q[57];let ek=O,eE=eh?"Conversation shared":"Share conversation";return Q[58]!==eg||Q[59]!==eh?(B=(0,n.jsx)(g.B,{direction:"horizontal",padding:"none",align:"center",justify:"start",gap:"condensed",children:eg?(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:b.snapshotText,children:"This shared conversation is a snapshot"}),", accessible to anyone with the link. It will not update with new messages."]}):eh?(0,n.jsx)("span",{children:"This conversation and future messages are visible to anyone with the link. If private repository content is included, repository access is required to view."}):(0,n.jsx)("span",{children:"When shared, this conversation and future messages will be visible to anyone with the link. If private repository content is included, repository access is required to view."})}),Q[58]=eg,Q[59]=eh,Q[60]=B):B=Q[60],Q[61]!==ev||Q[62]!==eh?(F=eh&&(0,n.jsx)("div",{className:b.innerContainer,children:(0,n.jsx)("div",{className:b.sharedLinkContainer,children:(0,n.jsxs)(y.A,{id:"share-link",className:b.textInputContainer,children:[(0,n.jsx)(y.A.Label,{children:"Share link"}),(0,n.jsx)(x.A,{size:"large",readOnly:!0,value:eh&&ev,className:b.textInput})]})})}),Q[61]=ev,Q[62]=eh,Q[63]=F):F=Q[63],Q[64]!==B||Q[65]!==F?(M=(0,n.jsxs)(g.B,{direction:"vertical",gap:"condensed",children:[B,F]}),Q[64]=B,Q[65]=F,Q[66]=M):M=Q[66],Q[67]!==ek?(V=(0,n.jsx)("div",{role:"status",children:ek()}),Q[67]=ek,Q[68]=V):V=Q[68],Q[69]!==eC?(U=eC(),Q[69]=eC,Q[70]=U):U=Q[70],Q[71]!==eI?($=eI(),Q[71]=eI,Q[72]=$):$=Q[72],Q[73]!==ew?(W=ew(),Q[73]=ew,Q[74]=W):W=Q[74],Q[75]!==eN?(z=eN(),Q[75]=eN,Q[76]=z):z=Q[76],Q[77]!==U||Q[78]!==$||Q[79]!==W||Q[80]!==z?(H=(0,n.jsxs)(g.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"end",children:[U,$,W,z]}),Q[77]=U,Q[78]=$,Q[79]=W,Q[80]=z,Q[81]=H):H=Q[81],Q[82]!==V||Q[83]!==H?(q=(0,n.jsxs)(g.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"space-between",className:b.buttonStack,children:[V,H]}),Q[82]=V,Q[83]=H,Q[84]=q):q=Q[84],Q[85]!==M||Q[86]!==q?(G=(0,n.jsxs)("div",{className:b.container,children:[M,q]}),Q[85]=M,Q[86]=q,Q[87]=G):G=Q[87],Q[88]!==J||Q[89]!==X||Q[90]!==eE||Q[91]!==G?(K=(0,n.jsx)(v.l,{title:eE,onClose:J,width:"large",returnFocusRef:X,children:G}),Q[88]=J,Q[89]=X,Q[90]=eE,Q[91]=G,Q[92]=K):K=Q[92],K};try{j.displayName||(j.displayName="ConversationSharingDialog")}catch{}},83139:(e,t,a)=>{a.d(t,{b:()=>j});var n=a(74848),r=a(34901),i=a(47397),s=a(8579),o=a(38007),l=a(96679),c=a(38621),d=a(9852),u=a(46309),m=a(63867),p=a(34614),h=a(87330),f=a(32647),g=a(15101),y=a(56221),x=a(96540);let v={dialog:"ManageSharedConversationsDialog-module__dialog--gqShw",actionButtons:"ManageSharedConversationsDialog-module__actionButtons--dnllp",alertIcon:"ManageSharedConversationsDialog-module__alertIcon--ycpcb",footer:"ManageSharedConversationsDialog-module__footer--E9QfA",mutedText:"ManageSharedConversationsDialog-module__mutedText--Oojiq",footerContent:"ManageSharedConversationsDialog-module__footerContent--Y3u6a",footerLeft:"ManageSharedConversationsDialog-module__footerLeft--av8LO",footerRight:"ManageSharedConversationsDialog-module__footerRight--zFJoz",confirmationText:"ManageSharedConversationsDialog-module__confirmationText--aBG2L",quickFadeUp:"ManageSharedConversationsDialog-module__quickFadeUp--Gjoro",conversationLink:"ManageSharedConversationsDialog-module__conversationLink--FpBBC"};var _=a(94280);let b=e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(t)},j=({closeDialog:e,returnFocusRef:t})=>{let a=(0,i.b)(),j=(0,r.Pk)(),[S,C]=(0,x.useState)(0),[N,w]=(0,x.useState)([]),[I,k]=(0,x.useState)(!0),[E,T]=(0,x.useState)(!1),[A,L]=(0,x.useState)(null),[D,R]=(0,x.useState)(!1),[P,O]=(0,x.useState)(5>N.length),B=5*S,F=N.slice(B,B+5);(0,x.useEffect)(()=>{(async()=>{let e=await a.fetchSharedThreads();e&&w(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:b(e.updatedAt),sharedUrl:`${l.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${l.fV.origin}/copilot/c/${e.id}`}))),k(!1)})()},[a]),(0,x.useEffect)(()=>{P&&S>0&&N.length<=5*S&&C(0);let e=5<N.length;e!==P&&O(e)},[N,S,5,P]);let M=(0,x.useCallback)(()=>{e()},[e]),V=(0,x.useCallback)(async()=>{if(!D)return void R(!0);R(!1),k(!0);try{(await a.unshareAllThreads()).ok&&(w([]),await a.fetchThreads())}finally{k(!1)}},[D,a]),U=e=>{L(e),T(!0)},$=async()=>{T(!1),L(null),k(!0);let e=await a.fetchSharedThreads();e&&w(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:b(e.updatedAt),sharedUrl:`${l.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${l.fV.origin}/copilot/c/${e.id}`}))),k(!1)},W=I||"error"===j.sharedThreadsLoading.state||0===N.length,z=(0,x.useMemo)(()=>{if(!N.length)return[];let e={buttonType:"danger",content:"Unshare all",onClick:()=>{D?V():R(!0)}};return D?[{buttonType:"default",content:"Cancel",onClick:()=>R(!1)},e]:[e]},[N.length,D,V]),H=e=>1===e?"Are you sure you want to unshare this conversation?":`Are you sure you want to unshare all ${e} conversations?`,q=(0,x.useMemo)(()=>I?{result:"loading",heading:"Loading shared conversations",description:"Your shared conversations will appear here.",isSpinner:!0}:"error"===j.sharedThreadsLoading.state?{result:"error",heading:"We couldn't load the shared conversations",description:"Try again or, if the problem persists, contact support."}:{result:"empty",heading:"No shared conversations",description:"Your shared conversations will appear here."},[I,j.sharedThreadsLoading.state]);return(0,n.jsxs)(d.l,{title:"Manage shared conversations",width:"xlarge",className:v.dialog,position:{narrow:"fullscreen",regular:"center"},onClose:M,returnFocusRef:t,renderFooter:()=>z?.length?(0,n.jsx)(d.l.Footer,{className:v.footer,children:(0,n.jsxs)("div",{className:v.footerContent,children:[(0,n.jsx)("div",{className:v.footerLeft,children:D&&(0,n.jsx)("div",{className:`${v.confirmationText} ${v.quickFadeUp}`,children:H(N.length)})}),(0,n.jsx)("div",{className:v.footerRight,children:(0,n.jsx)(d.l.Buttons,{buttons:z})})]})}):null,children:[W?(0,n.jsxs)(f.E,{children:[(0,n.jsx)(f.E.Visual,{children:q.isSpinner?(0,n.jsx)(u.B,{direction:"horizontal",align:"center",children:(0,n.jsx)(m.A,{size:"medium",srText:"Loading shared conversations\u2026"})}):(0,n.jsx)("div",{className:v.mutedText,children:"error"===q.result?(0,n.jsx)(c.AlertIcon,{size:"medium",className:v.alertIcon,"aria-label":"Error loading shared conversations"}):(0,n.jsx)(c.LinkIcon,{size:"medium","aria-label":"No shared conversations"})})}),(0,n.jsx)(f.E.Heading,{children:q.heading}),(0,n.jsx)(f.E.Description,{children:q.description})]}):(0,n.jsxs)(g.X.Container,{children:[(0,n.jsx)(y.b,{"aria-labelledby":"manage-shared-conversations",cellPadding:"normal",columns:[{header:"Conversation",field:"conversation",width:"growCollapse",minWidth:"60%",rowHeader:!0,renderCell:e=>(0,n.jsx)(p.A,{href:e.threadUrl,className:v.conversationLink,children:e.conversation})},{header:"Last updated",field:"lastUpdated",width:"growCollapse",renderCell:e=>(0,n.jsx)("span",{className:v.mutedText,children:e.lastUpdated})},{id:"actions",width:"growCollapse",align:"end",header:()=>(0,n.jsx)("div",{className:"sr-only",children:"Actions"}),renderCell:e=>(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:v.actionButtons,children:[(0,n.jsx)(s.T,{textToCopy:e.sharedUrl,onCopy:()=>{(0,o.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})},ariaLabel:"Copy share link"}),(0,n.jsx)(h.K,{"aria-label":"Unshare conversation",title:"Unshare conversation",icon:c.UnlinkIcon,variant:"invisible",onClick:()=>U(e)})]})})}],data:F}),N.length>5&&(0,n.jsx)(g.X.Pagination,{"aria-label":"Shared conversations pagination",pageSize:5,defaultPageIndex:S,totalCount:N.length,onChange:e=>{C(e.pageIndex)},showPages:!1})]}),E&&A&&(0,n.jsx)(_.Q,{threadId:A.id,closeDialog:$})]})};try{j.displayName||(j.displayName="ManageSharedConversationsDialog")}catch{}},94280:(e,t,a)=>{a.d(t,{Q:()=>h});var n=a(74848),r=a(21728),i=a(34901),s=a(47397),o=a(48071),l=a(38007),c=a(55847),d=a(46309),u=a(9852),m=a(96540);let p={container:"UnshareConversationDialog-module__container--o6oFz",buttonStack:"UnshareConversationDialog-module__buttonStack--j2D4B",threadInfoStack:"UnshareConversationDialog-module__threadInfoStack--GloZD",threadTitle:"UnshareConversationDialog-module__threadTitle--sFw3i",threadDescription:"UnshareConversationDialog-module__threadDescription--vJa2Q"},h=e=>{let t,a,h,f,g,y,x,v,_,b,j,S,C,N,w,I,k,E,T,A,L=(0,r.c)(60),{closeDialog:D,threadId:R}=e,P=(0,i.Pk)(),O=(0,s.b)(),{selectedThreadID:B,ssoOrganizations:F,apiUrl:M,threads:V}=P,[U,$]=(0,m.useState)(P.messages);L[0]!==R||L[1]!==V?(t=()=>{let e=V.get(R);return e?.sharedID||""},L[0]=R,L[1]=V,L[2]=t):t=L[2];let[W,z]=(0,m.useState)(t),H=(0,m.useRef)(""!==W),q=(0,m.useRef)("");L[3]!==U||L[4]!==W||L[5]!==P.apiUrl||L[6]!==P.ssoOrganizations||L[7]!==R?(a=()=>{let e=async()=>{if(0===U.filter(e=>e.threadID===R).length){let e=new o.k(P.apiUrl,P.ssoOrganizations),t=await e.listSharedThreadMessages(W);t.ok&&$(t.payload.messages)}};q.current!==W&&W&&(q.current=W,e())},h=[W,R,U,P.apiUrl,P.ssoOrganizations],L[3]=U,L[4]=W,L[5]=P.apiUrl,L[6]=P.ssoOrganizations,L[7]=R,L[8]=a,L[9]=h):(a=L[8],h=L[9]),(0,m.useEffect)(a,h),L[10]!==B||L[11]!==R||L[12]!==V?(f=V.get(R||B),L[10]=B,L[11]=R,L[12]=V,L[13]=f):f=L[13];let G=f,K=U[U.length-1],Q=K?.content||"";L[14]!==B||L[15]!==R||L[16]!==V?(g=()=>{let e=R||B;if(e){let t=V.get(e);z(t?.sharedID||"")}},L[14]=B,L[15]=R,L[16]=V,L[17]=g):g=L[17],L[18]!==O||L[19]!==B||L[20]!==R||L[21]!==V?(y=[O,z,B,V,R],L[18]=O,L[19]=B,L[20]=R,L[21]=V,L[22]=y):y=L[22],(0,m.useEffect)(g,y),L[23]!==M||L[24]!==D||L[25]!==O||L[26]!==B||L[27]!==W||L[28]!==F||L[29]!==R?(x=async()=>{let e=R||B,t=new o.k(M,F),a=await t.unshareThread(e);if(a.ok){let{sharedID:t,sharedAt:n,sharedMessageID:r}=a.payload;O.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:n,sharedMessageID:r}}),H.current=!1,D(),(0,l.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:W})}},L[23]=M,L[24]=D,L[25]=O,L[26]=B,L[27]=W,L[28]=F,L[29]=R,L[30]=x):x=L[30];let J=x;L[31]!==D?(v=()=>{D()},L[31]=D,L[32]=v):v=L[32];let Y=v;L[33]!==J||L[34]!==W?(_=()=>{if(W)return(0,n.jsx)(c.Q,{onClick:J,variant:"danger",children:"Unshare"})},L[33]=J,L[34]=W,L[35]=_):_=L[35];let X=_;L[36]!==D?(b=()=>(0,n.jsx)(c.Q,{onClick:D,children:"Cancel"}),L[36]=D,L[37]=b):b=L[37];let Z=b;L[38]===Symbol.for("react.memo_cache_sentinel")?(j=(0,n.jsx)("span",{children:"You're about to unshare the link for the following conversation:"}),L[38]=j):j=L[38];let ee=G?.name||"";return L[39]!==ee?(S=(0,n.jsx)("span",{className:p.threadTitle,children:ee}),L[39]=ee,L[40]=S):S=L[40],L[41]!==Q?(C=(0,n.jsx)("span",{className:p.threadDescription,children:Q}),L[41]=Q,L[42]=C):C=L[42],L[43]!==S||L[44]!==C?(N=(0,n.jsxs)(d.B,{direction:"vertical",className:p.threadInfoStack,children:[S,C]}),L[43]=S,L[44]=C,L[45]=N):N=L[45],L[46]===Symbol.for("react.memo_cache_sentinel")?(w=(0,n.jsx)("span",{children:"Once unshared, the link will no longer be accessible."}),L[46]=w):w=L[46],L[47]!==Z?(I=Z(),L[47]=Z,L[48]=I):I=L[48],L[49]!==X?(k=X(),L[49]=X,L[50]=k):k=L[50],L[51]!==I||L[52]!==k?(E=(0,n.jsxs)(d.B,{direction:"horizontal",gap:"condensed",align:"end",justify:"end",className:p.buttonStack,children:[I,k]}),L[51]=I,L[52]=k,L[53]=E):E=L[53],L[54]!==N||L[55]!==E?(T=(0,n.jsxs)("div",{className:p.container,children:[j,N,w,E]}),L[54]=N,L[55]=E,L[56]=T):T=L[56],L[57]!==Y||L[58]!==T?(A=(0,n.jsx)(u.l,{title:"Unshare conversation",onClose:Y,width:"large",children:T}),L[57]=Y,L[58]=T,L[59]=A):A=L[59],A};try{h.displayName||(h.displayName="UnshareConversationDialog")}catch{}},69179:(e,t,a)=>{a.d(t,{z:()=>J,U:()=>Q});var n=a(74848),r=a(21728),i=a(31971),s=a(68714),o=a(23986),l=a(70179),c=a(85788),d=a(96540),u=a(34901),m=a(47397),p=a(22069),h=a(38007),f=a(38621),g=a(10569),y=a(87330),x=a(15385),v=a(84217),_=a(52464),b=a(81007),j=a(34164),S=a(40961),C=a(66837);let N={container:"ConversationListV2-module__container--XkM2p",condensed:"ConversationListV2-module__condensed--n231O",empty:"ConversationListV2-module__empty--MSgUu",list:"ConversationListV2-module__list--raT6V",section:"ConversationListV2-module__section--T3pv4",title:"ConversationListV2-module__title--TDXJO",item:"ConversationListV2-module__item--oOoGR",link:"ConversationListV2-module__link--plPHq",text:"ConversationListV2-module__text--SsBPV",context:"ConversationListV2-module__context--LMOMd"};function w({selectedItemID:e,loadingState:t,onConversationSelect:a,isSidebarCondensed:r}){let i=(0,m.b)(),{threads:s}=(0,u.Pk)(),o=(0,d.useMemo)(()=>i.sortThreads(s).map(e=>({id:e.id,text:(0,p.CB)(e),href:`${p.Jz}/c/${e.id}`,date:new Date(e.updatedAt)})),[s,i]),l=function(e){let t=new Date,a=new Date(t);a.setDate(t.getDate()-1);let n=new Date(t);n.setDate(t.getDate()-7);let r=new Date(t);r.setDate(t.getDate()-30);let i=[],s=[],o=[],l=[];for(let c of e)c.date.toDateString()===t.toDateString()?i.push(c):c.date.toDateString()===a.toDateString()?s.push(c):c.date>n?o.push(c):c.date>r&&l.push(c);return{Today:i,Yesterday:s,"Last 7 days":o,"Last 30 days":l}}(o),c=0===o.length,h=(0,d.useId)();return(0,n.jsx)("nav",{"aria-labelledby":`${h}-conversations`,id:`${h}-conversation-list`,tabIndex:-1,className:(0,j.$)(N.container,r&&N.condensed),children:c&&("loading"===t||"pending"===t)?(0,n.jsx)(b.r,{lines:5}):c?(0,n.jsx)(E,{}):(0,n.jsxs)("div",{className:N.section,children:[(0,n.jsx)("h3",{id:`${h}-conversations`,className:"sr-only",children:"Conversations"}),Object.entries(l).map(([t,r])=>r.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{id:`${h}_${t}`,className:N.title,children:t}),(0,n.jsx)("ul",{className:N.list,children:r.map(t=>(0,n.jsx)(I,{item:t,selectedItemId:e??void 0,onSelect:a,threads:s},t.id))})]},t))]})})}function I(e){let t,a,i,s,o,l=(0,r.c)(17),{item:u,selectedItemId:m,onSelect:p,threads:v}=e,_=u.id===m,[b,j]=(0,d.useState)(null),[w,I]=(0,d.useState)(!1);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>I(!0),l[0]=t):t=l[0];let E=t;l[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>I(!1),l[1]=a):a=l[1];let T=a;l[2]!==m||l[3]!==v?(i=v.get(m),l[2]=m,l[3]=v,l[4]=i):i=l[4];let A=i,L=!!A?.customCopilotID,D=(0,d.useRef)(null);l[5]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{(0,S.flushSync)(()=>j(null)),D.current?.focus()},l[5]=s):s=l[5];let R=s;return l[6]!==b||l[7]!==L||l[8]!==u.href||l[9]!==u.id||l[10]!==u.text||l[11]!==w||l[12]!==p||l[13]!==_||l[14]!==m||l[15]!==v?(o=u.href&&(0,n.jsxs)("li",{className:N.item,children:[(0,n.jsx)(c.N_,{className:N.link,to:u.href,"aria-current":_?"page":void 0,onClick:()=>{p(),(0,h.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:u.id,mode:"immersive"})},children:(0,n.jsx)("span",{className:N.text,children:u.text})}),(0,n.jsx)("span",{className:N.context,children:(0,n.jsxs)(g.W,{anchorRef:D,children:[(0,n.jsx)(g.W.Anchor,{children:(0,n.jsx)(y.K,{loading:w,icon:f.KebabHorizontalIcon,"aria-label":"Manage conversation",variant:"invisible",onClick:k})}),(0,n.jsx)(g.W.Overlay,{children:(0,n.jsx)(x.l,{children:(0,n.jsx)(C.V,{onOpenDialog:j,isShared:!!v.get(u.id)?.sharedID,showShare:!L})})})]})}),(0,n.jsx)(C.p,{visibleDialog:b,onClose:R,threadName:u.text,threadId:u.id,selectedThreadId:m,onStartLoading:E,onFinishLoading:T,returnFocusRef:D})]},u.id),l[6]=b,l[7]=L,l[8]=u.href,l[9]=u.id,l[10]=u.text,l[11]=w,l[12]=p,l[13]=_,l[14]=m,l[15]=v,l[16]=o):o=l[16],o}function k(){return(0,h.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})}function E(){let e,t,a=(0,r.c)(2);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(v.A,{as:"h3",sx:{fontSize:1,mb:2},children:"No conversations yet"}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsxs)("div",{className:N.empty,children:[e,(0,n.jsx)(_.A,{sx:{color:"fg.muted"},children:"Ask Copilot anything on the right to start your first conversation."})]}),a[1]=t):t=a[1],t}try{w.displayName||(w.displayName="ConversationList")}catch{}try{I.displayName||(I.displayName="ConversationListEntry")}catch{}try{E.displayName||(E.displayName="EmptyState")}catch{}let T={quicklinks:"CopilotNavigation-module__quicklinks--fBcim",footer:"CopilotNavigation-module__footer--mzJuN",blankslateContainer:"CopilotNavigation-module__blankslateContainer--uaVTu"};var A=a(38659),L=a(53207),D=a(6901),R=a(99038),P=a(44446),O=a(47139),B=a(3246);let F={list:"ServiceList-module__list--qM7Z0",section:"ServiceList-module__section--rH_HX",item:"ServiceList-module__item--BKNHQ",link:"ServiceList-module__link--gr4pE",content:"ServiceList-module__content--Ocu_6",textWrapper:"ServiceList-module__textWrapper--xQx11",text:"ServiceList-module__text--qq8vl",label:"ServiceList-module__label--SE7p6",condensed:"ServiceList-module__condensed--I4xk8"};function M(e){let t,a,i,s,o,l,d,u,m,p,h=(0,r.c)(29),{"aria-current":f,href:g,icon:y,onLinkClick:x,id:v,displayName:_,condensed:b,label:S}=e;h[0]!==v||h[1]!==x?(t=e=>{x?.(e,v)},h[0]=v,h[1]=x,h[2]=t):t=h[2];let C=t;h[3]!==f||h[4]!==C?(a={"aria-current":f,className:F.link,onClick:C},h[3]=f,h[4]=C,h[5]=a):a=h[5];let N=a,w=b&&F.condensed;h[6]!==w?(i=(0,j.$)(F.item,w),h[6]=w,h[7]=i):i=h[7],h[8]!==y?(s=(0,n.jsx)(P.I,{size:16,icon:y}),h[8]=y,h[9]=s):s=h[9];let I=b&&F.condensed;return h[10]!==I?(o=(0,j.$)(F.content,I),h[10]=I,h[11]=o):o=h[11],h[12]!==_?(l=(0,n.jsx)("div",{className:F.textWrapper,children:(0,n.jsx)("div",{className:F.text,children:_})}),h[12]=_,h[13]=l):l=h[13],h[14]!==S?(d=(0,n.jsx)("div",{className:F.label,children:S}),h[14]=S,h[15]=d):d=h[15],h[16]!==o||h[17]!==l||h[18]!==d?(u=(0,n.jsxs)("div",{className:o,children:[l,d]}),h[16]=o,h[17]=l,h[18]=d,h[19]=u):u=h[19],h[20]!==N||h[21]!==_||h[22]!==g||h[23]!==u||h[24]!==s?(m=(0,n.jsxs)(c.N_,{to:g,...N,"aria-label":_,children:[s,u]}),h[20]=N,h[21]=_,h[22]=g,h[23]=u,h[24]=s,h[25]=m):m=h[25],h[26]!==m||h[27]!==i?(p=(0,n.jsx)("li",{className:F.section,children:(0,n.jsx)("div",{className:i,children:m})}),h[26]=m,h[27]=i,h[28]=p):p=h[28],p}function V({toggleFloatingSidebar:e,isSidebarCondensed:t}){let a=(0,u.Pk)(),{selectedThreadID:r}=a,i=(0,A.v)()?.id,o=(0,L.qw)(),l=(0,m.b)(),c=(0,B.G)(),g=(0,s.BV)(),y=(0,D.mM)(),x=!r&&!i&&!y,v=async t=>{t.metaKey||t.ctrlKey||(e(),await c({clearTopic:!0,includeThreads:!1}),(0,h.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},_=(0,d.useCallback)(t=>{t.metaKey||t.ctrlKey||e()},[e]),b=(0,d.useCallback)((t,a)=>{t.metaKey||t.ctrlKey||(e(),l.selectPlugin(a))},[e,l]),j=(0,d.useMemo)(()=>[...g?[{type:"spaces",component:(0,n.jsx)(M,{"aria-current":y?"page":void 0,displayName:"Spaces",href:p.VR,icon:f.PackageIcon,condensed:t,id:"spaces",onLinkClick:_,label:(0,n.jsx)(O.A,{variant:"success",children:"Preview"})},"spaces"),displayName:"Spaces"}]:[],...o.flatMap(e=>e.navigationItems&&e.navigationItems.length>0?e.navigationItems.map(a=>({type:"plugin",component:(0,n.jsx)(M,{"aria-current":i===e.id?"page":void 0,displayName:a.displayName,href:a.href,icon:a.icon,condensed:t,id:a.id,onLinkClick:t=>b(t,e.id),label:a.label},`${e.id}-${a.id}`),displayName:a.displayName})):e.NavigationComponent?[{type:"plugin",component:(0,n.jsx)(e.NavigationComponent,{chatState:a,onLinkClick:b},e.id),displayName:e.displayName}]:[])].sort((e,t)=>e.displayName.localeCompare(t.displayName)),[g,y,t,_,o,i,b,a]);return(0,n.jsxs)("ul",{className:F.list,children:[(0,n.jsx)(M,{"aria-current":x?"page":void 0,displayName:"New chat",href:p.Jz,icon:R.KJ,condensed:t,id:"home",onLinkClick:v}),j.map(e=>e.component)]})}try{M.displayName||(M.displayName="ServiceListItem")}catch{}try{V.displayName||(V.displayName="ServiceList")}catch{}var U=a(33484),$=a(75320),W=a(99377),z=a(39459),H=a(83139);let q={userButton:"UserMenu-module__userButton--gnrvo",userAvatar:"UserMenu-module__userAvatar--yMyPX",userContent:"UserMenu-module__userContent--rQccx",condensed:"UserMenu-module__condensed--CKugY",menuItem:"UserMenu-module__menuItem--gW5Vg",userDetails:"UserMenu-module__userDetails--tymYC",username:"UserMenu-module__username--f_pAT",description:"UserMenu-module__description--Z9xoB"};function G(e){let t,a,i,s,o,l,c,m,p,y,v,_,b,S,C,N,w,I,k,E,T,A,L,R,P=(0,r.c)(51),{isCondensed:O}=e,B=void 0!==O&&O,F=(0,d.useRef)(null),M=(0,d.useRef)(null),[V,G]=(0,d.useState)(!1),[Q,J]=(0,d.useState)(!1),{currentUserLogin:Y,plan:X}=(0,u.Pk)(),Z=(0,D.mM)(),ee=B?"user":void 0,et=`/${Y}.png`;P[0]!==et?(t=(0,n.jsx)("div",{className:q.userAvatar,children:(0,n.jsx)(z.r,{src:et,size:32})}),P[0]=et,P[1]=t):t=P[1];let ea=B&&q.condensed;P[2]!==ea?(a=(0,j.$)(q.userContent,ea),P[2]=ea,P[3]=a):a=P[3],P[4]!==Y||P[5]!==a?(i=(0,n.jsx)("div",{className:a,children:Y}),P[4]=Y,P[5]=a,P[6]=i):i=P[6],P[7]!==ee||P[8]!==t||P[9]!==i?(s=(0,n.jsx)(g.W.Anchor,{children:(0,n.jsxs)("button",{className:q.userButton,"aria-label":ee,children:[t,i]})}),P[7]=ee,P[8]=t,P[9]=i,P[10]=s):s=P[10];let en=`/${Y}`,er=`/${Y}.png`;return P[11]!==er?(o=(0,n.jsx)("div",{className:q.userAvatar,children:(0,n.jsx)(z.r,{src:er,size:32})}),P[11]=er,P[12]=o):o=P[12],P[13]!==Y?(l=(0,n.jsx)("div",{className:q.username,children:Y}),P[13]=Y,P[14]=l):l=P[14],P[15]!==X?(c=function(e){switch(e){case W.UH.IndividualFree:return"Free";case W.UH.IndividualPro:return"Pro";case W.UH.IndividualProPlus:return"Pro+";case W.UH.Business:return"Business";case W.UH.Enterprise:return"Enterprise";default:return"Free"}}(X),P[15]=X,P[16]=c):c=P[16],P[17]!==c?(m=(0,n.jsxs)("span",{className:q.description,children:["Copilot ",c]}),P[17]=c,P[18]=m):m=P[18],P[19]!==l||P[20]!==m?(p=(0,n.jsxs)("div",{className:q.userDetails,children:[l,m]}),P[19]=l,P[20]=m,P[21]=p):p=P[21],P[22]!==o||P[23]!==p?(y=(0,n.jsxs)("div",{className:q.menuItem,children:[o,p]}),P[22]=o,P[23]=p,P[24]=y):y=P[24],P[25]!==y||P[26]!==en?(v=(0,n.jsx)(x.l.LinkItem,{href:en,children:y}),P[25]=y,P[26]=en,P[27]=v):v=P[27],P[28]===Symbol.for("react.memo_cache_sentinel")?(_=(0,n.jsx)(x.l.Divider,{}),P[28]=_):_=P[28],P[29]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{J(!0),(0,h.BI)("dotcom_chat.activate",{target:"USER_MENU_PERSONAL_INSTRUCTIONS",mode:"immersive"})},P[29]=b):b=P[29],P[30]===Symbol.for("react.memo_cache_sentinel")?(S=(0,n.jsxs)(x.l.Item,{onSelect:b,children:[(0,n.jsx)(x.l.LeadingVisual,{children:(0,n.jsx)(f.NoteIcon,{})}),"Personal instructions"]}),P[30]=S):S=P[30],P[31]!==Z?(C=!Z&&(0,n.jsxs)(x.l.Item,{onSelect:()=>{G(!0),(0,h.BI)("dotcom_chat.activate",{target:"USER_MENU_MANAGE_SHARED",mode:"immersive"})},children:[(0,n.jsx)(x.l.LeadingVisual,{children:(0,n.jsx)(f.ListUnorderedIcon,{})}),"Manage shared conversations"]}),P[31]=Z,P[32]=C):C=P[32],P[33]===Symbol.for("react.memo_cache_sentinel")?(N=()=>{M.current?.openDialog(),(0,h.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},P[33]=N):N=P[33],P[34]===Symbol.for("react.memo_cache_sentinel")?(w=(0,n.jsxs)(x.l.Item,{onSelect:N,children:[(0,n.jsx)(x.l.LeadingVisual,{children:(0,n.jsx)(f.CommentIcon,{})}),"Give feedback"]}),P[34]=w):w=P[34],P[35]===Symbol.for("react.memo_cache_sentinel")?(I=(0,n.jsxs)(x.l.LinkItem,{href:"/settings/copilot",onClick:K,children:[(0,n.jsx)(x.l.LeadingVisual,{children:(0,n.jsx)(f.GearIcon,{})}),"Settings"]}),P[35]=I):I=P[35],P[36]!==v||P[37]!==C?(k=(0,n.jsx)(g.W.Overlay,{width:"small",align:"end",children:(0,n.jsxs)(x.l,{children:[v,_,S,C,w,I]})}),P[36]=v,P[37]=C,P[38]=k):k=P[38],P[39]!==k||P[40]!==s?(E=(0,n.jsxs)(g.W,{anchorRef:F,children:[s,k]}),P[39]=k,P[40]=s,P[41]=E):E=P[41],P[42]===Symbol.for("react.memo_cache_sentinel")?(T=(0,n.jsx)(U.l,{ref:M,mode:"immersive",returnFocusRef:F}),P[42]=T):T=P[42],P[43]!==V?(A=V&&(0,n.jsx)(H.b,{closeDialog:()=>{G(!1)},returnFocusRef:F}),P[43]=V,P[44]=A):A=P[44],P[45]!==Q?(L=Q&&(0,n.jsx)($.Y,{onDismiss:()=>J(!1),returnFocusRef:F}),P[45]=Q,P[46]=L):L=P[46],P[47]!==E||P[48]!==A||P[49]!==L?(R=(0,n.jsxs)(n.Fragment,{children:[E,T,A,L]}),P[47]=E,P[48]=A,P[49]=L,P[50]=R):R=P[50],R}function K(){return(0,h.BI)("dotcom_chat.activate",{target:"USER_MENU_SETTINGS",mode:"immersive"})}try{G.displayName||(G.displayName="UserMenu")}catch{}function Q(){let e,t=(0,r.c)(5),{sidebarExpanded:a,sidebarFloating:i,sidebarVisible:s,toggleSidebar:l}=(0,o.L)();return t[0]!==a||t[1]!==i||t[2]!==s||t[3]!==l?(e=(0,n.jsx)(J,{sidebarExpanded:a,sidebarFloating:i,sidebarVisible:s,onToggleSidebar:l}),t[0]=a,t[1]=i,t[2]=s,t[3]=l,t[4]=e):e=t[4],e}function J(e){let t,a,o,p,h,f,g,y,x,v,_,b=(0,r.c)(34),{onSidebarClick:j,onToggleSidebar:S,sidebarExpanded:C,sidebarFloating:N,sidebarVisible:I}=e,k=N?!I:!C,E=(0,m.b)(),{threadsLoading:A,threads:L,selectedThreadID:D}=(0,u.bP)("threadsLoading","threads","selectedThreadID"),R=(0,s.BV)(),P=i.W.immersiveServiceNavigation||R,O=(0,c.zy)().pathname.includes("/share/");b[0]!==E||b[1]!==L.size||b[2]!==A.state?(t=()=>{0===L.size&&"pending"===A.state&&E.fetchThreads()},a=[L.size,E,A.state],b[0]=E,b[1]=L.size,b[2]=A.state,b[3]=t,b[4]=a):(t=b[3],a=b[4]),(0,d.useEffect)(t,a),b[5]!==j||b[6]!==N||b[7]!==I||b[8]!==S?(o=()=>{j?.(),N&&I&&S()},b[5]=j,b[6]=N,b[7]=I,b[8]=S,b[9]=o):o=b[9];let B=o,F=(0,d.useId)();b[10]===Symbol.for("react.memo_cache_sentinel")?(p=(0,n.jsx)(Y,{}),b[10]=p):p=b[10];let M=`${F}-quick-links`,U=`${F}-quick-links`;b[11]!==U?(h=(0,n.jsx)("h3",{id:U,className:"sr-only",children:"Quick links"}),b[11]=U,b[12]=h):h=b[12],b[13]!==B||b[14]!==k||b[15]!==P?(f=P&&(0,n.jsx)(V,{isSidebarCondensed:k,toggleFloatingSidebar:B}),b[13]=B,b[14]=k,b[15]=P,b[16]=f):f=b[16],b[17]!==M||b[18]!==h||b[19]!==f?(g=(0,n.jsxs)("nav",{"aria-labelledby":M,className:T.quicklinks,children:[h,f]}),b[17]=M,b[18]=h,b[19]=f,b[20]=g):g=b[20];let $=O?null:D;return b[21]!==B||b[22]!==k||b[23]!==$||b[24]!==A.state?(y=(0,n.jsx)(w,{selectedItemID:$,loadingState:A.state,onConversationSelect:B,isSidebarCondensed:k}),b[21]=B,b[22]=k,b[23]=$,b[24]=A.state,b[25]=y):y=b[25],b[26]!==y||b[27]!==g?(x=(0,n.jsxs)(l.t,{fallback:p,children:[g,y]}),b[26]=y,b[27]=g,b[28]=x):x=b[28],b[29]!==k?(v=(0,n.jsx)("div",{className:T.footer,children:(0,n.jsx)(G,{isCondensed:k})}),b[29]=k,b[30]=v):v=b[30],b[31]!==x||b[32]!==v?(_=(0,n.jsxs)(n.Fragment,{children:[x,v]}),b[31]=x,b[32]=v,b[33]=_):_=b[33],_}function Y(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{className:T.blankslateContainer,children:(0,n.jsx)("div",{children:"Error loading conversations"})}),t[0]=e):e=t[0],e}try{Q.displayName||(Q.displayName="CopilotNavigationWithContext")}catch{}try{J.displayName||(J.displayName="CopilotNavigation")}catch{}try{Y.displayName||(Y.displayName="SidebarContentsFallback")}catch{}},94412:(e,t,a)=>{a.d(t,{T:()=>p});var n=a(74848),r=a(21728),i=a(10569),s=a(87330),o=a(15385),l=a(53526),c=a(96540),d=a(38621),u=a(57915),m=a(38007);function p(e){let t,a,p,h,f,g,y,x,v,_,b,j,S,C,N=(0,r.c)(36),{onDelete:w,onCopyLoop:I,onDuplicate:k,onShare:E,loopId:T,variant:A}=e,L=void 0===A?"invisible":A,[D,R]=(0,c.useState)(null),P=(0,c.useRef)(null),{mutate:O,isPending:B}=(0,u.h)();N[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{R("delete")},N[0]=t):t=N[0];let F=t;N[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{R(null)},N[1]=a):a=N[1];let M=a;N[2]!==O||N[3]!==T||N[4]!==w?(p=async()=>{T&&(R(null),O(T,{onSuccess:w}),w?.())},N[2]=O,N[3]=T,N[4]=w,N[5]=p):p=N[5];let V=p;N[6]!==T||N[7]!==k?(h=()=>{T&&k&&((0,m.BI)("dotcom_chat.activate",{target:"LOOP_DUPLICATE",mode:"loops"}),k(T))},N[6]=T,N[7]=k,N[8]=h):h=N[8];let U=h;N[9]!==E?(f=()=>{E?.()},N[9]=E,N[10]=f):f=N[10];let $=f;return T?(N[11]!==B||N[12]!==L?(g=(0,n.jsx)(i.W.Anchor,{children:(0,n.jsx)(s.K,{loading:B,icon:d.KebabHorizontalIcon,"aria-label":"Manage loop",variant:L})}),N[11]=B,N[12]=L,N[13]=g):g=N[13],N[14]!==U||N[15]!==k?(y=k&&(0,n.jsxs)(o.l.Item,{onSelect:U,children:[(0,n.jsx)(o.l.LeadingVisual,{children:(0,n.jsx)(d.DuplicateIcon,{})}),"Duplicate"]}),N[14]=U,N[15]=k,N[16]=y):y=N[16],N[17]!==$||N[18]!==E?(x=E&&(0,n.jsxs)(o.l.Item,{onSelect:$,children:[(0,n.jsx)(o.l.LeadingVisual,{children:(0,n.jsx)(d.LinkIcon,{})}),"Copy link"]}),N[17]=$,N[18]=E,N[19]=x):x=N[19],N[20]===Symbol.for("react.memo_cache_sentinel")?(v=(0,n.jsxs)(o.l.Item,{variant:"danger",onSelect:F,children:[(0,n.jsx)(o.l.LeadingVisual,{children:(0,n.jsx)(d.TrashIcon,{})}),"Delete"]}),N[20]=v):v=N[20],N[21]!==I?(_=I&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.l.Divider,{}),(0,n.jsxs)(o.l.Item,{onSelect:I,children:[(0,n.jsx)(o.l.LeadingVisual,{children:(0,n.jsx)(d.CopyIcon,{})}),"Copy JSON"]})]}),N[21]=I,N[22]=_):_=N[22],N[23]!==_||N[24]!==y||N[25]!==x?(b=(0,n.jsx)(i.W.Overlay,{align:"end",children:(0,n.jsxs)(o.l,{children:[y,x,v,_]})}),N[23]=_,N[24]=y,N[25]=x,N[26]=b):b=N[26],N[27]!==b||N[28]!==g?(j=(0,n.jsxs)(i.W,{anchorRef:P,children:[g,b]}),N[27]=b,N[28]=g,N[29]=j):j=N[29],N[30]!==V||N[31]!==D?(S="delete"===D&&(0,n.jsx)(l.K,{title:"Delete loop",onClose:e=>{"confirm"===e?V():M()},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this loop? This action cannot be undone."}),N[30]=V,N[31]=D,N[32]=S):S=N[32],N[33]!==j||N[34]!==S?(C=(0,n.jsxs)(n.Fragment,{children:[j,S]}),N[33]=j,N[34]=S,N[35]=C):C=N[35],C):null}try{p.displayName||(p.displayName="LoopsActionMenu")}catch{}},5204:(e,t,a)=>{a.d(t,{Ak:()=>o,EY:()=>s,qT:()=>i});var n=a(96540);let r=(0,n.createContext)(null),i=r.Provider;function s(){let e=(0,n.useContext)(r);if(!e)throw Error("useLoopsService must be used inside a LoopsServiceProvider");return e}function o(){return(0,n.useContext)(r)}try{r.displayName||(r.displayName="LoopsServiceContext")}catch{}},40178:(e,t,a)=>{a.d(t,{QA:()=>m,F5:()=>h,y7:()=>p});var n=a(74848);a(21728);var r=a(11303),i=a(96540);function s(e,t){return{...e,uiState:function(e,t){switch(t.type){case"FOCUS_NODE":return{...e,focusedNodeId:t.nodeId};case"HOVER_NODE":return{...e,hoveredNodeId:t.nodeId};case"SET_VIEW":return{...e,view:t.view};default:return e}}(e.uiState,t)}}var o=a(58779),l=a(17515);let c={uiState:{focusedNodeId:null,hoveredNodeId:null,view:"canvas"}},d=(0,i.createContext)(new r.Lj(c)),u=(0,i.createContext)(()=>{});function m({children:e}){let[t,a]=(0,i.useReducer)(s,c),r=(0,o.AI)(t);(0,l.N)(()=>{r.value=t},[t,r]);let m=(0,i.useCallback)(e=>{a(e)},[a]);return(0,n.jsx)(d.Provider,{value:r,children:(0,n.jsx)(u.Provider,{value:m,children:e})})}function p(e){let t=(0,i.useContext)(d);if(!t)throw Error("usePipesStateLens can only be used inside a PipesProvider");let a=(0,o.Sk)(t,e);return(0,o.HN)(a)}function h(){return(0,i.useContext)(u)}try{d.displayName||(d.displayName="PipesStateContext")}catch{}try{u.displayName||(u.displayName="PipesDispatchContext")}catch{}try{m.displayName||(m.displayName="PipesStateProvider")}catch{}},23985:(e,t,a)=>{a.d(t,{B:()=>f});var n=a(74848),r=a(31971),i=a(38007),s=a(38621),o=a(91321),l=a(10871),c=a(10569),d=a(87330),u=a(15385);let m={actions:"EditorMenu-module__actions--AddF7",editorButton:"EditorMenu-module__editorButton--_thrU"};var p=a(33036),h=a(88245);function f({menuLocation:e,mode:t,onButtonClick:a}){let f=(a,n)=>{r.W.freeToPaidTelemetry?(0,p.F)({eventName:a,menuLocation:e,mode:t,action:n}):(0,i.BI)("dotcom_chat.activate",{target:`EDITOR_UPSELL_BANNER_${a.toUpperCase()}`,mode:t})};return(0,n.jsxs)(o.A,{className:m.actions,children:[(0,n.jsx)(l.z,{className:m.editorButton,href:h.A.vscode.url,leadingVisual:(0,n.jsx)("img",{src:h.A.vscode.icon,alt:"",height:"20",width:"20"}),onClick:()=>{a?.(),f("vscode","ide_menu_primary_button_click")},children:h.A.vscode.name}),(0,n.jsxs)(c.W,{children:[(0,n.jsx)(c.W.Anchor,{children:(0,n.jsx)(d.K,{"aria-label":"More editors",icon:s.TriangleDownIcon,unsafeDisableTooltip:!0,onClick:()=>{f("menu","ide_menu_open")},"data-testid":"editor-dropdown-button"})}),(0,n.jsx)(c.W.Overlay,{align:"end",children:(0,n.jsx)(u.l,{children:(0,n.jsx)(p.t,{menuLocation:e,mode:t,onItemClick:a})})})]})]})}try{f.displayName||(f.displayName="EditorMenu")}catch{}},67957:(e,t,a)=>{a.d(t,{B:()=>d});var n=a(74848),r=a(21728),i=a(38621),s=a(34164),o=a(96540);let l={container:"Sidebar-module__container--Wtiix",toggleSidebarVertical:"Sidebar-module__toggleSidebarVertical--odMrI",iconLineTop:"Sidebar-module__iconLineTop--Jnxra",iconLineBottom:"Sidebar-module__iconLineBottom--BspWM",header:"Sidebar-module__header--xPCkT",sidebar:"Sidebar-module__sidebar--JqNqi",toggleSidebarFloating:"Sidebar-module__toggleSidebarFloating--DAm2o",condensed:"Sidebar-module__condensed--sIHa_",floating:"Sidebar-module__floating--lq60V",showWhenExpanded:"Sidebar-module__showWhenExpanded--iTKVV",visible:"Sidebar-module__visible--k1p47",githubLink:"Sidebar-module__githubLink--dQIUh"};var c=a(81425);function d(e){let t,a,d,u,m,p,h,f,g,y,x,v,_=(0,r.c)(39),{children:b,className:j,isVisible:S,isExpanded:C,isFloating:N,sidebarRef:w,onToggle:I,"data-testid":k}=e,E=N?S:C,T=!N&&!C;_[0]!==T||_[1]!==C||_[2]!==I?(t=e=>{!e.target.closest('a, button, [role="button"], [role="link"], [role="menuitem"]')&&(T||C)&&I()},_[0]=T,_[1]=C,_[2]=I,_[3]=t):t=_[3];let A=t,L=(0,c.L)(w),D=(0,o.useId)();_[4]!==N||_[5]!==S?(a=()=>{if(N)return S?(0,n.jsx)(i.XIcon,{}):(0,n.jsx)(i.ThreeBarsIcon,{})},_[4]=N,_[5]=S,_[6]=a):a=_[6];let R=a,P=`${D}-copilot-navigation`;_[7]!==j||_[8]!==T||_[9]!==N||_[10]!==S?(d=(0,s.$)(l.container,j,{[l.visible]:S,[l.floating]:N,[l.condensed]:T}),_[7]=j,_[8]=T,_[9]=N,_[10]=S,_[11]=d):d=_[11];let O=`${D}-copilot-navigation`;_[12]!==O?(u=(0,n.jsx)("h2",{id:O,className:"sr-only",children:"Copilot navigation"}),_[12]=O,_[13]=u):u=_[13],_[14]===Symbol.for("react.memo_cache_sentinel")?(m=(0,n.jsx)("div",{className:l.showWhenExpanded,children:(0,n.jsx)("a",{href:"/",target:"_self",className:l.githubLink,"aria-label":"GitHub homepage",children:(0,n.jsx)(i.MarkGithubIcon,{size:32})})}),_[14]=m):m=_[14];let B=E?"Close sidebar":"Open sidebar";_[15]!==R?(p=R(),_[15]=R,_[16]=p):p=_[16],_[17]!==I||_[18]!==B||_[19]!==p?(h=(0,n.jsx)("button",{className:l.toggleSidebarFloating,"aria-label":B,onClick:I,children:p}),_[17]=I,_[18]=B,_[19]=p,_[20]=h):h=_[20],_[21]!==h||_[22]!==u?(f=(0,n.jsxs)("div",{className:l.header,children:[u,m,h]}),_[21]=h,_[22]=u,_[23]=f):f=_[23],_[24]!==b?(g=(0,n.jsx)("div",{className:l.sidebar,children:b}),_[24]=b,_[25]=g):g=_[25];let F=E?"Close sidebar":"Open sidebar";return _[26]===Symbol.for("react.memo_cache_sentinel")?(y=(0,n.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M8 2.75 L8 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",className:l.iconLineTop}),(0,n.jsx)("path",{d:"M8 13.25 L8 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",className:l.iconLineBottom})]}),_[26]=y):y=_[26],_[27]!==I||_[28]!==F?(x=(0,n.jsx)("button",{className:l.toggleSidebarVertical,"aria-label":F,onClick:I,children:y}),_[27]=I,_[28]=F,_[29]=x):x=_[29],_[30]!==k||_[31]!==A||_[32]!==L||_[33]!==f||_[34]!==g||_[35]!==x||_[36]!==P||_[37]!==d?(v=(0,n.jsxs)("aside",{"aria-labelledby":P,ref:L,className:d,onClick:A,"data-testid":k,children:[f,g,x]}),_[30]=k,_[31]=A,_[32]=L,_[33]=f,_[34]=g,_[35]=x,_[36]=P,_[37]=d,_[38]=v):v=_[38],v}try{d.displayName||(d.displayName="Sidebar")}catch{}},94232:(e,t,a)=>{a.d(t,{O:()=>u});var n=a(75177),r=a(59299),i=a(44999),s=a(38267);let o=(0,s.i7)(["0%{transform:translateX(-100%);}50%{transform:translateX(100%);}100%{transform:translateX(100%);}"]),l=(0,s.AH)(["animation:"," 1.5s infinite linear;"],o),c=(0,s.i7)(["0%{opacity:.3;}10%{opacity:1;}100%{opacity:.3;}"]),d=(0,s.AH)(["animation:"," 2s infinite linear;"],c),u=(0,s.Ay)(n.A).withConfig({displayName:"LoadingSkeleton",componentId:"sc-bcbf24f9-0"})(["position:relative;overflow:hidden;mask-image:radial-gradient(white,black);",";&::after{",";background:linear-gradient(90deg,transparent,",",transparent);content:'';position:absolute;transform:translateX(-100%);bottom:0;left:0;right:0;top:0;}background-color:",";border-radius:",";display:block;height:1.2em;"," width:",";height:",";",""],({animationStyle:e})=>"pulse"===e&&d,({animationStyle:e})=>"pulse"!==e&&l,(0,r.Jt)("colors.neutral.subtle"),(0,r.Jt)("colors.neutral.subtle"),({theme:e,variant:t})=>{switch(t){case"rounded":return(0,r.Jt)("radii.1")(e);case"pill":return"100px";case"elliptical":return"50%";default:return"0"}},({variant:e})=>"elliptical"===e&&{borderRadius:"50%"},({width:e})=>{switch(e){case"random":return`${Math.floor(40*Math.random()+40)}%`;case"xl":return"32px";case"lg":return"24px";case"md":return"20px";case"sm":return"16px";default:return e}},({height:e})=>{switch(e){case"xl":return"32px";case"lg":return"24px";case"md":return"20px";case"sm":return"16px";default:return e}},i.A);try{u.displayName||(u.displayName="LoadingSkeleton")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["primer-react","react-core","react-lib","octicons-react","vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_stacktrace-parser_dist_s-1d3d52","vendors-node_modules_emotion_is-prop-valid_dist_emotion-is-prop-valid_esm_js-node_modules_emo-1fff13","vendors-node_modules_tanstack_query-core_build_modern_queryClient_js","vendors-node_modules_primer_behaviors_dist_esm_index_mjs","vendors-node_modules_dompurify_dist_purify_es_mjs","vendors-node_modules_tanstack_query-core_build_modern_queryObserver_js-node_modules_tanstack_-defd52","vendors-node_modules_date-fns_format_mjs","vendors-node_modules_date-fns_addWeeks_mjs-node_modules_date-fns_addYears_mjs-node_modules_da-827f4f","vendors-node_modules_github_relative-time-element_dist_index_js","vendors-node_modules_focus-visible_dist_focus-visible_js-node_modules_github_hotkey_dist_inde-70f9af","vendors-node_modules_lodash-es__Stack_js-node_modules_lodash-es__Uint8Array_js-node_modules_l-4faaa6","vendors-node_modules_github_hydro-analytics-client_dist_analytics-client_js-node_modules_gith-45114a","vendors-node_modules_dnd-kit_modifiers_dist_modifiers_esm_js-node_modules_dnd-kit_sortable_di-8b7697","vendors-node_modules_braintree_browser-detection_dist_browser-detection_js-node_modules_githu-bb80ec","vendors-node_modules_tanstack_react-virtual_dist_esm_index_js","vendors-node_modules_react-relay_index_js","vendors-node_modules_remark-gfm_lib_index_js-node_modules_remark-parse_lib_index_js-node_modu-44d0fc","vendors-node_modules_hastscript_lib_index_js-node_modules_lowlight_lib_all_js-node_modules_re-7714c4","vendors-node_modules_fzy_js_index_js-node_modules_github_g-emoji-element_dist_index_js-node_m-103a96","vendors-node_modules_react-relay_hooks_js-node_modules_github_paste-markdown_dist_index_js-no-83178d","vendors-node_modules_diff_lib_index_mjs","vendors-node_modules_codemirror_autocomplete_dist_index_js-node_modules_codemirror_search_dis-aafe81","vendors-node_modules_codemirror_commands_dist_index_js-node_modules_codemirror_language-data_-92b5c9","vendors-node_modules_github_catalyst_lib_index_js-node_modules_tanstack_react-query_build_mod-d1dec4","vendors-node_modules_js-yaml_dist_js-yaml_mjs","vendors-node_modules_github_mini-throttle_dist_decorators_js-node_modules_github_quote-select-493fb8","ui_packages_paths_index_ts","ui_packages_ui-commands_ui-commands_ts","ui_packages_date-picker_components_DatePicker_tsx","ui_packages_drag-and-drop_drag-and-drop_ts-ui_packages_hydro-analytics_hydro-analytics_ts","ui_packages_list-view_src_hooks_use-next-header-tag_ts-ui_packages_list-view_src_ListItem_Lis-0a5d95","ui_packages_ref-selector_RefSelector_tsx","ui_packages_relay-environment_relay-environment_ts","ui_packages_copilot-chat_utils_copilot-chat-helpers_ts","ui_packages_item-picker_components_RepositoryPicker_tsx-ui_packages_safe-html_VerifiedHTML_tsx","ui_packages_verified-fetch_verified-fetch_ts-ui_packages_copilot-markdown_MarkdownRenderer_tsx","ui_packages_issue-create_dialog_CreateIssueDialogEntry_tsx-ui_packages_copy-to-clipboard_Copy-437fc1","ui_packages_commenting_constants_values_ts-ui_packages_commenting_components_ActivityHeader_t-8a1940","ui_packages_copilot-chat_utils_CopilotChatContext_tsx","ui_packages_copilot-chat_components_ModelPicker_tsx","ui_packages_app-uuid_app-uuid_ts-ui_packages_signed-commit-badge_index_ts","ui_packages_copilot-chat_components_CopilotIconAnimation_tsx","ui_packages_markdown-viewer_NewMarkdownViewer_tsx","ui_packages_issue-viewer_components_IssueViewer_tsx-ui_packages_issue-viewer_contexts_IssueVi-83922a","ui_packages_copilot-chat_hooks_use-chat-message-behavior_ts-ui_packages_copilot-chat_hooks_us-6b2706","ui_packages_agent-sessions_components_NewTaskChatInput_tsx-ui_packages_agent-sessions_compone-20689f","ui_packages_code-view-shared_hooks_use-repos-analytics_ts-ui_packages_code-view-shared_hooks_-52b721"],()=>t(7352)),e.O()}]);
//# sourceMappingURL=copilot-immersive-v1-47f01b3e6743.js.map